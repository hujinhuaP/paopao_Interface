<?php    $callback_url = 'https://api.mch.weixin.qq.com/pay/orderquery';    $mch_id = '1499528572';    $appid = 'wx9b2c3de5e1a0119c';    $key = 'g5bcd1rn68u0hjreey0h4pchlc9zwhsl';    $nonce_str = date("YmdHis").mt_rand(100000,999999);    $xmlData = '<xml>';    $xmlData .= '<appid>'.$appid.'</appid>';    $xmlData .= '<mch_id>'.$mch_id.'</mch_id>';    $xmlData .= '<nonce_str>'.$nonce_str.'</nonce_str>';    if(isset($_GET['transaction_id']) && $_GET['transaction_id'] != ''){        $transaction_id = $_GET['transaction_id'];       //4200000265201903191744440008        $sign = md5('appid='.$appid.'&mch_id='.$mch_id.'&nonce_str='.$nonce_str.'&transaction_id='.$transaction_id.'&key='.$key);        $xmlData .= '<transaction_id>'.$transaction_id.'</transaction_id>';    }    if(isset($_GET['out_trade_no']) && $_GET['out_trade_no'] != ''){        $out_trade_no = $_GET['out_trade_no'];          //15337255616666772488684        $sign = md5('appid='.$appid.'&mch_id='.$mch_id.'&nonce_str='.$nonce_str.'&out_trade_no='.$out_trade_no.'&key='.$key);        $xmlData .= '<out_trade_no>'.$out_trade_no.'</out_trade_no>';    }    $sign = strtoupper($sign);    $xmlData .= '<sign>'.$sign.'</sign>';    $xmlData .= '</xml>';    $header[] = "Content-type: text/xml";    $ch = curl_init ($callback_url);    curl_setopt($ch, CURLOPT_URL, $callback_url);    curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);    curl_setopt($ch, CURLOPT_HTTPHEADER,$header);    curl_setopt($ch, CURLOPT_POST, 1);    curl_setopt($ch,CURLOPT_POSTFIELDS, $xmlData);    $response = curl_exec($ch);    $data = (array)simplexml_load_string($response, 'SimpleXMLElement', LIBXML_NOCDATA);    if(curl_errno($ch)){        printcurl_error($ch);exit;    }    echo json_encode($data);    curl_close($ch);    exit;//    Array//    (//    [return_code] => SUCCESS//    [return_msg] => OK//    [appid] => wx9b2c3de5e1a0119c//    [mch_id] => 1499528572//    [nonce_str] => dS6CP4DEgK6bRhfG//    [sign] => 8EDB886B24B71747AB4D5B35AFBAFCF1//    [result_code] => SUCCESS//    [openid] => ozDLs0qEmUnePpuqdeO29o41O8u8//    [is_subscribe] => N//    [trade_type] => MWEB//    [bank_type] => CFT//    [total_fee] => 3800//    [fee_type] => CNY//    [transaction_id] => 4200000265201903191744440008//    [out_trade_no] => 15529450066746355853130//    [attach] => SimpleXMLElement Object//    (//    )//    [time_end] => 20190319053701//    [trade_state] => SUCCESS//    [cash_fee] => 3800//    [trade_state_desc] => 支付成功//    )