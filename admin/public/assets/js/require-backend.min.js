!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var i=[],n=e.document,r=i.slice,o=i.concat,a=i.push,s=i.indexOf,l={},d=l.toString,c=l.hasOwnProperty,u={},f="2.2.4",h=function(e,t){return new h.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/^-ms-/,g=/-([\da-z])/gi,v=function(e,t){return t.toUpperCase()};h.fn=h.prototype={jquery:f,constructor:h,selector:"",length:0,toArray:function(){return r.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:r.call(this)},pushStack:function(e){var t=h.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return h.each(this,e)},map:function(e){return this.pushStack(h.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:i.sort,splice:i.splice},h.extend=h.fn.extend=function(){var e,t,i,n,r,o,a=arguments[0]||{},s=1,l=arguments.length,d=!1;for("boolean"==typeof a&&(d=a,a=arguments[s]||{},s++),"object"==typeof a||h.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)i=a[t],n=e[t],a!==n&&(d&&n&&(h.isPlainObject(n)||(r=h.isArray(n)))?(r?(r=!1,o=i&&h.isArray(i)?i:[]):o=i&&h.isPlainObject(i)?i:{},a[t]=h.extend(d,o,n)):void 0!==n&&(a[t]=n));return a},h.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===h.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!h.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==h.type(e)||e.nodeType||h.isWindow(e))return!1;if(e.constructor&&!c.call(e,"constructor")&&!c.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||c.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[d.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;e=h.trim(e),e&&(1===e.indexOf("use strict")?(t=n.createElement("script"),t.text=e,n.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(m,"ms-").replace(g,v)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,n=0;if(y(e)){for(i=e.length;i>n;n++)if(t.call(e[n],n,e[n])===!1)break}else for(n in e)if(t.call(e[n],n,e[n])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(y(Object(e))?h.merge(i,"string"==typeof e?[e]:e):a.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:s.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;i>n;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n,r=[],o=0,a=e.length,s=!i;a>o;o++)n=!t(e[o],o),n!==s&&r.push(e[o]);return r},map:function(e,t,i){var n,r,a=0,s=[];if(y(e))for(n=e.length;n>a;a++)r=t(e[a],a,i),null!=r&&s.push(r);else for(a in e)r=t(e[a],a,i),null!=r&&s.push(r);return o.apply([],s)},guid:1,proxy:function(e,t){var i,n,o;return"string"==typeof t&&(i=e[t],t=e,e=i),h.isFunction(e)?(n=r.call(arguments,2),o=function(){return e.apply(t||this,n.concat(r.call(arguments)))},o.guid=e.guid=e.guid||h.guid++,o):void 0},now:Date.now,support:u}),"function"==typeof Symbol&&(h.fn[Symbol.iterator]=i[Symbol.iterator]),h.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function y(e){var t=!!e&&"length"in e&&e.length,i=h.type(e);return"function"===i||h.isWindow(e)?!1:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}var b=function(e){var t,i,n,r,o,a,s,l,d,c,u,f,h,p,m,g,v,y,b,w="sizzle"+1*new Date,x=e.document,C=0,_=0,T=oe(),E=oe(),S=oe(),k=function(e,t){return e===t&&(u=!0),0},N=1<<31,U={}.hasOwnProperty,R=[],A=R.pop,I=R.push,D=R.push,O=R.slice,L=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",P="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",F="\\["+M+"*("+P+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+P+"))|)"+M+"*\\]",H=":("+P+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",$=new RegExp(M+"+","g"),j=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),q=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),W=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(H),Y=new RegExp("^"+P+"$"),X={ID:new RegExp("^#("+P+")"),CLASS:new RegExp("^\\.("+P+")"),TAG:new RegExp("^("+P+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ie=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ne=function(){f()};try{D.apply(R=O.call(x.childNodes),x.childNodes),R[x.childNodes.length].nodeType}catch(e){D={apply:R.length?function(e,t){I.apply(e,O.call(t))}:function(e,t){var i=e.length,n=0;while(e[i++]=t[n++]);e.length=i-1}}}function re(e,t,n,r){var o,s,d,c,u,p,v,y,C=t&&t.ownerDocument,_=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==_&&9!==_&&11!==_)return n;if(!r&&((t?t.ownerDocument||t:x)!==h&&f(t),t=t||h,m)){if(11!==_&&(p=Q.exec(e)))if(o=p[1]){if(9===_){if(!(d=t.getElementById(o)))return n;if(d.id===o)return n.push(d),n}else if(C&&(d=C.getElementById(o))&&b(t,d)&&d.id===o)return n.push(d),n}else{if(p[2])return D.apply(n,t.getElementsByTagName(e)),n;if((o=p[3])&&i.getElementsByClassName&&t.getElementsByClassName)return D.apply(n,t.getElementsByClassName(o)),n}if(i.qsa&&!S[e+" "]&&(!g||!g.test(e))){if(1!==_)C=t,y=e;else if("object"!==t.nodeName.toLowerCase()){(c=t.getAttribute("id"))?c=c.replace(ee,"\\$&"):t.setAttribute("id",c=w),v=a(e),s=v.length,u=Y.test(c)?"#"+c:"[id='"+c+"']";while(s--)v[s]=u+" "+me(v[s]);y=v.join(","),C=J.test(e)&&he(t.parentNode)||t}if(y)try{return D.apply(n,C.querySelectorAll(y)),n}catch(e){}finally{c===w&&t.removeAttribute("id")}}}return l(e.replace(j,"$1"),t,n,r)}function oe(){var e=[];function t(i,r){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=r}return t}function ae(e){return e[w]=!0,e}function se(e){var t=h.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){var i=e.split("|"),r=i.length;while(r--)n.attrHandle[i[r]]=t}function de(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||N)-(~e.sourceIndex||N);if(n)return n;if(i)while(i=i.nextSibling)if(i===t)return-1;return e?1:-1}function ce(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function ue(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function fe(e){return ae(function(t){return t=+t,ae(function(i,n){var r,o=e([],i.length,t),a=o.length;while(a--)i[r=o[a]]&&(i[r]=!(n[r]=i[r]))})})}function he(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}i=re.support={},o=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},f=re.setDocument=function(e){var t,r,a=e?e.ownerDocument||e:x;return a!==h&&9===a.nodeType&&a.documentElement?(h=a,p=h.documentElement,m=!o(h),(r=h.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ne,!1):r.attachEvent&&r.attachEvent("onunload",ne)),i.attributes=se(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=se(function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=Z.test(h.getElementsByClassName),i.getById=se(function(e){return p.appendChild(e).id=w,!h.getElementsByName||!h.getElementsByName(w).length}),i.getById?(n.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&m){var i=t.getElementById(e);return i?[i]:[]}},n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}}):(delete n.find.ID,n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),n.find.TAG=i.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"===e){while(i=o[r++])1===i.nodeType&&n.push(i);return n}return o},n.find.CLASS=i.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&m?t.getElementsByClassName(e):void 0},v=[],g=[],(i.qsa=Z.test(h.querySelectorAll))&&(se(function(e){p.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+M+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||g.push(".#.+[+~]")}),se(function(e){var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+M+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(i.matchesSelector=Z.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&se(function(e){i.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),v.push("!=",H)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=Z.test(p.compareDocumentPosition),b=t||Z.test(p.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return u=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===h||e.ownerDocument===x&&b(x,e)?-1:t===h||t.ownerDocument===x&&b(x,t)?1:c?L(c,e)-L(c,t):0:4&n?-1:1)}:function(e,t){if(e===t)return u=!0,0;var i,n=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e===h?-1:t===h?1:r?-1:o?1:c?L(c,e)-L(c,t):0;if(r===o)return de(e,t);i=e;while(i=i.parentNode)a.unshift(i);i=t;while(i=i.parentNode)s.unshift(i);while(a[n]===s[n])n++;return n?de(a[n],s[n]):a[n]===x?-1:s[n]===x?1:0},h):h},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&f(e),t=t.replace(W,"='$1']"),i.matchesSelector&&m&&!S[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var n=y.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return re(t,h,null,[e]).length>0},re.contains=function(e,t){return(e.ownerDocument||e)!==h&&f(e),b(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==h&&f(e);var r=n.attrHandle[t.toLowerCase()],o=r&&U.call(n.attrHandle,t.toLowerCase())?r(e,t,!m):void 0;return void 0!==o?o:i.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],r=0,o=0;if(u=!i.detectDuplicates,c=!i.sortStable&&e.slice(0),e.sort(k),u){while(t=e[o++])t===e[o]&&(r=n.push(o));while(r--)e.splice(n[r],1)}return c=null,e},r=re.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=r(e)}else if(3===o||4===o)return e.nodeValue}else while(t=e[n++])i+=r(t);return i},n=re.selectors={cacheLength:50,createPseudo:ae,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&V.test(i)&&(t=a(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var r=re.attr(n,e);return null==r?"!="===t:t?(r+="","="===t?r===i:"!="===t?r!==i:"^="===t?i&&0===r.indexOf(i):"*="===t?i&&r.indexOf(i)>-1:"$="===t?i&&r.slice(-i.length)===i:"~="===t?(" "+r.replace($," ")+" ").indexOf(i)>-1:"|="===t?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,i,n,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var d,c,u,f,h,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(g){if(o){while(m){f=t;while(f=f[m])if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){f=g,u=f[w]||(f[w]={}),c=u[f.uniqueID]||(u[f.uniqueID]={}),d=c[e]||[],h=d[0]===C&&d[1],b=h&&d[2],f=h&&g.childNodes[h];while(f=++h&&f&&f[m]||(b=h=0)||p.pop())if(1===f.nodeType&&++b&&f===t){c[e]=[C,h,b];break}}else if(y&&(f=t,u=f[w]||(f[w]={}),c=u[f.uniqueID]||(u[f.uniqueID]={}),d=c[e]||[],h=d[0]===C&&d[1],b=h),b===!1)while(f=++h&&f&&f[m]||(b=h=0)||p.pop())if((s?f.nodeName.toLowerCase()===v:1===f.nodeType)&&++b&&(y&&(u=f[w]||(f[w]={}),c=u[f.uniqueID]||(u[f.uniqueID]={}),c[e]=[C,b]),f===t))break;return b-=r,b===n||b%n===0&&b/n>=0}}},PSEUDO:function(e,t){var i,r=n.pseudos[e]||n.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ae(function(e,i){var n,o=r(e,t),a=o.length;while(a--)n=L(e,o[a]),e[n]=!(i[n]=o[a])}):function(e){return r(e,0,i)}):r}},pseudos:{not:ae(function(e){var t=[],i=[],n=s(e.replace(j,"$1"));return n[w]?ae(function(e,t,i,r){var o,a=n(e,null,r,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,n(t,null,o,i),t[0]=null,!i.pop()}}),has:ae(function(e){return function(t){return re(e,t).length>0}}),contains:ae(function(e){return e=e.replace(te,ie),function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),lang:ae(function(e){return Y.test(e||"")||re.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do{if(i=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,i){return[0>i?i+t:i]}),even:fe(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:fe(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:fe(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:fe(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},n.pseudos.nth=n.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=ce(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=ue(t);function pe(){}pe.prototype=n.filters=n.pseudos,n.setFilters=new pe,a=re.tokenize=function(e,t){var i,r,o,a,s,l,d,c=E[e+" "];if(c)return t?0:c.slice(0);s=e,l=[],d=n.preFilter;while(s){i&&!(r=q.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=z.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(j," ")}),s=s.slice(i.length));for(a in n.filter)!(r=X[a].exec(s))||d[a]&&!(r=d[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return t?s.length:s?re.error(e):E(e,l).slice(0)};function me(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function ge(e,t,i){var n=t.dir,r=i&&"parentNode"===n,o=_++;return t.first?function(t,i,o){while(t=t[n])if(1===t.nodeType||r)return e(t,i,o)}:function(t,i,a){var s,l,d,c=[C,o];if(a){while(t=t[n])if((1===t.nodeType||r)&&e(t,i,a))return!0}else while(t=t[n])if(1===t.nodeType||r){if(d=t[w]||(t[w]={}),l=d[t.uniqueID]||(d[t.uniqueID]={}),(s=l[n])&&s[0]===C&&s[1]===o)return c[2]=s[2];if(l[n]=c,c[2]=e(t,i,a))return!0}}}function ve(e){return e.length>1?function(t,i,n){var r=e.length;while(r--)if(!e[r](t,i,n))return!1;return!0}:e[0]}function ye(e,t,i){for(var n=0,r=t.length;r>n;n++)re(e,t[n],i);return i}function be(e,t,i,n,r){for(var o,a=[],s=0,l=e.length,d=null!=t;l>s;s++)(o=e[s])&&(i&&!i(o,n,r)||(a.push(o),d&&t.push(s)));return a}function we(e,t,i,n,r,o){return n&&!n[w]&&(n=we(n)),r&&!r[w]&&(r=we(r,o)),ae(function(o,a,s,l){var d,c,u,f=[],h=[],p=a.length,m=o||ye(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:be(m,f,e,s,l),v=i?r||(o?e:p||n)?[]:a:g;if(i&&i(g,v,s,l),n){d=be(v,h),n(d,[],s,l),c=d.length;while(c--)(u=d[c])&&(v[h[c]]=!(g[h[c]]=u))}if(o){if(r||e){if(r){d=[],c=v.length;while(c--)(u=v[c])&&d.push(g[c]=u);r(null,v=[],d,l)}c=v.length;while(c--)(u=v[c])&&(d=r?L(o,u):f[c])>-1&&(o[d]=!(a[d]=u))}}else v=be(v===a?v.splice(p,v.length):v),r?r(null,a,v,l):D.apply(a,v)})}function xe(e){for(var t,i,r,o=e.length,a=n.relative[e[0].type],s=a||n.relative[" "],l=a?1:0,c=ge(function(e){return e===t},s,!0),u=ge(function(e){return L(t,e)>-1},s,!0),f=[function(e,i,n){var r=!a&&(n||i!==d)||((t=i).nodeType?c(e,i,n):u(e,i,n));return t=null,r}];o>l;l++)if(i=n.relative[e[l].type])f=[ge(ve(f),i)];else{if(i=n.filter[e[l].type].apply(null,e[l].matches),i[w]){for(r=++l;o>r;r++)if(n.relative[e[r].type])break;return we(l>1&&ve(f),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(j,"$1"),i,r>l&&xe(e.slice(l,r)),o>r&&xe(e=e.slice(r)),o>r&&me(e))}f.push(i)}return ve(f)}function Ce(e,t){var i=t.length>0,r=e.length>0,o=function(o,a,s,l,c){var u,p,g,v=0,y="0",b=o&&[],w=[],x=d,_=o||r&&n.find.TAG("*",c),T=C+=null==x?1:Math.random()||.1,E=_.length;for(c&&(d=a===h||a||c);y!==E&&null!=(u=_[y]);y++){if(r&&u){p=0,a||u.ownerDocument===h||(f(u),s=!m);while(g=e[p++])if(g(u,a||h,s)){l.push(u);break}c&&(C=T)}i&&((u=!g&&u)&&v--,o&&b.push(u))}if(v+=y,i&&y!==v){p=0;while(g=t[p++])g(b,w,a,s);if(o){if(v>0)while(y--)b[y]||w[y]||(w[y]=A.call(l));w=be(w)}D.apply(l,w),c&&!o&&w.length>0&&v+t.length>1&&re.uniqueSort(l)}return c&&(C=T,d=x),b};return i?ae(o):o}return s=re.compile=function(e,t){var i,n=[],r=[],o=S[e+" "];if(!o){t||(t=a(e)),i=t.length;while(i--)o=xe(t[i]),o[w]?n.push(o):r.push(o);o=S(e,Ce(r,n)),o.selector=e}return o},l=re.select=function(e,t,r,o){var l,d,c,u,f,h="function"==typeof e&&e,p=!o&&a(e=h.selector||e);if(r=r||[],1===p.length){if(d=p[0]=p[0].slice(0),d.length>2&&"ID"===(c=d[0]).type&&i.getById&&9===t.nodeType&&m&&n.relative[d[1].type]){if(t=(n.find.ID(c.matches[0].replace(te,ie),t)||[])[0],!t)return r;h&&(t=t.parentNode),e=e.slice(d.shift().value.length)}l=X.needsContext.test(e)?0:d.length;while(l--){if(c=d[l],n.relative[u=c.type])break;if((f=n.find[u])&&(o=f(c.matches[0].replace(te,ie),J.test(d[0].type)&&he(t.parentNode)||t))){if(d.splice(l,1),e=o.length&&me(d),!e)return D.apply(r,o),r;break}}}return(h||s(e,p))(o,t,!m,r,!t||J.test(e)&&he(t.parentNode)||t),r},i.sortStable=w.split("").sort(k).join("")===w,i.detectDuplicates=!!u,f(),i.sortDetached=se(function(e){return 1&e.compareDocumentPosition(h.createElement("div"))}),se(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),i.attributes&&se(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),se(function(e){return null==e.getAttribute("disabled")})||le(B,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),re}(e);h.find=b,h.expr=b.selectors,h.expr[":"]=h.expr.pseudos,h.uniqueSort=h.unique=b.uniqueSort,h.text=b.getText,h.isXMLDoc=b.isXML,h.contains=b.contains;var w=function(e,t,i){var n=[],r=void 0!==i;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(r&&h(e).is(i))break;n.push(e)}return n},x=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},C=h.expr.match.needsContext,_=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,T=/^.[^:#\[\.,]*$/;function E(e,t,i){if(h.isFunction(t))return h.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return h.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(T.test(t))return h.filter(t,e,i);t=h.filter(t,e)}return h.grep(e,function(e){return s.call(t,e)>-1!==i})}h.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?h.find.matchesSelector(n,e)?[n]:[]:h.find.matches(e,h.grep(t,function(e){return 1===e.nodeType}))},h.fn.extend({find:function(e){var t,i=this.length,n=[],r=this;if("string"!=typeof e)return this.pushStack(h(e).filter(function(){for(t=0;i>t;t++)if(h.contains(r[t],this))return!0}));for(t=0;i>t;t++)h.find(e,r[t],n);return n=this.pushStack(i>1?h.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(E(this,e||[],!1))},not:function(e){return this.pushStack(E(this,e||[],!0))},is:function(e){return!!E(this,"string"==typeof e&&C.test(e)?h(e):e||[],!1).length}});var S,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,N=h.fn.init=function(e,t,i){var r,o;if(!e)return this;if(i=i||S,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:k.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof h?t[0]:t,h.merge(this,h.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:n,!0)),_.test(r[1])&&h.isPlainObject(t))for(r in t)h.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return o=n.getElementById(r[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=n,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):h.isFunction(e)?void 0!==i.ready?i.ready(e):e(h):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),h.makeArray(e,this))};N.prototype=h.fn,S=h(n);var U=/^(?:parents|prev(?:Until|All))/,R={children:!0,contents:!0,next:!0,prev:!0};h.fn.extend({has:function(e){var t=h(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(h.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,o=[],a=C.test(e)||"string"!=typeof e?h(e,t||this.context):0;r>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&h.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?h.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?s.call(h(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(h.uniqueSort(h.merge(this.get(),h(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function A(e,t){while((e=e[t])&&1!==e.nodeType);return e}h.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return w(e,"parentNode")},parentsUntil:function(e,t,i){return w(e,"parentNode",i)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return w(e,"nextSibling")},prevAll:function(e){return w(e,"previousSibling")},nextUntil:function(e,t,i){return w(e,"nextSibling",i)},prevUntil:function(e,t,i){return w(e,"previousSibling",i)},siblings:function(e){return x((e.parentNode||{}).firstChild,e)},children:function(e){return x(e.firstChild)},contents:function(e){return e.contentDocument||h.merge([],e.childNodes)}},function(e,t){h.fn[e]=function(i,n){var r=h.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=h.filter(n,r)),this.length>1&&(R[e]||h.uniqueSort(r),U.test(e)&&r.reverse()),this.pushStack(r)}});var I=/\S+/g;function D(e){var t={};return h.each(e.match(I)||[],function(e,i){t[i]=!0}),t}h.Callbacks=function(e){e="string"==typeof e?D(e):h.extend({},e);var t,i,n,r,o=[],a=[],s=-1,l=function(){for(r=e.once,n=t=!0;a.length;s=-1){i=a.shift();while(++s<o.length)o[s].apply(i[0],i[1])===!1&&e.stopOnFalse&&(s=o.length,i=!1)}e.memory||(i=!1),t=!1,r&&(o=i?[]:"")},d={add:function(){return o&&(i&&!t&&(s=o.length-1,a.push(i)),function t(i){h.each(i,function(i,n){h.isFunction(n)?e.unique&&d.has(n)||o.push(n):n&&n.length&&"string"!==h.type(n)&&t(n)})}(arguments),i&&!t&&l()),this},remove:function(){return h.each(arguments,function(e,t){var i;while((i=h.inArray(t,o,i))>-1)o.splice(i,1),s>=i&&s--}),this},has:function(e){return e?h.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=i="",this},disabled:function(){return!o},lock:function(){return r=a=[],i||(o=i=""),this},locked:function(){return!!r},fireWith:function(e,i){return r||(i=i||[],i=[e,i.slice?i.slice():i],a.push(i),t||l()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},h.extend({Deferred:function(e){var t=[["resolve","done",h.Callbacks("once memory"),"resolved"],["reject","fail",h.Callbacks("once memory"),"rejected"],["notify","progress",h.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return h.Deferred(function(i){h.each(t,function(t,o){var a=h.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&h.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[o[0]+"With"](this===n?i.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?h.extend(e,n):n}},r={};return n.pipe=n.then,h.each(t,function(e,o){var a=o[2],s=o[3];n[o[1]]=a.add,s&&a.add(function(){i=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?n:this,arguments),this},r[o[0]+"With"]=a.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t=0,i=r.call(arguments),n=i.length,o=1!==n||e&&h.isFunction(e.promise)?n:0,a=1===o?e:h.Deferred(),s=function(e,t,i){return function(n){t[e]=this,i[e]=arguments.length>1?r.call(arguments):n,i===l?a.notifyWith(t,i):--o||a.resolveWith(t,i)}},l,d,c;if(n>1)for(l=new Array(n),d=new Array(n),c=new Array(n);n>t;t++)i[t]&&h.isFunction(i[t].promise)?i[t].promise().progress(s(t,d,l)).done(s(t,c,i)).fail(a.reject):--o;return o||a.resolveWith(c,i),a.promise()}});var O;h.fn.ready=function(e){return h.ready.promise().done(e),this},h.extend({isReady:!1,readyWait:1,holdReady:function(e){e?h.readyWait++:h.ready(!0)},ready:function(e){(e===!0?--h.readyWait:h.isReady)||(h.isReady=!0,e!==!0&&--h.readyWait>0||(O.resolveWith(n,[h]),h.fn.triggerHandler&&(h(n).triggerHandler("ready"),h(n).off("ready"))))}});function L(){n.removeEventListener("DOMContentLoaded",L),e.removeEventListener("load",L),h.ready()}h.ready.promise=function(t){return O||(O=h.Deferred(),"complete"===n.readyState||"loading"!==n.readyState&&!n.documentElement.doScroll?e.setTimeout(h.ready):(n.addEventListener("DOMContentLoaded",L),e.addEventListener("load",L))),O.promise(t)},h.ready.promise();var B=function(e,t,i,n,r,o,a){var s=0,l=e.length,d=null==i;if("object"===h.type(i)){r=!0;for(s in i)B(e,t,s,i[s],!0,o,a)}else if(void 0!==n&&(r=!0,h.isFunction(n)||(a=!0),d&&(a?(t.call(e,n),t=null):(d=t,t=function(e,t,i){return d.call(h(e),i)})),t))for(;l>s;s++)t(e[s],i,a?n:n.call(e[s],s,t(e[s],i)));return r?e:d?t.call(e):l?t(e[0],i):o},M=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function P(){this.expando=h.expando+P.uid++}P.uid=1,P.prototype={register:function(e,t){var i=t||{};return e.nodeType?e[this.expando]=i:Object.defineProperty(e,this.expando,{value:i,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!M(e))return{};var t=e[this.expando];return t||(t={},M(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[t]=i;else for(n in t)r[n]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,h.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,r,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{h.isArray(t)?n=t.concat(t.map(h.camelCase)):(r=h.camelCase(t),t in o?n=[t,r]:(n=r,n=n in o?[n]:n.match(I)||[])),i=n.length;while(i--)delete o[n[i]]}(void 0===t||h.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!h.isEmptyObject(t)}};var F=new P,H=new P,$=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,j=/[A-Z]/g;function q(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(j,"-$&").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:$.test(i)?h.parseJSON(i):i}catch(e){}H.set(e,t,i)}else i=void 0;return i}h.extend({hasData:function(e){return H.hasData(e)||F.hasData(e)},data:function(e,t,i){return H.access(e,t,i)},removeData:function(e,t){H.remove(e,t)},_data:function(e,t,i){return F.access(e,t,i)},_removeData:function(e,t){F.remove(e,t)}}),h.fn.extend({data:function(e,t){var i,n,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=H.get(o),1===o.nodeType&&!F.get(o,"hasDataAttrs"))){i=a.length;while(i--)a[i]&&(n=a[i].name,0===n.indexOf("data-")&&(n=h.camelCase(n.slice(5)),q(o,n,r[n])));F.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){H.set(this,e)}):B(this,function(t){var i,n;if(o&&void 0===t){if(i=H.get(o,e)||H.get(o,e.replace(j,"-$&").toLowerCase()),void 0!==i)return i;if(n=h.camelCase(e),i=H.get(o,n),void 0!==i)return i;if(i=q(o,n,void 0),void 0!==i)return i}else n=h.camelCase(e),this.each(function(){var i=H.get(this,n);H.set(this,n,t),e.indexOf("-")>-1&&void 0!==i&&H.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){H.remove(this,e)})}}),h.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=F.get(e,t),i&&(!n||h.isArray(i)?n=F.access(e,t,h.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=h.queue(e,t),n=i.length,r=i.shift(),o=h._queueHooks(e,t),a=function(){h.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return F.get(e,i)||F.access(e,i,{empty:h.Callbacks("once memory").add(function(){F.remove(e,[t+"queue",i])})})}}),h.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?h.queue(this[0],e):void 0===t?this:this.each(function(){var i=h.queue(this,e,t);h._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&h.dequeue(this,e)})},dequeue:function(e){return this.each(function(){h.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=h.Deferred(),o=this,a=this.length,s=function(){--n||r.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)i=F.get(o[a],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(t)}});var z=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,W=new RegExp("^(?:([+-])=|)("+z+")([a-z%]*)$","i"),V=["Top","Right","Bottom","Left"],Y=function(e,t){return e=t||e,"none"===h.css(e,"display")||!h.contains(e.ownerDocument,e)};function X(e,t,i,n){var r,o=1,a=20,s=n?function(){return n.cur()}:function(){return h.css(e,t,"")},l=s(),d=i&&i[3]||(h.cssNumber[t]?"":"px"),c=(h.cssNumber[t]||"px"!==d&&+l)&&W.exec(h.css(e,t));if(c&&c[3]!==d){d=d||c[3],i=i||[],c=+l||1;do{o=o||".5",c/=o,h.style(e,t,c+d)}while(o!==(o=s()/l)&&1!==o&&--a)}return i&&(c=+c||+l||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=d,n.start=c,n.end=r)),r}var G=/^(?:checkbox|radio)$/i,K=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,Q={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Q.optgroup=Q.option,Q.tbody=Q.tfoot=Q.colgroup=Q.caption=Q.thead,Q.th=Q.td;function J(e,t){var i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&h.nodeName(e,t)?h.merge([e],i):i}function ee(e,t){for(var i=0,n=e.length;n>i;i++)F.set(e[i],"globalEval",!t||F.get(t[i],"globalEval"))}var te=/<|&#?\w+;/;function ie(e,t,i,n,r){for(var o,a,s,l,d,c,u=t.createDocumentFragment(),f=[],p=0,m=e.length;m>p;p++)if(o=e[p],o||0===o)if("object"===h.type(o))h.merge(f,o.nodeType?[o]:o);else if(te.test(o)){a=a||u.appendChild(t.createElement("div")),s=(K.exec(o)||["",""])[1].toLowerCase(),l=Q[s]||Q._default,a.innerHTML=l[1]+h.htmlPrefilter(o)+l[2],c=l[0];while(c--)a=a.lastChild;h.merge(f,a.childNodes),a=u.firstChild,a.textContent=""}else f.push(t.createTextNode(o));u.textContent="",p=0;while(o=f[p++])if(n&&h.inArray(o,n)>-1)r&&r.push(o);else if(d=h.contains(o.ownerDocument,o),a=J(u.appendChild(o),"script"),d&&ee(a),i){c=0;while(o=a[c++])Z.test(o.type||"")&&i.push(o)}return u}!function(){var e=n.createDocumentFragment(),t=e.appendChild(n.createElement("div")),i=n.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),u.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",u.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var ne=/^key/,re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,oe=/^([^.]*)(?:\.(.+)|)/;function ae(){return!0}function se(){return!1}function le(){try{return n.activeElement}catch(e){}}function de(e,t,i,n,r,o){var a,s;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=void 0);for(s in t)de(e,s,i,n,t[s],o);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),r===!1)r=se;else if(!r)return e;return 1===o&&(a=r,r=function(e){return h().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=h.guid++)),e.each(function(){h.event.add(this,t,r,n,i)})}h.event={global:{},add:function(e,t,i,n,r){var o,a,s,l,d,c,u,f,p,m,g,v=F.get(e);if(v){i.handler&&(o=i,i=o.handler,r=o.selector),i.guid||(i.guid=h.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return"undefined"!=typeof h&&h.event.triggered!==t.type?h.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(I)||[""],d=t.length;while(d--)s=oe.exec(t[d])||[],p=g=s[1],m=(s[2]||"").split(".").sort(),p&&(u=h.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=h.event.special[p]||{},c=h.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&h.expr.match.needsContext.test(r),namespace:m.join(".")},o),(f=l[p])||(f=l[p]=[],f.delegateCount=0,u.setup&&u.setup.call(e,n,m,a)!==!1||e.addEventListener&&e.addEventListener(p,a)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),h.event.global[p]=!0)}},remove:function(e,t,i,n,r){var o,a,s,l,d,c,u,f,p,m,g,v=F.hasData(e)&&F.get(e);if(v&&(l=v.events)){t=(t||"").match(I)||[""],d=t.length;while(d--)if(s=oe.exec(t[d])||[],p=g=s[1],m=(s[2]||"").split(".").sort(),p){u=h.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,f=l[p]||[],s=s[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;while(o--)c=f[o],!r&&g!==c.origType||i&&i.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,u.remove&&u.remove.call(e,c));a&&!f.length&&(u.teardown&&u.teardown.call(e,m,v.handle)!==!1||h.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)h.event.remove(e,p+t[d],i,n,!0);h.isEmptyObject(l)&&F.remove(e,"handle events")}},dispatch:function(e){e=h.event.fix(e);var t,i,n,o,a,s=[],l=r.call(arguments),d=(F.get(this,"events")||{})[e.type]||[],c=h.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=h.event.handlers.call(this,e,d),t=0;while((o=s[t++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,i=0;while((a=o.handlers[i++])&&!e.isImmediatePropagationStopped())e.rnamespace&&!e.rnamespace.test(a.namespace)||(e.handleObj=a,e.data=a.data,n=((h.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,l),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(n=[],i=0;s>i;i++)o=t[i],r=o.selector+" ",void 0===n[r]&&(n[r]=o.needsContext?h(r,this).index(l)>-1:h.find(r,this,null,[l]).length),n[r]&&n.push(o);n.length&&a.push({elem:l,handlers:n})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,r,o,a=t.button;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||n,r=i.documentElement,o=i.body,e.pageX=t.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[h.expando])return e;var t,i,r,o=e.type,a=e,s=this.fixHooks[o];s||(this.fixHooks[o]=s=re.test(o)?this.mouseHooks:ne.test(o)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new h.Event(a),t=r.length;while(t--)i=r[t],e[i]=a[i];return e.target||(e.target=n),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==le()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===le()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&h.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return h.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},h.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},h.Event=function(e,t){return this instanceof h.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?ae:se):this.type=e,t&&h.extend(this,t),this.timeStamp=e&&e.timeStamp||h.now(),void(this[h.expando]=!0)):new h.Event(e,t)},h.Event.prototype={constructor:h.Event,isDefaultPrevented:se,isPropagationStopped:se,isImmediatePropagationStopped:se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ae,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ae,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ae,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){h.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===n||h.contains(n,r))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),h.fn.extend({on:function(e,t,i,n){return de(this,e,t,i,n)},one:function(e,t,i,n){return de(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,h(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return t!==!1&&"function"!=typeof t||(i=t,t=void 0),i===!1&&(i=se),this.each(function(){h.event.remove(this,e,i,t)})}});var ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ue=/<script|<style|<link/i,fe=/checked\s*(?:[^=]|=\s*.checked.)/i,he=/^true\/(.*)/,pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function me(e,t){return h.nodeName(e,"table")&&h.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ge(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ve(e){var t=he.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ye(e,t){var i,n,r,o,a,s,l,d;if(1===t.nodeType){if(F.hasData(e)&&(o=F.access(e),a=F.set(t,o),d=o.events)){delete a.handle,a.events={};for(r in d)for(i=0,n=d[r].length;n>i;i++)h.event.add(t,r,d[r][i])}H.hasData(e)&&(s=H.access(e),l=h.extend({},s),H.set(t,l))}}function be(e,t){var i=t.nodeName.toLowerCase();"input"===i&&G.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function we(e,t,i,n){t=o.apply([],t);var r,a,s,l,d,c,f=0,p=e.length,m=p-1,g=t[0],v=h.isFunction(g);if(v||p>1&&"string"==typeof g&&!u.checkClone&&fe.test(g))return e.each(function(r){var o=e.eq(r);v&&(t[0]=g.call(this,r,o.html())),we(o,t,i,n)});if(p&&(r=ie(t,e[0].ownerDocument,!1,e,n),a=r.firstChild,1===r.childNodes.length&&(r=a),a||n)){for(s=h.map(J(r,"script"),ge),l=s.length;p>f;f++)d=r,f!==m&&(d=h.clone(d,!0,!0),l&&h.merge(s,J(d,"script"))),i.call(e[f],d,f);if(l)for(c=s[s.length-1].ownerDocument,h.map(s,ve),f=0;l>f;f++)d=s[f],Z.test(d.type||"")&&!F.access(d,"globalEval")&&h.contains(c,d)&&(d.src?h._evalUrl&&h._evalUrl(d.src):h.globalEval(d.textContent.replace(pe,"")))}return e}function xe(e,t,i){for(var n,r=t?h.filter(t,e):e,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||h.cleanData(J(n)),n.parentNode&&(i&&h.contains(n.ownerDocument,n)&&ee(J(n,"script")),n.parentNode.removeChild(n));return e}h.extend({htmlPrefilter:function(e){return e.replace(ce,"<$1></$2>")},clone:function(e,t,i){var n,r,o,a,s=e.cloneNode(!0),l=h.contains(e.ownerDocument,e);if(!(u.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||h.isXMLDoc(e)))for(a=J(s),o=J(e),n=0,r=o.length;r>n;n++)be(o[n],a[n]);if(t)if(i)for(o=o||J(e),a=a||J(s),n=0,r=o.length;r>n;n++)ye(o[n],a[n]);else ye(e,s);return a=J(s,"script"),a.length>0&&ee(a,!l&&J(e,"script")),s},cleanData:function(e){for(var t,i,n,r=h.event.special,o=0;void 0!==(i=e[o]);o++)if(M(i)){if(t=i[F.expando]){if(t.events)for(n in t.events)r[n]?h.event.remove(i,n):h.removeEvent(i,n,t.handle);i[F.expando]=void 0}i[H.expando]&&(i[H.expando]=void 0)}}}),h.fn.extend({domManip:we,detach:function(e){return xe(this,e,!0)},remove:function(e){return xe(this,e)},text:function(e){return B(this,function(e){return void 0===e?h.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return we(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=me(this,e);t.appendChild(e)}})},prepend:function(){return we(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=me(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return we(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return we(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(h.cleanData(J(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return h.clone(this,e,t)})},html:function(e){return B(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ue.test(e)&&!Q[(K.exec(e)||["",""])[1].toLowerCase()]){e=h.htmlPrefilter(e);try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(h.cleanData(J(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return we(this,arguments,function(t){var i=this.parentNode;h.inArray(this,e)<0&&(h.cleanData(J(this)),i&&i.replaceChild(t,this))},e)}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){h.fn[e]=function(e){for(var i,n=[],r=h(e),o=r.length-1,s=0;o>=s;s++)i=s===o?this:this.clone(!0),h(r[s])[t](i),a.apply(n,i.get());return this.pushStack(n)}});var Ce,_e={HTML:"block",BODY:"block"};function Te(e,t){var i=h(t.createElement(e)).appendTo(t.body),n=h.css(i[0],"display");return i.detach(),n}function Ee(e){var t=n,i=_e[e];return i||(i=Te(e,t),"none"!==i&&i||(Ce=(Ce||h("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ce[0].contentDocument,t.write(),t.close(),i=Te(e,t),Ce.detach()),_e[e]=i),i}var Se=/^margin/,ke=new RegExp("^("+z+")(?!px)[a-z%]+$","i"),Ne=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},Ue=function(e,t,i,n){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=i.apply(e,n||[]);for(o in t)e.style[o]=a[o];return r},Re=n.documentElement;!function(){var t,i,r,o,a=n.createElement("div"),s=n.createElement("div");if(s.style){s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",u.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s);function l(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Re.appendChild(a);var n=e.getComputedStyle(s);t="1%"!==n.top,o="2px"===n.marginLeft,i="4px"===n.width,s.style.marginRight="50%",r="4px"===n.marginRight,Re.removeChild(a)}h.extend(u,{pixelPosition:function(){return l(),t},boxSizingReliable:function(){return null==i&&l(),i},pixelMarginRight:function(){return null==i&&l(),r},reliableMarginLeft:function(){return null==i&&l(),o},reliableMarginRight:function(){var t,i=s.appendChild(n.createElement("div"));return i.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",s.style.width="1px",Re.appendChild(a),t=!parseFloat(e.getComputedStyle(i).marginRight),Re.removeChild(a),s.removeChild(i),t}})}}();function Ae(e,t,i){var n,r,o,a,s=e.style;return i=i||Ne(e),a=i?i.getPropertyValue(t)||i[t]:void 0,""!==a&&void 0!==a||h.contains(e.ownerDocument,e)||(a=h.style(e,t)),i&&!u.pixelMarginRight()&&ke.test(a)&&Se.test(t)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=r,s.maxWidth=o),void 0!==a?a+"":a}function Ie(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}var De=/^(none|table(?!-c[ea]).+)/,Oe={position:"absolute",visibility:"hidden",display:"block"},Le={letterSpacing:"0",fontWeight:"400"},Be=["Webkit","O","Moz","ms"],Me=n.createElement("div").style;function Pe(e){if(e in Me)return e;var t=e[0].toUpperCase()+e.slice(1),i=Be.length;while(i--)if(e=Be[i]+t,e in Me)return e}function Fe(e,t,i){var n=W.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function He(e,t,i,n,r){for(var o=i===(n?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===i&&(a+=h.css(e,i+V[o],!0,r)),n?("content"===i&&(a-=h.css(e,"padding"+V[o],!0,r)),"margin"!==i&&(a-=h.css(e,"border"+V[o]+"Width",!0,r))):(a+=h.css(e,"padding"+V[o],!0,r),"padding"!==i&&(a+=h.css(e,"border"+V[o]+"Width",!0,r)));return a}function $e(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=Ne(e),a="border-box"===h.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=Ae(e,t,o),(0>r||null==r)&&(r=e.style[t]),ke.test(r))return r;n=a&&(u.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+He(e,t,i||(a?"border":"content"),n,o)+"px"}function je(e,t){for(var i,n,r,o=[],a=0,s=e.length;s>a;a++)n=e[a],n.style&&(o[a]=F.get(n,"olddisplay"),i=n.style.display,t?(o[a]||"none"!==i||(n.style.display=""),""===n.style.display&&Y(n)&&(o[a]=F.access(n,"olddisplay",Ee(n.nodeName)))):(r=Y(n),"none"===i&&r||F.set(n,"olddisplay",r?i:h.css(n,"display"))));for(a=0;s>a;a++)n=e[a],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[a]||"":"none"));return e}h.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ae(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=h.camelCase(t),l=e.style;return t=h.cssProps[s]||(h.cssProps[s]=Pe(s)||s),a=h.cssHooks[t]||h.cssHooks[s],void 0===i?a&&"get"in a&&void 0!==(r=a.get(e,!1,n))?r:l[t]:(o=typeof i,"string"===o&&(r=W.exec(i))&&r[1]&&(i=X(e,t,r),o="number"),null!=i&&i===i&&("number"===o&&(i+=r&&r[3]||(h.cssNumber[s]?"":"px")),u.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(l[t]=i)),void 0)}},css:function(e,t,i,n){var r,o,a,s=h.camelCase(t);return t=h.cssProps[s]||(h.cssProps[s]=Pe(s)||s),a=h.cssHooks[t]||h.cssHooks[s],a&&"get"in a&&(r=a.get(e,!0,i)),void 0===r&&(r=Ae(e,t,n)),"normal"===r&&t in Le&&(r=Le[t]),""===i||i?(o=parseFloat(r),i===!0||isFinite(o)?o||0:r):r}}),h.each(["height","width"],function(e,t){h.cssHooks[t]={get:function(e,i,n){return i?De.test(h.css(e,"display"))&&0===e.offsetWidth?Ue(e,Oe,function(){return $e(e,t,n)}):$e(e,t,n):void 0},set:function(e,i,n){var r,o=n&&Ne(e),a=n&&He(e,t,n,"border-box"===h.css(e,"boxSizing",!1,o),o);return a&&(r=W.exec(i))&&"px"!==(r[3]||"px")&&(e.style[t]=i,i=h.css(e,t)),Fe(e,i,a)}}}),h.cssHooks.marginLeft=Ie(u.reliableMarginLeft,function(e,t){return t?(parseFloat(Ae(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),h.cssHooks.marginRight=Ie(u.reliableMarginRight,function(e,t){return t?Ue(e,{display:"inline-block"},Ae,[e,"marginRight"]):void 0}),h.each({margin:"",padding:"",border:"Width"},function(e,t){h.cssHooks[e+t]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];4>n;n++)r[e+V[n]+t]=o[n]||o[n-2]||o[0];return r}},Se.test(e)||(h.cssHooks[e+t].set=Fe)}),h.fn.extend({css:function(e,t){return B(this,function(e,t,i){var n,r,o={},a=0;if(h.isArray(t)){for(n=Ne(e),r=t.length;r>a;a++)o[t[a]]=h.css(e,t[a],!1,n);return o}return void 0!==i?h.style(e,t,i):h.css(e,t)},e,t,arguments.length>1)},show:function(){return je(this,!0)},hide:function(){return je(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Y(this)?h(this).show():h(this).hide()})}});function qe(e,t,i,n,r){return new qe.prototype.init(e,t,i,n,r)}h.Tween=qe,qe.prototype={constructor:qe,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||h.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(h.cssNumber[i]?"":"px")},cur:function(){var e=qe.propHooks[this.prop];return e&&e.get?e.get(this):qe.propHooks._default.get(this)},run:function(e){var t,i=qe.propHooks[this.prop];return this.options.duration?this.pos=t=h.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):qe.propHooks._default.set(this),this}},qe.prototype.init.prototype=qe.prototype,qe.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=h.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){h.fx.step[e.prop]?h.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[h.cssProps[e.prop]]&&!h.cssHooks[e.prop]?e.elem[e.prop]=e.now:h.style(e.elem,e.prop,e.now+e.unit)}}},qe.propHooks.scrollTop=qe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},h.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},h.fx=qe.prototype.init,h.fx.step={};var ze,We,Ve=/^(?:toggle|show|hide)$/,Ye=/queueHooks$/;function Xe(){return e.setTimeout(function(){ze=void 0}),ze=h.now()}function Ge(e,t){var i,n=0,r={height:e};for(t=t?1:0;4>n;n+=2-t)i=V[n],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function Ke(e,t,i){for(var n,r=(Je.tweeners[t]||[]).concat(Je.tweeners["*"]),o=0,a=r.length;a>o;o++)if(n=r[o].call(i,t,e))return n}function Ze(e,t,i){var n,r,o,a,s,l,d,c,u=this,f={},p=e.style,m=e.nodeType&&Y(e),g=F.get(e,"fxshow");i.queue||(s=h._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,h.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],d=h.css(e,"display"),c="none"===d?F.get(e,"olddisplay")||Ee(e.nodeName):d,"inline"===c&&"none"===h.css(e,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],Ve.exec(r)){if(delete t[n],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;m=!0}f[n]=g&&g[n]||h.style(e,n)}else d=void 0;if(h.isEmptyObject(f))"inline"===("none"===d?Ee(e.nodeName):d)&&(p.display=d);else{g?"hidden"in g&&(m=g.hidden):g=F.access(e,"fxshow",{}),o&&(g.hidden=!m),m?h(e).show():u.done(function(){h(e).hide()}),u.done(function(){var t;F.remove(e,"fxshow");for(t in f)h.style(e,t,f[t])});for(n in f)a=Ke(m?g[n]:0,n,u),n in g||(g[n]=a.start,m&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}}function Qe(e,t){var i,n,r,o,a;for(i in e)if(n=h.camelCase(i),r=t[n],o=e[i],h.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),a=h.cssHooks[n],a&&"expand"in a){o=a.expand(o),delete e[n];for(i in o)i in e||(e[i]=o[i],t[i]=r)}else t[n]=r}function Je(e,t,i){var n,r,o=0,a=Je.prefilters.length,s=h.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=ze||Xe(),i=Math.max(0,d.startTime+d.duration-t),n=i/d.duration||0,o=1-n,a=0,l=d.tweens.length;l>a;a++)d.tweens[a].run(o);return s.notifyWith(e,[d,o,i]),1>o&&l?i:(s.resolveWith(e,[d]),!1)},d=s.promise({elem:e,props:h.extend({},t),opts:h.extend(!0,{specialEasing:{},easing:h.easing._default},i),originalProperties:t,originalOptions:i,startTime:ze||Xe(),duration:i.duration,tweens:[],createTween:function(t,i){var n=h.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(n),n},stop:function(t){var i=0,n=t?d.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)d.tweens[i].run(1);return t?(s.notifyWith(e,[d,1,0]),s.resolveWith(e,[d,t])):s.rejectWith(e,[d,t]),this}}),c=d.props;for(Qe(c,d.opts.specialEasing);a>o;o++)if(n=Je.prefilters[o].call(d,e,c,d.opts))return h.isFunction(n.stop)&&(h._queueHooks(d.elem,d.opts.queue).stop=h.proxy(n.stop,n)),n;return h.map(c,Ke,d),h.isFunction(d.opts.start)&&d.opts.start.call(e,d),h.fx.timer(h.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}h.Animation=h.extend(Je,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return X(i.elem,e,W.exec(t),i),i}]},tweener:function(e,t){h.isFunction(e)?(t=e,e=["*"]):e=e.match(I);for(var i,n=0,r=e.length;r>n;n++)i=e[n],Je.tweeners[i]=Je.tweeners[i]||[],Je.tweeners[i].unshift(t)},prefilters:[Ze],prefilter:function(e,t){t?Je.prefilters.unshift(e):Je.prefilters.push(e)}}),h.speed=function(e,t,i){var n=e&&"object"==typeof e?h.extend({},e):{complete:i||!i&&t||h.isFunction(e)&&e,duration:e,easing:i&&t||t&&!h.isFunction(t)&&t};return n.duration=h.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in h.fx.speeds?h.fx.speeds[n.duration]:h.fx.speeds._default,null!=n.queue&&n.queue!==!0||(n.queue="fx"),n.old=n.complete,n.complete=function(){h.isFunction(n.old)&&n.old.call(this),n.queue&&h.dequeue(this,n.queue)},n},h.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Y).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=h.isEmptyObject(e),o=h.speed(t,i,n),a=function(){var t=Je(this,h.extend({},e),o);(r||F.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=h.timers,a=F.get(this);if(r)a[r]&&a[r].stop&&n(a[r]);else for(r in a)a[r]&&a[r].stop&&Ye.test(r)&&n(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(i),t=!1,o.splice(r,1));!t&&i||h.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=F.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],o=h.timers,a=n?n.length:0;for(i.finish=!0,h.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),h.each(["toggle","show","hide"],function(e,t){var i=h.fn[t];h.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(Ge(t,!0),e,n,r)}}),h.each({slideDown:Ge("show"),slideUp:Ge("hide"),slideToggle:Ge("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){h.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),h.timers=[],h.fx.tick=function(){var e,t=0,i=h.timers;for(ze=h.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||h.fx.stop(),ze=void 0},h.fx.timer=function(e){h.timers.push(e),e()?h.fx.start():h.timers.pop()},h.fx.interval=13,h.fx.start=function(){We||(We=e.setInterval(h.fx.tick,h.fx.interval))},h.fx.stop=function(){e.clearInterval(We),We=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(t,i){return t=h.fx?h.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,n){var r=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(r)}})},function(){var e=n.createElement("input"),t=n.createElement("select"),i=t.appendChild(n.createElement("option"));e.type="checkbox",u.checkOn=""!==e.value,u.optSelected=i.selected,t.disabled=!0,u.optDisabled=!i.disabled,e=n.createElement("input"),e.value="t",e.type="radio",u.radioValue="t"===e.value}();var et,tt=h.expr.attrHandle;h.fn.extend({attr:function(e,t){return B(this,h.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){h.removeAttr(this,e)})}}),h.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?h.prop(e,t,i):(1===o&&h.isXMLDoc(e)||(t=t.toLowerCase(),r=h.attrHooks[t]||(h.expr.match.bool.test(t)?et:void 0)),void 0!==i?null===i?void h.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:(n=h.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!u.radioValue&&"radio"===t&&h.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n,r=0,o=t&&t.match(I);if(o&&1===e.nodeType)while(i=o[r++])n=h.propFix[i]||i,h.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)}}),et={set:function(e,t,i){return t===!1?h.removeAttr(e,i):e.setAttribute(i,i),i}},h.each(h.expr.match.bool.source.match(/\w+/g),function(e,t){var i=tt[t]||h.find.attr;tt[t]=function(e,t,n){var r,o;return n||(o=tt[t],tt[t]=r,r=null!=i(e,t,n)?t.toLowerCase():null,tt[t]=o),r}});var it=/^(?:input|select|textarea|button)$/i,nt=/^(?:a|area)$/i;h.fn.extend({prop:function(e,t){return B(this,h.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[h.propFix[e]||e]})}}),h.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&h.isXMLDoc(e)||(t=h.propFix[t]||t,r=h.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=h.find.attr(e,"tabindex");return t?parseInt(t,10):it.test(e.nodeName)||nt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),u.optSelected||(h.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this});var rt=/[\t\r\n\f]/g;function ot(e){return e.getAttribute&&e.getAttribute("class")||""}h.fn.extend({addClass:function(e){var t,i,n,r,o,a,s,l=0;if(h.isFunction(e))return this.each(function(t){h(this).addClass(e.call(this,t,ot(this)))});if("string"==typeof e&&e){t=e.match(I)||[];while(i=this[l++])if(r=ot(i),n=1===i.nodeType&&(" "+r+" ").replace(rt," ")){a=0;while(o=t[a++])n.indexOf(" "+o+" ")<0&&(n+=o+" ");s=h.trim(n),r!==s&&i.setAttribute("class",s)}}return this},removeClass:function(e){var t,i,n,r,o,a,s,l=0;if(h.isFunction(e))return this.each(function(t){h(this).removeClass(e.call(this,t,ot(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e){t=e.match(I)||[];while(i=this[l++])if(r=ot(i),n=1===i.nodeType&&(" "+r+" ").replace(rt," ")){a=0;while(o=t[a++])while(n.indexOf(" "+o+" ")>-1)n=n.replace(" "+o+" "," ");s=h.trim(n),r!==s&&i.setAttribute("class",s)}}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):h.isFunction(e)?this.each(function(i){h(this).toggleClass(e.call(this,i,ot(this),t),t)}):this.each(function(){var t,n,r,o;if("string"===i){n=0,r=h(this),o=e.match(I)||[];while(t=o[n++])r.hasClass(t)?r.removeClass(t):r.addClass(t)}else void 0!==e&&"boolean"!==i||(t=ot(this),t&&F.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":F.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;t=" "+e+" ";while(i=this[n++])if(1===i.nodeType&&(" "+ot(i)+" ").replace(rt," ").indexOf(t)>-1)return!0;return!1}});var at=/\r/g,st=/[\x20\t\r\n\f]+/g;h.fn.extend({val:function(e){var t,i,n,r=this[0];{if(arguments.length)return n=h.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=n?e.call(this,i,h(this).val()):e,null==r?r="":"number"==typeof r?r+="":h.isArray(r)&&(r=h.map(r,function(e){return null==e?"":e+""})),t=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=h.valHooks[r.type]||h.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(at,""):null==i?"":i)}}}),h.extend({valHooks:{option:{get:function(e){var t=h.find.attr(e,"value");return null!=t?t:h.trim(h.text(e)).replace(st," ")}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,a=o?null:[],s=o?r+1:n.length,l=0>r?s:o?r:0;s>l;l++)if(i=n[l],(i.selected||l===r)&&(u.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!h.nodeName(i.parentNode,"optgroup"))){if(t=h(i).val(),o)return t;a.push(t)}return a},set:function(e,t){var i,n,r=e.options,o=h.makeArray(t),a=r.length;while(a--)n=r[a],(n.selected=h.inArray(h.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(e,t){return h.isArray(t)?e.checked=h.inArray(h(e).val(),t)>-1:void 0}},u.checkOn||(h.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var lt=/^(?:focusinfocus|focusoutblur)$/;h.extend(h.event,{trigger:function(t,i,r,o){var a,s,l,d,u,f,p,m=[r||n],g=c.call(t,"type")?t.type:t,v=c.call(t,"namespace")?t.namespace.split("."):[];if(s=l=r=r||n,3!==r.nodeType&&8!==r.nodeType&&!lt.test(g+h.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),u=g.indexOf(":")<0&&"on"+g,t=t[h.expando]?t:new h.Event(g,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),i=null==i?[t]:h.makeArray(i,[t]),p=h.event.special[g]||{},o||!p.trigger||p.trigger.apply(r,i)!==!1)){if(!o&&!p.noBubble&&!h.isWindow(r)){for(d=p.delegateType||g,lt.test(d+g)||(s=s.parentNode);s;s=s.parentNode)m.push(s),l=s;l===(r.ownerDocument||n)&&m.push(l.defaultView||l.parentWindow||e)}a=0;while((s=m[a++])&&!t.isPropagationStopped())t.type=a>1?d:p.bindType||g,f=(F.get(s,"events")||{})[t.type]&&F.get(s,"handle"),f&&f.apply(s,i),f=u&&s[u],f&&f.apply&&M(s)&&(t.result=f.apply(s,i),t.result===!1&&t.preventDefault());return t.type=g,o||t.isDefaultPrevented()||p._default&&p._default.apply(m.pop(),i)!==!1||!M(r)||u&&h.isFunction(r[g])&&!h.isWindow(r)&&(l=r[u],l&&(r[u]=null),h.event.triggered=g,r[g](),h.event.triggered=void 0,l&&(r[u]=l)),t.result}},simulate:function(e,t,i){var n=h.extend(new h.Event,i,{type:e,isSimulated:!0});h.event.trigger(n,null,t)}}),h.fn.extend({trigger:function(e,t){return this.each(function(){h.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?h.event.trigger(e,t,i,!0):void 0}}),h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){h.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),h.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),u.focusin="onfocusin"in e,u.focusin||h.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){h.event.simulate(t,e.target,h.event.fix(e))};h.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=F.access(n,t);r||n.addEventListener(e,i,!0),F.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=F.access(n,t)-1;r?F.access(n,t,r):(n.removeEventListener(e,i,!0),F.remove(n,t))}}});var dt=e.location,ct=h.now(),ut=/\?/;h.parseJSON=function(e){return JSON.parse(e+"")},h.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||h.error("Invalid XML: "+t),i};var ft=/#.*$/,ht=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,mt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gt=/^(?:GET|HEAD)$/,vt=/^\/\//,yt={},bt={},wt="*/".concat("*"),xt=n.createElement("a");xt.href=dt.href;function Ct(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,o=t.toLowerCase().match(I)||[];if(h.isFunction(i))while(n=o[r++])"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function _t(e,t,i,n){var r={},o=e===bt;function a(s){var l;return r[s]=!0,h.each(e[s]||[],function(e,s){var d=s(t,i,n);return"string"!=typeof d||o||r[d]?o?!(l=d):void 0:(t.dataTypes.unshift(d),a(d),!1)}),l}return a(t.dataTypes[0])||!r["*"]&&a("*")}function Tt(e,t){var i,n,r=h.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&h.extend(!0,e,n),e}function Et(e,t,i){var n,r,o,a,s=e.contents,l=e.dataTypes;while("*"===l[0])l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function St(e,t,i,n){var r,o,a,s,l,d={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)d[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=d[l+" "+o]||d["* "+o],!a)for(r in d)if(s=r.split(" "),s[1]===o&&(a=d[l+" "+s[0]]||d["* "+s[0]])){a===!0?a=d[r]:d[r]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:dt.href,type:"GET",isLocal:mt.test(dt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":h.parseJSON,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Tt(Tt(e,h.ajaxSettings),t):Tt(h.ajaxSettings,e)},ajaxPrefilter:Ct(yt),ajaxTransport:Ct(bt),ajax:function(t,i){"object"==typeof t&&(i=t,t=void 0),i=i||{};var r,o,a,s,l,d,c,u,f=h.ajaxSetup({},i),p=f.context||f,m=f.context&&(p.nodeType||p.jquery)?h(p):h.event,g=h.Deferred(),v=h.Callbacks("once memory"),y=f.statusCode||{},b={},w={},x=0,C="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!s){s={};while(t=pt.exec(a))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return x||(e=w[i]=w[i]||e,b[e]=t),this},overrideMimeType:function(e){return x||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)y[t]=[y[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){var t=e||C;return r&&r.abort(t),T(0,t),this}};if(g.promise(_).complete=v.add,_.success=_.done,_.error=_.fail,f.url=((t||f.url||dt.href)+"").replace(ft,"").replace(vt,dt.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=h.trim(f.dataType||"*").toLowerCase().match(I)||[""],null==f.crossDomain){d=n.createElement("a");try{d.href=f.url,d.href=d.href,f.crossDomain=xt.protocol+"//"+xt.host!=d.protocol+"//"+d.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=h.param(f.data,f.traditional)),_t(yt,f,i,_),2===x)return _;c=h.event&&f.global,c&&0===h.active++&&h.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!gt.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(ut.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=ht.test(o)?o.replace(ht,"$1_="+ct++):o+(ut.test(o)?"&":"?")+"_="+ct++)),f.ifModified&&(h.lastModified[o]&&_.setRequestHeader("If-Modified-Since",h.lastModified[o]),h.etag[o]&&_.setRequestHeader("If-None-Match",h.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||i.contentType)&&_.setRequestHeader("Content-Type",f.contentType),_.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+wt+"; q=0.01":""):f.accepts["*"]);for(u in f.headers)_.setRequestHeader(u,f.headers[u]);if(f.beforeSend&&(f.beforeSend.call(p,_,f)===!1||2===x))return _.abort();C="abort";for(u in{success:1,error:1,complete:1})_[u](f[u]);if(r=_t(bt,f,i,_)){if(_.readyState=1,c&&m.trigger("ajaxSend",[_,f]),2===x)return _;f.async&&f.timeout>0&&(l=e.setTimeout(function(){_.abort("timeout")},f.timeout));try{x=1,r.send(b,T)}catch(e){if(!(2>x))throw e;T(-1,e)}}else T(-1,"No Transport");function T(t,i,n,s){var d,u,b,w,C,T=i;2!==x&&(x=2,l&&e.clearTimeout(l),r=void 0,a=s||"",_.readyState=t>0?4:0,d=t>=200&&300>t||304===t,n&&(w=Et(f,_,n)),w=St(f,w,_,d),d?(f.ifModified&&(C=_.getResponseHeader("Last-Modified"),C&&(h.lastModified[o]=C),C=_.getResponseHeader("etag"),C&&(h.etag[o]=C)),204===t||"HEAD"===f.type?T="nocontent":304===t?T="notmodified":(T=w.state,u=w.data,b=w.error,d=!b)):(b=T,!t&&T||(T="error",0>t&&(t=0))),_.status=t,_.statusText=(i||T)+"",d?g.resolveWith(p,[u,T,_]):g.rejectWith(p,[_,T,b]),_.statusCode(y),y=void 0,c&&m.trigger(d?"ajaxSuccess":"ajaxError",[_,f,d?u:b]),v.fireWith(p,[_,T]),c&&(m.trigger("ajaxComplete",[_,f]),--h.active||h.event.trigger("ajaxStop")))}return _},getJSON:function(e,t,i){return h.get(e,t,i,"json")},getScript:function(e,t){return h.get(e,void 0,t,"script")}}),h.each(["get","post"],function(e,t){h[t]=function(e,i,n,r){return h.isFunction(i)&&(r=r||n,n=i,i=void 0),h.ajax(h.extend({url:e,type:t,dataType:r,data:i,success:n},h.isPlainObject(e)&&e))}}),h._evalUrl=function(e){return h.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},h.fn.extend({wrapAll:function(e){var t;return h.isFunction(e)?this.each(function(t){h(this).wrapAll(e.call(this,t))}):(this[0]&&(t=h(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return h.isFunction(e)?this.each(function(t){h(this).wrapInner(e.call(this,t))}):this.each(function(){var t=h(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=h.isFunction(e);return this.each(function(i){h(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){h.nodeName(this,"body")||h(this).replaceWith(this.childNodes)}).end()}}),h.expr.filters.hidden=function(e){return!h.expr.filters.visible(e)},h.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var kt=/%20/g,Nt=/\[\]$/,Ut=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function It(e,t,i,n){var r;if(h.isArray(t))h.each(t,function(t,r){i||Nt.test(e)?n(e,r):It(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,i,n)});else if(i||"object"!==h.type(t))n(e,t);else for(r in t)It(e+"["+r+"]",t[r],i,n)}h.param=function(e,t){var i,n=[],r=function(e,t){t=h.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=h.ajaxSettings&&h.ajaxSettings.traditional),h.isArray(e)||e.jquery&&!h.isPlainObject(e))h.each(e,function(){r(this.name,this.value)});else for(i in e)It(i,e[i],t,r);return n.join("&").replace(kt,"+")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=h.prop(this,"elements");return e?h.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!h(this).is(":disabled")&&At.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!G.test(e))}).map(function(e,t){var i=h(this).val();return null==i?null:h.isArray(i)?h.map(i,function(e){return{name:t.name,value:e.replace(Ut,"\r\n")}}):{name:t.name,value:i.replace(Ut,"\r\n")}}).get()}}),h.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Dt={0:200,1223:204},Ot=h.ajaxSettings.xhr();u.cors=!!Ot&&"withCredentials"in Ot,u.ajax=Ot=!!Ot,h.ajaxTransport(function(t){var i,n;return u.cors||Ot&&!t.crossDomain?{send:function(r,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)s.setRequestHeader(a,r[a]);i=function(e){return function(){i&&(i=n=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Dt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=i(),n=s.onerror=i("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){i&&n()})},i=i("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}:void 0}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return h.globalEval(e),e}}}),h.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),h.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(r,o){t=h("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&o("error"===e.type?404:200,e.type)}),n.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Lt=[],Bt=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||h.expando+"_"+ct++;return this[e]=!0,e}}),h.ajaxPrefilter("json jsonp",function(t,i,n){var r,o,a,s=t.jsonp!==!1&&(Bt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=h.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Bt,"$1"+r):t.jsonp!==!1&&(t.url+=(ut.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||h.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},n.always(function(){void 0===o?h(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=i.jsonpCallback,Lt.push(r)),a&&h.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),h.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||n;var r=_.exec(e),o=!i&&[];return r?[t.createElement(r[1])]:(r=ie([e],t,o),o&&o.length&&h(o).remove(),h.merge([],r.childNodes))};var Mt=h.fn.load;h.fn.load=function(e,t,i){if("string"!=typeof e&&Mt)return Mt.apply(this,arguments);var n,r,o,a=this,s=e.indexOf(" ");return s>-1&&(n=h.trim(e.slice(s)),e=e.slice(0,s)),h.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&h.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(n?h("<div>").append(h.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){h.fn[t]=function(e){return this.on(t,e)}}),h.expr.filters.animated=function(e){return h.grep(h.timers,function(t){return e===t.elem}).length};function Pt(e){return h.isWindow(e)?e:9===e.nodeType&&e.defaultView}h.offset={setOffset:function(e,t,i){var n,r,o,a,s,l,d,c=h.css(e,"position"),u=h(e),f={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=h.css(e,"top"),l=h.css(e,"left"),d=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,d?(n=u.position(),a=n.top,r=n.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),h.isFunction(t)&&(t=t.call(e,i,h.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+r),"using"in t?t.using.call(e,f):u.css(f)}},h.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){h.offset.setOffset(this,e,t)});var t,i,n=this[0],r={top:0,left:0},o=n&&n.ownerDocument;if(o)return t=o.documentElement,h.contains(t,n)?(r=n.getBoundingClientRect(),i=Pt(o),{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===h.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),h.nodeName(e[0],"html")||(n=e.offset()),n.top+=h.css(e[0],"borderTopWidth",!0),n.left+=h.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-h.css(i,"marginTop",!0),left:t.left-n.left-h.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===h.css(e,"position"))e=e.offsetParent;return e||Re})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;h.fn[e]=function(n){return B(this,function(e,n,r){var o=Pt(e);return void 0===r?o?o[t]:e[n]:void(o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):e[n]=r)},e,n,arguments.length)}}),h.each(["top","left"],function(e,t){h.cssHooks[t]=Ie(u.pixelPosition,function(e,i){return i?(i=Ae(e,t),ke.test(i)?h(e).position()[t]+"px":i):void 0})}),h.each({Height:"height",Width:"width"},function(e,t){h.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){h.fn[n]=function(n,r){var o=arguments.length&&(i||"boolean"!=typeof n),a=i||(n===!0||r===!0?"margin":"border");return B(this,function(t,i,n){var r;return h.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?h.css(t,i,a):h.style(t,i,n,a)},t,o?n:void 0,o,null)}})}),h.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},size:function(){return this.length}}),h.fn.andSelf=h.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return h});var Ft=e.jQuery,Ht=e.$;return h.noConflict=function(t){return e.$===h&&(e.$=Ht),t&&e.jQuery===h&&(e.jQuery=Ft),h},t||(e.jQuery=e.$=h),h});if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",function(){i=!0});var r=function(){i||e(n).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof t&&r[t].call(i)})}var i='[data-dismiss="alert"]',n=function(t){e(t).on("click",i,this.close)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.close=function(t){function i(){a.detach().trigger("closed.bs.alert").remove()}var r=e(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var a=e("#"===o?[]:o);t&&t.preventDefault(),a.length||(a=r.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var r=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.button"),o="object"==typeof t&&t;r||n.data("bs.button",r=new i(this,o)),"toggle"==t?r.toggle():t&&r.setState(t)})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.7",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(t){var i="disabled",n=this.$element,r=n.is("input")?"val":"html",o=n.data();t+="Text",null==o.resetText&&n.data("resetText",n[r]()),setTimeout(e.proxy(function(){n[r](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},i.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=t,e.fn.button.Constructor=i,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=e(i.target).closest(".btn");t.call(n,"toggle"),e(i.target).is('input[type="radio"], input[type="checkbox"]')||(i.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.carousel"),o=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t),a="string"==typeof t?t:o.slide;r||n.data("bs.carousel",r=new i(this,o)),"number"==typeof t?r.to(t):a?r[a]():o.interval&&r.pause().cycle()})}var i=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},i.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},i.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t),n="prev"==e&&0===i||"next"==e&&i==this.$items.length-1;if(n&&!this.options.wrap)return t;var r="prev"==e?-1:1,o=(i+r)%this.$items.length;return this.$items.eq(o)},i.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",this.$items.eq(e))},i.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(t,n){var r=this.$element.find(".item.active"),o=n||this.getItemForDirection(t,r),a=this.interval,s="next"==t?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var d=o[0],c=e.Event("slide.bs.carousel",{relatedTarget:d,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=e(this.$indicators.children()[this.getItemIndex(o)]);u&&u.addClass("active")}var f=e.Event("slid.bs.carousel",{relatedTarget:d,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,r.addClass(s),o.addClass(s),r.one("bsTransitionEnd",function(){o.removeClass([t,s].join(" ")).addClass("active"),r.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(f)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(f)),a&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this};var r=function(i){var n,r=e(this),o=e(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=e.extend({},o.data(),r.data()),s=r.attr("data-slide-to");s&&(a.interval=!1),t.call(o,a),s&&o.data("bs.carousel").to(s),i.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var i=e(this);t.call(i,i.data())})})}(jQuery),+function(e){"use strict";function t(t){var i,n=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return e(n)}function i(t){return this.each(function(){var i=e(this),r=i.data("bs.collapse"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);!r&&o.toggle&&/show|hide/.test(t)&&(o.toggle=!1),r||i.data("bs.collapse",r=new n(this,o)),"string"==typeof t&&r[t]()})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.7",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(t=r.data("bs.collapse"),t&&t.transitioning))){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){r&&r.length&&(i.call(r,"hide"),t||r.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[a](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[i](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(n.TRANSITION_DURATION):r.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(i,n){var r=e(n);this.addAriaAndCollapsedClass(t(r),r)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var r=e.fn.collapse;e.fn.collapse=i,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var r=e(this);r.attr("data-target")||n.preventDefault();var o=t(r),a=o.data("bs.collapse"),s=a?"toggle":r.data();i.call(o,s)})}(jQuery),+function(e){"use strict";function t(t){var i=t.attr("data-target");i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(i);return n&&n.length?n:t.parent()}function i(i){i&&3===i.which||(e(r).remove(),e(o).each(function(){var n=e(this),r=t(n),o={relatedTarget:this};r.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&e.contains(r[0],i.target)||(r.trigger(i=e.Event("hide.bs.dropdown",o)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),r.removeClass("open").trigger(e.Event("hidden.bs.dropdown",o)))))}))}function n(t){return this.each(function(){var i=e(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new a(this)),"string"==typeof t&&n[t].call(i)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.7",a.prototype.toggle=function(n){var r=e(this);if(!r.is(".disabled, :disabled")){var o=t(r),a=o.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",i);var s={relatedTarget:this};if(o.trigger(n=e.Event("show.bs.dropdown",s)),n.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return!1}},a.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=e(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var r=t(n),a=r.hasClass("open");if(!a&&27!=i.which||a&&27==i.which)return 27==i.which&&r.find(o).trigger("focus"),n.trigger("click");var s=" li:not(.disabled):visible a",l=r.find(".dropdown-menu"+s);if(l.length){var d=l.index(i.target);38==i.which&&d>0&&d--,40==i.which&&d<l.length-1&&d++,~d||(d=0),l.eq(d).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=n,e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,n){return this.each(function(){var r=e(this),o=r.data("bs.modal"),a=e.extend({},i.DEFAULTS,r.data(),"object"==typeof t&&t);o||r.data("bs.modal",o=new i(this,a)),"string"==typeof t?o[t](n):a.show&&o.show(n)})}var i=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},i.prototype.show=function(t){var n=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),r&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});r?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&r;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){n.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=i,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=e(this),r=n.attr("href"),o=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),t.call(o,a,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.tooltip"),o="object"==typeof t&&t;!r&&/destroy|hide/.test(t)||(r||n.data("bs.tooltip",r=new i(this,o)),"string"==typeof t&&r[t]())})}var i=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(t,i,n){if(this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var a=r[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},i.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,function(e,n){i[e]!=n&&(t[e]=n)}),t},i.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},i.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),!i.isInStateTrue())return clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var n=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!n)return;var r=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,d=l.test(s);d&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),u=o[0].offsetWidth,f=o[0].offsetHeight;if(d){var h=s,p=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+f>p.bottom?"top":"top"==s&&c.top-f<p.top?"bottom":"right"==s&&c.right+u>p.width?"left":"left"==s&&c.left-u<p.left?"right":s,o.removeClass(h).addClass(s)}var m=this.getCalculatedOffset(s,c,u,f);this.applyPlacement(m,s);var g=function(){var e=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==e&&r.leave(r)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(i.TRANSITION_DURATION):g()}},i.prototype.applyPlacement=function(t,i){var n=this.tip(),r=n[0].offsetWidth,o=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),s=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top+=a,t.left+=s,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var l=n[0].offsetWidth,d=n[0].offsetHeight;"top"==i&&d!=o&&(t.top=t.top+o-d);var c=this.getViewportAdjustedDelta(i,t,l,d);c.left?t.left+=c.left:t.top+=c.top;var u=/top|bottom/.test(i),f=u?2*c.left-r+l:2*c.top-o+d,h=u?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(f,n[0][h],u)},i.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},i.prototype.hide=function(t){function n(){"in"!=r.hoverState&&o.detach(),r.$element&&r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),t&&t()}var r=this,o=e(this.$tip),a=e.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this},i.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(t){t=t||this.$element;var i=t[0],n="BODY"==i.tagName,r=i.getBoundingClientRect();null==r.width&&(r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=window.SVGElement&&i instanceof window.SVGElement,a=n?{top:0,left:0}:o?null:t.offset(),s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},l=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,s,l,a)},i.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},i.prototype.getViewportAdjustedDelta=function(e,t,i,n){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,l=t.top+o-a.scroll+n;s<a.top?r.top=a.top-s:l>a.top+a.height&&(r.top=a.top+a.height-l)}else{var d=t.left-o,c=t.left+o+i;d<a.left?r.left=a.left-d:c>a.right&&(r.left=a.left+a.width-c)}return r},i.prototype.getTitle=function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},i.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(t){var i=this;t&&(i=e(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var n=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=i,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.popover"),o="object"==typeof t&&t;!r&&/destroy|hide/.test(t)||(r||n.data("bs.popover",r=new i(this,o)),"string"==typeof t&&r[t]())})}var i=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.7",i.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=i,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){"use strict";function t(i,n){this.$body=e(document.body),this.$scrollElement=e(e(i).is(document.body)?window:i),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=e(this),r=n.data("bs.scrollspy"),o="object"==typeof i&&i;r||n.data("bs.scrollspy",r=new t(this,o)),"string"==typeof i&&r[i]()})}t.VERSION="3.3.7",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),r=t.data("target")||t.attr("href"),o=/^#./.test(r)&&e(r);return o&&o.length&&o.is(":visible")&&[[o[i]().top+n,r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),r=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),t>=n)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)a!=o[e]&&t>=r[e]&&(void 0===r[e+1]||t<r[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.tab");r||n.data("bs.tab",r=new i(this)),"string"==typeof t&&r[t]()})}var i=function(t){this.element=e(t)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=i.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(n);this.activate(t.closest("li"),i),this.activate(s,s.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},i.prototype.activate=function(t,n,r){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var a=n.find("> .active"),s=r&&e.support.transition&&(a.length&&a.hasClass("fade")||!!n.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),a.removeClass("in")};var n=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=i,e.fn.tab.noConflict=function(){return e.fn.tab=n,this};var r=function(i){i.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.affix"),o="object"==typeof t&&t;r||n.data("bs.affix",r=new i(this,o)),"string"==typeof t&&r[t]()})}var i=function(t,n){this.options=e.extend({},i.DEFAULTS,n),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.7",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(e,t,i,n){var r=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return r<i&&"top";if("bottom"==this.affixed)return null!=i?!(r+this.unpin<=o.top)&&"bottom":!(r+a<=e-n)&&"bottom";var s=null==this.affixed,l=s?r:o.top,d=s?a:t;return null!=i&&r<=i?"top":null!=n&&l+d>=e-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},i.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),n=this.options.offset,r=n.top,o=n.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=typeof n&&(o=r=n),"function"==typeof r&&(r=n.top(this.$element)),"function"==typeof o&&(o=n.bottom(this.$element));var s=this.getState(a,t,r,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),d=e.Event(l+".bs.affix");if(this.$element.trigger(d),d.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-t-o})}};var n=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=i,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var i=e(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),t.call(i,n)})})}(jQuery);define("bootstrap",["jquery"],function(){});(function(e){"use strict";var t;var i={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,deactivated:null,overdue:null,ready:null};var n={};var r=null;var o=0;var a={};var s=0;var l={};var d=function(){var e,t,i,n,r="ZeroClipboard.swf";if(!(document.currentScript&&(n=document.currentScript.src))){var o=document.getElementsByTagName("script");if("readyState"in o[0]){for(e=o.length;e--;){if(o[e].readyState==="interactive"&&(n=o[e].src)){break}}}else if(document.readyState==="loading"){n=o[o.length-1].src}else{for(e=o.length;e--;){i=o[e].src;if(!i){t=null;break}i=i.split("#")[0].split("?")[0];i=i.slice(0,i.lastIndexOf("/")+1);if(t==null){t=i}else if(t!==i){t=null;break}}if(t!==null){n=t}}}if(n){n=n.split("#")[0].split("?")[0];r=n.slice(0,n.lastIndexOf("/")+1)+r}return r}();var c=function(){var e=/\-([a-z])/g,t=function(e,t){return t.toUpperCase()};return function(i){return i.replace(e,t)}}();var u=function(t,i){var n,r,o;if(e.getComputedStyle){n=e.getComputedStyle(t,null).getPropertyValue(i)}else{r=c(i);if(t.currentStyle){n=t.currentStyle[r]}else{n=t.style[r]}}if(i==="cursor"){if(!n||n==="auto"){o=t.tagName.toLowerCase();if(o==="a"){return"pointer"}}}return n};var f=function(t){if(!t){t=e.event}var i;if(this!==e){i=this}else if(t.target){i=t.target}else if(t.srcElement){i=t.srcElement}M.activate(i)};var h=function(e,t,i){if(!e||e.nodeType!==1){return}if(e.addEventListener){e.addEventListener(t,i,false)}else if(e.attachEvent){e.attachEvent("on"+t,i)}};var p=function(e,t,i){if(!e||e.nodeType!==1){return}if(e.removeEventListener){e.removeEventListener(t,i,false)}else if(e.detachEvent){e.detachEvent("on"+t,i)}};var m=function(e,t){if(!e||e.nodeType!==1){return e}if(e.classList){if(!e.classList.contains(t)){e.classList.add(t)}return e}if(t&&typeof t==="string"){var i=(t||"").split(/\s+/);if(e.nodeType===1){if(!e.className){e.className=t}else{var n=" "+e.className+" ",r=e.className;for(var o=0,a=i.length;o<a;o++){if(n.indexOf(" "+i[o]+" ")<0){r+=" "+i[o]}}e.className=r.replace(/^\s+|\s+$/g,"")}}}return e};var g=function(e,t){if(!e||e.nodeType!==1){return e}if(e.classList){if(e.classList.contains(t)){e.classList.remove(t)}return e}if(t&&typeof t==="string"||t===undefined){var i=(t||"").split(/\s+/);if(e.nodeType===1&&e.className){if(t){var n=(" "+e.className+" ").replace(/[\n\t]/g," ");for(var r=0,o=i.length;r<o;r++){n=n.replace(" "+i[r]+" "," ")}e.className=n.replace(/^\s+|\s+$/g,"")}else{e.className=""}}}return e};var v=function(){var e,t,i,n=1;if(typeof document.body.getBoundingClientRect==="function"){e=document.body.getBoundingClientRect();t=e.right-e.left;i=document.body.offsetWidth;n=Math.round(t/i*100)/100}return n};var y=function(t,i){var n={left:0,top:0,width:0,height:0,zIndex:T(i)-1};if(t.getBoundingClientRect){var r=t.getBoundingClientRect();var o,a,s;if("pageXOffset"in e&&"pageYOffset"in e){o=e.pageXOffset;a=e.pageYOffset}else{s=v();o=Math.round(document.documentElement.scrollLeft/s);a=Math.round(document.documentElement.scrollTop/s)}var l=document.documentElement.clientLeft||0;var d=document.documentElement.clientTop||0;n.left=r.left+o-l;n.top=r.top+a-d;n.width="width"in r?r.width:r.right-r.left;n.height="height"in r?r.height:r.bottom-r.top}return n};var b=function(e,t){var i=t==null||t&&t.cacheBust===true;if(i){return(e.indexOf("?")===-1?"?":"&")+"noCache="+(new Date).getTime()}else{return""}};var w=function(t){var i,n,r,o,a="",s=[];if(t.trustedDomains){if(typeof t.trustedDomains==="string"){o=[t.trustedDomains]}else if(typeof t.trustedDomains==="object"&&"length"in t.trustedDomains){o=t.trustedDomains}}if(o&&o.length){for(i=0,n=o.length;i<n;i++){if(o.hasOwnProperty(i)&&o[i]&&typeof o[i]==="string"){r=S(o[i]);if(!r){continue}if(r==="*"){s=[r];break}s.push.apply(s,[r,"//"+r,e.location.protocol+"//"+r])}}}if(s.length){a+="trustedOrigins="+encodeURIComponent(s.join(","))}if(t.forceEnhancedClipboard===true){a+=(a?"&":"")+"forceEnhancedClipboard=true"}return a};var x=function(e,t,i){if(typeof t.indexOf==="function"){return t.indexOf(e,i)}var n,r=t.length;if(typeof i==="undefined"){i=0}else if(i<0){i=r+i}for(n=i;n<r;n++){if(t.hasOwnProperty(n)&&t[n]===e){return n}}return-1};var C=function(e){if(typeof e==="string"){throw new TypeError("ZeroClipboard doesn't accept query strings.")}return typeof e.length!=="number"?[e]:e};var _=function(t,i,n,r){if(r){e.setTimeout(function(){t.apply(i,n)},0)}else{t.apply(i,n)}};var T=function(e){var t,i;if(e){if(typeof e==="number"&&e>0){t=e}else if(typeof e==="string"&&(i=parseInt(e,10))&&!isNaN(i)&&i>0){t=i}}if(!t){if(typeof H.zIndex==="number"&&H.zIndex>0){t=H.zIndex}else if(typeof H.zIndex==="string"&&(i=parseInt(H.zIndex,10))&&!isNaN(i)&&i>0){t=i}}return t||0};var E=function(){var e,t,i,n,r,o,a=arguments[0]||{};for(e=1,t=arguments.length;e<t;e++){if((i=arguments[e])!=null){for(n in i){if(i.hasOwnProperty(n)){r=a[n];o=i[n];if(a===o){continue}if(o!==undefined){a[n]=o}}}}}return a};var S=function(e){if(e==null||e===""){return null}e=e.replace(/^\s+|\s+$/g,"");if(e===""){return null}var t=e.indexOf("//");e=t===-1?e:e.slice(t+2);var i=e.indexOf("/");e=i===-1?e:t===-1||i===0?null:e.slice(0,i);if(e&&e.slice(-4).toLowerCase()===".swf"){return null}return e||null};var k=function(){var e=function(e,t){var i,n,r;if(e==null||t[0]==="*"){return}if(typeof e==="string"){e=[e]}if(!(typeof e==="object"&&typeof e.length==="number")){return}for(i=0,n=e.length;i<n;i++){if(e.hasOwnProperty(i)&&(r=S(e[i]))){if(r==="*"){t.length=0;t.push("*");break}if(x(r,t)===-1){t.push(r)}}}};return function(t,i){var n=S(i.swfPath);if(n===null){n=t}var r=[];e(i.trustedOrigins,r);e(i.trustedDomains,r);var o=r.length;if(o>0){if(o===1&&r[0]==="*"){return"always"}if(x(t,r)!==-1){if(o===1&&t===n){return"sameDomain"}return"always"}}return"never"}}();var N=function(e){if(e==null){return[]}if(Object.keys){return Object.keys(e)}var t=[];for(var i in e){if(e.hasOwnProperty(i)){t.push(i)}}return t};var U=function(e){if(e){for(var t in e){if(e.hasOwnProperty(t)){delete e[t]}}}return e};var R=function(){try{return document.activeElement}catch(e){}return null};var A=function(e,t){var i={};for(var n=0,r=t.length;n<r;n++){if(t[n]in e){i[t[n]]=e[t[n]]}}return i};var I=function(e,t){var i={};for(var n in e){if(x(n,t)===-1){i[n]=e[n]}}return i};var D=function(e){var t={},i={};if(!(typeof e==="object"&&e)){return}for(var n in e){if(n&&e.hasOwnProperty(n)&&typeof e[n]==="string"&&e[n]){switch(n.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[n];i.text=n;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[n];i.html=n;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[n];i.rtf=n;break;default:break}}}return{data:t,formatMap:i}};var O=function(e,t){if(!(typeof e==="object"&&e&&typeof t==="object"&&t)){return e}var i={};for(var n in e){if(e.hasOwnProperty(n)){if(n!=="success"&&n!=="data"){i[n]=e[n];continue}i[n]={};var r=e[n];for(var o in r){if(o&&r.hasOwnProperty(o)&&t.hasOwnProperty(o)){i[n][t[o]]=r[o]}}}}return i};var L=function(e){return function(t){return e.call(t,0)}}(e.Array.prototype.slice);var B=function(){var e,t,n,r=false,o=false,a=false,s="";function l(e){var t=e.match(/[\d]+/g);t.length=3;return t.join(".")}function d(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||e.slice(-13)==="chrome.plugin")}function c(e){if(e){r=true;if(e.version){s=l(e.version)}if(!s&&e.description){s=l(e.description)}if(e.filename){a=d(e.filename)}}}if(navigator.plugins&&navigator.plugins.length){e=navigator.plugins["Shockwave Flash"];c(e);if(navigator.plugins["Shockwave Flash 2.0"]){r=true;s="2.0.0.11"}}else if(navigator.mimeTypes&&navigator.mimeTypes.length){n=navigator.mimeTypes["application/x-shockwave-flash"];e=n&&n.enabledPlugin;c(e)}else if(typeof ActiveXObject!=="undefined"){o=true;try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");r=true;s=l(t.GetVariable("$version"))}catch(e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");r=true;s="6.0.21"}catch(e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");r=true;s=l(t.GetVariable("$version"))}catch(e){o=false}}}}i.disabled=r!==true;i.outdated=s&&parseFloat(s)<11;i.version=s||"0.0.0";i.pluginType=a?"pepper":o?"activex":r?"netscape":"unknown"};B();var M=function(e){if(!(this instanceof M)){return new M(e)}this.id=""+o++;a[this.id]={instance:this,elements:[],handlers:{}};if(e){this.clip(e)}if(typeof i.ready!=="boolean"){i.ready=false}if(!M.isFlashUnusable()&&i.bridge===null){var t=this;var n=H.flashLoadTimeout;if(typeof n==="number"&&n>=0){setTimeout(function(){if(typeof i.deactivated!=="boolean"){i.deactivated=true}if(i.deactivated===true){M.emit({type:"error",name:"flash-deactivated",client:t})}},n)}i.overdue=false;$()}};M.prototype.setText=function(e){M.setData("text/plain",e);return this};M.prototype.setHtml=function(e){M.setData("text/html",e);return this};M.prototype.setRichText=function(e){M.setData("application/rtf",e);return this};M.prototype.setData=function(){M.setData.apply(M,L(arguments));return this};M.prototype.clearData=function(){M.clearData.apply(M,L(arguments));return this};M.prototype.setSize=function(e,t){W(e,t);return this};var P=function(e){if(i.ready===true&&i.bridge&&typeof i.bridge.setHandCursor==="function"){i.bridge.setHandCursor(e)}else{i.ready=false}};M.prototype.destroy=function(){this.unclip();this.off();delete a[this.id]};var F=function(){var e,t,i,n=[],r=N(a);for(e=0,t=r.length;e<t;e++){i=a[r[e]].instance;if(i&&i instanceof M){n.push(i)}}return n};M.version="2.0.0-beta.5";var H={swfPath:d,trustedDomains:e.location.host?[e.location.host]:[],cacheBust:true,forceHandCursor:false,forceEnhancedClipboard:false,zIndex:999999999,debug:false,title:null,autoActivate:true,flashLoadTimeout:3e4};M.isFlashUnusable=function(){return!!(i.disabled||i.outdated||i.unavailable||i.deactivated)};M.config=function(e){if(typeof e==="object"&&e!==null){E(H,e)}if(typeof e==="string"&&e){if(H.hasOwnProperty(e)){return H[e]}return}var t={};for(var i in H){if(H.hasOwnProperty(i)){if(typeof H[i]==="object"&&H[i]!==null){if("length"in H[i]){t[i]=H[i].slice(0)}else{t[i]=E({},H[i])}}else{t[i]=H[i]}}}return t};M.destroy=function(){M.deactivate();for(var e in a){if(a.hasOwnProperty(e)&&a[e]){var t=a[e].instance;if(t&&typeof t.destroy==="function"){t.destroy()}}}var n=i.bridge;if(n){var r=q(n);if(r){if(i.pluginType==="activex"&&"readyState"in n){n.style.display="none";(function e(){if(n.readyState===4){for(var t in n){if(typeof n[t]==="function"){n[t]=null}}n.parentNode.removeChild(n);if(r.parentNode){r.parentNode.removeChild(r)}}else{setTimeout(e,10)}})()}else{n.parentNode.removeChild(n);if(r.parentNode){r.parentNode.removeChild(r)}}}i.ready=null;i.bridge=null;i.deactivated=null}M.clearData()};M.activate=function(e){if(t){g(t,H.hoverClass);g(t,H.activeClass)}t=e;m(e,H.hoverClass);z();var n=H.title||e.getAttribute("title");if(n){var r=q(i.bridge);if(r){r.setAttribute("title",n)}}var o=H.forceHandCursor===true||u(e,"cursor")==="pointer";P(o)};M.deactivate=function(){var e=q(i.bridge);if(e){e.removeAttribute("title");e.style.left="0px";e.style.top="-9999px";W(1,1)}if(t){g(t,H.hoverClass);g(t,H.activeClass);t=null}};M.state=function(){return{browser:A(e.navigator,["userAgent","platform","appName"]),flash:I(i,["bridge"]),zeroclipboard:{version:M.version,config:M.config()}}};M.setData=function(e,t){var i;if(typeof e==="object"&&e&&typeof t==="undefined"){i=e;M.clearData()}else if(typeof e==="string"&&e){i={};i[e]=t}else{return}for(var r in i){if(r&&i.hasOwnProperty(r)&&typeof i[r]==="string"&&i[r]){n[r]=i[r]}}};M.clearData=function(e){if(typeof e==="undefined"){U(n);r=null}else if(typeof e==="string"&&n.hasOwnProperty(e)){delete n[e]}};var $=function(){var t,n;var r=document.getElementById("global-zeroclipboard-html-bridge");if(!r){var o=k(e.location.host,H);var a=o==="never"?"none":"all";var s=w(H);var l=H.swfPath+b(H.swfPath,H);r=j();var d=document.createElement("div");r.appendChild(d);document.body.appendChild(r);var c=document.createElement("div");var u=i.pluginType==="activex";c.innerHTML='<object id="global-zeroclipboard-flash-bridge" name="global-zeroclipboard-flash-bridge" '+'width="100%" height="100%" '+(u?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(u?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+o+'"/>'+'<param name="allowNetworking" value="'+a+'"/>'+'<param name="menu" value="false"/>'+'<param name="wmode" value="transparent"/>'+'<param name="flashvars" value="'+s+'"/>'+"</object>";t=c.firstChild;c=null;t.ZeroClipboard=M;r.replaceChild(t,d)}if(!t){t=document["global-zeroclipboard-flash-bridge"];if(t&&(n=t.length)){t=t[n-1]}if(!t){t=r.firstChild}}i.bridge=t||null};var j=function(){var e=document.createElement("div");e.id="global-zeroclipboard-html-bridge";e.className="global-zeroclipboard-container";e.style.position="absolute";e.style.left="0px";e.style.top="-9999px";e.style.width="1px";e.style.height="1px";e.style.zIndex=""+T(H.zIndex);return e};var q=function(e){var t=e&&e.parentNode;while(t&&t.nodeName==="OBJECT"&&t.parentNode){t=t.parentNode}return t||null};var z=function(){if(t){var e=y(t,H.zIndex);var n=q(i.bridge);if(n){n.style.top=e.top+"px";n.style.left=e.left+"px";n.style.width=e.width+"px";n.style.height=e.height+"px";n.style.zIndex=e.zIndex+1}W(e.width,e.height)}};var W=function(e,t){var n=q(i.bridge);if(n){n.style.width=e+"px";n.style.height=t+"px"}};M.emit=function(t){var o,a,s,l,d,c,u,f,h;if(typeof t==="string"&&t){o=t}if(typeof t==="object"&&t&&typeof t.type==="string"&&t.type){o=t.type;a=t}if(!o){return}t=X(o,a);K(t);if(t.type==="ready"&&i.overdue===true){return M.emit({type:"error",name:"flash-overdue"})}s=!/^(before)?copy$/.test(t.type);if(t.client){V.call(t.client,t,s)}else{l=t.target&&t.target!==e&&H.autoActivate===true?Z(t.target):F();for(d=0,c=l.length;d<c;d++){u=E({},t,{client:l[d]});V.call(l[d],u,s)}}if(t.type==="copy"){h=D(n);f=h.data;r=h.formatMap}return f};var V=function(t,i){var n=a[this.id]&&a[this.id].handlers[t.type];if(n&&n.length){var r,o,s,l,d=this;for(r=0,o=n.length;r<o;r++){s=n[r];l=d;if(typeof s==="string"&&typeof e[s]==="function"){s=e[s]}if(typeof s==="object"&&s&&typeof s.handleEvent==="function"){l=s;s=s.handleEvent}if(typeof s==="function"){_(s,l,[t],i)}}}return this};var Y={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}};var X=function(e,n){if(!(e||n&&n.type)){return}n=n||{};e=(e||n.type).toLowerCase();E(n,{type:e,target:n.target||t||null,relatedTarget:n.relatedTarget||null,currentTarget:i&&i.bridge||null});var o=Y[n.type];if(n.type==="error"&&n.name&&o){o=o[n.name]}if(o){n.message=o}if(n.type==="ready"){E(n,{target:null,version:i.version})}if(n.type==="error"){n.target=null;if(/^flash-(outdated|unavailable|deactivated|overdue)$/.test(n.name)){E(n,{version:i.version,minimumVersion:"11.0.0"})}}if(n.type==="copy"){n.clipboardData={setData:M.setData,clearData:M.clearData}}if(n.type==="aftercopy"){n=O(n,r)}if(n.target&&!n.relatedTarget){n.relatedTarget=G(n.target)}return n};var G=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?document.getElementById(t):null};var K=function(e){var r=e.target||t;switch(e.type){case"error":if(x(e.name,["flash-disabled","flash-outdated","flash-deactivated","flash-overdue"])){E(i,{disabled:e.name==="flash-disabled",outdated:e.name==="flash-outdated",unavailable:e.name==="flash-unavailable",deactivated:e.name==="flash-deactivated",overdue:e.name==="flash-overdue",ready:false})}break;case"ready":var o=i.deactivated===true;E(i,{disabled:false,outdated:false,unavailable:false,deactivated:false,overdue:o,ready:!o});break;case"copy":var a,s,l=e.relatedTarget;if(!(n["text/html"]||n["text/plain"])&&l&&(s=l.value||l.outerHTML||l.innerHTML)&&(a=l.value||l.textContent||l.innerText)){e.clipboardData.clearData();e.clipboardData.setData("text/plain",a);if(s!==a){e.clipboardData.setData("text/html",s)}}else if(!n["text/plain"]&&e.target&&(a=e.target.getAttribute("data-clipboard-text"))){e.clipboardData.clearData();e.clipboardData.setData("text/plain",a)}break;case"aftercopy":M.clearData();if(r&&r!==R()&&r.focus){r.focus()}break;case"mouseover":m(r,H.hoverClass);break;case"mouseout":if(H.autoActivate===true){M.deactivate()}break;case"mousedown":m(r,H.activeClass);break;case"mouseup":g(r,H.activeClass);break}};M.prototype.on=function(e,t){var n,r,o,s={},l=a[this.id]&&a[this.id].handlers;if(typeof e==="string"&&e){o=e.toLowerCase().split(/\s+/)}else if(typeof e==="object"&&e&&typeof t==="undefined"){for(n in e){if(e.hasOwnProperty(n)&&typeof n==="string"&&n&&typeof e[n]==="function"){this.on(n,e[n])}}}if(o&&o.length){for(n=0,r=o.length;n<r;n++){e=o[n].replace(/^on/,"");s[e]=true;if(!l[e]){l[e]=[]}l[e].push(t)}if(s.ready&&i.ready){M.emit({type:"ready",client:this})}if(s.error){var d=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,r=d.length;n<r;n++){if(i[d[n]]){M.emit({type:"error",name:"flash-"+d[n],client:this});break}}}}return this};M.prototype.off=function(e,t){var i,n,r,o,s,l=a[this.id]&&a[this.id].handlers;if(arguments.length===0){o=N(l)}else if(typeof e==="string"&&e){o=e.split(/\s+/)}else if(typeof e==="object"&&e&&typeof t==="undefined"){for(i in e){if(e.hasOwnProperty(i)&&typeof i==="string"&&i&&typeof e[i]==="function"){this.off(i,e[i])}}}if(o&&o.length){for(i=0,n=o.length;i<n;i++){e=o[i].toLowerCase().replace(/^on/,"");s=l[e];if(s&&s.length){if(t){r=x(t,s);while(r!==-1){s.splice(r,1);r=x(t,s,r)}}else{l[e].length=0}}}}return this};M.prototype.handlers=function(e){var t,i=null,n=a[this.id]&&a[this.id].handlers;if(n){if(typeof e==="string"&&e){return n[e]?n[e].slice(0):null}i={};for(t in n){if(n.hasOwnProperty(t)&&n[t]){i[t]=n[t].slice(0)}}}return i};M.prototype.clip=function(e){e=C(e);for(var t=0;t<e.length;t++){if(e.hasOwnProperty(t)&&e[t]&&e[t].nodeType===1){if(!e[t].zcClippingId){e[t].zcClippingId="zcClippingId_"+s++;l[e[t].zcClippingId]=[this.id];if(H.autoActivate===true){h(e[t],"mouseover",f)}}else if(x(this.id,l[e[t].zcClippingId])===-1){l[e[t].zcClippingId].push(this.id)}var i=a[this.id].elements;if(x(e[t],i)===-1){i.push(e[t])}}}return this};M.prototype.unclip=function(e){var t=a[this.id];if(!t){return this}var i=t.elements;var n;if(typeof e==="undefined"){e=i.slice(0)}else{e=C(e)}for(var r=e.length;r--;){if(e.hasOwnProperty(r)&&e[r]&&e[r].nodeType===1){n=0;while((n=x(e[r],i,n))!==-1){i.splice(n,1)}var o=l[e[r].zcClippingId];if(o){n=0;while((n=x(this.id,o,n))!==-1){o.splice(n,1)}if(o.length===0){if(H.autoActivate===true){p(e[r],"mouseover",f)}delete e[r].zcClippingId}}}}return this};M.prototype.elements=function(){var e=a[this.id];return e&&e.elements?e.elements.slice(0):[]};var Z=function(e){var t,i,n,r,o,s=[];if(e&&e.nodeType===1&&(t=e.zcClippingId)&&l.hasOwnProperty(t)){i=l[t];if(i&&i.length){for(n=0,r=i.length;n<r;n++){o=a[i[n]].instance;if(o&&o instanceof M){s.push(o)}}}}return s};H.hoverClass="zeroclipboard-is-hover";H.activeClass="zeroclipboard-is-active";if(typeof define==="function"&&define.amd){define("zeroclipboard",[],function(){return M})}else if(typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports){module.exports=M}else{e.ZeroClipboard=M}})(function(){return this}());(function(){window.UEDITOR_HOME_URL="/assets/libs/ueditor/";var e=window.UEDITOR_HOME_URL||t();window.UEDITOR_CONFIG={UEDITOR_HOME_URL:e,serverUrl:e+"php/controller.php",toolbars:[["fullscreen","source","|","undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","anchor","|","imagenone","imageleft","imageright","imagecenter","|","simpleupload","insertimage","emotion","scrawl","attachment","map","gmap","insertframe","insertcode","webapp","pagebreak","template","background","|","horizontal","date","time","spechars","snapscreen","wordimage","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","charts","|","print","preview","searchreplace","drafts","help"]],xssFilterRules:true,inputXssFilter:true,outputXssFilter:true,whitList:{a:["target","href","title","class","style"],abbr:["title","class","style"],address:["class","style"],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src","class","style"],b:["class","style"],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite","class","style"],br:[],caption:["class","style"],center:[],cite:[],code:["class","style"],col:["align","valign","span","width","class","style"],colgroup:["align","valign","span","width","class","style"],dd:["class","style"],del:["datetime"],details:["open"],div:["class","style"],dl:["class","style"],dt:["class","style"],em:["class","style"],font:["color","size","face"],footer:[],h1:["class","style"],h2:["class","style"],h3:["class","style"],h4:["class","style"],h5:["class","style"],h6:["class","style"],header:[],hr:[],i:["class","style"],img:["src","alt","title","width","height","id","_src","loadingclass","class","data-latex"],ins:["datetime"],li:["class","style"],mark:[],nav:[],ol:["class","style"],p:["class","style"],pre:["class","style"],s:[],section:[],small:[],span:["class","style"],sub:["class","style"],sup:["class","style"],strong:["class","style"],table:["width","border","align","valign","class","style"],tbody:["align","valign","class","style"],td:["width","rowspan","colspan","align","valign","class","style"],tfoot:["align","valign","class","style"],th:["width","rowspan","colspan","align","valign","class","style"],thead:["align","valign","class","style"],tr:["rowspan","align","valign","class","style"],tt:[],u:[],ul:["class","style"],video:["autoplay","controls","loop","preload","src","height","width","class","style"]}};function t(e,t){return n(e||self.document.URL||self.location.href,t||i())}function i(){var e=document.getElementsByTagName("script");return e[e.length-1].src}function n(e,t){var i=t;if(/^(\/|\\\\)/.test(t)){i=/^.+?\w(\/|\\\\)/.exec(e)[0]+t.replace(/^(\/|\\\\)/,"")}else if(!/^[a-z]+:/i.test(t)){e=e.split("#")[0].split("?")[0].replace(/[^\\\/]+$/,"");i=e+""+t}return r(i)}function r(e){var t=/^[a-z]+:\/\//.exec(e)[0],i=null,n=[];e=e.replace(t,"").split("?")[0].split("#")[0];e=e.replace(/\\/g,"/").split(/\//);e[e.length-1]="";while(e.length){if((i=e.shift())===".."){n.pop()}else if(i!=="."){n.push(i)}}return t+n.join("/")}window.UE={getUEBasePath:t}})();define("ueditorconfig",function(){});(function(){UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu;window.UE=baidu.editor=window.UE||{};UE.plugins={};UE.commands={};UE.instants={};UE.I18N={};UE._customizeUI={};UE.version="1.4.3";var dom=UE.dom={};var browser=UE.browser=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,i={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(e),opera:!!t&&t.version,webkit:e.indexOf(" applewebkit/")>-1,mac:e.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat"};i.gecko=navigator.product=="Gecko"&&!i.webkit&&!i.opera&&!i.ie;var n=0;if(i.ie){var r=e.match(/(?:msie\s([\w.]+))/);var o=e.match(/(?:trident.*rv:([\w.]+))/);if(r&&o&&r[1]&&o[1]){n=Math.max(r[1]*1,o[1]*1)}else if(r&&r[1]){n=r[1]*1}else if(o&&o[1]){n=o[1]*1}else{n=0}i.ie11Compat=document.documentMode==11;i.ie9Compat=document.documentMode==9;i.ie8=!!document.documentMode;i.ie8Compat=document.documentMode==8;i.ie7Compat=n==7&&!document.documentMode||document.documentMode==7;i.ie6Compat=n<7||i.quirks;i.ie9above=n>8;i.ie9below=n<9;i.ie11above=n>10;i.ie11below=n<11}if(i.gecko){var a=e.match(/rv:([\d\.]+)/);if(a){a=a[1].split(".");n=a[0]*1e4+(a[1]||0)*100+(a[2]||0)*1}}if(/chrome\/(\d+\.\d)/i.test(e)){i.chrome=+RegExp["$1"]}if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)){i.safari=+(RegExp["$1"]||RegExp["$2"])}if(i.opera)n=parseFloat(t.version());if(i.webkit)n=parseFloat(e.match(/ applewebkit\/(\d+)/)[1]);i.version=n;i.isCompatible=!i.mobile&&(i.ie&&n>=6||i.gecko&&n>=10801||i.opera&&n>=9.5||i.air&&n>=1||i.webkit&&n>=522||false);return i}();var ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera;var utils=UE.utils={each:function(e,t,i){if(e==null)return;if(e.length===+e.length){for(var n=0,r=e.length;n<r;n++){if(t.call(i,e[n],n,e)===false)return false}}else{for(var o in e){if(e.hasOwnProperty(o)){if(t.call(i,e[o],o,e)===false)return false}}}},makeInstance:function(e){var t=new Function;t.prototype=e;e=new t;t.prototype=null;return e},extend:function(e,t,i){if(t){for(var n in t){if(!i||!e.hasOwnProperty(n)){e[n]=t[n]}}}return e},extend2:function(e){var t=arguments;for(var i=1;i<t.length;i++){var n=t[i];for(var r in n){if(!e.hasOwnProperty(r)){e[r]=n[r]}}}return e},inherits:function(e,t){var i=e.prototype,n=utils.makeInstance(t.prototype);utils.extend(n,i,true);e.prototype=n;return n.constructor=e},bind:function(e,t){return function(){return e.apply(t,arguments)}},defer:function(e,t,i){var n;return function(){if(i){clearTimeout(n)}n=setTimeout(e,t)}},indexOf:function(e,t,i){var n=-1;i=this.isNumber(i)?i:0;this.each(e,function(e,r){if(r>=i&&e===t){n=r;return false}});return n},removeItem:function(e,t){for(var i=0,n=e.length;i<n;i++){if(e[i]===t){e.splice(i,1);i--}}},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(e){if(!e)return{};e=utils.isArray(e)?e:e.split(",");for(var t=0,i,n={};i=e[t++];){n[i.toUpperCase()]=n[i]=1}return n},unhtml:function(e,t){return e?e.replace(t||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(e,t){if(t){return e}else{return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[e]}}):""},unhtmlForUrl:function(e,t){return e?e.replace(t||/[<">']/g,function(e){return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[e]}):""},html:function(e){return e?e.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(e){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[e]}):""},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t={float:e.cssFloat!=undefined?"cssFloat":e.styleFloat!=undefined?"styleFloat":"float"};return function(e){return t[e]||(t[e]=e.toLowerCase().replace(/-./g,function(e){return e.charAt(1).toUpperCase()}))}}(),loadFile:function(){var e=[];function t(t,i){try{for(var n=0,r;r=e[n++];){if(r.doc===t&&r.url==(i.src||i.href)){return r}}}catch(e){return null}}return function(i,n,r){var o=t(i,n);if(o){if(o.ready){r&&r()}else{o.funs.push(r)}return}e.push({doc:i,url:n.src||n.href,funs:[r]});if(!i.body){var a=[];for(var s in n){if(s=="tag")continue;a.push(s+'="'+n[s]+'"')}i.write("<"+n.tag+" "+a.join(" ")+" ></"+n.tag+">");return}if(n.id&&i.getElementById(n.id)){return}var l=i.createElement(n.tag);delete n.tag;for(var s in n){l.setAttribute(s,n[s])}l.onload=l.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){o=t(i,n);if(o.funs.length>0){o.ready=1;for(var e;e=o.funs.pop();){e()}}l.onload=l.onreadystatechange=null}};l.onerror=function(){throw Error("The load "+(n.href||n.src)+" fails,check the url settings of file ueditor.config.js ")};i.getElementsByTagName("head")[0].appendChild(l)}}(),isEmptyObject:function(e){if(e==null)return true;if(this.isArray(e)||this.isString(e))return e.length===0;for(var t in e)if(e.hasOwnProperty(t))return false;return true},fixColor:function(e,t){if(/color/i.test(e)&&/rgba?/.test(t)){var i=t.split(",");if(i.length>3)return"";t="#";for(var n=0,r;r=i[n++];){r=parseInt(r.replace(/[^\d]/gi,""),10).toString(16);t+=r.length==1?"0"+r:r}t=t.toUpperCase()}return t},optCss:function(e){var t,i,n;e=e.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(e,n,r,o){if(o.split(" ").length==1){switch(n){case"padding":!t&&(t={});t[r]=o;return"";case"margin":!i&&(i={});i[r]=o;return"";case"border":return o=="initial"?"":e}}return e});function r(e,t){if(!e){return""}var i=e.top,n=e.bottom,r=e.left,o=e.right,a="";if(!i||!r||!n||!o){for(var s in e){a+=";"+t+"-"+s+":"+e[s]+";"}}else{a+=";"+t+":"+(i==n&&n==r&&r==o?i:i==n&&r==o?i+" "+r:r==o?i+" "+r+" "+n:i+" "+o+" "+n+" "+r)+";"}return a}e+=r(t,"padding")+r(i,"margin");return e.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(e,t){return t?t+";;":";"})},clone:function(e,t){var i;t=t||{};for(var n in e){if(e.hasOwnProperty(n)){i=e[n];if(typeof i=="object"){t[n]=utils.isArray(i)?[]:{};utils.clone(e[n],t[n])}else{t[n]=i}}}return t},transUnitToPx:function(e){if(!/(pt|cm)/.test(e)){return e}var t;e.replace(/([\d.]+)(\w+)/,function(i,n,r){e=n;t=r});switch(t){case"cm":e=parseFloat(e)*25;break;case"pt":e=Math.round(parseFloat(e)*96/72)}return e+(e?"px":"")},domReady:function(){var e=[];function t(t){t.isReady=true;for(var i;i=e.pop();i()){}}return function(i,n){n=n||window;var r=n.document;i&&e.push(i);if(r.readyState==="complete"){t(r)}else{r.isReady&&t(r);if(browser.ie&&browser.version!=11){(function(){if(r.isReady)return;try{r.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}t(r)})();n.attachEvent("onload",function(){t(r)})}else{r.addEventListener("DOMContentLoaded",function(){r.removeEventListener("DOMContentLoaded",arguments.callee,false);t(r)},false);n.addEventListener("load",function(){t(r)},false)}}}}(),cssRule:browser.ie&&browser.version!=11?function(e,t,i){var n,r;if(t===undefined||t&&t.nodeType&&t.nodeType==9){i=t&&t.nodeType&&t.nodeType==9?t:i||document;n=i.indexList||(i.indexList={});r=n[e];if(r!==undefined){return i.styleSheets[r].cssText}return undefined}i=i||document;n=i.indexList||(i.indexList={});r=n[e];if(t===""){if(r!==undefined){i.styleSheets[r].cssText="";delete n[e];return true}return false}if(r!==undefined){sheetStyle=i.styleSheets[r]}else{sheetStyle=i.createStyleSheet("",r=i.styleSheets.length);n[e]=r}sheetStyle.cssText=t}:function(e,t,i){var n,r;if(t===undefined||t&&t.nodeType&&t.nodeType==9){i=t&&t.nodeType&&t.nodeType==9?t:i||document;r=i.getElementById(e);return r?r.innerHTML:undefined}i=i||document;r=i.getElementById(e);if(t===""){if(r){r.parentNode.removeChild(r);return true}return false}if(r){r.innerHTML=t}else{r=i.createElement("style");r.id=e;r.innerHTML=t;i.getElementsByTagName("head")[0].appendChild(r)}},sort:function(e,t){t=t||function(e,t){return e.localeCompare(t)};for(var i=0,n=e.length;i<n;i++){for(var r=i,o=e.length;r<o;r++){if(t(e[i],e[r])>0){var a=e[i];e[i]=e[r];e[r]=a}}}return e},serializeParam:function(e){var t=[];for(var i in e){if(i=="method"||i=="timeout"||i=="async")continue;if(!((typeof e[i]).toLowerCase()=="function"||(typeof e[i]).toLowerCase()=="object")){t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]))}else if(utils.isArray(e[i])){for(var n=0;n<e[i].length;n++){t.push(encodeURIComponent(i)+"[]="+encodeURIComponent(e[i][n]))}}}return t.join("&")},formatUrl:function(e){var t=e.replace(/&&/g,"&");t=t.replace(/\?&/g,"?");t=t.replace(/&$/g,"");t=t.replace(/&#/g,"#");t=t.replace(/&+/g,"&");return t},isCrossDomainUrl:function(e){var t=document.createElement("a");t.href=e;if(browser.ie){t.href=t.href}return!(t.protocol==location.protocol&&t.hostname==location.hostname&&(t.port==location.port||t.port=="80"&&location.port==""||t.port==""&&location.port=="80"))},clearEmptyAttrs:function(e){for(var t in e){if(e[t]===""){delete e[t]}}return e},str2json:function(e){if(!utils.isString(e))return null;if(window.JSON){return JSON.parse(e)}else{return new Function("return "+utils.trim(e||""))()}},json2str:function(){if(window.JSON){return JSON.stringify}else{var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function t(t){if(/["\\\x00-\x1f]/.test(t)){t=t.replace(/["\\\x00-\x1f]/g,function(t){var i=e[t];if(i){return i}i=t.charCodeAt();return"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16)})}return'"'+t+'"'}function i(e){var t=["["],i=e.length,n,r,o;for(r=0;r<i;r++){o=e[r];switch(typeof o){case"undefined":case"function":case"unknown":break;default:if(n){t.push(",")}t.push(utils.json2str(o));n=1}}t.push("]");return t.join("")}function n(e){return e<10?"0"+e:e}function r(e){return'"'+e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate())+"T"+n(e.getHours())+":"+n(e.getMinutes())+":"+n(e.getSeconds())+'"'}return function(e){switch(typeof e){case"undefined":return"undefined";case"number":return isFinite(e)?String(e):"null";case"string":return t(e);case"boolean":return String(e);default:if(e===null){return"null"}else if(utils.isArray(e)){return i(e)}else if(utils.isDate(e)){return r(e)}else{var n=["{"],o=utils.json2str,a,s;for(var l in e){if(Object.prototype.hasOwnProperty.call(e,l)){s=e[l];switch(typeof s){case"undefined":case"unknown":case"function":break;default:if(a){n.push(",")}a=1;n.push(o(l)+":"+o(s))}}}n.push("}");return n.join("")}}}}}()};utils.each(["String","Function","Array","Number","RegExp","Object","Date"],function(e){UE.utils["is"+e]=function(t){return Object.prototype.toString.apply(t)=="[object "+e+"]"}});var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(e,t){e=utils.trim(e).split(/\s+/);for(var i=0,n;n=e[i++];){getListener(this,n,true).push(t)}},on:function(e,t){return this.addListener(e,t)},off:function(e,t){return this.removeListener(e,t)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(e,t){e=utils.trim(e).split(/\s+/);for(var i=0,n;n=e[i++];){utils.removeItem(getListener(this,n)||[],t)}},fireEvent:function(){var e=arguments[0];e=utils.trim(e).split(" ");for(var t=0,i;i=e[t++];){var n=getListener(this,i),r,o,a;if(n){a=n.length;while(a--){if(!n[a])continue;o=n[a].apply(this,arguments);if(o===true){return o}if(o!==undefined){r=o}}}if(o=this["on"+i.toLowerCase()]){r=o.apply(this,arguments)}}return r}};function getListener(e,t,i){var n;t=t.toLowerCase();return(n=e.__allListeners||i&&(e.__allListeners={}))&&(n[t]||i&&(n[t]=[]))}var dtd=dom.dtd=function(){function e(e){for(var t in e){e[t.toUpperCase()]=e[t]}return e}var t=utils.extend2;var i=e({isindex:1,fieldset:1}),n=e({input:1,button:1,select:1,textarea:1,label:1}),r=t(e({a:1}),n),o=t({iframe:1},r),a=e({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),s=e({ins:1,del:1,script:1,style:1}),l=t(e({b:1,acronym:1,bdo:1,var:1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),s),d=t(e({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),l),c=t(e({p:1}),d),u=t(e({iframe:1}),d,n),f=e({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,var:1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),h=t(e({a:0}),u),p=e({tr:1}),m=e({"#":1}),g=t(e({param:1}),f),v=t(e({form:1}),i,o,a,c),y=e({li:1,ol:1,ul:1}),b=e({style:1,script:1}),w=e({base:1,link:1,meta:1,title:1}),x=t(w,b),C=e({head:1,body:1}),_=e({html:1});var T=e({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),E=e({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return e({$nonBodyContent:t(_,C,w),$block:T,$inline:h,$inlineWithA:t(e({a:1}),h),$body:t(e({script:1,style:1}),T),$cdata:e({script:1,style:1}),$empty:E,$nonChild:e({iframe:1,textarea:1}),$listItem:e({dd:1,dt:1,li:1}),$list:e({ul:1,ol:1,dl:1}),$isNotEmpty:e({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:e({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1}),$removeEmptyBlock:e({p:1,div:1}),$tableContent:e({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:e({pre:1,script:1,style:1,textarea:1}),html:C,head:x,style:m,script:m,body:v,base:{},link:{},meta:{},title:m,col:{},tr:e({td:1,th:1}),img:{},embed:{},colgroup:e({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:v,td:v,br:{},th:v,center:v,kbd:h,button:t(c,a),basefont:{},h5:h,h4:h,samp:h,h6:h,ol:y,h1:h,h3:h,option:m,h2:h,form:t(i,o,a,c),select:e({optgroup:1,option:1}),font:h,ins:h,menu:y,abbr:h,label:h,table:e({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:h,tfoot:p,cite:h,li:v,input:{},iframe:v,strong:h,textarea:m,noframes:v,big:h,small:h,span:e({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:h,dt:h,sub:h,optgroup:e({option:1}),param:{},bdo:h,var:h,div:v,object:g,sup:h,dd:v,strike:h,area:{},dir:y,map:t(e({area:1,form:1,p:1}),i,s,a),applet:g,dl:e({dt:1,dd:1}),del:h,isindex:{},fieldset:t(e({legend:1}),f),thead:p,ul:y,acronym:h,b:h,a:t(e({a:1}),u),blockquote:t(e({td:1,tr:1,tbody:1,li:1}),v),caption:h,i:h,u:h,tbody:p,s:h,address:t(o,c),tt:h,legend:h,q:h,pre:t(l,r),p:t(e({a:1}),h),em:h,dfn:h})}();function getDomNode(e,t,i,n,r,o){var a=n&&e[t],s;!a&&(a=e[i]);while(!a&&(s=(s||e).parentNode)){if(s.tagName=="BODY"||o&&!o(s)){return null}a=s[i]}if(a&&r&&!r(a)){return getDomNode(a,t,i,false,r)}return a}var attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]);var domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&browser.version=="6"?"\ufeff":"",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(e,t){if(e===t){return 0}var i,n=[e],r=[t];i=e;while(i=i.parentNode){if(i===t){return 10}n.push(i)}i=t;while(i=i.parentNode){if(i===e){return 20}r.push(i)}n.reverse();r.reverse();if(n[0]!==r[0]){return 1}var o=-1;while(o++,n[o]===r[o]){}e=n[o];t=r[o];while(e=e.nextSibling){if(e===t){return 4}}return 2},getNodeIndex:function(e,t){var i=e,n=0;while(i=i.previousSibling){if(t&&i.nodeType==3){if(i.nodeType!=i.nextSibling.nodeType){n++}continue}n++}return n},inDoc:function(e,t){return domUtils.getPosition(e,t)==10},findParent:function(e,t,i){if(e&&!domUtils.isBody(e)){e=i?e:e.parentNode;while(e){if(!t||t(e)||domUtils.isBody(e)){return t&&!t(e)&&domUtils.isBody(e)?null:e}e=e.parentNode}}return null},findParentByTagName:function(e,t,i,n){t=utils.listToMap(utils.isArray(t)?t:[t]);return domUtils.findParent(e,function(e){return t[e.tagName]&&!(n&&n(e))},i)},findParents:function(e,t,i,n){var r=t&&(i&&i(e)||!i)?[e]:[];while(e=domUtils.findParent(e,i)){r.push(e)}return n?r:r.reverse()},insertAfter:function(e,t){return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)},remove:function(e,t){var i=e.parentNode,n;if(i){if(t&&e.hasChildNodes()){while(n=e.firstChild){i.insertBefore(n,e)}}i.removeChild(e)}return e},getNextDomNode:function(e,t,i,n){return getDomNode(e,"firstChild","nextSibling",t,i,n)},getPreDomNode:function(e,t,i,n){return getDomNode(e,"lastChild","previousSibling",t,i,n)},isBookmarkNode:function(e){return e.nodeType==1&&e.id&&/^_baidu_bookmark_/i.test(e.id)},getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getCommonAncestor:function(e,t){if(e===t)return e;var i=[e],n=[t],r=e,o=-1;while(r=r.parentNode){if(r===t){return r}i.push(r)}r=t;while(r=r.parentNode){if(r===e)return r;n.push(r)}i.reverse();n.reverse();while(o++,i[o]===n[o]){}return o==0?null:i[o-1]},clearEmptySibling:function(e,t,i){function n(e,t){var i;while(e&&!domUtils.isBookmarkNode(e)&&(domUtils.isEmptyInlineElement(e)||!new RegExp("[^\t\n\r"+domUtils.fillChar+"]").test(e.nodeValue))){i=e[t];domUtils.remove(e);e=i}}!t&&n(e.nextSibling,"nextSibling");!i&&n(e.previousSibling,"previousSibling")},split:function(e,t){var i=e.ownerDocument;if(browser.ie&&t==e.nodeValue.length){var n=i.createTextNode("");return domUtils.insertAfter(e,n)}var r=e.splitText(t);if(browser.ie8){var o=i.createTextNode("");domUtils.insertAfter(r,o);domUtils.remove(o)}return r},isWhitespace:function(e){return!new RegExp("[^ \t\n\r"+domUtils.fillChar+"]").test(e.nodeValue)},getXY:function(e){var t=0,i=0;while(e.offsetParent){i+=e.offsetTop;t+=e.offsetLeft;e=e.offsetParent}return{x:t,y:i}},on:function(e,t,i){var n=utils.isArray(t)?t:utils.trim(t).split(/\s+/),r=n.length;if(r)while(r--){t=n[r];if(e.addEventListener){e.addEventListener(t,i,false)}else{if(!i._d){i._d={els:[]}}var o=t+i.toString(),a=utils.indexOf(i._d.els,e);if(!i._d[o]||a==-1){if(a==-1){i._d.els.push(e)}if(!i._d[o]){i._d[o]=function(e){return i.call(e.srcElement,e||window.event)}}e.attachEvent("on"+t,i._d[o])}}}e=null},un:function(e,t,i){var n=utils.isArray(t)?t:utils.trim(t).split(/\s+/),r=n.length;if(r)while(r--){t=n[r];if(e.removeEventListener){e.removeEventListener(t,i,false)}else{var o=t+i.toString();try{e.detachEvent("on"+t,i._d?i._d[o]:i)}catch(e){}if(i._d&&i._d[o]){var a=utils.indexOf(i._d.els,e);if(a!=-1){i._d.els.splice(a,1)}i._d.els.length==0&&delete i._d[o]}}}},isSameElement:function(e,t){if(e.tagName!=t.tagName){return false}var i=e.attributes,n=t.attributes;if(!ie&&i.length!=n.length){return false}var r,o,a=0,s=0;for(var l=0;r=i[l++];){if(r.nodeName=="style"){if(r.specified){a++}if(domUtils.isSameStyle(e,t)){continue}else{return false}}if(ie){if(r.specified){a++;o=n.getNamedItem(r.nodeName)}else{continue}}else{o=t.attributes[r.nodeName]}if(!o.specified||r.nodeValue!=o.nodeValue){return false}}if(ie){for(l=0;o=n[l++];){if(o.specified){s++}}if(a!=s){return false}}return true},isSameStyle:function(e,t){var i=e.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),n=t.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){i=e.style;n=t.style;if(i.length!=n.length)return false;for(var r in i){if(/^(\d+|csstext)$/i.test(r)){continue}if(i[r]!=n[r]){return false}}return true}if(!i||!n){return i==n}i=i.split(";");n=n.split(";");if(i.length!=n.length){return false}for(var o=0,a;a=i[o++];){if(utils.indexOf(n,a)==-1){return false}}return true},isBlockElm:function(e){return e.nodeType==1&&(dtd.$block[e.tagName]||styleBlock[domUtils.getComputedStyle(e,"display")])&&!dtd.$nonChild[e.tagName]},isBody:function(e){return e&&e.nodeType==1&&e.tagName.toLowerCase()=="body"},breakParent:function(e,t){var i,n=e,r=e,o,a;do{n=n.parentNode;if(o){i=n.cloneNode(false);i.appendChild(o);o=i;i=n.cloneNode(false);i.appendChild(a);a=i}else{o=n.cloneNode(false);a=o.cloneNode(false)}while(i=r.previousSibling){o.insertBefore(i,o.firstChild)}while(i=r.nextSibling){a.appendChild(i)}r=n}while(t!==n);i=t.parentNode;i.insertBefore(o,t);i.insertBefore(a,t);i.insertBefore(e,a);domUtils.remove(t);return e},isEmptyInlineElement:function(e){if(e.nodeType!=1||!dtd.$removeEmpty[e.tagName]){return 0}e=e.firstChild;while(e){if(domUtils.isBookmarkNode(e)){return 0}if(e.nodeType==1&&!domUtils.isEmptyInlineElement(e)||e.nodeType==3&&!domUtils.isWhitespace(e)){return 0}e=e.nextSibling}return 1},trimWhiteTextNode:function(e){function t(t){var i;while((i=e[t])&&i.nodeType==3&&domUtils.isWhitespace(i)){e.removeChild(i)}}t("firstChild");t("lastChild")},mergeChild:function(e,t,i){var n=domUtils.getElementsByTagName(e,e.tagName.toLowerCase());for(var r=0,o;o=n[r++];){if(!o.parentNode||domUtils.isBookmarkNode(o)){continue}if(o.tagName.toLowerCase()=="span"){if(e===o.parentNode){domUtils.trimWhiteTextNode(e);if(e.childNodes.length==1){e.style.cssText=o.style.cssText+";"+e.style.cssText;domUtils.remove(o,true);continue}}o.style.cssText=e.style.cssText+";"+o.style.cssText;if(i){var a=i.style;if(a){a=a.split(";");for(var s=0,l;l=a[s++];){o.style[utils.cssStyleToDomStyle(l.split(":")[0])]=l.split(":")[1]}}}if(domUtils.isSameStyle(o,e)){domUtils.remove(o,true)}continue}if(domUtils.isSameElement(e,o)){domUtils.remove(o,true)}}},getElementsByTagName:function(e,t,i){if(i&&utils.isString(i)){var n=i;i=function(e){return domUtils.hasClass(e,n)}}t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");var r=[];for(var o=0,a;a=t[o++];){var s=e.getElementsByTagName(a);for(var l=0,d;d=s[l++];){if(!i||i(d))r.push(d)}}return r},mergeToParent:function(e){var t=e.parentNode;while(t&&dtd.$removeEmpty[t.tagName]){if(t.tagName==e.tagName||t.tagName=="A"){domUtils.trimWhiteTextNode(t);if(t.tagName=="SPAN"&&!domUtils.isSameStyle(t,e)||t.tagName=="A"&&e.tagName=="SPAN"){if(t.childNodes.length>1||t!==e.parentNode){e.style.cssText=t.style.cssText+";"+e.style.cssText;t=t.parentNode;continue}else{t.style.cssText+=";"+e.style.cssText;if(t.tagName=="A"){t.style.textDecoration="underline"}}}if(t.tagName!="A"){t===e.parentNode&&domUtils.remove(e,true);break}}t=t.parentNode}},mergeSibling:function(e,t,i){function n(e,t,i){var n;if((n=i[e])&&!domUtils.isBookmarkNode(n)&&n.nodeType==1&&domUtils.isSameElement(i,n)){while(n.firstChild){if(t=="firstChild"){i.insertBefore(n.lastChild,i.firstChild)}else{i.appendChild(n.firstChild)}}domUtils.remove(n)}}!t&&n("previousSibling","firstChild",e);!i&&n("nextSibling","lastChild",e)},unSelectable:ie&&browser.ie9below||browser.opera?function(e){e.onselectstart=function(){return false};e.onclick=e.onkeyup=e.onkeydown=function(){return false};e.unselectable="on";e.setAttribute("unselectable","on");for(var t=0,i;i=e.all[t++];){switch(i.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:i.unselectable="on";e.setAttribute("unselectable","on")}}}:function(e){e.style.MozUserSelect=e.style.webkitUserSelect=e.style.msUserSelect=e.style.KhtmlUserSelect="none"},removeAttributes:function(e,t){t=utils.isArray(t)?t:utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i=0,n;n=t[i++];){n=attrFix[n]||n;switch(n){case"className":e[n]="";break;case"style":e.style.cssText="";var r=e.getAttributeNode("style");!browser.ie&&r&&e.removeAttributeNode(r)}e.removeAttribute(n)}},createElement:function(e,t,i){return domUtils.setAttributes(e.createElement(t),i)},setAttributes:function(e,t){for(var i in t){if(t.hasOwnProperty(i)){var n=t[i];switch(i){case"class":e.className=n;break;case"style":e.style.cssText=e.style.cssText+";"+n;break;case"innerHTML":e[i]=n;break;case"value":e.value=n;break;default:e.setAttribute(attrFix[i]||i,n)}}}return e},getComputedStyle:function(e,t){var i="width height top left";if(i.indexOf(t)>-1){return e["offset"+t.replace(/^\w/,function(e){return e.toUpperCase()})]+"px"}if(e.nodeType==3){e=e.parentNode}if(browser.ie&&browser.version<9&&t=="font-size"&&!e.style.fontSize&&!dtd.$empty[e.tagName]&&!dtd.$nonChild[e.tagName]){var n=e.ownerDocument.createElement("span");n.style.cssText="padding:0;border:0;font-family:simsun;";n.innerHTML=".";e.appendChild(n);var r=n.offsetHeight;e.removeChild(n);n=null;return r+"px"}try{var o=domUtils.getStyle(e,t)||(window.getComputedStyle?domUtils.getWindow(e).getComputedStyle(e,"").getPropertyValue(t):(e.currentStyle||e.style)[utils.cssStyleToDomStyle(t)])}catch(e){return""}return utils.transUnitToPx(utils.fixColor(t,o))},removeClasses:function(e,t){t=utils.isArray(t)?t:utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i=0,n,r=e.className;n=t[i++];){r=r.replace(new RegExp("\\b"+n+"\\b"),"")}r=utils.trim(r).replace(/[ ]{2,}/g," ");if(r){e.className=r}else{domUtils.removeAttributes(e,["class"])}},addClass:function(e,t){if(!e)return;t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i=0,n,r=e.className;n=t[i++];){if(!new RegExp("\\b"+n+"\\b").test(r)){r+=" "+n}}e.className=utils.trim(r)},hasClass:function(e,t){if(utils.isRegExp(t)){return t.test(e.className)}t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i=0,n,r=e.className;n=t[i++];){if(!new RegExp("\\b"+n+"\\b","i").test(r)){return false}}return i-1==t.length},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=false},removeStyle:function(e,t){if(browser.ie){if(t=="color"){t="(^|;)"+t}e.style.cssText=e.style.cssText.replace(new RegExp(t+"[^:]*:[^;]+;?","ig"),"")}else{if(e.style.removeProperty){e.style.removeProperty(t)}else{e.style.removeAttribute(utils.cssStyleToDomStyle(t))}}if(!e.style.cssText){domUtils.removeAttributes(e,["style"])}},getStyle:function(e,t){var i=e.style[utils.cssStyleToDomStyle(t)];return utils.fixColor(t,i)},setStyle:function(e,t,i){e.style[utils.cssStyleToDomStyle(t)]=i;if(!utils.trim(e.style.cssText)){this.removeAttributes(e,"style")}},setStyles:function(e,t){for(var i in t){if(t.hasOwnProperty(i)){domUtils.setStyle(e,i,t[i])}}},removeDirtyAttr:function(e){for(var t=0,i,n=e.getElementsByTagName("*");i=n[t++];){i.removeAttribute("_moz_dirty")}e.removeAttribute("_moz_dirty")},getChildCount:function(e,t){var i=0,n=e.firstChild;t=t||function(){return 1};while(n){if(t(n)){i++}n=n.nextSibling}return i},isEmptyNode:function(e){return!e.firstChild||domUtils.getChildCount(e,function(e){return!domUtils.isBr(e)&&!domUtils.isBookmarkNode(e)&&!domUtils.isWhitespace(e)})==0},clearSelectedArr:function(e){var t;while(t=e.pop()){domUtils.removeAttributes(t,["class"])}},scrollToView:function(e,t,i){var n=function(){var e=t.document,i=e.compatMode=="CSS1Compat";return{width:(i?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(i?e.documentElement.clientHeight:e.body.clientHeight)||0}},r=function(e){if("pageXOffset"in e){return{x:e.pageXOffset||0,y:e.pageYOffset||0}}else{var t=e.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}}};var o=n().height,a=o*-1+i;a+=e.offsetHeight||0;var s=domUtils.getXY(e);a+=s.y;var l=r(t).y;if(a>l||a<l-o){t.scrollTo(0,a+(a<0?-20:20))}},isBr:function(e){return e.nodeType==1&&e.tagName=="BR"},isFillChar:function(e,t){if(e.nodeType!=3)return false;var i=e.nodeValue;if(t){return new RegExp("^"+domUtils.fillChar).test(i)}return!i.replace(new RegExp(domUtils.fillChar,"g"),"").length},isStartInblock:function(e){var t=e.cloneRange(),i=0,n=t.startContainer,r;if(n.nodeType==1&&n.childNodes[t.startOffset]){n=n.childNodes[t.startOffset];var o=n.previousSibling;while(o&&domUtils.isFillChar(o)){n=o;o=o.previousSibling}}if(this.isFillChar(n,true)&&t.startOffset==1){t.setStartBefore(n);n=t.startContainer}while(n&&domUtils.isFillChar(n)){r=n;n=n.previousSibling}if(r){t.setStartBefore(r);n=t.startContainer}if(n.nodeType==1&&domUtils.isEmptyNode(n)&&t.startOffset==1){t.setStart(n,0).collapse(true)}while(!t.startOffset){n=t.startContainer;if(domUtils.isBlockElm(n)||domUtils.isBody(n)){i=1;break}var o=t.startContainer.previousSibling,a;if(!o){t.setStartBefore(t.startContainer)}else{while(o&&domUtils.isFillChar(o)){a=o;o=o.previousSibling}if(a){t.setStartBefore(a)}else{t.setStartBefore(t.startContainer)}}}return i&&!domUtils.isBody(t.startContainer)?1:0},isEmptyBlock:function(e,t){if(e.nodeType!=1)return 0;t=t||new RegExp("[ \t\r\n"+domUtils.fillChar+"]","g");if(e[browser.ie?"innerText":"textContent"].replace(t,"").length>0){return 0}for(var i in dtd.$isNotEmpty){if(e.getElementsByTagName(i).length){return 0}}return 1},setViewportOffset:function(e,t){var i=parseInt(e.style.left)|0;var n=parseInt(e.style.top)|0;var r=e.getBoundingClientRect();var o=t.left-r.left;var a=t.top-r.top;if(o){e.style.left=i+o+"px"}if(a){e.style.top=n+a+"px"}},fillNode:function(e,t){var i=browser.ie?e.createTextNode(domUtils.fillChar):e.createElement("br");t.innerHTML="";t.appendChild(i)},moveChild:function(e,t,i){while(e.firstChild){if(i&&t.firstChild){t.insertBefore(e.lastChild,t.firstChild)}else{t.appendChild(e.firstChild)}}},hasNoAttributes:function(e){return browser.ie?/^<\w+\s*?>/.test(e.outerHTML):e.attributes.length==0},isCustomeNode:function(e){return e.nodeType==1&&e.getAttribute("_ue_custom_node_")},isTagNode:function(e,t){return e.nodeType==1&&new RegExp("\\b"+e.tagName+"\\b","i").test(t)},filterNodeList:function(e,t,i){var n=[];if(!utils.isFunction(t)){var r=t;t=function(e){return utils.indexOf(utils.isArray(r)?r:r.split(" "),e.tagName.toLowerCase())!=-1}}utils.each(e,function(e){t(e)&&n.push(e)});return n.length==0?null:n.length==1||!i?n[0]:n},isInNodeEndBoundary:function(e,t){var i=e.startContainer;if(i.nodeType==3&&e.startOffset!=i.nodeValue.length){return 0}if(i.nodeType==1&&e.startOffset!=i.childNodes.length){return 0}while(i!==t){if(i.nextSibling){return 0}i=i.parentNode}return 1},isBoundaryNode:function(e,t){var i;while(!domUtils.isBody(e)){i=e;e=e.parentNode;if(i!==e[t]){return false}}return true},fillHtml:browser.ie11below?"&nbsp;":"<br/>"};var fillCharReg=new RegExp(domUtils.fillChar,"g");(function(){var e=0,t=domUtils.fillChar,i;function n(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer===e.endContainer&&e.startOffset==e.endOffset}function r(e){return!e.collapsed&&e.startContainer.nodeType==1&&e.startContainer===e.endContainer&&e.endOffset-e.startOffset==1}function o(e,t,i,r){if(t.nodeType==1&&(dtd.$empty[t.tagName]||dtd.$nonChild[t.tagName])){i=domUtils.getNodeIndex(t)+(e?0:1);t=t.parentNode}if(e){r.startContainer=t;r.startOffset=i;if(!r.endContainer){r.collapse(true)}}else{r.endContainer=t;r.endOffset=i;if(!r.startContainer){r.collapse(false)}}n(r);return r}function a(e,t){var i=e.startContainer,n=e.endContainer,r=e.startOffset,o=e.endOffset,a=e.document,s=a.createDocumentFragment(),l,d;if(i.nodeType==1){i=i.childNodes[r]||(l=i.appendChild(a.createTextNode("")))}if(n.nodeType==1){n=n.childNodes[o]||(d=n.appendChild(a.createTextNode("")))}if(i===n&&i.nodeType==3){s.appendChild(a.createTextNode(i.substringData(r,o-r)));if(t){i.deleteData(r,o-r);e.collapse(true)}return s}var c,u,f=s,h=domUtils.findParents(i,true),p=domUtils.findParents(n,true);for(var m=0;h[m]==p[m];){m++}for(var g=m,v;v=h[g];g++){c=v.nextSibling;if(v==i){if(!l){if(e.startContainer.nodeType==3){f.appendChild(a.createTextNode(i.nodeValue.slice(r)));if(t){i.deleteData(r,i.nodeValue.length-r)}}else{f.appendChild(!t?i.cloneNode(true):i)}}}else{u=v.cloneNode(false);f.appendChild(u)}while(c){if(c===n||c===p[g]){break}v=c.nextSibling;f.appendChild(!t?c.cloneNode(true):c);c=v}f=u}f=s;if(!h[m]){f.appendChild(h[m-1].cloneNode(false));f=f.firstChild}for(var g=m,y;y=p[g];g++){c=y.previousSibling;if(y==n){if(!d&&e.endContainer.nodeType==3){f.appendChild(a.createTextNode(n.substringData(0,o)));if(t){n.deleteData(0,o)}}}else{u=y.cloneNode(false);f.appendChild(u)}if(g!=m||!h[m]){while(c){if(c===i){break}y=c.previousSibling;f.insertBefore(!t?c.cloneNode(true):c,f.firstChild);c=y}}f=u}if(t){e.setStartBefore(!p[m]?p[m-1]:!h[m]?h[m-1]:p[m]).collapse(true)}l&&domUtils.remove(l);d&&domUtils.remove(d);return s}var s=dom.Range=function(e){var t=this;t.startContainer=t.startOffset=t.endContainer=t.endOffset=null;t.document=e;t.collapsed=true};function l(e,t){try{if(i&&domUtils.inDoc(i,e)){if(!i.nodeValue.replace(fillCharReg,"").length){var n=i.parentNode;domUtils.remove(i);while(n&&domUtils.isEmptyInlineElement(n)&&(browser.safari?!(domUtils.getPosition(n,t)&domUtils.POSITION_CONTAINS):!n.contains(t))){i=n.parentNode;domUtils.remove(n);n=i}}else{i.nodeValue=i.nodeValue.replace(fillCharReg,"")}}}catch(e){}}function d(e,t){var i;e=e[t];while(e&&domUtils.isFillChar(e)){i=e[t];domUtils.remove(e);e=i}}s.prototype={cloneContents:function(){return this.collapsed?null:a(this,0)},deleteContents:function(){var e;if(!this.collapsed){a(this,1)}if(browser.webkit){e=this.startContainer;if(e.nodeType==3&&!e.nodeValue.length){this.setStartBefore(e).collapse(true);domUtils.remove(e)}}return this},extractContents:function(){return this.collapsed?null:a(this,2)},setStart:function(e,t){return o(true,e,t,this)},setEnd:function(e,t){return o(false,e,t,this)},setStartAfter:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e)+1)},setStartBefore:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e))},setEndAfter:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e)+1)},setEndBefore:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e))},setStartAtFirst:function(e){return this.setStart(e,0)},setStartAtLast:function(e){return this.setStart(e,e.nodeType==3?e.nodeValue.length:e.childNodes.length)},setEndAtFirst:function(e){return this.setEnd(e,0)},setEndAtLast:function(e){return this.setEnd(e,e.nodeType==3?e.nodeValue.length:e.childNodes.length)},selectNode:function(e){return this.setStartBefore(e).setEndAfter(e)},selectNodeContents:function(e){return this.setStart(e,0).setEndAtLast(e)},cloneRange:function(){var e=this;return new s(e.document).setStart(e.startContainer,e.startOffset).setEnd(e.endContainer,e.endOffset)},collapse:function(e){var t=this;if(e){t.endContainer=t.startContainer;t.endOffset=t.startOffset}else{t.startContainer=t.endContainer;t.startOffset=t.endOffset}t.collapsed=true;return t},shrinkBoundary:function(e){var t=this,i,n=t.collapsed;function r(e){return e.nodeType==1&&!domUtils.isBookmarkNode(e)&&!dtd.$empty[e.tagName]&&!dtd.$nonChild[e.tagName]}while(t.startContainer.nodeType==1&&(i=t.startContainer.childNodes[t.startOffset])&&r(i)){t.setStart(i,0)}if(n){return t.collapse(true)}if(!e){while(t.endContainer.nodeType==1&&t.endOffset>0&&(i=t.endContainer.childNodes[t.endOffset-1])&&r(i)){t.setEnd(i,i.childNodes.length)}}return t},getCommonAncestor:function(e,t){var i=this,n=i.startContainer,o=i.endContainer;if(n===o){if(e&&r(this)){n=n.childNodes[i.startOffset];if(n.nodeType==1)return n}return t&&n.nodeType==3?n.parentNode:n}return domUtils.getCommonAncestor(n,o)},trimBoundary:function(e){this.txtToElmBoundary();var t=this.startContainer,i=this.startOffset,n=this.collapsed,r=this.endContainer;if(t.nodeType==3){if(i==0){this.setStartBefore(t)}else{if(i>=t.nodeValue.length){this.setStartAfter(t)}else{var o=domUtils.split(t,i);if(t===r){this.setEnd(o,this.endOffset-i)}else if(t.parentNode===r){this.endOffset+=1}this.setStartBefore(o)}}if(n){return this.collapse(true)}}if(!e){i=this.endOffset;r=this.endContainer;if(r.nodeType==3){if(i==0){this.setEndBefore(r)}else{i<r.nodeValue.length&&domUtils.split(r,i);this.setEndAfter(r)}}}return this},txtToElmBoundary:function(e){function t(e,t){var i=e[t+"Container"],n=e[t+"Offset"];if(i.nodeType==3){if(!n){e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"Before"](i)}else if(n>=i.nodeValue.length){e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"After"](i)}}}if(e||!this.collapsed){t(this,"start");t(this,"end")}return this},insertNode:function(e){var t=e,i=1;if(e.nodeType==11){t=e.firstChild;i=e.childNodes.length}this.trimBoundary(true);var n=this.startContainer,r=this.startOffset;var o=n.childNodes[r];if(o){n.insertBefore(e,o)}else{n.appendChild(e)}if(t.parentNode===this.endContainer){this.endOffset=this.endOffset+i}return this.setStartBefore(t)},setCursor:function(e,t){return this.collapse(!e).select(t)},createBookmark:function(t,i){var n,r=this.document.createElement("span");r.style.cssText="display:none;line-height:0px;";r.appendChild(this.document.createTextNode(""));r.id="_baidu_bookmark_start_"+(i?"":e++);if(!this.collapsed){n=r.cloneNode(true);n.id="_baidu_bookmark_end_"+(i?"":e++)}this.insertNode(r);if(n){this.collapse().insertNode(n).setEndBefore(n)}this.setStartAfter(r);return{start:t?r.id:r,end:n?t?n.id:n:null,id:t}},moveToBookmark:function(e){var t=e.id?this.document.getElementById(e.start):e.start,i=e.end&&e.id?this.document.getElementById(e.end):e.end;this.setStartBefore(t);domUtils.remove(t);if(i){this.setEndBefore(i);domUtils.remove(i)}else{this.collapse(true)}return this},enlarge:function(e,t){var i=domUtils.isBody,n,r,o=this.document.createTextNode("");if(e){r=this.startContainer;if(r.nodeType==1){if(r.childNodes[this.startOffset]){n=r=r.childNodes[this.startOffset]}else{r.appendChild(o);n=r=o}}else{n=r}while(1){if(domUtils.isBlockElm(r)){r=n;while((n=r.previousSibling)&&!domUtils.isBlockElm(n)){r=n}this.setStartBefore(r);break}n=r;r=r.parentNode}r=this.endContainer;if(r.nodeType==1){if(n=r.childNodes[this.endOffset]){r.insertBefore(o,n)}else{r.appendChild(o)}n=r=o}else{n=r}while(1){if(domUtils.isBlockElm(r)){r=n;while((n=r.nextSibling)&&!domUtils.isBlockElm(n)){r=n}this.setEndAfter(r);break}n=r;r=r.parentNode}if(o.parentNode===this.endContainer){this.endOffset--}domUtils.remove(o)}if(!this.collapsed){while(this.startOffset==0){if(t&&t(this.startContainer)){break}if(i(this.startContainer)){break}this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(t&&t(this.endContainer)){break}if(i(this.endContainer)){break}this.setEndAfter(this.endContainer)}}return this},enlargeToBlockElm:function(e){while(!domUtils.isBlockElm(this.startContainer)){this.setStartBefore(this.startContainer)}if(!e){while(!domUtils.isBlockElm(this.endContainer)){this.setEndAfter(this.endContainer)}}return this},adjustmentBoundary:function(){if(!this.collapsed){while(!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length&&this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setStartAfter(this.startContainer)}while(!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[this.endContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setEndBefore(this.endContainer)}}return this},applyInlineStyle:function(e,t,i){if(this.collapsed)return this;this.trimBoundary().enlarge(false,function(e){return e.nodeType==1&&domUtils.isBlockElm(e)}).adjustmentBoundary();var n=this.createBookmark(),r=n.end,o=function(e){return e.nodeType==1?e.tagName.toLowerCase()!="br":!domUtils.isWhitespace(e)},a=domUtils.getNextDomNode(n.start,false,o),s,l,d=this.cloneRange();while(a&&domUtils.getPosition(a,r)&domUtils.POSITION_PRECEDING){if(a.nodeType==3||dtd[e][a.tagName]){d.setStartBefore(a);s=a;while(s&&(s.nodeType==3||dtd[e][s.tagName])&&s!==r){l=s;s=domUtils.getNextDomNode(s,s.nodeType==1,null,function(t){return dtd[e][t.tagName]})}var c=d.setEndAfter(l).extractContents(),u;if(i&&i.length>0){var f,h;h=f=i[0].cloneNode(false);for(var p=1,m;m=i[p++];){f.appendChild(m.cloneNode(false));f=f.firstChild}u=f}else{u=d.document.createElement(e)}if(t){domUtils.setAttributes(u,t)}u.appendChild(c);d.insertNode(i?h:u);var g;if(e=="span"&&t.style&&/text\-decoration/.test(t.style)&&(g=domUtils.findParentByTagName(u,"a",true))){domUtils.setAttributes(g,t);domUtils.remove(u,true);u=g}else{domUtils.mergeSibling(u);domUtils.clearEmptySibling(u)}domUtils.mergeChild(u,t);a=domUtils.getNextDomNode(u,false,o);domUtils.mergeToParent(u);if(s===r){break}}else{a=domUtils.getNextDomNode(a,true,o)}}return this.moveToBookmark(n)},removeInlineStyle:function(e){if(this.collapsed)return this;e=utils.isArray(e)?e:[e];this.shrinkBoundary().adjustmentBoundary();var t=this.startContainer,i=this.endContainer;while(1){if(t.nodeType==1){if(utils.indexOf(e,t.tagName.toLowerCase())>-1){break}if(t.tagName.toLowerCase()=="body"){t=null;break}}t=t.parentNode}while(1){if(i.nodeType==1){if(utils.indexOf(e,i.tagName.toLowerCase())>-1){break}if(i.tagName.toLowerCase()=="body"){i=null;break}}i=i.parentNode}var n=this.createBookmark(),r,o;if(t){o=this.cloneRange().setEndBefore(n.start).setStartBefore(t);r=o.extractContents();o.insertNode(r);domUtils.clearEmptySibling(t,true);t.parentNode.insertBefore(n.start,t)}if(i){o=this.cloneRange().setStartAfter(n.end).setEndAfter(i);r=o.extractContents();o.insertNode(r);domUtils.clearEmptySibling(i,false,true);i.parentNode.insertBefore(n.end,i.nextSibling)}var a=domUtils.getNextDomNode(n.start,false,function(e){return e.nodeType==1}),s;while(a&&a!==n.end){s=domUtils.getNextDomNode(a,true,function(e){return e.nodeType==1});if(utils.indexOf(e,a.tagName.toLowerCase())>-1){domUtils.remove(a,true)}a=s}return this.moveToBookmark(n)},getClosedNode:function(){var e;if(!this.collapsed){var t=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(r(t)){var i=t.startContainer.childNodes[t.startOffset];if(i&&i.nodeType==1&&(dtd.$empty[i.tagName]||dtd.$nonChild[i.tagName])){e=i}}}return e},select:browser.ie?function(e,n){var r;if(!this.collapsed)this.shrinkBoundary();var o=this.getClosedNode();if(o&&!n){try{r=this.document.body.createControlRange();r.addElement(o);r.select()}catch(e){}return this}var a=this.createBookmark(),s=a.start,c;r=this.document.body.createTextRange();r.moveToElementText(s);r.moveStart("character",1);if(!this.collapsed){var u=this.document.body.createTextRange();c=a.end;u.moveToElementText(c);r.setEndPoint("EndToEnd",u)}else{if(!e&&this.startContainer.nodeType!=3){var f=this.document.createTextNode(t),h=this.document.createElement("span");h.appendChild(this.document.createTextNode(t));s.parentNode.insertBefore(h,s);s.parentNode.insertBefore(f,s);l(this.document,f);i=f;d(h,"previousSibling");d(s,"nextSibling");r.moveStart("character",-1);r.collapse(true)}}this.moveToBookmark(a);h&&domUtils.remove(h);try{r.select()}catch(e){}return this}:function(e){function n(e){function t(t,i,n){if(t.nodeType==3&&t.nodeValue.length<i){e[n+"Offset"]=t.nodeValue.length}}t(e.startContainer,e.startOffset,"start");t(e.endContainer,e.endOffset,"end")}var r=domUtils.getWindow(this.document),o=r.getSelection(),a;browser.gecko?this.document.body.focus():r.focus();if(o){o.removeAllRanges();if(this.collapsed&&!e){var s=this.startContainer,c=s;if(s.nodeType==1){c=s.childNodes[this.startOffset]}if(!(s.nodeType==3&&this.startOffset)&&(c?!c.previousSibling||c.previousSibling.nodeType!=3:!s.lastChild||s.lastChild.nodeType!=3)){a=this.document.createTextNode(t);this.insertNode(a);l(this.document,a);d(a,"previousSibling");d(a,"nextSibling");i=a;this.setStart(a,browser.webkit?1:0).collapse(true)}}var u=this.document.createRange();if(this.collapsed&&browser.opera&&this.startContainer.nodeType==1){var c=this.startContainer.childNodes[this.startOffset];if(!c){c=this.startContainer.lastChild;if(c&&domUtils.isBr(c)){this.setStartBefore(c).collapse(true)}}else{while(c&&domUtils.isBlockElm(c)){if(c.nodeType==1&&c.childNodes[0]){c=c.childNodes[0]}else{break}}c&&this.setStartBefore(c).collapse(true)}}n(this);u.setStart(this.startContainer,this.startOffset);u.setEnd(this.endContainer,this.endOffset);o.addRange(u)}return this},scrollToView:function(e,t){e=e?window:domUtils.getWindow(this.document);var i=this,n=i.document.createElement("span");n.innerHTML="&nbsp;";i.cloneRange().insertNode(n);domUtils.scrollToView(n,e,t);domUtils.remove(n);return i},inFillChar:function(){var e=this.startContainer;if(this.collapsed&&e.nodeType==3&&e.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"").length+1==e.nodeValue.length){return true}return false},createAddress:function(e,t){var i={},n=this;function r(e){var i=e?n.startContainer:n.endContainer;var r=domUtils.findParents(i,true,function(e){return!domUtils.isBody(e)}),o=[];for(var a=0,s;s=r[a++];){o.push(domUtils.getNodeIndex(s,t))}var l=0;if(t){if(i.nodeType==3){var d=i.previousSibling;while(d&&d.nodeType==3){l+=d.nodeValue.replace(fillCharReg,"").length;d=d.previousSibling}l+=e?n.startOffset:n.endOffset}else{i=i.childNodes[e?n.startOffset:n.endOffset];if(i){l=domUtils.getNodeIndex(i,t)}else{i=e?n.startContainer:n.endContainer;var c=i.firstChild;while(c){if(domUtils.isFillChar(c)){c=c.nextSibling;continue}l++;if(c.nodeType==3){while(c&&c.nodeType==3){c=c.nextSibling}}else{c=c.nextSibling}}}}}else{l=e?domUtils.isFillChar(i)?0:n.startOffset:n.endOffset}if(l<0){l=0}o.push(l);return o}i.startAddress=r(true);if(!e){i.endAddress=n.collapsed?[].concat(i.startAddress):r()}return i},moveToAddress:function(e,t){var i=this;function n(e,t){var n=i.document.body,r,o;for(var a=0,s,l=e.length;a<l;a++){s=e[a];r=n;n=n.childNodes[s];if(!n){o=s;break}}if(t){if(n){i.setStartBefore(n)}else{i.setStart(r,o)}}else{if(n){i.setEndBefore(n)}else{i.setEnd(r,o)}}}n(e.startAddress,true);!t&&e.endAddress&&n(e.endAddress);return i},equals:function(e){for(var t in this){if(this.hasOwnProperty(t)){if(this[t]!==e[t])return false}}return true},traversal:function(e,t){if(this.collapsed)return this;var i=this.createBookmark(),n=i.end,r=domUtils.getNextDomNode(i.start,false,t);while(r&&r!==n&&domUtils.getPosition(r,n)&domUtils.POSITION_PRECEDING){var o=domUtils.getNextDomNode(r,false,t);e(r);r=o}return this.moveToBookmark(i)}}})();(function(){function e(e,t){var i=domUtils.getNodeIndex;e=e.duplicate();e.collapse(t);var n=e.parentElement();if(!n.hasChildNodes()){return{container:n,offset:0}}var r=n.children,o,a=e.duplicate(),s=0,l=r.length-1,d=-1,c;while(s<=l){d=Math.floor((s+l)/2);o=r[d];a.moveToElementText(o);var u=a.compareEndPoints("StartToStart",e);if(u>0){l=d-1}else if(u<0){s=d+1}else{return{container:n,offset:i(o)}}}if(d==-1){a.moveToElementText(n);a.setEndPoint("StartToStart",e);c=a.text.replace(/(\r\n|\r)/g,"\n").length;r=n.childNodes;if(!c){o=r[r.length-1];return{container:o,offset:o.nodeValue.length}}var f=r.length;while(c>0){c-=r[--f].nodeValue.length}return{container:r[f],offset:-c}}a.collapse(u>0);a.setEndPoint(u>0?"StartToStart":"EndToStart",e);c=a.text.replace(/(\r\n|\r)/g,"\n").length;if(!c){return dtd.$empty[o.tagName]||dtd.$nonChild[o.tagName]?{container:n,offset:i(o)+(u>0?0:1)}:{container:o,offset:u>0?0:o.childNodes.length}}while(c>0){try{var h=o;o=o[u>0?"previousSibling":"nextSibling"];c-=o.nodeValue.length}catch(e){return{container:n,offset:i(h)}}}return{container:o,offset:u>0?-c:o.nodeValue.length+c}}function t(t,i){if(t.item){i.selectNode(t.item(0))}else{var n=e(t,true);i.setStart(n.container,n.offset);if(t.compareEndPoints("StartToEnd",t)!=0){n=e(t,false);i.setEnd(n.container,n.offset)}}return i}function i(e){var t;try{t=e.getNative().createRange()}catch(e){return null}var i=t.item?t.item(0):t.parentElement();if((i.ownerDocument||i)===e.document){return t}return null}var n=dom.Selection=function(e){var t=this,n;t.document=e;if(browser.ie9below){n=domUtils.getWindow(e).frameElement;domUtils.on(n,"beforedeactivate",function(){t._bakIERange=t.getIERange()});domUtils.on(n,"activate",function(){try{if(!i(t)&&t._bakIERange){t._bakIERange.select()}}catch(e){}t._bakIERange=null})}n=e=null};n.prototype={rangeInBody:function(e,t){var i=browser.ie9below||t?e.item?e.item():e.parentElement():e.startContainer;return i===this.document.body||domUtils.inDoc(i,this.document)},getNative:function(){var e=this.document;try{return!e?null:browser.ie9below?e.selection:domUtils.getWindow(e).getSelection()}catch(e){return null}},getIERange:function(){var e=i(this);if(!e){if(this._bakIERange){return this._bakIERange}}return e},cache:function(){this.clear();this._cachedRange=this.getRange();this._cachedStartElement=this.getStart();this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath){return this._cachedStartElementPath}var e=this.getStart();if(e){return domUtils.findParents(e,true,null,true)}return[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(browser.ie9below){var e=i(this);return!!(e&&this.rangeInBody(e))}else{return!!this.getNative().rangeCount}}catch(e){return false}},getRange:function(){var e=this;function i(t){var i=e.document.body.firstChild,n=t.collapsed;while(i&&i.firstChild){t.setStart(i,0);i=i.firstChild}if(!t.startContainer){t.setStart(e.document.body,0)}if(n){t.collapse(true)}}if(e._cachedRange!=null){return this._cachedRange}var n=new baidu.editor.dom.Range(e.document);if(browser.ie9below){var r=e.getIERange();if(r){try{t(r,n)}catch(e){i(n)}}else{i(n)}}else{var o=e.getNative();if(o&&o.rangeCount){var a=o.getRangeAt(0);var s=o.getRangeAt(o.rangeCount-1);n.setStart(a.startContainer,a.startOffset).setEnd(s.endContainer,s.endOffset);if(n.collapsed&&domUtils.isBody(n.startContainer)&&!n.startOffset){i(n)}}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document)){return this._bakRange}i(n)}}return this._bakRange=n},getStart:function(){if(this._cachedStartElement){return this._cachedStartElement}var e=browser.ie9below?this.getIERange():this.getRange(),t,i,n,r;if(browser.ie9below){if(!e){return this.document.body.firstChild}if(e.item){return e.item(0)}t=e.duplicate();t.text.length>0&&t.moveStart("character",1);t.collapse(1);i=t.parentElement();r=n=e.parentElement();while(n=n.parentNode){if(n==i){i=r;break}}}else{e.shrinkBoundary();i=e.startContainer;if(i.nodeType==1&&i.hasChildNodes()){i=i.childNodes[Math.min(i.childNodes.length-1,e.startOffset)]}if(i.nodeType==3){return i.parentNode}}return i},getText:function(){var e,t;if(this.isFocus()&&(e=this.getNative())){t=browser.ie9below?e.createRange():e.getRangeAt(0);return browser.ie9below?t.text:t.toString()}return""},clearRange:function(){this.getNative()[browser.ie9below?"empty":"removeAllRanges"]()}}})();(function(){var e=0,t;function i(e,t){var i;if(t.textarea){if(utils.isString(t.textarea)){for(var n=0,r,o=domUtils.getElementsByTagName(e,"textarea");r=o[n++];){if(r.id=="ueditor_textarea_"+t.options.textarea){i=r;break}}}else{i=t.textarea}}if(!i){e.appendChild(i=domUtils.createElement(document,"textarea",{name:t.options.textarea,id:"ueditor_textarea_"+t.options.textarea,style:"display:none"}));t.textarea=i}!i.getAttribute("name")&&i.setAttribute("name",t.options.textarea);i.value=t.hasContents()?t.options.allHtmlEnabled?t.getAllHtml():t.getContent(null,null,true):""}function n(e){for(var t in UE.plugins){UE.plugins[t].call(e)}}function r(e){for(var t in e){return t}}function o(e){e.langIsReady=true;e.fireEvent("langReady")}var a=UE.Editor=function(t){var i=this;i.uid=e++;EventBase.call(i);i.commands={};i.options=utils.extend(utils.clone(t||{}),UEDITOR_CONFIG,true);i.shortcutkeys={};i.inputRules=[];i.outputRules=[];i.setOpt(a.defaultOptions(i));i.loadServerConfig();if(!utils.isEmptyObject(UE.I18N)){i.options.lang=r(UE.I18N);UE.plugin.load(i);o(i)}else{utils.loadFile(document,{src:i.options.langPath+i.options.lang+"/"+i.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(i);o(i)})}UE.instants["ueditorInstant"+i.uid]=i};a.prototype={registerCommand:function(e,t){this.commands[e]=t},ready:function(e){var t=this;if(e){t.isReady?e.apply(t):t.addListener("ready",e)}},setOpt:function(e,t){var i={};if(utils.isString(e)){i[e]=t}else{i=e}utils.extend(this.options,i,true)},getOpt:function(e){return this.options[e]},destroy:function(){var e=this;e.fireEvent("destroy");var t=e.container.parentNode;var i=e.textarea;if(!i){i=document.createElement("textarea");t.parentNode.insertBefore(i,t)}else{i.style.display=""}i.style.width=e.iframe.offsetWidth+"px";i.style.height=e.iframe.offsetHeight+"px";i.value=e.getContent();i.id=e.key;t.innerHTML="";domUtils.remove(t);var n=e.key;for(var r in e){if(e.hasOwnProperty(r)){delete this[r]}}UE.delEditor(n)},render:function(e){var t=this,i=t.options,n=function(t){return parseInt(domUtils.getComputedStyle(e,t))};if(utils.isString(e)){e=document.getElementById(e)}if(e){if(i.initialFrameWidth){i.minFrameWidth=i.initialFrameWidth}else{i.minFrameWidth=i.initialFrameWidth=e.offsetWidth}if(i.initialFrameHeight){i.minFrameHeight=i.initialFrameHeight}else{i.initialFrameHeight=i.minFrameHeight=e.offsetHeight}e.style.width=/%$/.test(i.initialFrameWidth)?"100%":i.initialFrameWidth-n("padding-left")-n("padding-right")+"px";e.style.height=/%$/.test(i.initialFrameHeight)?"100%":i.initialFrameHeight-n("padding-top")-n("padding-bottom")+"px";e.style.zIndex=i.zIndex;var r=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head>"+"<style type='text/css'>"+".view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\n"+"body{margin:8px;font-family:sans-serif;font-size:16px;}"+"p{margin:5px 0;}</style>"+(i.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(i.iframeCssUrl)+"'/>":"")+(i.initialStyle?"<style>"+i.initialStyle+"</style>":"")+"</head><body class='view' ></body>"+"<script type='text/javascript' "+(ie?"defer='defer'":"")+" id='_initialScript'>"+"setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+t.uid+"'];editor._setup(document);},0);"+"var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);<\/script></html>";e.appendChild(domUtils.createElement(document,"iframe",{id:"ueditor_"+t.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(i.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+r+'");document.close();}())'}));e.style.overflow="hidden";setTimeout(function(){if(/%$/.test(i.initialFrameWidth)){i.minFrameWidth=i.initialFrameWidth=e.offsetWidth}if(/%$/.test(i.initialFrameHeight)){i.minFrameHeight=i.initialFrameHeight=e.offsetHeight;e.style.height=i.initialFrameHeight+"px"}})}},_setup:function(e){var t=this,n=t.options;if(ie){e.body.disabled=true;e.body.contentEditable=true;e.body.disabled=false}else{e.body.contentEditable=true}e.body.spellcheck=false;t.document=e;t.window=e.defaultView||e.parentWindow;t.iframe=t.window.frameElement;t.body=e.body;t.selection=new dom.Selection(e);var r;if(browser.gecko&&(r=this.selection.getNative())){r.removeAllRanges()}this._initEvents();for(var o=this.iframe.parentNode;!domUtils.isBody(o);o=o.parentNode){if(o.tagName=="FORM"){t.form=o;if(t.options.autoSyncData){domUtils.on(t.window,"blur",function(){i(o,t)})}else{domUtils.on(o,"submit",function(){i(this,t)})}break}}if(n.initialContent){if(n.autoClearinitialContent){var a=t.execCommand;t.execCommand=function(){t.fireEvent("firstBeforeExecCommand");return a.apply(t,arguments)};this._setDefaultContent(n.initialContent)}else this.setContent(n.initialContent,false,true)}if(domUtils.isEmptyNode(t.body)){t.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"}if(n.focus){setTimeout(function(){t.focus(t.options.focusInEnd);!t.options.autoClearinitialContent&&t._selectionChange()},0)}if(!t.container){t.container=this.iframe.parentNode}if(n.fullscreen&&t.ui){t.ui.setFullScreen(true)}try{t.document.execCommand("2D-position",false,false)}catch(e){}try{t.document.execCommand("enableInlineTableEditing",false,false)}catch(e){}try{t.document.execCommand("enableObjectResizing",false,false)}catch(e){}t._bindshortcutKeys();t.isReady=1;t.fireEvent("ready");n.onready&&n.onready.call(t);if(!browser.ie9below){domUtils.on(t.window,["blur","focus"],function(e){if(e.type=="blur"){t._bakRange=t.selection.getRange();try{t._bakNativeRange=t.selection.getNative().getRangeAt(0);t.selection.getNative().removeAllRanges()}catch(e){t._bakNativeRange=null}}else{try{t._bakRange&&t._bakRange.select()}catch(e){}}})}if(browser.gecko&&browser.version<=10902){t.body.contentEditable=false;setTimeout(function(){t.body.contentEditable=true},100);setInterval(function(){t.body.style.height=t.iframe.offsetHeight-20+"px"},100)}!n.isShow&&t.setHide();n.readonly&&t.setDisabled()},sync:function(e){var t=this,n=e?document.getElementById(e):domUtils.findParent(t.iframe.parentNode,function(e){return e.tagName=="FORM"},true);n&&i(n,t)},setHeight:function(e,t){if(e!==parseInt(this.iframe.parentNode.style.height)){this.iframe.parentNode.style.height=e+"px"}!t&&(this.options.minFrameHeight=this.options.initialFrameHeight=e);this.body.style.height=e+"px";!t&&this.trigger("setHeight")},addshortcutkey:function(e,t){var i={};if(t){i[e]=t}else{i=e}utils.extend(this.shortcutkeys,i)},_bindshortcutKeys:function(){var e=this,t=this.shortcutkeys;e.addListener("keydown",function(i,n){var r=n.keyCode||n.which;for(var o in t){var a=t[o].split(",");for(var s=0,l;l=a[s++];){l=l.split(":");var d=l[0],c=l[1];if(/^(ctrl)(\+shift)?\+(\d+)$/.test(d.toLowerCase())||/^(\d+)$/.test(d)){if((RegExp.$1=="ctrl"?n.ctrlKey||n.metaKey:0)&&(RegExp.$2!=""?n[RegExp.$2.slice(1)+"Key"]:1)&&r==RegExp.$3||r==RegExp.$1){if(e.queryCommandState(o,c)!=-1)e.execCommand(o,c);domUtils.preventDefault(n)}}}}})},getContent:function(e,t,i,n,r){var o=this;if(e&&utils.isFunction(e)){t=e;e=""}if(t?!t():!this.hasContents()){return""}o.fireEvent("beforegetcontent");var a=UE.htmlparser(o.body.innerHTML,n);o.filterOutputRule(a);o.fireEvent("aftergetcontent",e,a);return a.toHtml(r)},getAllHtml:function(){var e=this,t=[],i="";e.fireEvent("getAllHtml",t);if(browser.ie&&browser.version>8){var n="";utils.each(e.document.styleSheets,function(e){n+=e.href?'<link rel="stylesheet" type="text/css" href="'+e.href+'" />':"<style>"+e.cssText+"</style>"});utils.each(e.document.getElementsByTagName("script"),function(e){n+=e.outerHTML})}return"<html><head>"+(e.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+e.options.charset+'"/>':"")+(n||e.document.getElementsByTagName("head")[0].innerHTML)+t.join("\n")+"</head>"+"<body "+(ie&&browser.version<9?'class="view"':"")+">"+e.getContent(null,null,true)+"</body></html>"},getPlainTxt:function(){var e=new RegExp(domUtils.fillChar,"g"),t=this.body.innerHTML.replace(/[\n\r]/g,"");t=t.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(e,t,i){return dtd.$block[i]?"\n":t?t:""});return t.replace(e,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var e=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(e,"").replace(/\u00a0/g," ")},setContent:function(e,t,n){var r=this;r.fireEvent("beforesetcontent",e);var o=UE.htmlparser(e);r.filterInputRule(o);e=o.toHtml();r.body.innerHTML=(t?r.body.innerHTML:"")+e;function a(e){return e.tagName=="DIV"&&e.getAttribute("cdata_tag")}if(r.options.enterTag=="p"){var s=this.body.firstChild,l;if(!s||s.nodeType==1&&(dtd.$cdata[s.tagName]||a(s)||domUtils.isCustomeNode(s))&&s===this.body.lastChild){this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML}else{var d=r.document.createElement("p");while(s){while(s&&(s.nodeType==3||s.nodeType==1&&dtd.p[s.tagName]&&!dtd.$cdata[s.tagName])){l=s.nextSibling;d.appendChild(s);s=l}if(d.firstChild){if(!s){r.body.appendChild(d);break}else{s.parentNode.insertBefore(d,s);d=r.document.createElement("p")}}s=s.nextSibling}}}r.fireEvent("aftersetcontent");r.fireEvent("contentchange");!n&&r._selectionChange();r._bakRange=r._bakIERange=r._bakNativeRange=null;var c;if(browser.gecko&&(c=this.selection.getNative())){c.removeAllRanges()}if(r.options.autoSyncData){r.form&&i(r.form,r)}},focus:function(e){try{var t=this,i=t.selection.getRange();if(e){var n=t.body.lastChild;if(n&&n.nodeType==1&&!dtd.$empty[n.tagName]){if(domUtils.isEmptyBlock(n)){i.setStartAtFirst(n)}else{i.setStartAtLast(n)}i.collapse(true)}i.setCursor(true)}else{if(!i.collapsed&&domUtils.isBody(i.startContainer)&&i.startOffset==0){var n=t.body.firstChild;if(n&&n.nodeType==1&&!dtd.$empty[n.tagName]){i.setStartAtFirst(n).collapse(true)}}i.select(true)}this.fireEvent("focus selectionchange")}catch(e){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var e=this.selection.getNative();if(e.empty&&browser.ie){var t=document.body.createTextRange();t.moveToElementText(document.body);t.collapse(true);t.select();e.empty()}else{e.removeAllRanges()}},_initEvents:function(){var e=this,t=e.document,i=e.window;e._proxyDomEvent=utils.bind(e._proxyDomEvent,e);domUtils.on(t,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],e._proxyDomEvent);domUtils.on(i,["focus","blur"],e._proxyDomEvent);domUtils.on(e.body,"drop",function(t){if(browser.gecko&&t.stopPropagation){t.stopPropagation()}e.fireEvent("contentchange")});domUtils.on(t,["mouseup","keydown"],function(t){if(t.type=="keydown"&&(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){return}if(t.button==2)return;e._selectionChange(250,t)})},_proxyDomEvent:function(e){if(this.fireEvent("before"+e.type.replace(/^on/,"").toLowerCase())===false){return false}if(this.fireEvent(e.type.replace(/^on/,""),e)===false){return false}return this.fireEvent("after"+e.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(e,i){var n=this;var r=false;var o,a;if(browser.ie&&browser.version<9&&i&&i.type=="mouseup"){var s=this.selection.getRange();if(!s.collapsed){r=true;o=i.clientX;a=i.clientY}}clearTimeout(t);t=setTimeout(function(){if(!n.selection||!n.selection.getNative()){return}var e;if(r&&n.selection.getNative().type=="None"){e=n.document.body.createTextRange();try{e.moveToPoint(o,a)}catch(t){e=null}}var t;if(e){t=n.selection.getIERange;n.selection.getIERange=function(){return e}}n.selection.cache();if(t){n.selection.getIERange=t}if(n.selection._cachedRange&&n.selection._cachedStartElement){n.fireEvent("beforeselectionchange");n.fireEvent("selectionchange",!!i);n.fireEvent("afterselectionchange");n.selection.clear()}},e||50)},_callCmdFn:function(e,t){var i=t[0].toLowerCase(),n,r;n=this.commands[i]||UE.commands[i];r=n&&n[e];if((!n||!r)&&e=="queryCommandState"){return 0}else if(r){return r.apply(this,t)}},execCommand:function(e){e=e.toLowerCase();var t=this,i,n=t.commands[e]||UE.commands[e];if(!n||!n.execCommand){return null}if(!n.notNeedUndo&&!t.__hasEnterExecCommand){t.__hasEnterExecCommand=true;if(t.queryCommandState.apply(t,arguments)!=-1){t.fireEvent("saveScene");t.fireEvent.apply(t,["beforeexeccommand",e].concat(arguments));i=this._callCmdFn("execCommand",arguments);t.fireEvent.apply(t,["afterexeccommand",e].concat(arguments));t.fireEvent("saveScene")}t.__hasEnterExecCommand=false}else{i=this._callCmdFn("execCommand",arguments);!t.__hasEnterExecCommand&&!n.ignoreContentChange&&!t._ignoreContentChange&&t.fireEvent("contentchange")}!t.__hasEnterExecCommand&&!n.ignoreContentChange&&!t._ignoreContentChange&&t._selectionChange();return i},queryCommandState:function(e){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(e){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(e){if(e){for(var t=0,i;i=e[t++];){if(this.document.getElementsByTagName(i).length>0){return true}}}if(!domUtils.isEmptyBlock(this.body)){return true}e=["div"];for(t=0;i=e[t++];){var n=domUtils.getElementsByTagName(this.document,i);for(var r=0,o;o=n[r++];){if(domUtils.isCustomeNode(o)){return true}}}return false},reset:function(){this.fireEvent("reset")},setEnabled:function(){var e=this,t;if(e.body.contentEditable=="false"){e.body.contentEditable=true;t=e.selection.getRange();try{t.moveToBookmark(e.lastBk);delete e.lastBk}catch(i){t.setStartAtFirst(e.body).collapse(true)}t.select(true);if(e.bkqueryCommandState){e.queryCommandState=e.bkqueryCommandState;delete e.bkqueryCommandState}if(e.bkqueryCommandValue){e.queryCommandValue=e.bkqueryCommandValue;delete e.bkqueryCommandValue}e.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(e){var t=this;e=e?utils.isArray(e)?e:[e]:[];if(t.body.contentEditable=="true"){if(!t.lastBk){t.lastBk=t.selection.getRange().createBookmark(true)}t.body.contentEditable=false;t.bkqueryCommandState=t.queryCommandState;t.bkqueryCommandValue=t.queryCommandValue;t.queryCommandState=function(i){if(utils.indexOf(e,i)!=-1){return t.bkqueryCommandState.apply(t,arguments)}return-1};t.queryCommandValue=function(i){if(utils.indexOf(e,i)!=-1){return t.bkqueryCommandValue.apply(t,arguments)}return null};t.fireEvent("selectionchange")}},disable:function(e){return this.setDisabled(e)},_setDefaultContent:function(){function e(){var t=this;if(t.document.getElementById("initContent")){t.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";t.removeListener("firstBeforeExecCommand focus",e);setTimeout(function(){t.focus();t._selectionChange()},0)}}return function(t){var i=this;i.body.innerHTML='<p id="initContent">'+t+"</p>";i.addListener("firstBeforeExecCommand focus",e)}}(),setShow:function(){var e=this,t=e.selection.getRange();if(e.container.style.display=="none"){try{t.moveToBookmark(e.lastBk);delete e.lastBk}catch(i){t.setStartAtFirst(e.body).collapse(true)}setTimeout(function(){t.select(true)},100);e.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var e=this;if(!e.lastBk){e.lastBk=e.selection.getRange().createBookmark(true)}e.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(e){var t=UE.I18N[this.options.lang];if(!t){throw Error("not import language file")}e=(e||"").split(".");for(var i=0,n;n=e[i++];){t=t[n];if(!t)break}return t},getContentLength:function(e,t){var i=this.getContent(false,false,true).length;if(e){t=(t||[]).concat(["hr","img","iframe"]);i=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var n=0,r;r=t[n++];){i+=this.document.getElementsByTagName(r).length}}return i},addInputRule:function(e){this.inputRules.push(e)},filterInputRule:function(e){for(var t=0,i;i=this.inputRules[t++];){i.call(this,e)}},addOutputRule:function(e){this.outputRules.push(e)},filterOutputRule:function(e){for(var t=0,i;i=this.outputRules[t++];){i.call(this,e)}},getActionUrl:function(e){var t=this.getOpt(e)||e,i=this.getOpt("imageUrl"),n=this.getOpt("serverUrl");if(!n&&i){n=i.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")}if(n){n=n+(n.indexOf("?")==-1?"?":"&")+"action="+(t||"");return utils.formatUrl(n)}else{return""}}};utils.inherits(a,EventBase)})();UE.Editor.defaultOptions=function(e){var t=e.options.UEDITOR_HOME_URL;return{isShow:true,initialContent:"",initialStyle:"",autoClearinitialContent:false,iframeCssUrl:t+"themes/iframe.css",textarea:"editorValue",focus:false,focusInEnd:true,autoClearEmptyNode:true,fullscreen:false,readonly:false,zIndex:999,imagePopup:true,enterTag:"p",customDomain:false,lang:"zh-cn",langPath:t+"lang/",theme:"default",themePath:t+"themes/",allHtmlEnabled:false,scaleEnabled:false,tableNativeEditInFF:false,autoSyncData:true,fileNameFormat:"{time}{rand:6}"}};(function(){UE.Editor.prototype.loadServerConfig=function(){var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt("serverUrl",me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var configUrl=me.getActionUrl("config"),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=false;configUrl&&UE.ajax.request(configUrl,{method:"GET",dataType:isJsonp?"jsonp":"",onsuccess:function(r){try{var config=isJsonp?r:eval("("+r.responseText+")");utils.extend(me.options,config);me.fireEvent("serverConfigLoaded");me._serverConfigLoaded=true}catch(e){showErrorMsg(me.getLang("loadconfigFormatError"))}},onerror:function(){showErrorMsg(me.getLang("loadconfigHttpError"))}})}catch(e){showErrorMsg(me.getLang("loadconfigError"))}});function showErrorMsg(e){console&&console.error(e)}};UE.Editor.prototype.isServerConfigLoaded=function(){var e=this;return e._serverConfigLoaded||false};UE.Editor.prototype.afterConfigReady=function(e){if(!e||!utils.isFunction(e))return;var t=this;var i=function(){e.apply(t,arguments);t.removeListener("serverConfigLoaded",i)};if(t.isServerConfigLoaded()){e.call(t,"serverConfigLoaded")}else{t.addListener("serverConfigLoaded",i)}}})();UE.ajax=function(){var e="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP");e="ActiveXObject('Msxml2.XMLHTTP')"}catch(t){try{new ActiveXObject("Microsoft.XMLHTTP");e="ActiveXObject('Microsoft.XMLHTTP')"}catch(e){}}var t=new Function("return new "+e);function i(e){var t=[];for(var i in e){if(i=="method"||i=="timeout"||i=="async"||i=="dataType"||i=="callback")continue;if(e[i]==undefined||e[i]==null)continue;if(!((typeof e[i]).toLowerCase()=="function"||(typeof e[i]).toLowerCase()=="object")){t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]))}else if(utils.isArray(e[i])){for(var n=0;n<e[i].length;n++){t.push(encodeURIComponent(i)+"[]="+encodeURIComponent(e[i][n]))}}}return t.join("&")}function n(e,n){var r=t(),o=false,a={method:"POST",timeout:5e3,async:true,data:{},onsuccess:function(){},onerror:function(){}};if(typeof e==="object"){n=e;e=n.url}if(!r||!e)return;var s=n?utils.extend(a,n):a;var l=i(s);if(!utils.isEmptyObject(s.data)){l+=(l?"&":"")+i(s.data)}var d=setTimeout(function(){if(r.readyState!=4){o=true;r.abort();clearTimeout(d)}},s.timeout);var c=s.method.toUpperCase();var u=e+(e.indexOf("?")==-1?"?":"&")+(c=="POST"?"":l+"&noCache="+ +new Date);r.open(c,u,s.async);r.onreadystatechange=function(){if(r.readyState==4){if(!o&&r.status==200){s.onsuccess(r)}else{s.onerror(r)}}};if(c=="POST"){r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");r.send(l)}else{r.send(null)}}function r(e,t){var n=t.onsuccess||function(){},r=document.createElement("SCRIPT"),o=t||{},a=o["charset"],s=o["jsonp"]||"callback",l,d=o["timeOut"]||0,c,u=new RegExp("(\\?|&)"+s+"=([^&]*)"),f;if(utils.isFunction(n)){l="bd__editor__"+Math.floor(Math.random()*2147483648).toString(36);window[l]=m(0)}else if(utils.isString(n)){l=n}else{if(f=u.exec(e)){l=f[2]}}e=e.replace(u,"$1"+s+"="+l);if(e.search(u)<0){e+=(e.indexOf("?")<0?"?":"&")+s+"="+l}var h=i(t);if(!utils.isEmptyObject(t.data)){h+=(h?"&":"")+i(t.data)}if(h){e=e.replace(/\?/,"?"+h+"&")}r.onerror=m(1);if(d){c=setTimeout(m(1),d)}p(r,e,a);function p(e,t,i){e.setAttribute("type","text/javascript");e.setAttribute("defer","defer");i&&e.setAttribute("charset",i);e.setAttribute("src",t);document.getElementsByTagName("head")[0].appendChild(e)}function m(e){return function(){try{if(e){o.onerror&&o.onerror()}else{try{clearTimeout(c);n.apply(window,arguments)}catch(e){}}}catch(e){o.onerror&&o.onerror.call(window,e)}finally{o.oncomplete&&o.oncomplete.apply(window,arguments);r.parentNode&&r.parentNode.removeChild(r);window[l]=null;try{delete window[l]}catch(e){}}}}}return{request:function(e,t){if(t&&t.dataType=="jsonp"){r(e,t)}else{n(e,t)}},getJSONP:function(e,t,i){var n={data:t,oncomplete:i};r(e,n)}}}();var filterWord=UE.filterWord=function(){function e(e){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/gi.test(e)}function t(e){e=e.replace(/[\d.]+\w+/g,function(e){return utils.transUnitToPx(e)});return e}function i(e){return e.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/gi,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(e){if(browser.opera){return""}try{if(/Bitmap/i.test(e)){return""}var i=e.match(/width:([ \d.]*p[tx])/i)[1],n=e.match(/height:([ \d.]*p[tx])/i)[1],r=e.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+t(i)+'" height="'+t(n)+'" src="'+r+'" />'}catch(e){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/gi,function(e,t,i,n){return t=="class"&&n=="MsoListParagraph"?e:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(e,t,i){return i.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(e,i,n,r){var o=[],a=r.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(e){return utils.transUnitToPx(e)}).split(/;\s*/g);for(var s=0,l;l=a[s];s++){var d,c,u=l.split(":");if(u.length==2){d=u[0].toLowerCase();c=u[1].toLowerCase();if(/^(background)\w*/.test(d)&&c.replace(/(initial|\s)/g,"").length==0||/^(margin)\w*/.test(d)&&/^0\w+$/.test(c)){continue}switch(d){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":if(!/<table/.test(i))o[s]=d.replace(/^mso-|-alt$/g,"")+":"+t(c);continue;case"horiz-align":o[s]="text-align:"+c;continue;case"vert-align":o[s]="vertical-align:"+c;continue;case"font-color":case"mso-foreground":o[s]="color:"+c;continue;case"mso-background":case"mso-highlight":o[s]="background:"+c;continue;case"mso-default-height":o[s]="min-height:"+t(c);continue;case"mso-default-width":o[s]="min-width:"+t(c);continue;case"mso-padding-between-alt":o[s]="border-collapse:separate;border-spacing:"+t(c);continue;case"text-line-through":if(c=="single"||c=="double"){o[s]="text-decoration:line-through"}continue;case"mso-zero-height":if(c=="yes"){o[s]="display:none"}continue;case"margin":if(!/[1-9]/.test(c)){continue}}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(d)||/text\-indent|padding|margin/.test(d)&&/\-[\d.]+/.test(c)){continue}o[s]=d+":"+u[1]}}return i+(o.length?' style="'+o.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(t){return e(t)?i(t):t}}();(function(){var e=UE.uNode=function(e){this.type=e.type;this.data=e.data;this.tagName=e.tagName;this.parentNode=e.parentNode;this.attrs=e.attrs||{};this.children=e.children};var t={href:1,src:1,_src:1,_href:1,cdata_data:1};var i={style:1,script:1};var n="    ",r="\n";function o(e,t,i){e.push(r);return t+(i?1:-1)}function a(e,t){for(var i=0;i<t;i++){e.push(n)}}e.createElement=function(t){if(/[<>]/.test(t)){return UE.htmlparser(t).children[0]}else{return new e({type:"element",children:[],tagName:t})}};e.createText=function(e,t){return new UE.uNode({type:"text",data:t?e:utils.unhtml(e||"")})};function s(e,t,i,n){switch(e.type){case"root":for(var r=0,u;u=e.children[r++];){if(i&&u.type=="element"&&!dtd.$inlineWithA[u.tagName]&&r>1){o(t,n,true);a(t,n)}s(u,t,i,n)}break;case"text":l(e,t);break;case"element":d(e,t,i,n);break;case"comment":c(e,t,i)}return t}function l(e,t){if(e.parentNode.tagName=="pre"){t.push(e.data)}else{t.push(i[e.parentNode.tagName]?utils.html(e.data):e.data.replace(/[ ]{2}/g," &nbsp;"))}}function d(e,i,n,r){var l="";if(e.attrs){l=[];var d=e.attrs;for(var c in d){l.push(c+(d[c]!==undefined?'="'+(t[c]?utils.html(d[c]).replace(/["]/g,function(e){return"&quot;"}):utils.unhtml(d[c]))+'"':""))}l=l.join(" ")}i.push("<"+e.tagName+(l?" "+l:"")+(dtd.$empty[e.tagName]?"/":"")+">");if(n&&!dtd.$inlineWithA[e.tagName]&&e.tagName!="pre"){if(e.children&&e.children.length){r=o(i,r,true);a(i,r)}}if(e.children&&e.children.length){for(var u=0,f;f=e.children[u++];){if(n&&f.type=="element"&&!dtd.$inlineWithA[f.tagName]&&u>1){o(i,r);a(i,r)}s(f,i,n,r)}}if(!dtd.$empty[e.tagName]){if(n&&!dtd.$inlineWithA[e.tagName]&&e.tagName!="pre"){if(e.children&&e.children.length){r=o(i,r);a(i,r)}}i.push("</"+e.tagName+">")}}function c(e,t){t.push("\x3c!--"+e.data+"--\x3e")}function u(e,t){var i;if(e.type=="element"&&e.getAttr("id")==t){return e}if(e.children&&e.children.length){for(var n=0,r;r=e.children[n++];){if(i=u(r,t)){return i}}}}function f(e,t,i){if(e.type=="element"&&e.tagName==t){i.push(e)}if(e.children&&e.children.length){for(var n=0,r;r=e.children[n++];){f(r,t,i)}}}function h(e,t){if(e.children&&e.children.length){for(var i=0,n;n=e.children[i];){h(n,t);if(n.parentNode){if(n.children&&n.children.length){t(n)}if(n.parentNode)i++}}}else{t(e)}}e.prototype={toHtml:function(e){var t=[];s(this,t,e,0);return t.join("")},innerHTML:function(e){if(this.type!="element"||dtd.$empty[this.tagName]){return this}if(utils.isString(e)){if(this.children){for(var t=0,i;i=this.children[t++];){i.parentNode=null}}this.children=[];var n=UE.htmlparser(e);for(var t=0,i;i=n.children[t++];){this.children.push(i);i.parentNode=this}return this}else{var n=new UE.uNode({type:"root",children:this.children});return n.toHtml()}},innerText:function(t,i){if(this.type!="element"||dtd.$empty[this.tagName]){return this}if(t){if(this.children){for(var n=0,r;r=this.children[n++];){r.parentNode=null}}this.children=[];this.appendChild(e.createText(t,i));return this}else{return this.toHtml().replace(/<[^>]+>/g,"")}},getData:function(){if(this.type=="element")return"";return this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){var e=this.parentNode;for(var t=0,i;i=e.children[t];t++){if(i===this){return t==0?null:e.children[t-1]}}},nextSibling:function(){var e=this.parentNode;for(var t=0,i;i=e.children[t++];){if(i===this){return e.children[t]}}},replaceChild:function(e,t){if(this.children){if(e.parentNode){e.parentNode.removeChild(e)}for(var i=0,n;n=this.children[i];i++){if(n===t){this.children.splice(i,1,e);t.parentNode=null;e.parentNode=this;return e}}}},appendChild:function(e){if(this.type=="root"||this.type=="element"&&!dtd.$empty[this.tagName]){if(!this.children){this.children=[]}if(e.parentNode){e.parentNode.removeChild(e)}for(var t=0,i;i=this.children[t];t++){if(i===e){this.children.splice(t,1);break}}this.children.push(e);e.parentNode=this;return e}},insertBefore:function(e,t){if(this.children){if(e.parentNode){e.parentNode.removeChild(e)}for(var i=0,n;n=this.children[i];i++){if(n===t){this.children.splice(i,0,e);e.parentNode=this;return e}}}},insertAfter:function(e,t){if(this.children){if(e.parentNode){e.parentNode.removeChild(e)}for(var i=0,n;n=this.children[i];i++){if(n===t){this.children.splice(i+1,0,e);e.parentNode=this;return e}}}},removeChild:function(e,t){if(this.children){for(var i=0,n;n=this.children[i];i++){if(n===e){this.children.splice(i,1);n.parentNode=null;if(t&&n.children&&n.children.length){for(var r=0,o;o=n.children[r];r++){this.children.splice(i+r,0,o);o.parentNode=this}}return n}}}},getAttr:function(e){return this.attrs&&this.attrs[e.toLowerCase()]},setAttr:function(e,t){if(!e){delete this.attrs;return}if(!this.attrs){this.attrs={}}if(utils.isObject(e)){for(var i in e){if(!e[i]){delete this.attrs[i]}else{this.attrs[i.toLowerCase()]=e[i]}}}else{if(!t){delete this.attrs[e]}else{this.attrs[e.toLowerCase()]=t}}},getIndex:function(){var e=this.parentNode;for(var t=0,i;i=e.children[t];t++){if(i===this){return t}}return-1},getNodeById:function(e){var t;if(this.children&&this.children.length){for(var i=0,n;n=this.children[i++];){if(t=u(n,e)){return t}}}},getNodesByTagName:function(e){e=utils.trim(e).replace(/[ ]{2,}/g," ").split(" ");var t=[],i=this;utils.each(e,function(e){if(i.children&&i.children.length){for(var n=0,r;r=i.children[n++];){f(r,e,t)}}});return t},getStyle:function(e){var t=this.getAttr("style");if(!t){return""}var i=new RegExp("(^|;)\\s*"+e+":([^;]+)","i");var n=t.match(i);if(n&&n[0]){return n[2]}return""},setStyle:function(e,t){function i(e,t){var i=new RegExp("(^|;)\\s*"+e+":([^;]+;?)","gi");n=n.replace(i,"$1");if(t){n=e+":"+utils.unhtml(t)+";"+n}}var n=this.getAttr("style");if(!n){n=""}if(utils.isObject(e)){for(var r in e){i(r,e[r])}}else{i(e,t)}this.setAttr("style",utils.trim(n))},traversal:function(e){if(this.children&&this.children.length){h(this,e)}return this}}})();var htmlparser=UE.htmlparser=function(e,t){var i=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,n=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g;var r={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};e=e.replace(new RegExp(domUtils.fillChar,"g"),"");if(!t){e=e.replace(new RegExp("[\\r\\t\\n"+(t?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(t?"":" ")+"]*","g"),function(e,i){if(i&&r[i.toLowerCase()]){return e.replace(/(^[\n\r]+)|([\n\r]+$)/g,"")}return e.replace(new RegExp("^[\\r\\n"+(t?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(t?"":" ")+"]+$"),"")})}var o={href:1,src:1};var a=UE.uNode,s={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},l={ol:"li",ul:"li"};function d(e,t){if(l[e.tagName]){var i=a.createElement(l[e.tagName]);e.appendChild(i);i.appendChild(a.createText(t));e=i}else{e.appendChild(a.createText(t))}}function c(e,t,i){var r;if(r=s[t]){var l=e,d;while(l.type!="root"){if(utils.isArray(r)?utils.indexOf(r,l.tagName)!=-1:r==l.tagName){e=l;d=true;break}l=l.parentNode}if(!d){e=c(e,utils.isArray(r)?r[0]:r)}}var u=new a({parentNode:e,type:"element",tagName:t.toLowerCase(),children:dtd.$empty[t]?null:[]});if(i){var f={},h;while(h=n.exec(i)){f[h[1].toLowerCase()]=o[h[1].toLowerCase()]?h[2]||h[3]||h[4]:utils.unhtml(h[2]||h[3]||h[4])}u.attrs=f}e.children.push(u);return dtd.$empty[t]?e:u}function u(e,t){e.children.push(new a({type:"comment",data:t,parentNode:e}))}var f,h=0,p=0;var m=new a({type:"root",children:[]});var g=m;while(f=i.exec(e)){h=f.index;try{if(h>p){d(g,e.slice(p,h))}if(f[3]){if(dtd.$cdata[g.tagName]){d(g,f[0])}else{g=c(g,f[3].toLowerCase(),f[4])}}else if(f[1]){if(g.type!="root"){if(dtd.$cdata[g.tagName]&&!dtd.$cdata[f[1]]){d(g,f[0])}else{var v=g;while(g.type=="element"&&g.tagName!=f[1].toLowerCase()){g=g.parentNode;if(g.type=="root"){g=v;throw"break"}}g=g.parentNode}}}else if(f[2]){u(g,f[2])}}catch(e){}p=i.lastIndex}if(p<e.length){d(g,e.slice(p))}return m};var filterNode=UE.filterNode=function(){function e(t,i){switch(t.type){case"text":break;case"element":var n;if(n=i[t.tagName]){if(n==="-"){t.parentNode.removeChild(t)}else if(utils.isFunction(n)){var r=t.parentNode,o=t.getIndex();n(t);if(t.parentNode){if(t.children){for(var a=0,s;s=t.children[a];){e(s,i);if(s.parentNode){a++}}}}else{for(var a=o,s;s=r.children[a];){e(s,i);if(s.parentNode){a++}}}}else{var l=n["$"];if(l&&t.attrs){var d={},c;for(var u in l){c=t.getAttr(u);if(u=="style"&&utils.isArray(l[u])){var f=[];utils.each(l[u],function(e){var i;if(i=t.getStyle(e)){f.push(e+":"+i)}});c=f.join(";")}if(c){d[u]=c}}t.attrs=d}if(t.children){for(var a=0,s;s=t.children[a];){e(s,i);if(s.parentNode){a++}}}}}else{if(dtd.$cdata[t.tagName]){t.parentNode.removeChild(t)}else{var r=t.parentNode,o=t.getIndex();t.parentNode.removeChild(t,true);for(var a=o,s;s=r.children[a];){e(s,i);if(s.parentNode){a++}}}}break;case"comment":t.parentNode.removeChild(t)}}return function(t,i){if(utils.isEmptyObject(i)){return t}var n;if(n=i["-"]){utils.each(n.split(" "),function(e){i[e]="-"})}for(var r=0,o;o=t.children[r];){e(o,i);if(o.parentNode){r++}}return t}}();UE.plugin=function(){var e={};return{register:function(t,i,n,r){if(n&&utils.isFunction(n)){r=n;n=null}e[t]={optionName:n||t,execFn:i,afterDisabled:r}},load:function(t){utils.each(e,function(e){var i=e.execFn.call(t);if(t.options[e.optionName]!==false){if(i){utils.each(i,function(e,i){switch(i.toLowerCase()){case"shortcutkey":t.addshortcutkey(e);break;case"bindevents":utils.each(e,function(e,i){t.addListener(i,e)});break;case"bindmultievents":utils.each(utils.isArray(e)?e:[e],function(e){var i=utils.trim(e.type).split(/\s+/);utils.each(i,function(i){t.addListener(i,e.handler)})});break;case"commands":utils.each(e,function(e,i){t.commands[i]=e});break;case"outputrule":t.addOutputRule(e);break;case"inputrule":t.addInputRule(e);break;case"defaultoptions":t.setOpt(e)}})}}else if(e.afterDisabled){e.afterDisabled.call(t)}});utils.each(UE.plugins,function(e){e.call(t)})},run:function(t,i){var n=e[t];if(n){n.exeFn.call(i)}}}}();var keymap=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78};var LocalStorage=UE.LocalStorage=function(){var e=window.localStorage||i()||null,t="localStorage";return{saveLocalData:function(t,i){if(e&&i){e.setItem(t,i);return true}return false},getLocalData:function(t){if(e){return e.getItem(t)}return null},removeItem:function(t){e&&e.removeItem(t)}};function i(){var e=document.createElement("div");e.style.display="none";if(!e.addBehavior){return null}e.addBehavior("#default#userdata");return{getItem:function(i){var n=null;try{document.body.appendChild(e);e.load(t);n=e.getAttribute(i);document.body.removeChild(e)}catch(e){}return n},setItem:function(i,n){document.body.appendChild(e);e.setAttribute(i,n);e.save(t);document.body.removeChild(e)},removeItem:function(i){document.body.appendChild(e);e.removeAttribute(i);e.save(t);document.body.removeChild(e)}}}}();(function(){var e="ueditor_preference";UE.Editor.prototype.setPreferences=function(t,i){var n={};if(utils.isString(t)){n[t]=i}else{n=t}var r=LocalStorage.getLocalData(e);if(r&&(r=utils.str2json(r))){utils.extend(r,n)}else{r=n}r&&LocalStorage.saveLocalData(e,utils.json2str(r))};UE.Editor.prototype.getPreferences=function(t){var i=LocalStorage.getLocalData(e);if(i&&(i=utils.str2json(i))){return t?i[t]:i}return null};UE.Editor.prototype.removePreferences=function(t){var i=LocalStorage.getLocalData(e);if(i&&(i=utils.str2json(i))){i[t]=undefined;delete i[t]}i&&LocalStorage.saveLocalData(e,utils.json2str(i))}})();UE.plugins["defaultfilter"]=function(){var e=this;e.setOpt({allowDivTransToP:true,disabledTableInTable:true});e.addInputRule(function(t){var i=this.options.allowDivTransToP;var n;function r(e){while(e&&e.type=="element"){if(e.tagName=="td"){return true}e=e.parentNode}return false}t.traversal(function(t){if(t.type=="element"){if(!dtd.$cdata[t.tagName]&&e.options.autoClearEmptyNode&&dtd.$inline[t.tagName]&&!dtd.$empty[t.tagName]&&(!t.attrs||utils.isEmptyObject(t.attrs))){if(!t.firstChild())t.parentNode.removeChild(t);else if(t.tagName=="span"&&(!t.attrs||utils.isEmptyObject(t.attrs))){t.parentNode.removeChild(t,true)}return}switch(t.tagName){case"style":case"script":t.setAttr({cdata_tag:t.tagName,cdata_data:t.innerHTML()||"",_ue_custom_node_:"true"});t.tagName="div";t.innerHTML("");break;case"a":if(n=t.getAttr("href")){t.setAttr("_href",n)}break;case"img":if(n=t.getAttr("src")){if(/^data:/.test(n)){t.parentNode.removeChild(t);break}}t.setAttr("_src",t.getAttr("src"));break;case"span":if(browser.webkit&&(n=t.getStyle("white-space"))){if(/nowrap|normal/.test(n)){t.setStyle("white-space","");if(e.options.autoClearEmptyNode&&utils.isEmptyObject(t.attrs)){t.parentNode.removeChild(t,true)}}}n=t.getAttr("id");if(n&&/^_baidu_bookmark_/i.test(n)){t.parentNode.removeChild(t)}break;case"p":if(n=t.getAttr("align")){t.setAttr("align");t.setStyle("text-align",n)}utils.each(t.children,function(e){if(e.type=="element"&&e.tagName=="p"){var i=e.nextSibling();t.parentNode.insertAfter(e,t);var n=e;while(i){var r=i.nextSibling();t.parentNode.insertAfter(i,n);n=i;i=r}return false}});if(!t.firstChild()){t.innerHTML(browser.ie?"&nbsp;":"<br/>")}break;case"div":if(t.getAttr("cdata_tag")){break}n=t.getAttr("class");if(n&&/^line number\d+/.test(n)){break}if(!i){break}var o,a=UE.uNode.createElement("p");while(o=t.firstChild()){if(o.type=="text"||!UE.dom.dtd.$block[o.tagName]){a.appendChild(o)}else{if(a.firstChild()){t.parentNode.insertBefore(a,t);a=UE.uNode.createElement("p")}else{t.parentNode.insertBefore(o,t)}}}if(a.firstChild()){t.parentNode.insertBefore(a,t)}t.parentNode.removeChild(t);break;case"dl":t.tagName="ul";break;case"dt":case"dd":t.tagName="li";break;case"li":var s=t.getAttr("class");if(!s||!/list\-/.test(s)){t.setAttr()}var l=t.getNodesByTagName("ol ul");UE.utils.each(l,function(e){t.parentNode.insertAfter(e,t)});break;case"td":case"th":case"caption":if(!t.children||!t.children.length){t.appendChild(browser.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"))}break;case"table":if(e.options.disabledTableInTable&&r(t)){t.parentNode.insertBefore(UE.uNode.createText(t.innerText()),t);t.parentNode.removeChild(t)}}}})});e.addOutputRule(function(t){var i;t.traversal(function(t){if(t.type=="element"){if(e.options.autoClearEmptyNode&&dtd.$inline[t.tagName]&&!dtd.$empty[t.tagName]&&(!t.attrs||utils.isEmptyObject(t.attrs))){if(!t.firstChild())t.parentNode.removeChild(t);else if(t.tagName=="span"&&(!t.attrs||utils.isEmptyObject(t.attrs))){t.parentNode.removeChild(t,true)}return}switch(t.tagName){case"div":if(i=t.getAttr("cdata_tag")){t.tagName=i;t.appendChild(UE.uNode.createText(t.getAttr("cdata_data")));t.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""})}break;case"a":if(i=t.getAttr("_href")){t.setAttr({href:utils.html(i),_href:""})}break;break;case"span":i=t.getAttr("id");if(i&&/^_baidu_bookmark_/i.test(i)){t.parentNode.removeChild(t)}break;case"img":if(i=t.getAttr("_src")){t.setAttr({src:t.getAttr("_src"),_src:""})}}}})})};UE.commands["inserthtml"]={execCommand:function(e,t,i){var n=this,r,o;if(!t){return}if(n.fireEvent("beforeinserthtml",t)===true){return}r=n.selection.getRange();o=r.document.createElement("div");o.style.display="inline";if(!i){var a=UE.htmlparser(t);if(n.options.filterRules){UE.filterNode(a,n.options.filterRules)}n.filterInputRule(a);t=a.toHtml()}o.innerHTML=utils.trim(t);if(!r.collapsed){var s=r.startContainer;if(domUtils.isFillChar(s)){r.setStartBefore(s)}s=r.endContainer;if(domUtils.isFillChar(s)){r.setEndAfter(s)}r.txtToElmBoundary();if(r.endContainer&&r.endContainer.nodeType==1){s=r.endContainer.childNodes[r.endOffset];if(s&&domUtils.isBr(s)){r.setEndAfter(s)}}if(r.startOffset==0){s=r.startContainer;if(domUtils.isBoundaryNode(s,"firstChild")){s=r.endContainer;if(r.endOffset==(s.nodeType==3?s.nodeValue.length:s.childNodes.length)&&domUtils.isBoundaryNode(s,"lastChild")){n.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";r.setStart(n.body.firstChild,0).collapse(true)}}}!r.collapsed&&r.deleteContents();if(r.startContainer.nodeType==1){var l=r.startContainer.childNodes[r.startOffset],d;if(l&&domUtils.isBlockElm(l)&&(d=l.previousSibling)&&domUtils.isBlockElm(d)){r.setEnd(d,d.childNodes.length).collapse();while(l.firstChild){d.appendChild(l.firstChild)}domUtils.remove(l)}}}var l,c,d,u,f=0,h;if(r.inFillChar()){l=r.startContainer;if(domUtils.isFillChar(l)){r.setStartBefore(l).collapse(true);domUtils.remove(l)}else if(domUtils.isFillChar(l,true)){l.nodeValue=l.nodeValue.replace(fillCharReg,"");r.startOffset--;r.collapsed&&r.collapse(true)}}var p=domUtils.findParentByTagName(r.startContainer,"li",true);if(p){var m,g;while(l=o.firstChild){while(l&&(l.nodeType==3||!domUtils.isBlockElm(l)||l.tagName=="HR")){m=l.nextSibling;r.insertNode(l).collapse();g=l;l=m}if(l){if(/^(ol|ul)$/i.test(l.tagName)){while(l.firstChild){g=l.firstChild;domUtils.insertAfter(p,l.firstChild);p=p.nextSibling}domUtils.remove(l)}else{var v;m=l.nextSibling;v=n.document.createElement("li");domUtils.insertAfter(p,v);v.appendChild(l);g=l;l=m;p=v}}}p=domUtils.findParentByTagName(r.startContainer,"li",true);if(domUtils.isEmptyBlock(p)){domUtils.remove(p)}if(g){r.setStartAfter(g).collapse(true).select(true)}}else{while(l=o.firstChild){if(f){var y=n.document.createElement("p");while(l&&(l.nodeType==3||!dtd.$block[l.tagName])){h=l.nextSibling;y.appendChild(l);l=h}if(y.firstChild){l=y}}r.insertNode(l);h=l.nextSibling;if(!f&&l.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(l)){c=domUtils.findParent(l,function(e){return domUtils.isBlockElm(e)});if(c&&c.tagName.toLowerCase()!="body"&&!(dtd[c.tagName][l.nodeName]&&l.parentNode===c)){if(!dtd[c.tagName][l.nodeName]){d=c}else{u=l.parentNode;while(u!==c){d=u;u=u.parentNode}}domUtils.breakParent(l,d||u);var d=l.previousSibling;domUtils.trimWhiteTextNode(d);if(!d.childNodes.length){domUtils.remove(d)}if(!browser.ie&&(m=l.nextSibling)&&domUtils.isBlockElm(m)&&m.lastChild&&!domUtils.isBr(m.lastChild)){m.appendChild(n.document.createElement("br"))}f=1}}var m=l.nextSibling;if(!o.firstChild&&m&&domUtils.isBlockElm(m)){r.setStart(m,0).collapse(true);break}r.setEndAfter(l).collapse()}l=r.startContainer;if(h&&domUtils.isBr(h)){domUtils.remove(h)}if(domUtils.isBlockElm(l)&&domUtils.isEmptyNode(l)){if(h=l.nextSibling){domUtils.remove(l);if(h.nodeType==1&&dtd.$block[h.tagName]){r.setStart(h,0).collapse(true).shrinkBoundary()}}else{try{l.innerHTML=browser.ie?domUtils.fillChar:"<br/>"}catch(e){r.setStartBefore(l);domUtils.remove(l)}}}try{r.select(true)}catch(e){}}setTimeout(function(){r=n.selection.getRange();r.scrollToView(n.autoHeightEnabled,n.autoHeightEnabled?domUtils.getXY(n.iframe).y:0);n.fireEvent("afterinserthtml",t)},200)}};UE.plugins["autotypeset"]=function(){this.setOpt({autotypeset:{mergeEmptyline:true,removeClass:true,removeEmptyline:false,textAlign:"left",imageBlockLine:"center",pasteFilter:false,clearFontSize:false,clearFontFamily:false,removeEmptyNode:false,removeTagNames:utils.extend({div:1},dtd.$removeEmpty),indent:false,indentValue:"2em",bdc2sb:false,tobdc:false}});var e=this,t=e.options.autotypeset,i={selectTdClass:1,pagebreak:1,anchorclass:1},n={li:1},r={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1},o;if(!t){return}u();function a(e,t){if(!e||e.nodeType==3)return 0;if(domUtils.isBr(e))return 1;if(e&&e.parentNode&&r[e.tagName.toLowerCase()]){if(o&&o.contains(e)||e.getAttribute("pagebreak")){return 0}return t?!domUtils.isEmptyBlock(e):domUtils.isEmptyBlock(e,new RegExp("[\\s"+domUtils.fillChar+"]","g"))}}function s(e){if(!e.style.cssText){domUtils.removeAttributes(e,["style"]);if(e.tagName.toLowerCase()=="span"&&domUtils.hasNoAttributes(e)){domUtils.remove(e,true)}}}function l(e,r){var l=this,u;if(r){if(!t.pasteFilter){return}u=l.document.createElement("div");u.innerHTML=r.html}else{u=l.document.body}var f=domUtils.getElementsByTagName(u,"*");for(var h=0,p;p=f[h++];){if(l.fireEvent("excludeNodeinautotype",p)===true){continue}if(t.clearFontSize&&p.style.fontSize){domUtils.removeStyle(p,"font-size");s(p)}if(t.clearFontFamily&&p.style.fontFamily){domUtils.removeStyle(p,"font-family");s(p)}if(a(p)){if(t.mergeEmptyline){var m=p.nextSibling,g,v=domUtils.isBr(p);while(a(m)){g=m;m=g.nextSibling;if(v&&(!m||m&&!domUtils.isBr(m))){break}domUtils.remove(g)}}if(t.removeEmptyline&&domUtils.inDoc(p,u)&&!n[p.parentNode.tagName.toLowerCase()]){if(domUtils.isBr(p)){m=p.nextSibling;if(m&&!domUtils.isBr(m)){continue}}domUtils.remove(p);continue}}if(a(p,true)&&p.tagName!="SPAN"){if(t.indent){p.style.textIndent=t.indentValue}if(t.textAlign){p.style.textAlign=t.textAlign}}if(t.removeClass&&p.className&&!i[p.className.toLowerCase()]){if(o&&o.contains(p)){continue}domUtils.removeAttributes(p,["class"])}if(t.imageBlockLine&&p.tagName.toLowerCase()=="img"&&!p.getAttribute("emotion")){if(r){var y=p;switch(t.imageBlockLine){case"left":case"right":case"none":var b=y.parentNode,g,w,m;while(dtd.$inline[b.tagName]||b.tagName=="A"){b=b.parentNode}g=b;if(g.tagName=="P"&&domUtils.getStyle(g,"text-align")=="center"){if(!domUtils.isBody(g)&&domUtils.getChildCount(g,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})==1){w=g.previousSibling;m=g.nextSibling;if(w&&m&&w.nodeType==1&&m.nodeType==1&&w.tagName==m.tagName&&domUtils.isBlockElm(w)){w.appendChild(g.firstChild);while(m.firstChild){w.appendChild(m.firstChild)}domUtils.remove(g);domUtils.remove(m)}else{domUtils.setStyle(g,"text-align","")}}}domUtils.setStyle(y,"float",t.imageBlockLine);break;case"center":if(l.queryCommandValue("imagefloat")!="center"){b=y.parentNode;domUtils.setStyle(y,"float","none");g=y;while(b&&domUtils.getChildCount(b,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})==1&&(dtd.$inline[b.tagName]||b.tagName=="A")){g=b;b=b.parentNode}var x=l.document.createElement("p");domUtils.setAttributes(x,{style:"text-align:center"});g.parentNode.insertBefore(x,g);x.appendChild(g);domUtils.setStyle(g,"float","")}}}else{var C=l.selection.getRange();C.selectNode(p).select();l.execCommand("imagefloat",t.imageBlockLine)}}if(t.removeEmptyNode){if(t.removeTagNames[p.tagName.toLowerCase()]&&domUtils.hasNoAttributes(p)&&domUtils.isEmptyBlock(p)){domUtils.remove(p)}}}if(t.tobdc){var _=UE.htmlparser(u.innerHTML);_.traversal(function(e){if(e.type=="text"){e.data=c(e.data)}});u.innerHTML=_.toHtml()}if(t.bdc2sb){var _=UE.htmlparser(u.innerHTML);_.traversal(function(e){if(e.type=="text"){e.data=d(e.data)}});u.innerHTML=_.toHtml()}if(r){r.html=u.innerHTML}}if(t.pasteFilter){e.addListener("beforepaste",l)}function d(e){var t="";for(var i=0;i<e.length;i++){var n=e.charCodeAt(i);if(n>=65281&&n<=65373){t+=String.fromCharCode(e.charCodeAt(i)-65248)}else if(n==12288){t+=String.fromCharCode(e.charCodeAt(i)-12288+32)}else{t+=e.charAt(i)}}return t}function c(e){e=utils.html(e);var t="";var i="";for(var n=0;n<e.length;n++){if(e.charCodeAt(n)==32){t=t+String.fromCharCode(12288)}else if(e.charCodeAt(n)<127){t=t+String.fromCharCode(e.charCodeAt(n)+65248)}else{t+=e.charAt(n)}}return t}function u(){var t=e.getPreferences("autotypeset");utils.extend(e.options.autotypeset,t)}e.commands["autotypeset"]={execCommand:function(){e.removeListener("beforepaste",l);if(t.pasteFilter){e.addListener("beforepaste",l)}l.call(e)}}};UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var e=this,t=domUtils.findParentByTagName(e.iframe,"form",false);if(t){if(e.fireEvent("beforesubmit")===false){return}e.sync();t.submit()}}}}}});UE.plugin.register("background",function(){var e=this,t="editor_background",i,n=new RegExp("body[\\s]*\\{(.+)\\}","i");function r(e){var t={},i=e.split(";");utils.each(i,function(e){var i=e.indexOf(":"),n=utils.trim(e.substr(0,i)).toLowerCase();n&&(t[n]=utils.trim(e.substr(i+1)||""))});return t}function o(i){if(i){var n=[];for(var r in i){if(i.hasOwnProperty(r)){n.push(r+":"+i[r]+"; ")}}utils.cssRule(t,n.length?"body{"+n.join("")+"}":"",e.document)}else{utils.cssRule(t,"",e.document)}}var a=e.hasContents;e.hasContents=function(){if(e.queryCommandValue("background")){return true}return a.apply(e,arguments)};return{bindEvents:{getAllHtml:function(t,i){var n=this.body,r=domUtils.getComputedStyle(n,"background-image"),o="";if(r.indexOf(e.options.imagePath)>0){o=r.substring(r.indexOf(e.options.imagePath),r.length-1).replace(/"|\(|\)/gi,"")}else{o=r!="none"?r.replace(/url\("?|"?\)/gi,""):""}var a='<style type="text/css">body{';var s={"background-color":domUtils.getComputedStyle(n,"background-color")||"#ffffff","background-image":o?"url("+o+")":"","background-repeat":domUtils.getComputedStyle(n,"background-repeat")||"","background-position":browser.ie?domUtils.getComputedStyle(n,"background-position-x")+" "+domUtils.getComputedStyle(n,"background-position-y"):domUtils.getComputedStyle(n,"background-position"),height:domUtils.getComputedStyle(n,"height")};for(var l in s){if(s.hasOwnProperty(l)){a+=l+":"+s[l]+"; "}}a+="}</style> ";i.push(a)},aftersetcontent:function(){if(i==false)o()}},inputRule:function(e){i=false;utils.each(e.getNodesByTagName("p"),function(e){var t=e.getAttr("data-background");if(t){i=true;o(r(t));e.parentNode.removeChild(e)}})},outputRule:function(e){var i=this,r=(utils.cssRule(t,i.document)||"").replace(/[\n\r]+/g,"").match(n);if(r){e.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+utils.trim(r[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/></p>'))}},commands:{background:{execCommand:function(e,t){o(t)},queryCommandValue:function(){var e=this,i=(utils.cssRule(t,e.document)||"").replace(/[\n\r]+/g,"").match(n);return i?r(i[1]):null},notNeedUndo:true}}}});UE.commands["imagefloat"]={execCommand:function(e,t){var i=this,n=i.selection.getRange();if(!n.collapsed){var r=n.getClosedNode();if(r&&r.tagName=="IMG"){switch(t){case"left":case"right":case"none":var o=r.parentNode,a,s,l;while(dtd.$inline[o.tagName]||o.tagName=="A"){o=o.parentNode}a=o;if(a.tagName=="P"&&domUtils.getStyle(a,"text-align")=="center"){if(!domUtils.isBody(a)&&domUtils.getChildCount(a,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})==1){s=a.previousSibling;l=a.nextSibling;if(s&&l&&s.nodeType==1&&l.nodeType==1&&s.tagName==l.tagName&&domUtils.isBlockElm(s)){s.appendChild(a.firstChild);while(l.firstChild){s.appendChild(l.firstChild)}domUtils.remove(a);domUtils.remove(l)}else{domUtils.setStyle(a,"text-align","")}}n.selectNode(r).select()}domUtils.setStyle(r,"float",t=="none"?"":t);if(t=="none"){domUtils.removeAttributes(r,"align")}break;case"center":if(i.queryCommandValue("imagefloat")!="center"){o=r.parentNode;domUtils.setStyle(r,"float","");domUtils.removeAttributes(r,"align");a=r;while(o&&domUtils.getChildCount(o,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})==1&&(dtd.$inline[o.tagName]||o.tagName=="A")){a=o;o=o.parentNode}n.setStartBefore(a).setCursor(false);o=i.document.createElement("div");o.appendChild(a);domUtils.setStyle(a,"float","");i.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+o.innerHTML+"</p>");a=i.document.getElementById("_img_parent_tmp");a.removeAttribute("id");a=a.firstChild;n.selectNode(a).select();l=a.parentNode.nextSibling;if(l&&domUtils.isEmptyNode(l)){domUtils.remove(l)}}break}}}},queryCommandValue:function(){var e=this.selection.getRange(),t,i;if(e.collapsed){return"none"}t=e.getClosedNode();if(t&&t.nodeType==1&&t.tagName=="IMG"){i=domUtils.getComputedStyle(t,"float")||t.getAttribute("align");if(i=="none"){i=domUtils.getComputedStyle(t.parentNode,"text-align")=="center"?"center":i}return{left:1,right:1,center:1}[i]?i:"none"}return"none"},queryCommandState:function(){var e=this.selection.getRange(),t;if(e.collapsed)return-1;t=e.getClosedNode();if(t&&t.nodeType==1&&t.tagName=="IMG"){return 0}return-1}};UE.commands["insertimage"]={execCommand:function(e,t){t=utils.isArray(t)?t:[t];if(!t.length){return}var i=this,n=i.selection.getRange(),r=n.getClosedNode();if(i.fireEvent("beforeinsertimage",t)===true){return}function o(e){utils.each("width,height,border,hspace,vspace".split(","),function(t){if(e[t]){e[t]=parseInt(e[t],10)||0}});utils.each("src,_src".split(","),function(t){if(e[t]){e[t]=utils.unhtmlForUrl(e[t])}});utils.each("title,alt".split(","),function(t){if(e[t]){e[t]=utils.unhtml(e[t])}})}if(r&&/img/i.test(r.tagName)&&(r.className!="edui-faked-video"||r.className.indexOf("edui-upload-video")!=-1)&&!r.getAttribute("word_img")){var a=t.shift();var s=a["floatStyle"];delete a["floatStyle"];domUtils.setAttributes(r,a);i.execCommand("imagefloat",s);if(t.length>0){n.setStartAfter(r).setCursor(false,true);i.execCommand("insertimage",t)}}else{var l=[],d="",c;c=t[0];if(t.length==1){o(c);d='<img src="'+c.src+'" '+(c._src?' _src="'+c._src+'" ':"")+(c.width?'width="'+c.width+'" ':"")+(c.height?' height="'+c.height+'" ':"")+(c["floatStyle"]=="left"||c["floatStyle"]=="right"?' style="float:'+c["floatStyle"]+';"':"")+(c.title&&c.title!=""?' title="'+c.title+'"':"")+(c.border&&c.border!="0"?' border="'+c.border+'"':"")+(c.alt&&c.alt!=""?' alt="'+c.alt+'"':"")+(c.hspace&&c.hspace!="0"?' hspace = "'+c.hspace+'"':"")+(c.vspace&&c.vspace!="0"?' vspace = "'+c.vspace+'"':"")+"/>";if(c["floatStyle"]=="center"){d='<p style="text-align: center">'+d+"</p>"}l.push(d)}else{for(var u=0;c=t[u++];){o(c);d="<p "+(c["floatStyle"]=="center"?'style="text-align: center" ':"")+'><img src="'+c.src+'" '+(c.width?'width="'+c.width+'" ':"")+(c._src?' _src="'+c._src+'" ':"")+(c.height?' height="'+c.height+'" ':"")+' style="'+(c["floatStyle"]&&c["floatStyle"]!="center"?"float:"+c["floatStyle"]+";":"")+(c.border||"")+'" '+(c.title?' title="'+c.title+'"':"")+" /></p>";l.push(d)}}i.execCommand("insertHtml",l.join(""))}i.fireEvent("afterinsertimage",t)}};UE.plugins["justify"]=function(){var e=this,t=domUtils.isBlockElm,i={left:1,right:1,center:1,justify:1},n=function(e,i){var n=e.createBookmark(),r=function(e){return e.nodeType==1?e.tagName.toLowerCase()!="br"&&!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)};e.enlarge(true);var o=e.createBookmark(),a=domUtils.getNextDomNode(o.start,false,r),s=e.cloneRange(),l;while(a&&!(domUtils.getPosition(a,o.end)&domUtils.POSITION_FOLLOWING)){if(a.nodeType==3||!t(a)){s.setStartBefore(a);while(a&&a!==o.end&&!t(a)){l=a;a=domUtils.getNextDomNode(a,false,null,function(e){return!t(e)})}s.setEndAfter(l);var d=s.getCommonAncestor();if(!domUtils.isBody(d)&&t(d)){domUtils.setStyles(d,utils.isString(i)?{"text-align":i}:i);a=d}else{var c=e.document.createElement("p");domUtils.setStyles(c,utils.isString(i)?{"text-align":i}:i);var u=s.extractContents();c.appendChild(u);s.insertNode(c);a=c}a=domUtils.getNextDomNode(a,false,r)}else{a=domUtils.getNextDomNode(a,true,r)}}return e.moveToBookmark(o).moveToBookmark(n)};UE.commands["justify"]={execCommand:function(e,t){var i=this.selection.getRange(),r;if(i.collapsed){r=this.document.createTextNode("p");i.insertNode(r)}n(i,t);if(r){i.setStartBefore(r).collapse(true);domUtils.remove(r)}i.select();return true},queryCommandValue:function(){var e=this.selection.getStart(),t=domUtils.getComputedStyle(e,"text-align");return i[t]?t:"left"},queryCommandState:function(){var e=this.selection.getStart(),t=e&&domUtils.findParentByTagName(e,["td","th","caption"],true);return t?-1:0}}};UE.plugins["font"]=function(){var e=this,t={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},i={underline:1,strikethrough:1,fontborder:1},n={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};e.setOpt({fontfamily:[{name:"songti",val:",SimSun"},{name:"yahei",val:",Microsoft YaHei"},{name:"kaiti",val:",_GB2312, SimKai"},{name:"heiti",val:", SimHei"},{name:"lishu",val:", SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]});function r(e){var t;while(t=e.parentNode){if(t.tagName=="SPAN"&&domUtils.getChildCount(t,function(e){return!domUtils.isBookmarkNode(e)&&!domUtils.isBr(e)})==1){t.style.cssText+=e.style.cssText;domUtils.remove(e,true);e=t}else{break}}}function o(e,t,i){if(n[t]){e.adjustmentBoundary();if(!e.collapsed&&e.startContainer.nodeType==1){var r=e.startContainer.childNodes[e.startOffset];if(r&&domUtils.isTagNode(r,"span")){var o=e.createBookmark();utils.each(domUtils.getElementsByTagName(r,"span"),function(e){if(!e.parentNode||domUtils.isBookmarkNode(e))return;if(t=="backcolor"&&domUtils.getComputedStyle(e,"background-color").toLowerCase()===i){return}domUtils.removeStyle(e,n[t]);if(e.style.cssText.replace(/^\s+$/,"").length==0){domUtils.remove(e,true)}});e.moveToBookmark(o)}}}}function a(e,t,i){var n=e.collapsed,a=e.createBookmark(),s;if(n){s=a.start.parentNode;while(dtd.$inline[s.tagName]){s=s.parentNode}}else{s=domUtils.getCommonAncestor(a.start,a.end)}utils.each(domUtils.getElementsByTagName(s,"span"),function(e){if(!e.parentNode||domUtils.isBookmarkNode(e))return;if(/\s*border\s*:\s*none;?\s*/i.test(e.style.cssText)){if(/^\s*border\s*:\s*none;?\s*$/.test(e.style.cssText)){domUtils.remove(e,true)}else{domUtils.removeStyle(e,"border")}return}if(/border/i.test(e.style.cssText)&&e.parentNode.tagName=="SPAN"&&/border/i.test(e.parentNode.style.cssText)){e.style.cssText=e.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")}if(!(t=="fontborder"&&i=="none")){var n=e.nextSibling;while(n&&n.nodeType==1&&n.tagName=="SPAN"){if(domUtils.isBookmarkNode(n)&&t=="fontborder"){e.appendChild(n);n=e.nextSibling;continue}if(n.style.cssText==e.style.cssText){domUtils.moveChild(n,e);domUtils.remove(n)}if(e.nextSibling===n)break;n=e.nextSibling}}r(e);if(browser.ie&&browser.version>8){var o=domUtils.findParent(e,function(e){return e.tagName=="SPAN"&&/background-color/.test(e.style.cssText)});if(o&&!/background-color/.test(e.style.cssText)){e.style.backgroundColor=o.style.backgroundColor}}});e.moveToBookmark(a);o(e,t,i)}e.addInputRule(function(e){utils.each(e.getNodesByTagName("u s del font strike"),function(e){if(e.tagName=="font"){var t=[];for(var i in e.attrs){switch(i){case"size":t.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[e.attrs[i]]||e.attrs[i])+"px");break;case"color":t.push("color:"+e.attrs[i]);break;case"face":t.push("font-family:"+e.attrs[i]);break;case"style":t.push(e.attrs[i])}}e.attrs={style:t.join(";")}}else{var n=e.tagName=="u"?"underline":"line-through";e.attrs={style:(e.getAttr("style")||"")+"text-decoration:"+n+";"}}e.tagName="span"})});for(var s in t){(function(e,t){UE.commands[e]={execCommand:function(n,r){r=r||(this.queryCommandState(n)?"none":n=="underline"?"underline":n=="fontborder"?"1px solid #000":"line-through");var o=this,s=this.selection.getRange(),l;if(r=="default"){if(s.collapsed){l=o.document.createTextNode("font");s.insertNode(l).select()}o.execCommand("removeFormat","span,a",t);if(l){s.setStartBefore(l).collapse(true);domUtils.remove(l)}a(s,n,r);s.select()}else{if(!s.collapsed){if(i[e]&&o.queryCommandValue(e)){o.execCommand("removeFormat","span,a",t)}s=o.selection.getRange();s.applyInlineStyle("span",{style:t+":"+r});a(s,n,r);s.select()}else{var d=domUtils.findParentByTagName(s.startContainer,"span",true);l=o.document.createTextNode("font");if(d&&!d.children.length&&!d[browser.ie?"innerText":"textContent"].replace(fillCharReg,"").length){s.insertNode(l);if(i[e]){s.selectNode(l).select();o.execCommand("removeFormat","span,a",t,null);d=domUtils.findParentByTagName(l,"span",true);s.setStartBefore(l)}d&&(d.style.cssText+=";"+t+":"+r);s.collapse(true).select()}else{s.insertNode(l);s.selectNode(l).select();d=s.document.createElement("span");if(i[e]){if(domUtils.findParentByTagName(l,"a",true)){s.setStartBefore(l).setCursor();domUtils.remove(l);return}o.execCommand("removeFormat","span,a",t)}d.style.cssText=t+":"+r;l.parentNode.insertBefore(d,l);if(!browser.ie||browser.ie&&browser.version==9){var c=d.parentNode;while(!domUtils.isBlockElm(c)){if(c.tagName=="SPAN"){d.style.cssText=c.style.cssText+";"+d.style.cssText}c=c.parentNode}}if(opera){setTimeout(function(){s.setStart(d,0).collapse(true);a(s,n,r);s.select()})}else{s.setStart(d,0).collapse(true);a(s,n,r);s.select()}}domUtils.remove(l)}}return true},queryCommandValue:function(e){var i=this.selection.getStart();if(e=="underline"||e=="strikethrough"){var n=i,r;while(n&&!domUtils.isBlockElm(n)&&!domUtils.isBody(n)){if(n.nodeType==1){r=domUtils.getComputedStyle(n,t);if(r!="none"){return r}}n=n.parentNode}return"none"}if(e=="fontborder"){var o=i,a;while(o&&dtd.$inline[o.tagName]){if(a=domUtils.getComputedStyle(o,"border")){if(/1px/.test(a)&&/solid/.test(a)){return a}}o=o.parentNode}return""}if(e=="FontSize"){var s=domUtils.getComputedStyle(i,t),o=/^([\d\.]+)(\w+)$/.exec(s);if(o){return Math.floor(o[1])+o[2]}return s}return domUtils.getComputedStyle(i,t)},queryCommandState:function(e){if(!i[e])return 0;var t=this.queryCommandValue(e);if(e=="fontborder"){return/1px/.test(t)&&/solid/.test(t)}else{return e=="underline"?/underline/.test(t):/line\-through/.test(t)}}}})(s,t[s])}};UE.plugins["link"]=function(){function e(e){var t=e.startContainer,i=e.endContainer;if(t=domUtils.findParentByTagName(t,"a",true)){e.setStartBefore(t)}if(i=domUtils.findParentByTagName(i,"a",true)){e.setEndAfter(i)}}UE.commands["unlink"]={execCommand:function(){var t=this.selection.getRange(),i;if(t.collapsed&&!domUtils.findParentByTagName(t.startContainer,"a",true)){return}i=t.createBookmark();e(t);t.removeInlineStyle("a").moveToBookmark(i).select()},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}};function t(t,i,n){var r=t.cloneRange(),o=n.queryCommandValue("link");e(t=t.adjustmentBoundary());var a=t.startContainer;if(a.nodeType==1&&o){a=a.childNodes[t.startOffset];if(a&&a.nodeType==1&&a.tagName=="A"&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(a[browser.ie?"innerText":"textContent"])){a[browser.ie?"innerText":"textContent"]=utils.html(i.textValue||i.href)}}if(!r.collapsed||o){t.removeInlineStyle("a");r=t.cloneRange()}if(r.collapsed){var s=t.document.createElement("a"),l="";if(i.textValue){l=utils.html(i.textValue);delete i.textValue}else{l=utils.html(i.href)}domUtils.setAttributes(s,i);a=domUtils.findParentByTagName(r.startContainer,"a",true);if(a&&domUtils.isInNodeEndBoundary(r,a)){t.setStartAfter(a).collapse(true)}s[browser.ie?"innerText":"textContent"]=l;t.insertNode(s).selectNode(s)}else{t.applyInlineStyle("a",i)}}UE.commands["link"]={execCommand:function(e,i){var n;i._href&&(i._href=utils.unhtml(i._href,/[<">]/g));i.href&&(i.href=utils.unhtml(i.href,/[<">]/g));i.textValue&&(i.textValue=utils.unhtml(i.textValue,/[<">]/g));t(n=this.selection.getRange(),i,this);n.collapse().select(true)},queryCommandValue:function(){var e=this.selection.getRange(),t;if(e.collapsed){t=e.startContainer;t=t.nodeType==1?t:t.parentNode;if(t&&(t=domUtils.findParentByTagName(t,"a",true))&&!domUtils.isInNodeEndBoundary(e,t)){return t}}else{e.shrinkBoundary();var i=e.startContainer.nodeType==3||!e.startContainer.childNodes[e.startOffset]?e.startContainer:e.startContainer.childNodes[e.startOffset],n=e.endContainer.nodeType==3||e.endOffset==0?e.endContainer:e.endContainer.childNodes[e.endOffset-1],r=e.getCommonAncestor();t=domUtils.findParentByTagName(r,"a",true);if(!t&&r.nodeType==1){var o=r.getElementsByTagName("a"),a,s;for(var l=0,d;d=o[l++];){a=domUtils.getPosition(d,i),s=domUtils.getPosition(d,n);if((a&domUtils.POSITION_FOLLOWING||a&domUtils.POSITION_CONTAINS)&&(s&domUtils.POSITION_PRECEDING||s&domUtils.POSITION_CONTAINS)){t=d;break}}}return t}},queryCommandState:function(){var e=this.selection.getRange().getClosedNode(),t=e&&(e.className=="edui-faked-video"||e.className.indexOf("edui-upload-video")!=-1);return t?-1:0}}};UE.plugins["insertframe"]=function(){var e=this;function t(){e._iframe&&delete e._iframe}e.addListener("selectionchange",function(){t()})};UE.commands["scrawl"]={queryCommandState:function(){return browser.ie&&browser.version<=8?-1:0}};UE.plugins["removeformat"]=function(){var e=this;e.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"});e.commands["removeformat"]={execCommand:function(e,t,i,n,r){var o=new RegExp("^(?:"+(t||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),a=i?[]:(n||this.options.removeFormatAttributes).split(","),s=new dom.Range(this.document),l,d,c,u=function(e){return e.nodeType==1};function f(e){if(e.nodeType==3||e.tagName.toLowerCase()!="span"){return 0}if(browser.ie){var t=e.attributes;if(t.length){for(var i=0,n=t.length;i<n;i++){if(t[i].specified){return 0}}return 1}}return!e.attributes.length}function h(e){var t=e.createBookmark();if(e.collapsed){e.enlarge(true)}if(!r){var n=domUtils.findParentByTagName(e.startContainer,"a",true);if(n){e.setStartBefore(n)}n=domUtils.findParentByTagName(e.endContainer,"a",true);if(n){e.setEndAfter(n)}}l=e.createBookmark();p=l.start;while((c=p.parentNode)&&!domUtils.isBlockElm(c)){domUtils.breakParent(p,c);domUtils.clearEmptySibling(p)}if(l.end){p=l.end;while((c=p.parentNode)&&!domUtils.isBlockElm(c)){domUtils.breakParent(p,c);domUtils.clearEmptySibling(p)}var s=domUtils.getNextDomNode(l.start,false,u),d;while(s){if(s==l.end){break}d=domUtils.getNextDomNode(s,true,u);if(!dtd.$empty[s.tagName.toLowerCase()]&&!domUtils.isBookmarkNode(s)){if(o.test(s.tagName)){if(i){domUtils.removeStyle(s,i);if(f(s)&&i!="text-decoration"){domUtils.remove(s,true)}}else{domUtils.remove(s,true)}}else{if(!dtd.$tableContent[s.tagName]&&!dtd.$list[s.tagName]){domUtils.removeAttributes(s,a);if(f(s)){domUtils.remove(s,true)}}}}s=d}}var h=l.start.parentNode;if(domUtils.isBlockElm(h)&&!dtd.$tableContent[h.tagName]&&!dtd.$list[h.tagName]){domUtils.removeAttributes(h,a)}h=l.end.parentNode;if(l.end&&domUtils.isBlockElm(h)&&!dtd.$tableContent[h.tagName]&&!dtd.$list[h.tagName]){domUtils.removeAttributes(h,a)}e.moveToBookmark(l).moveToBookmark(t);var p=e.startContainer,m,g=e.collapsed;while(p.nodeType==1&&domUtils.isEmptyNode(p)&&dtd.$removeEmpty[p.tagName]){m=p.parentNode;e.setStartBefore(p);if(e.startContainer===e.endContainer){e.endOffset--}domUtils.remove(p);p=m}if(!g){p=e.endContainer;while(p.nodeType==1&&domUtils.isEmptyNode(p)&&dtd.$removeEmpty[p.tagName]){m=p.parentNode;e.setEndBefore(p);domUtils.remove(p);p=m}}}s=this.selection.getRange();h(s);s.select()}}};UE.plugins["blockquote"]=function(){var e=this;function t(e){return domUtils.filterNodeList(e.selection.getStartElementPath(),"blockquote")}e.commands["blockquote"]={execCommand:function(e,i){var n=this.selection.getRange(),r=t(this),o=dtd.blockquote,a=n.createBookmark();if(r){var s=n.startContainer,l=domUtils.isBlockElm(s)?s:domUtils.findParent(s,function(e){return domUtils.isBlockElm(e)}),d=n.endContainer,c=domUtils.isBlockElm(d)?d:domUtils.findParent(d,function(e){return domUtils.isBlockElm(e)});l=domUtils.findParentByTagName(l,"li",true)||l;c=domUtils.findParentByTagName(c,"li",true)||c;if(l.tagName=="LI"||l.tagName=="TD"||l===r||domUtils.isBody(l)){domUtils.remove(r,true)}else{domUtils.breakParent(l,r)}if(l!==c){r=domUtils.findParentByTagName(c,"blockquote");if(r){if(c.tagName=="LI"||c.tagName=="TD"||domUtils.isBody(c)){r.parentNode&&domUtils.remove(r,true)}else{domUtils.breakParent(c,r)}}}var u=domUtils.getElementsByTagName(this.document,"blockquote");for(var f=0,h;h=u[f++];){if(!h.childNodes.length){domUtils.remove(h)}else if(domUtils.getPosition(h,l)&domUtils.POSITION_FOLLOWING&&domUtils.getPosition(h,c)&domUtils.POSITION_PRECEDING){domUtils.remove(h,true)}}}else{var p=n.cloneRange(),m=p.startContainer.nodeType==1?p.startContainer:p.startContainer.parentNode,g=m,v=1;while(1){if(domUtils.isBody(m)){if(g!==m){if(n.collapsed){p.selectNode(g);v=0}else{p.setStartBefore(g)}}else{p.setStart(m,0)}break}if(!o[m.tagName]){if(n.collapsed){p.selectNode(g)}else{p.setStartBefore(g)}break}g=m;m=m.parentNode}if(v){g=m=m=p.endContainer.nodeType==1?p.endContainer:p.endContainer.parentNode;while(1){if(domUtils.isBody(m)){if(g!==m){p.setEndAfter(g)}else{p.setEnd(m,m.childNodes.length)}break}if(!o[m.tagName]){p.setEndAfter(g);break}g=m;m=m.parentNode}}m=n.document.createElement("blockquote");domUtils.setAttributes(m,i);m.appendChild(p.extractContents());p.insertNode(m);var y=domUtils.getElementsByTagName(m,"blockquote");for(var f=0,b;b=y[f++];){if(b.parentNode){domUtils.remove(b,true)}}}n.moveToBookmark(a).select()},queryCommandState:function(){return t(this)?1:0}}};UE.commands["touppercase"]=UE.commands["tolowercase"]={execCommand:function(e){var t=this;var i=t.selection.getRange();if(i.collapsed){return i}var n=i.createBookmark(),r=n.end,o=function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)},a=domUtils.getNextDomNode(n.start,false,o);while(a&&domUtils.getPosition(a,r)&domUtils.POSITION_PRECEDING){if(a.nodeType==3){a.nodeValue=a.nodeValue[e=="touppercase"?"toUpperCase":"toLowerCase"]()}a=domUtils.getNextDomNode(a,true,o);if(a===r){break}}i.moveToBookmark(n).select()}};UE.commands["indent"]={execCommand:function(){var e=this,t=e.queryCommandState("indent")?"0em":e.options.indentValue||"2em";e.execCommand("Paragraph","p",{style:"text-indent:"+t})},queryCommandState:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e&&e.style.textIndent&&parseInt(e.style.textIndent)?1:0}};UE.commands["print"]={execCommand:function(){this.window.print()},notNeedUndo:1};UE.commands["preview"]={execCommand:function(){var e=window.open("","_blank",""),t=e.document;t.open();t.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+'ueditor.parse.js"><\/script><script>'+"setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)"+"<\/script></head><body><div>"+this.getContent(null,null,true)+"</div></body></html>");t.close()},notNeedUndo:1};UE.plugins["selectall"]=function(){var e=this;e.commands["selectall"]={execCommand:function(){var e=this,t=e.body,i=e.selection.getRange();i.selectNodeContents(t);if(domUtils.isEmptyBlock(t)){if(browser.opera&&t.firstChild&&t.firstChild.nodeType==1){i.setStartAtFirst(t.firstChild)}i.collapse(true)}i.select(true)},notNeedUndo:1};e.addshortcutkey({selectAll:"ctrl+65"})};UE.plugins["paragraph"]=function(){var e=this,t=domUtils.isBlockElm,i=["TD","LI","PRE"],n=function(e,n,r,o){var a=e.createBookmark(),s=function(e){return e.nodeType==1?e.tagName.toLowerCase()!="br"&&!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)},l;e.enlarge(true);var d=e.createBookmark(),c=domUtils.getNextDomNode(d.start,false,s),u=e.cloneRange(),f;while(c&&!(domUtils.getPosition(c,d.end)&domUtils.POSITION_FOLLOWING)){if(c.nodeType==3||!t(c)){u.setStartBefore(c);while(c&&c!==d.end&&!t(c)){f=c;c=domUtils.getNextDomNode(c,false,null,function(e){return!t(e)})}u.setEndAfter(f);l=e.document.createElement(n);if(r){domUtils.setAttributes(l,r);if(o&&o=="customstyle"&&r.style){l.style.cssText=r.style}}l.appendChild(u.extractContents());if(domUtils.isEmptyNode(l)){domUtils.fillChar(e.document,l)}u.insertNode(l);var h=l.parentNode;if(t(h)&&!domUtils.isBody(l.parentNode)&&utils.indexOf(i,h.tagName)==-1){if(!(o&&o=="customstyle")){h.getAttribute("dir")&&l.setAttribute("dir",h.getAttribute("dir"));h.style.cssText&&(l.style.cssText=h.style.cssText+";"+l.style.cssText);h.style.textAlign&&!l.style.textAlign&&(l.style.textAlign=h.style.textAlign);h.style.textIndent&&!l.style.textIndent&&(l.style.textIndent=h.style.textIndent);h.style.padding&&!l.style.padding&&(l.style.padding=h.style.padding)}if(r&&/h\d/i.test(h.tagName)&&!/h\d/i.test(l.tagName)){domUtils.setAttributes(h,r);if(o&&o=="customstyle"&&r.style){h.style.cssText=r.style}domUtils.remove(l,true);l=h}else{domUtils.remove(l.parentNode,true)}}if(utils.indexOf(i,h.tagName)!=-1){c=h}else{c=l}c=domUtils.getNextDomNode(c,false,s)}else{c=domUtils.getNextDomNode(c,true,s)}}return e.moveToBookmark(d).moveToBookmark(a)};e.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""});e.commands["paragraph"]={execCommand:function(e,t,i,r){var o=this.selection.getRange();if(o.collapsed){var a=this.document.createTextNode("p");o.insertNode(a);if(browser.ie){var s=a.previousSibling;if(s&&domUtils.isWhitespace(s)){domUtils.remove(s)}s=a.nextSibling;if(s&&domUtils.isWhitespace(s)){domUtils.remove(s)}}}o=n(o,t,i,r);if(a){o.setStartBefore(a).collapse(true);pN=a.parentNode;domUtils.remove(a);if(domUtils.isBlockElm(pN)&&domUtils.isEmptyNode(pN)){domUtils.fillNode(this.document,pN)}}if(browser.gecko&&o.collapsed&&o.startContainer.nodeType==1){var l=o.startContainer.childNodes[o.startOffset];if(l&&l.nodeType==1&&l.tagName.toLowerCase()==t){o.setStart(l,0).collapse(true)}}o.select();return true},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e?e.tagName.toLowerCase():""}}};(function(){var e=domUtils.isBlockElm,t=function(e){return domUtils.filterNodeList(e.selection.getStartElementPath(),function(e){return e&&e.nodeType==1&&e.getAttribute("dir")})},i=function(i,n,r){var o,a=function(e){return e.nodeType==1?!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)},s=t(n);if(s&&i.collapsed){s.setAttribute("dir",r);return i}o=i.createBookmark();i.enlarge(true);var l=i.createBookmark(),d=domUtils.getNextDomNode(l.start,false,a),c=i.cloneRange(),u;while(d&&!(domUtils.getPosition(d,l.end)&domUtils.POSITION_FOLLOWING)){if(d.nodeType==3||!e(d)){c.setStartBefore(d);while(d&&d!==l.end&&!e(d)){u=d;d=domUtils.getNextDomNode(d,false,null,function(t){return!e(t)})}c.setEndAfter(u);var f=c.getCommonAncestor();if(!domUtils.isBody(f)&&e(f)){f.setAttribute("dir",r);d=f}else{var h=i.document.createElement("p");h.setAttribute("dir",r);var p=c.extractContents();h.appendChild(p);c.insertNode(h);d=h}d=domUtils.getNextDomNode(d,false,a)}else{d=domUtils.getNextDomNode(d,true,a)}}return i.moveToBookmark(l).moveToBookmark(o)};UE.commands["directionality"]={execCommand:function(e,t){var n=this.selection.getRange();if(n.collapsed){var r=this.document.createTextNode("d");n.insertNode(r)}i(n,this,t);if(r){n.setStartBefore(r).collapse(true);domUtils.remove(r)}n.select();return true},queryCommandValue:function(){var e=t(this);return e?e.getAttribute("dir"):"ltr"}}})();UE.plugins["horizontal"]=function(){var e=this;e.commands["horizontal"]={execCommand:function(e){var t=this;if(t.queryCommandState(e)!==-1){t.execCommand("insertHtml","<hr>");var i=t.selection.getRange(),n=i.startContainer;if(n.nodeType==1&&!n.childNodes[i.startOffset]){var r;if(r=n.childNodes[i.startOffset-1]){if(r.nodeType==1&&r.tagName=="HR"){if(t.options.enterTag=="p"){r=t.document.createElement("p");i.insertNode(r);i.setStart(r,0).setCursor()}else{r=t.document.createElement("br");i.insertNode(r);i.setStartBefore(r).setCursor()}}}}return true}},queryCommandState:function(){return domUtils.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}};e.addListener("delkeydown",function(e,t){var i=this.selection.getRange();i.txtToElmBoundary(true);if(domUtils.isStartInblock(i)){var n=i.startContainer;var r=n.previousSibling;if(r&&domUtils.isTagNode(r,"hr")){domUtils.remove(r);i.select();domUtils.preventDefault(t);return true}}})};UE.commands["time"]=UE.commands["date"]={execCommand:function(e,t){var i=new Date;function n(e,t){var i=("0"+e.getHours()).slice(-2),n=("0"+e.getMinutes()).slice(-2),r=("0"+e.getSeconds()).slice(-2);t=t||"hh:ii:ss";return t.replace(/hh/gi,i).replace(/ii/gi,n).replace(/ss/gi,r)}function r(e,t){var i=("000"+e.getFullYear()).slice(-4),n=i.slice(-2),r=("0"+(e.getMonth()+1)).slice(-2),o=("0"+e.getDate()).slice(-2);t=t||"yyyy-mm-dd";return t.replace(/yyyy/gi,i).replace(/yy/gi,n).replace(/mm/gi,r).replace(/dd/gi,o)}this.execCommand("insertHtml",e=="time"?n(i,t):r(i,t))}};UE.plugins["rowspacing"]=function(){var e=this;e.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]});e.commands["rowspacing"]={execCommand:function(e,t,i){this.execCommand("paragraph","p",{style:"margin-"+i+":"+t+"px"});return true},queryCommandValue:function(e,t){var i=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return domUtils.isBlockElm(e)}),n;if(i){n=domUtils.getComputedStyle(i,"margin-"+t).replace(/[^\d]/g,"");return!n?0:n}return 0}}};UE.plugins["lineheight"]=function(){var e=this;e.setOpt({lineheight:["1","1.5","1.75","2","3","4","5"]});e.commands["lineheight"]={execCommand:function(e,t){this.execCommand("paragraph","p",{style:"line-height:"+(t=="1"?"normal":t+"em")});return true},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return domUtils.isBlockElm(e)});if(e){var t=domUtils.getComputedStyle(e,"line-height");return t=="normal"?1:t.replace(/[^\d.]*/gi,"")}}}};UE.plugins["insertcode"]=function(){var e=this;e.ready(function(){utils.cssRule("pre","pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",e.document)});e.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"});e.commands["insertcode"]={execCommand:function(e,t){var i=this,n=i.selection.getRange(),r=domUtils.findParentByTagName(n.startContainer,"pre",true);if(r){r.className="brush:"+t+";toolbar:false;"}else{var o="";if(n.collapsed){o=browser.ie&&browser.ie11below?browser.version<=8?"&nbsp;":"":"<br/>"}else{var a=n.extractContents();var s=i.document.createElement("div");s.appendChild(a);utils.each(UE.filterNode(UE.htmlparser(s.innerHTML.replace(/[\r\t]/g,"")),i.options.filterTxtRules).children,function(e){if(browser.ie&&browser.ie11below&&browser.version>8){if(e.type=="element"){if(e.tagName=="br"){o+="\n"}else if(!dtd.$empty[e.tagName]){utils.each(e.children,function(t){if(t.type=="element"){if(t.tagName=="br"){o+="\n"}else if(!dtd.$empty[e.tagName]){o+=t.innerText()}}else{o+=t.data}});if(!/\n$/.test(o)){o+="\n"}}}else{o+=e.data+"\n"}if(!e.nextSibling()&&/\n$/.test(o)){o=o.replace(/\n$/,"")}}else{if(browser.ie&&browser.ie11below){if(e.type=="element"){if(e.tagName=="br"){o+="<br>"}else if(!dtd.$empty[e.tagName]){utils.each(e.children,function(t){if(t.type=="element"){if(t.tagName=="br"){o+="<br>"}else if(!dtd.$empty[e.tagName]){o+=t.innerText()}}else{o+=t.data}});if(!/br>$/.test(o)){o+="<br>"}}}else{o+=e.data+"<br>"}if(!e.nextSibling()&&/<br>$/.test(o)){o=o.replace(/<br>$/,"")}}else{o+=e.type=="element"?dtd.$empty[e.tagName]?"":e.innerText():e.data;if(!/br\/?\s*>$/.test(o)){if(!e.nextSibling())return;o+="<br>"}}}})}i.execCommand("inserthtml",'<pre id="coder"class="brush:'+t+';toolbar:false">'+o+"</pre>",true);r=i.document.getElementById("coder");domUtils.removeAttributes(r,"id");var l=r.previousSibling;if(l&&(l.nodeType==3&&l.nodeValue.length==1&&browser.ie&&browser.version==6||domUtils.isEmptyBlock(l))){domUtils.remove(l)}var n=i.selection.getRange();if(domUtils.isEmptyBlock(r)){n.setStart(r,0).setCursor(false,true)}else{n.selectNodeContents(r).select()}}},queryCommandValue:function(){var e=this.selection.getStartElementPath();var t="";utils.each(e,function(e){if(e.nodeName=="PRE"){var i=e.className.match(/brush:([^;]+)/);t=i&&i[1]?i[1]:"";return false}});return t}};e.addInputRule(function(e){utils.each(e.getNodesByTagName("pre"),function(e){var t=e.getNodesByTagName("br");if(t.length){browser.ie&&browser.ie11below&&browser.version>8&&utils.each(t,function(e){var t=UE.uNode.createText("\n");e.parentNode.insertBefore(t,e);e.parentNode.removeChild(e)});return}if(browser.ie&&browser.ie11below&&browser.version>8)return;var i=e.innerText().split(/\n/);e.innerHTML("");utils.each(i,function(t){if(t.length){e.appendChild(UE.uNode.createText(t))}e.appendChild(UE.uNode.createElement("br"))})})});e.addOutputRule(function(e){utils.each(e.getNodesByTagName("pre"),function(e){var t="";utils.each(e.children,function(e){if(e.type=="text"){t+=e.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,"")}else{if(e.tagName=="br"){t+="\n"}else{t+=!dtd.$empty[e.tagName]?"":e.innerText()}}});e.innerText(t.replace(/(&nbsp;|\n)+$/,""))})});e.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1};var t=e.queryCommandState;e.queryCommandState=function(e){var t=this;if(!t.notNeedCodeQuery[e.toLowerCase()]&&t.selection&&t.queryCommandValue("insertcode")){return-1}return UE.Editor.prototype.queryCommandState.apply(this,arguments)};e.addListener("beforeenterkeydown",function(){var t=e.selection.getRange();var i=domUtils.findParentByTagName(t.startContainer,"pre",true);if(i){e.fireEvent("saveScene");if(!t.collapsed){t.deleteContents()}if(!browser.ie||browser.ie9above){var n=e.document.createElement("br"),i;t.insertNode(n).setStartAfter(n).collapse(true);var r=n.nextSibling;if(!r&&(!browser.ie||browser.version>10)){t.insertNode(n.cloneNode(false))}else{t.setStartAfter(n)}i=n.previousSibling;var o;while(i){o=i;i=i.previousSibling;if(!i||i.nodeName=="BR"){i=o;break}}if(i){var a="";while(i&&i.nodeName!="BR"&&new RegExp("^[\\s"+domUtils.fillChar+"]*$").test(i.nodeValue)){a+=i.nodeValue;i=i.nextSibling}if(i.nodeName!="BR"){var s=i.nodeValue.match(new RegExp("^([\\s"+domUtils.fillChar+"]+)"));if(s&&s[1]){a+=s[1]}}if(a){a=e.document.createTextNode(a);t.insertNode(a).setStartAfter(a)}}t.collapse(true).select(true)}else{if(browser.version>8){var l=e.document.createTextNode("\n");var d=t.startContainer;if(t.startOffset==0){var c=d.previousSibling;if(c){t.insertNode(l);var u=e.document.createTextNode(" ");t.setStartAfter(l).insertNode(u).setStart(u,0).collapse(true).select(true)}}else{t.insertNode(l).setStartAfter(l);var u=e.document.createTextNode(" ");d=t.startContainer.childNodes[t.startOffset];if(d&&!/^\n/.test(d.nodeValue)){t.setStartBefore(l)}t.insertNode(u).setStart(u,0).collapse(true).select(true)}}else{var n=e.document.createElement("br");t.insertNode(n);t.insertNode(e.document.createTextNode(domUtils.fillChar));t.setStartAfter(n);i=n.previousSibling;var o;while(i){o=i;i=i.previousSibling;if(!i||i.nodeName=="BR"){i=o;break}}if(i){var a="";while(i&&i.nodeName!="BR"&&new RegExp("^[ "+domUtils.fillChar+"]*$").test(i.nodeValue)){a+=i.nodeValue;i=i.nextSibling}if(i.nodeName!="BR"){var s=i.nodeValue.match(new RegExp("^([ "+domUtils.fillChar+"]+)"));if(s&&s[1]){a+=s[1]}}a=e.document.createTextNode(a);t.insertNode(a).setStartAfter(a)}t.collapse(true).select()}}e.fireEvent("saveScene");return true}});e.addListener("tabkeydown",function(t,i){var n=e.selection.getRange();var r=domUtils.findParentByTagName(n.startContainer,"pre",true);if(r){e.fireEvent("saveScene");if(i.shiftKey){}else{if(!n.collapsed){var o=n.createBookmark();var a=o.start.previousSibling;while(a){if(r.firstChild===a&&!domUtils.isBr(a)){r.insertBefore(e.document.createTextNode("    "),a);break}if(domUtils.isBr(a)){r.insertBefore(e.document.createTextNode("    "),a.nextSibling);break}a=a.previousSibling}var s=o.end;a=o.start.nextSibling;if(r.firstChild===o.start){r.insertBefore(e.document.createTextNode("    "),a.nextSibling)}while(a&&a!==s){if(domUtils.isBr(a)&&a.nextSibling){if(a.nextSibling===s){break}r.insertBefore(e.document.createTextNode("    "),a.nextSibling)}a=a.nextSibling}n.moveToBookmark(o).select()}else{var l=e.document.createTextNode("    ");n.insertNode(l).setStartAfter(l).collapse(true).select(true)}}e.fireEvent("saveScene");return true}});e.addListener("beforeinserthtml",function(e,t){var i=this,n=i.selection.getRange(),r=domUtils.findParentByTagName(n.startContainer,"pre",true);if(r){if(!n.collapsed){n.deleteContents()}var o="";if(browser.ie&&browser.version>8){utils.each(UE.filterNode(UE.htmlparser(t),i.options.filterTxtRules).children,function(e){if(e.type=="element"){if(e.tagName=="br"){o+="\n"}else if(!dtd.$empty[e.tagName]){utils.each(e.children,function(t){if(t.type=="element"){if(t.tagName=="br"){o+="\n"}else if(!dtd.$empty[e.tagName]){o+=t.innerText()}}else{o+=t.data}});if(!/\n$/.test(o)){o+="\n"}}}else{o+=e.data+"\n"}if(!e.nextSibling()&&/\n$/.test(o)){o=o.replace(/\n$/,"")}});var a=i.document.createTextNode(utils.html(o.replace(/&nbsp;/g," ")));n.insertNode(a).selectNode(a).select()}else{var s=i.document.createDocumentFragment();utils.each(UE.filterNode(UE.htmlparser(t),i.options.filterTxtRules).children,function(e){if(e.type=="element"){if(e.tagName=="br"){s.appendChild(i.document.createElement("br"))}else if(!dtd.$empty[e.tagName]){utils.each(e.children,function(t){if(t.type=="element"){if(t.tagName=="br"){s.appendChild(i.document.createElement("br"))}else if(!dtd.$empty[e.tagName]){s.appendChild(i.document.createTextNode(utils.html(t.innerText().replace(/&nbsp;/g," "))))}}else{s.appendChild(i.document.createTextNode(utils.html(t.data.replace(/&nbsp;/g," "))))}});if(s.lastChild.nodeName!="BR"){s.appendChild(i.document.createElement("br"))}}}else{s.appendChild(i.document.createTextNode(utils.html(e.data.replace(/&nbsp;/g," "))))}if(!e.nextSibling()&&s.lastChild.nodeName=="BR"){s.removeChild(s.lastChild)}});n.insertNode(s).select()}return true}});e.addListener("keydown",function(e,t){var i=this,n=t.keyCode||t.which;if(n==40){var r=i.selection.getRange(),o,a=r.startContainer;if(r.collapsed&&(o=domUtils.findParentByTagName(r.startContainer,"pre",true))&&!o.nextSibling){var s=o.lastChild;while(s&&s.nodeName=="BR"){s=s.previousSibling}if(s===a||r.startContainer===o&&r.startOffset==o.childNodes.length){i.execCommand("insertparagraph");domUtils.preventDefault(t)}}}});e.addListener("delkeydown",function(t,i){var n=this.selection.getRange();n.txtToElmBoundary(true);var r=n.startContainer;if(domUtils.isTagNode(r,"pre")&&n.collapsed&&domUtils.isStartInblock(n)){var o=e.document.createElement("p");domUtils.fillNode(e.document,o);r.parentNode.insertBefore(o,r);domUtils.remove(r);n.setStart(o,0).setCursor(false,true);domUtils.preventDefault(i);return true}})};UE.commands["cleardoc"]={execCommand:function(e){var t=this,i=t.options.enterTag,n=t.selection.getRange();if(i=="br"){t.body.innerHTML="<br/>";n.setStart(t.body,0).setCursor()}else{t.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";n.setStart(t.body.firstChild,0).setCursor(false,true)}setTimeout(function(){t.fireEvent("clearDoc")},0)}};UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){utils.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){var t;if(t=e.getAttr("anchorname")){e.tagName="a";e.setAttr({anchorname:"",name:t,class:""})}})},inputRule:function(e){utils.each(e.getNodesByTagName("a"),function(e){var t;if((t=e.getAttr("name"))&&!e.getAttr("href")){e.tagName="img";e.setAttr({anchorname:e.getAttr("name"),class:"anchorclass"});e.setAttr("name")}})},commands:{anchor:{execCommand:function(e,t){var i=this.selection.getRange(),n=i.getClosedNode();if(n&&n.getAttribute("anchorname")){if(t){n.setAttribute("anchorname",t)}else{i.setStartBefore(n).setCursor();domUtils.remove(n)}}else{if(t){var r=this.document.createElement("img");i.collapse(true);domUtils.setAttributes(r,{anchorname:t,class:"anchorclass"});i.insertNode(r).setStartAfter(r).setCursor(false,true)}}}}}}});UE.plugins["wordcount"]=function(){var e=this;e.setOpt("wordCount",true);e.addListener("contentchange",function(){e.fireEvent("wordcount")});var t;e.addListener("ready",function(){var e=this;domUtils.on(e.body,"keyup",function(i){var n=i.keyCode||i.which,r={16:1,18:1,20:1,37:1,38:1,39:1,40:1};if(n in r)return;clearTimeout(t);t=setTimeout(function(){e.fireEvent("wordcount")},200)})})};UE.plugins["pagebreak"]=function(){var e=this,t=["td"];e.setOpt("pageBreakTag","_ueditor_page_break_tag_");function i(t){if(domUtils.isEmptyBlock(t)){var i=t.firstChild,n;while(i&&i.nodeType==1&&domUtils.isEmptyBlock(i)){n=i;i=i.firstChild}!n&&(n=t);domUtils.fillNode(e.document,n)}}e.ready(function(){utils.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",e.document)});function n(e){return e&&e.nodeType==1&&e.tagName=="HR"&&e.className=="pagebreak"}e.addInputRule(function(t){t.traversal(function(t){if(t.type=="text"&&t.data==e.options.pageBreakTag){var i=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');t.parentNode.insertBefore(i,t);t.parentNode.removeChild(t)}})});e.addOutputRule(function(t){utils.each(t.getNodesByTagName("hr"),function(t){if(t.getAttr("class")=="pagebreak"){var i=UE.uNode.createText(e.options.pageBreakTag);t.parentNode.insertBefore(i,t);t.parentNode.removeChild(t)}})});e.commands["pagebreak"]={execCommand:function(){var r=e.selection.getRange(),o=e.document.createElement("hr");domUtils.setAttributes(o,{class:"pagebreak",noshade:"noshade",size:"5"});domUtils.unSelectable(o);var a=domUtils.findParentByTagName(r.startContainer,t,true),s=[],l;if(a){switch(a.tagName){case"TD":l=a.parentNode;if(!l.previousSibling){var d=domUtils.findParentByTagName(l,"table");d.parentNode.insertBefore(o,d);s=domUtils.findParents(o,true)}else{l.parentNode.insertBefore(o,l);s=domUtils.findParents(o)}l=s[1];if(o!==l){domUtils.breakParent(o,l)}e.fireEvent("afteradjusttable",e.document)}}else{if(!r.collapsed){r.deleteContents();var c=r.startContainer;while(!domUtils.isBody(c)&&domUtils.isBlockElm(c)&&domUtils.isEmptyNode(c)){r.setStartBefore(c).collapse(true);domUtils.remove(c);c=r.startContainer}}r.insertNode(o);var l=o.parentNode,u;while(!domUtils.isBody(l)){domUtils.breakParent(o,l);u=o.nextSibling;if(u&&domUtils.isEmptyBlock(u)){domUtils.remove(u)}l=o.parentNode}u=o.nextSibling;var f=o.previousSibling;if(n(f)){domUtils.remove(f)}else{f&&i(f)}if(!u){var h=e.document.createElement("p");o.parentNode.appendChild(h);domUtils.fillNode(e.document,h);r.setStart(h,0).collapse(true)}else{if(n(u)){domUtils.remove(u)}else{i(u)}r.setEndAfter(o).collapse(false)}r.select(true)}}}};UE.plugin.register("wordimage",function(){var e=this,t=[];return{commands:{wordimage:{execCommand:function(){var t=domUtils.getElementsByTagName(e.body,"img");var i=[];for(var n=0,r;r=t[n++];){var o=r.getAttribute("word_img");o&&i.push(o)}return i},queryCommandState:function(){t=domUtils.getElementsByTagName(e.body,"img");for(var i=0,n;n=t[i++];){if(n.getAttribute("word_img")){return 1}}return-1},notNeedUndo:true}},inputRule:function(t){utils.each(t.getNodesByTagName("img"),function(t){var i=t.attrs,n=parseInt(i.width)<128||parseInt(i.height)<43,r=e.options,o=r.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";if(i["src"]&&/^(?:(file:\/+))/.test(i["src"])){t.setAttr({width:i.width,height:i.height,alt:i.alt,word_img:i.src,src:o,style:"background:url("+(n?r.themePath+r.theme+"/images/word.gif":r.langPath+r.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})}})}}});UE.plugins["dragdrop"]=function(){var e=this;e.ready(function(){domUtils.on(this.body,"dragend",function(){var t=e.selection.getRange();var i=t.getClosedNode()||e.selection.getStart();if(i&&i.tagName=="IMG"){var n=i.previousSibling,r;while(r=i.nextSibling){if(r.nodeType==1&&r.tagName=="SPAN"&&!r.firstChild){domUtils.remove(r)}else{break}}if((n&&n.nodeType==1&&!domUtils.isEmptyBlock(n)||!n)&&(!r||r&&!domUtils.isEmptyBlock(r))){if(n&&n.tagName=="P"&&!domUtils.isEmptyBlock(n)){n.appendChild(i);domUtils.moveChild(r,n);domUtils.remove(r)}else if(r&&r.tagName=="P"&&!domUtils.isEmptyBlock(r)){r.insertBefore(i,r.firstChild)}if(n&&n.tagName=="P"&&domUtils.isEmptyBlock(n)){domUtils.remove(n)}if(r&&r.tagName=="P"&&domUtils.isEmptyBlock(r)){domUtils.remove(r)}t.selectNode(i).select();e.fireEvent("saveScene")}}})});e.addListener("keyup",function(t,i){var n=i.keyCode||i.which;if(n==13){var r=e.selection.getRange(),o;if(o=domUtils.findParentByTagName(r.startContainer,"p",true)){if(domUtils.getComputedStyle(o,"text-align")=="center"){domUtils.removeStyle(o,"text-align")}}}})};UE.plugins["undo"]=function(){var e;var t=this,i=t.options.maxUndoCount||20,n=t.options.maxInputCount||20,r=new RegExp(domUtils.fillChar+"|</hr>","gi");var o={ol:1,ul:1,table:1,tbody:1,tr:1,body:1};var a=t.options.autoClearEmptyNode;function s(e,t){if(e.length!=t.length)return 0;for(var i=0,n=e.length;i<n;i++){if(e[i]!=t[i])return 0}return 1}function l(e,t){if(e.collapsed!=t.collapsed){return 0}if(!s(e.startAddress,t.startAddress)||!s(e.endAddress,t.endAddress)){return 0}return 1}function d(){this.list=[];this.index=0;this.hasUndo=false;this.hasRedo=false;this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&this.list.length==1){this.reset();return}while(this.list[this.index].content==this.list[this.index-1].content){this.index--;if(this.index==0){return this.restore(0)}}this.restore(--this.index)}};this.redo=function(){if(this.hasRedo){while(this.list[this.index].content==this.list[this.index+1].content){this.index++;if(this.index==this.list.length-1){return this.restore(this.index)}}this.restore(++this.index)}};this.restore=function(){var e=this.editor;var t=this.list[this.index];var i=UE.htmlparser(t.content.replace(r,""));e.options.autoClearEmptyNode=false;e.filterInputRule(i);e.options.autoClearEmptyNode=a;e.document.body.innerHTML=i.toHtml();e.fireEvent("afterscencerestore");if(browser.ie){utils.each(domUtils.getElementsByTagName(e.document,"td th caption p"),function(t){if(domUtils.isEmptyNode(t)){domUtils.fillNode(e.document,t)}})}try{var n=new dom.Range(e.document).moveToAddress(t.address);n.select(o[n.startContainer.nodeName.toLowerCase()])}catch(e){}this.update();this.clearKey();e.fireEvent("reset",true)};this.getScene=function(){var e=this.editor;var t=e.selection.getRange(),i=t.createAddress(false,true);e.fireEvent("beforegetscene");var n=UE.htmlparser(e.body.innerHTML);e.options.autoClearEmptyNode=false;e.filterOutputRule(n);e.options.autoClearEmptyNode=a;var r=n.toHtml();e.fireEvent("aftergetscene");return{address:i,content:r}};this.save=function(n,r){clearTimeout(e);var o=this.getScene(r),a=this.list[this.index];if(a&&a.content!=o.content){t.trigger("contentchange")}if(a&&a.content==o.content&&(n?1:l(a.address,o.address))){return}this.list=this.list.slice(0,this.index+1);this.list.push(o);if(this.list.length>i){this.list.shift()}this.index=this.list.length-1;this.clearKey();this.update()};this.update=function(){this.hasRedo=!!this.list[this.index+1];this.hasUndo=!!this.list[this.index-1]};this.reset=function(){this.list=[];this.index=0;this.hasUndo=false;this.hasRedo=false;this.clearKey()};this.clearKey=function(){f=0;h=null}}t.undoManger=new d;t.undoManger.editor=t;function c(){this.undoManger.save()}t.addListener("saveScene",function(){var e=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,e)});t.addListener("reset",function(e,t){if(!t){this.undoManger.reset()}});t.commands["redo"]=t.commands["undo"]={execCommand:function(e){this.undoManger[e]()},queryCommandState:function(e){return this.undoManger["has"+(e.toLowerCase()=="undo"?"Undo":"Redo")]?0:-1},notNeedUndo:1};var u={16:1,17:1,18:1,37:1,38:1,39:1,40:1},f=0,h;var p=false;t.addListener("ready",function(){domUtils.on(this.body,"compositionstart",function(){p=true});domUtils.on(this.body,"compositionend",function(){p=false})});t.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var m=true;t.addListener("keydown",function(t,i){var r=this;var o=i.keyCode||i.which;if(!u[o]&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey){if(p)return;if(!r.selection.getRange().collapsed){r.undoManger.save(false,true);m=false;return}if(r.undoManger.list.length==0){r.undoManger.save(true)}clearTimeout(e);function a(e){e.undoManger.save(false,true);e.fireEvent("selectionchange")}e=setTimeout(function(){if(p){var e=setInterval(function(){if(!p){a(r);clearInterval(e)}},300);return}a(r)},200);h=o;f++;if(f>=n){a(r)}}});t.addListener("keyup",function(e,t){var i=t.keyCode||t.which;if(!u[i]&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey){if(p)return;if(!m){this.undoManger.save(false,true);m=true}}});t.stopCmdUndo=function(){t.__hasEnterExecCommand=true};t.startCmdUndo=function(){t.__hasEnterExecCommand=false}};UE.plugin.register("copy",function(){var e=this;function t(){ZeroClipboard.config({debug:false,swfPath:e.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.swf"});var t=e.zeroclipboard=new ZeroClipboard;t.on("copy",function(t){var i=t.client,n=e.selection.getRange(),r=document.createElement("div");r.appendChild(n.cloneContents());i.setText(r.innerText||r.textContent);i.setHtml(r.innerHTML);n.select()});t.on("mouseover mouseout",function(e){var t=e.target;if(e.type=="mouseover"){domUtils.addClass(t,"edui-state-hover")}else if(e.type=="mouseout"){domUtils.removeClasses(t,"edui-state-hover")}});t.on("wrongflash noflash",function(){ZeroClipboard.destroy()})}return{bindEvents:{ready:function(){if(!browser.ie){if(window.ZeroClipboard){t()}else{utils.loadFile(document,{src:e.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.js",tag:"script",type:"text/javascript",defer:"defer"},function(){t()})}}}},commands:{copy:{execCommand:function(t){if(!e.document.execCommand("copy")){alert(e.getLang("copymsg"))}}}}}});UE.plugins["paste"]=function(){function e(e){var t=this.document;if(t.getElementById("baidu_pastebin")){return}var i=this.selection.getRange(),n=i.createBookmark(),r=t.createElement("div");r.id="baidu_pastebin";browser.webkit&&r.appendChild(t.createTextNode(domUtils.fillChar+domUtils.fillChar));t.body.appendChild(r);n.start.style.display="";r.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(n.start).y+"px";i.selectNodeContents(r).select(true);setTimeout(function(){if(browser.webkit){for(var o=0,a=t.querySelectorAll("#baidu_pastebin"),s;s=a[o++];){if(domUtils.isEmptyNode(s)){domUtils.remove(s)}else{r=s;break}}}try{r.parentNode.removeChild(r)}catch(e){}i.moveToBookmark(n).select(true);e(r)},0)}var t=this;t.setOpt({retainOnlyLabelPasted:false});var i,n,r;function o(e){return e.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(e,t,i,n){i=i.toLowerCase();if({img:1}[i]){return e}n=n.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(e,t,i){if({src:1,href:1,name:1}[t.toLowerCase()]){return t+"="+i+" "}return""});if({span:1,div:1}[i]){return""}else{return"<"+t+i+" "+utils.trim(n)+">"}})}function a(e){var a;if(e.firstChild){var s=domUtils.getElementsByTagName(e,"span");for(var l=0,d;d=s[l++];){if(d.id=="_baidu_cut_start"||d.id=="_baidu_cut_end"){domUtils.remove(d)}}if(browser.webkit){var c=e.querySelectorAll("div br");for(var l=0,u;u=c[l++];){var f=u.parentNode;if(f.tagName=="DIV"&&f.childNodes.length==1){f.innerHTML="<p><br/></p>";domUtils.remove(f)}}var h=e.querySelectorAll("#baidu_pastebin");for(var l=0,p;p=h[l++];){var m=t.document.createElement("p");p.parentNode.insertBefore(m,p);while(p.firstChild){m.appendChild(p.firstChild)}domUtils.remove(p)}var g=e.querySelectorAll("meta");for(var l=0,v;v=g[l++];){domUtils.remove(v)}var c=e.querySelectorAll("br");for(l=0;v=c[l++];){if(/^apple-/i.test(v.className)){domUtils.remove(v)}}}if(browser.gecko){var y=e.querySelectorAll("[_moz_dirty]");for(l=0;v=y[l++];){v.removeAttribute("_moz_dirty")}}if(!browser.ie){var b=e.querySelectorAll("span.Apple-style-span");for(var l=0,v;v=b[l++];){domUtils.remove(v,true)}}a=e.innerHTML;a=UE.filterWord(a);var w=UE.htmlparser(a);if(t.options.filterRules){UE.filterNode(w,t.options.filterRules)}t.filterInputRule(w);if(browser.webkit){var x=w.lastChild();if(x&&x.type=="element"&&x.tagName=="br"){w.removeChild(x)}utils.each(t.body.querySelectorAll("div"),function(e){if(domUtils.isEmptyBlock(e)){domUtils.remove(e,true)}})}a={html:w.toHtml()};t.fireEvent("beforepaste",a,w);if(!a.html){return}w=UE.htmlparser(a.html,true);if(t.queryCommandState("pasteplain")===1){t.execCommand("insertHtml",UE.filterNode(w,t.options.filterTxtRules).toHtml(),true)}else{UE.filterNode(w,t.options.filterTxtRules);i=w.toHtml();n=a.html;r=t.selection.getRange().createAddress(true);t.execCommand("insertHtml",t.getOpt("retainOnlyLabelPasted")===true?o(n):n,true)}t.fireEvent("afterpaste",a)}}t.addListener("pasteTransfer",function(e,a){if(r&&i&&n&&i!=n){var s=t.selection.getRange();s.moveToAddress(r,true);if(!s.collapsed){while(!domUtils.isBody(s.startContainer)){var l=s.startContainer;if(l.nodeType==1){l=l.childNodes[s.startOffset];if(!l){s.setStartBefore(s.startContainer);continue}var d=l.previousSibling;if(d&&d.nodeType==3&&new RegExp("^[\n\r\t "+domUtils.fillChar+"]*$").test(d.nodeValue)){s.setStartBefore(d)}}if(s.startOffset==0){s.setStartBefore(s.startContainer)}else{break}}while(!domUtils.isBody(s.endContainer)){var c=s.endContainer;if(c.nodeType==1){c=c.childNodes[s.endOffset];if(!c){s.setEndAfter(s.endContainer);continue}var u=c.nextSibling;if(u&&u.nodeType==3&&new RegExp("^[\n\r\t"+domUtils.fillChar+"]*$").test(u.nodeValue)){s.setEndAfter(u)}}if(s.endOffset==s.endContainer[s.endContainer.nodeType==3?"nodeValue":"childNodes"].length){s.setEndAfter(s.endContainer)}else{break}}}s.deleteContents();s.select(true);t.__hasEnterExecCommand=true;var f=n;if(a===2){f=o(f)}else if(a){f=i}t.execCommand("inserthtml",f,true);t.__hasEnterExecCommand=false;var h=t.selection.getRange();while(!domUtils.isBody(h.startContainer)&&!h.startOffset&&h.startContainer[h.startContainer.nodeType==3?"nodeValue":"childNodes"].length){h.setStartBefore(h.startContainer)}var p=h.createAddress(true);r.endAddress=p.startAddress}});t.addListener("ready",function(){domUtils.on(t.body,"cut",function(){var e=t.selection.getRange();if(!e.collapsed&&t.undoManger){t.undoManger.save()}});domUtils.on(t.body,browser.ie||browser.opera?"keydown":"paste",function(i){if((browser.ie||browser.opera)&&(!i.ctrlKey&&!i.metaKey||i.keyCode!="86")){return}e.call(t,function(e){a(e)})})});t.commands["paste"]={execCommand:function(i){if(browser.ie){e.call(t,function(e){a(e)});t.document.execCommand("paste")}else{alert(t.getLang("pastemsg"))}}}};UE.plugins["pasteplain"]=function(){var e=this;e.setOpt({pasteplain:false,filterTxtRules:function(){function e(e){e.tagName="p";e.setStyle()}function t(e){e.parentNode.removeChild(e,true)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(e){var t,i=UE.uNode.createElement("p");while(t=e.firstChild()){if(t.type=="text"||!UE.dom.dtd.$block[t.tagName]){i.appendChild(t)}else{if(i.firstChild()){e.parentNode.insertBefore(i,e);i=UE.uNode.createElement("p")}else{e.parentNode.insertBefore(t,e)}}}if(i.firstChild()){e.parentNode.insertBefore(i,e)}e.parentNode.removeChild(e)},ol:t,ul:t,dl:t,dt:t,dd:t,li:t,caption:e,th:e,tr:e,h1:e,h2:e,h3:e,h4:e,h5:e,h6:e,td:function(e){var t=!!e.innerText();if(t){e.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),e)}e.parentNode.removeChild(e,e.innerText())}}}()});var t=e.options.pasteplain;e.commands["pasteplain"]={queryCommandState:function(){return t?1:0},execCommand:function(){t=!t|0},notNeedUndo:1}};UE.plugins["list"]=function(){var e=this,t={TD:1,PRE:1,BLOCKQUOTE:1};var i={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};e.setOpt({autoTransWordToList:false,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:false});function n(e){var t=[];for(var i in e){t.push(i)}return t}var r={OL:n(e.options.insertorderedlist),UL:n(e.options.insertunorderedlist)};var o=e.options.listiconpath;for(var a in i){if(!e.options.insertorderedlist.hasOwnProperty(a)&&!e.options.insertunorderedlist.hasOwnProperty(a)){delete i[a]}}e.ready(function(){var t=[];for(var n in i){if(n=="dash"||n=="dot"){t.push("li.list-"+i[n]+"{background-image:url("+o+i[n]+".gif)}");t.push("ul.custom_"+n+"{list-style:none;}ul.custom_"+n+" li{background-position:0 3px;background-repeat:no-repeat}")}else{for(var r=0;r<99;r++){t.push("li.list-"+i[n]+r+"{background-image:url("+o+"list-"+i[n]+r+".gif)}")}t.push("ol.custom_"+n+"{list-style:none;}ol.custom_"+n+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(n){case"cn":t.push("li.list-"+n+"-paddingleft-1{padding-left:25px}");t.push("li.list-"+n+"-paddingleft-2{padding-left:40px}");t.push("li.list-"+n+"-paddingleft-3{padding-left:55px}");break;case"cn1":t.push("li.list-"+n+"-paddingleft-1{padding-left:30px}");t.push("li.list-"+n+"-paddingleft-2{padding-left:40px}");t.push("li.list-"+n+"-paddingleft-3{padding-left:55px}");break;case"cn2":t.push("li.list-"+n+"-paddingleft-1{padding-left:40px}");t.push("li.list-"+n+"-paddingleft-2{padding-left:55px}");t.push("li.list-"+n+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":t.push("li.list-"+n+"-paddingleft-1{padding-left:25px}");break;case"num2":t.push("li.list-"+n+"-paddingleft-1{padding-left:35px}");t.push("li.list-"+n+"-paddingleft-2{padding-left:40px}");break;case"dash":t.push("li.list-"+n+"-paddingleft{padding-left:35px}");break;case"dot":t.push("li.list-"+n+"-paddingleft{padding-left:20px}")}}t.push(".list-paddingleft-1{padding-left:0}");t.push(".list-paddingleft-2{padding-left:"+e.options.listDefaultPaddingLeft+"px}");t.push(".list-paddingleft-3{padding-left:"+e.options.listDefaultPaddingLeft*2+"px}");utils.cssRule("list","ol,ul{margin:0;pading:0;"+(browser.ie?"":"width:95%")+"}li{clear:both;}"+t.join("\n"),e.document)});e.ready(function(){domUtils.on(e.body,"cut",function(){setTimeout(function(){var t=e.selection.getRange(),i;if(!t.collapsed){if(i=domUtils.findParentByTagName(t.startContainer,"li",true)){if(!i.nextSibling&&domUtils.isEmptyBlock(i)){var n=i.parentNode,r;if(r=n.previousSibling){domUtils.remove(n);t.setStartAtLast(r).collapse(true);t.select(true)}else if(r=n.nextSibling){domUtils.remove(n);t.setStartAtFirst(r).collapse(true);t.select(true)}else{var o=e.document.createElement("p");domUtils.fillNode(e.document,o);n.parentNode.insertBefore(o,n);domUtils.remove(n);t.setStart(o,0).collapse(true);t.select(true)}}}}})})});function s(e){var t=e.className;if(domUtils.hasClass(e,/custom_/)){return t.match(/custom_(\w+)/)[1]}return domUtils.getStyle(e,"list-style-type")}e.addListener("beforepaste",function(e,t){var n=this,o=n.selection.getRange(),a;var l=UE.htmlparser(t.html,true);if(a=domUtils.findParentByTagName(o.startContainer,"li",true)){var d=a.parentNode,c=d.tagName=="OL"?"ul":"ol";utils.each(l.getNodesByTagName(c),function(t){t.tagName=d.tagName;t.setAttr();if(t.parentNode===l){e=s(d)||(d.tagName=="OL"?"decimal":"disc")}else{var n=t.parentNode.getAttr("class");if(n&&/custom_/.test(n)){e=n.match(/custom_(\w+)/)[1]}else{e=t.parentNode.getStyle("list-style-type")}if(!e){e=d.tagName=="OL"?"decimal":"disc"}}var o=utils.indexOf(r[d.tagName],e);if(t.parentNode!==l)o=o+1==r[d.tagName].length?0:o+1;var a=r[d.tagName][o];if(i[a]){t.setAttr("class","custom_"+a)}else{t.setStyle("list-style-type",a)}})}t.html=l.toHtml()});e.getOpt("disablePInList")===true&&e.addOutputRule(function(e){utils.each(e.getNodesByTagName("li"),function(e){var t=[],i=0;utils.each(e.children,function(n){if(n.tagName=="p"){var r;while(r=n.children.pop()){t.splice(i,0,r);r.parentNode=e;lastNode=r}r=t[t.length-1];if(!r||r.type!="element"||r.tagName!="br"){var o=UE.uNode.createElement("br");o.parentNode=e;t.push(o)}i=t.length}});if(t.length){e.children=t}})});e.addInputRule(function(t){utils.each(t.getNodesByTagName("li"),function(e){var t=UE.uNode.createElement("p");for(var i=0,n;n=e.children[i];){if(n.type=="text"||dtd.p[n.tagName]){t.appendChild(n)}else{if(t.firstChild()){e.insertBefore(t,n);t=UE.uNode.createElement("p");i=i+2}else{i++}}}if(t.firstChild()&&!t.parentNode||!e.firstChild()){e.appendChild(t)}if(!t.firstChild()){t.innerHTML(browser.ie?"&nbsp;":"<br/>")}var r=e.firstChild();var o=r.lastChild();if(o&&o.type=="text"&&/^\s*$/.test(o.data)){r.removeChild(o)}});if(e.options.autoTransWordToList){var n={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},r={square:"n"};function o(e,t){var i=t.firstChild();if(i&&i.type=="element"&&i.tagName=="span"&&/Wingdings|Symbol/.test(i.getStyle("font-family"))){for(var o in r){if(r[o]==i.data){return o}}return"disc"}for(var o in n){if(n[o].test(e)){return o}}}utils.each(t.getNodesByTagName("p"),function(t){if(t.getAttr("class")!="MsoListParagraph"){return}t.setStyle("margin","");t.setStyle("margin-left","");t.setAttr("class","");function r(e,t,i){if(e.tagName=="ol"){if(browser.ie){var r=t.firstChild();if(r.type=="element"&&r.tagName=="span"&&n[i].test(r.innerText())){t.removeChild(r)}}else{t.innerHTML(t.innerHTML().replace(n[i],""))}}else{t.removeChild(t.firstChild())}var o=UE.uNode.createElement("li");o.appendChild(t);e.appendChild(o)}var a=t,s,l=t;if(t.parentNode.tagName!="li"&&(s=o(t.innerText(),t))){var d=UE.uNode.createElement(e.options.insertorderedlist.hasOwnProperty(s)?"ol":"ul");if(i[s]){d.setAttr("class","custom_"+s)}else{d.setStyle("list-style-type",s)}while(t&&t.parentNode.tagName!="li"&&o(t.innerText(),t)){a=t.nextSibling();if(!a){t.parentNode.insertBefore(d,t)}r(d,t,s);t=a}if(!d.parentNode&&t&&t.parentNode){t.parentNode.insertBefore(d,t)}}var c=l.firstChild();if(c&&c.type=="element"&&c.tagName=="span"&&/^\s*(&nbsp;)+\s*$/.test(c.innerText())){c.parentNode.removeChild(c)}})}});e.addListener("contentchange",function(){l(e.document)});function l(e,t){utils.each(domUtils.getElementsByTagName(e,"ol ul"),function(n){if(!domUtils.inDoc(n,e))return;var o=n.parentNode;if(o.tagName==n.tagName){var a=s(n)||(n.tagName=="OL"?"decimal":"disc"),l=s(o)||(o.tagName=="OL"?"decimal":"disc");if(a==l){var u=utils.indexOf(r[n.tagName],a);u=u+1==r[n.tagName].length?0:u+1;c(n,r[n.tagName][u])}}var f=0,h=2;if(domUtils.hasClass(n,/custom_/)){if(!(/[ou]l/i.test(o.tagName)&&domUtils.hasClass(o,/custom_/))){h=1}}else{if(/[ou]l/i.test(o.tagName)&&domUtils.hasClass(o,/custom_/)){h=3}}var p=domUtils.getStyle(n,"list-style-type");p&&(n.style.cssText="list-style-type:"+p);n.className=utils.trim(n.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+h;utils.each(domUtils.getElementsByTagName(n,"li"),function(e){e.style.cssText&&(e.style.cssText="");if(!e.firstChild){domUtils.remove(e);return}if(e.parentNode!==n){return}f++;if(domUtils.hasClass(n,/custom_/)){var t=1,r=s(n);if(n.tagName=="OL"){if(r){switch(r){case"cn":case"cn1":case"cn2":if(f>10&&(f%10==0||f>10&&f<20)){t=2}else if(f>20){t=3}break;case"num2":if(f>9){t=2}}}e.className="list-"+i[r]+f+" "+"list-"+r+"-paddingleft-"+t}else{e.className="list-"+i[r]+" "+"list-"+r+"-paddingleft"}}else{e.className=e.className.replace(/list-[\w\-]+/gi,"")}var o=e.getAttribute("class");if(o!==null&&!o.replace(/\s/g,"")){domUtils.removeAttributes(e,"class")}});!t&&d(n,n.tagName.toLowerCase(),s(n)||domUtils.getStyle(n,"list-style-type"),true)})}function d(e,t,i,n){var r=e.nextSibling;if(r&&r.nodeType==1&&r.tagName.toLowerCase()==t&&(s(r)||domUtils.getStyle(r,"list-style-type")||(t=="ol"?"decimal":"disc"))==i){domUtils.moveChild(r,e);if(r.childNodes.length==0){domUtils.remove(r)}}if(r&&domUtils.isFillChar(r)){domUtils.remove(r)}var o=e.previousSibling;if(o&&o.nodeType==1&&o.tagName.toLowerCase()==t&&(s(o)||domUtils.getStyle(o,"list-style-type")||(t=="ol"?"decimal":"disc"))==i){domUtils.moveChild(e,o)}if(o&&domUtils.isFillChar(o)){domUtils.remove(o)}!n&&domUtils.isEmptyBlock(e)&&domUtils.remove(e);if(s(e)){l(e.ownerDocument,true)}}function c(e,t){if(i[t]){e.className="custom_"+t}try{domUtils.setStyle(e,"list-style-type",t)}catch(e){}}function u(e){var t=e.previousSibling;if(t&&domUtils.isEmptyBlock(t)){domUtils.remove(t)}t=e.nextSibling;if(t&&domUtils.isEmptyBlock(t)){domUtils.remove(t)}}e.addListener("keydown",function(t,i){function n(){i.preventDefault?i.preventDefault():i.returnValue=false;e.fireEvent("contentchange");e.undoManger&&e.undoManger.save()}function r(e,t){while(e&&!domUtils.isBody(e)){if(t(e)){return null}if(e.nodeType==1&&/[ou]l/i.test(e.tagName)){return e}e=e.parentNode}return null}var o=i.keyCode||i.which;if(o==13&&!i.shiftKey){var a=e.selection.getRange(),s=domUtils.findParent(a.startContainer,function(e){return domUtils.isBlockElm(e)},true),l=domUtils.findParentByTagName(a.startContainer,"li",true);if(s&&s.tagName!="PRE"&&!l){var d=s.innerHTML.replace(new RegExp(domUtils.fillChar,"g"),"");if(/^\s*1\s*\.[^\d]/.test(d)){s.innerHTML=d.replace(/^\s*1\s*\./,"");a.setStartAtLast(s).collapse(true).select();e.__hasEnterExecCommand=true;e.execCommand("insertorderedlist");e.__hasEnterExecCommand=false}}var c=e.selection.getRange(),f=r(c.startContainer,function(e){return e.tagName=="TABLE"}),h=c.collapsed?f:r(c.endContainer,function(e){return e.tagName=="TABLE"});if(f&&h&&f===h){if(!c.collapsed){f=domUtils.findParentByTagName(c.startContainer,"li",true);h=domUtils.findParentByTagName(c.endContainer,"li",true);if(f&&h&&f===h){c.deleteContents();l=domUtils.findParentByTagName(c.startContainer,"li",true);if(l&&domUtils.isEmptyBlock(l)){x=l.previousSibling;next=l.nextSibling;y=e.document.createElement("p");domUtils.fillNode(e.document,y);g=l.parentNode;if(x&&next){c.setStart(next,0).collapse(true).select(true);domUtils.remove(l)}else{if(!x&&!next||!x){g.parentNode.insertBefore(y,g)}else{l.parentNode.parentNode.insertBefore(y,g.nextSibling)}domUtils.remove(l);if(!g.firstChild){domUtils.remove(g)}c.setStart(y,0).setCursor()}n();return}}else{var p=c.cloneRange(),m=p.collapse(false).createBookmark();c.deleteContents();p.moveToBookmark(m);var l=domUtils.findParentByTagName(p.startContainer,"li",true);u(l);p.select();n();return}}l=domUtils.findParentByTagName(c.startContainer,"li",true);if(l){if(domUtils.isEmptyBlock(l)){m=c.createBookmark();var g=l.parentNode;if(l!==g.lastChild){domUtils.breakParent(l,g);u(l)}else{g.parentNode.insertBefore(l,g.nextSibling);if(domUtils.isEmptyNode(g)){domUtils.remove(g)}}if(!dtd.$list[l.parentNode.tagName]){if(!domUtils.isBlockElm(l.firstChild)){y=e.document.createElement("p");l.parentNode.insertBefore(y,l);while(l.firstChild){y.appendChild(l.firstChild)}domUtils.remove(l)}else{domUtils.remove(l,true)}}c.moveToBookmark(m).select()}else{var v=l.firstChild;if(!v||!domUtils.isBlockElm(v)){var y=e.document.createElement("p");!l.firstChild&&domUtils.fillNode(e.document,y);while(l.firstChild){y.appendChild(l.firstChild)}l.appendChild(y);v=y}var b=e.document.createElement("span");c.insertNode(b);domUtils.breakParent(b,l);var w=b.nextSibling;v=w.firstChild;if(!v){y=e.document.createElement("p");domUtils.fillNode(e.document,y);w.appendChild(y);v=y}if(domUtils.isEmptyNode(v)){v.innerHTML="";domUtils.fillNode(e.document,v)}c.setStart(v,0).collapse(true).shrinkBoundary().select();domUtils.remove(b);var x=w.previousSibling;if(x&&domUtils.isEmptyBlock(x)){x.innerHTML="<p></p>";domUtils.fillNode(e.document,x.firstChild)}}n()}}}if(o==8){c=e.selection.getRange();if(c.collapsed&&domUtils.isStartInblock(c)){p=c.cloneRange().trimBoundary();l=domUtils.findParentByTagName(c.startContainer,"li",true);if(l&&domUtils.isStartInblock(p)){f=domUtils.findParentByTagName(c.startContainer,"p",true);if(f&&f!==l.firstChild){var g=domUtils.findParentByTagName(f,["ol","ul"]);domUtils.breakParent(f,g);u(f);e.fireEvent("contentchange");c.setStart(f,0).setCursor(false,true);e.fireEvent("saveScene");domUtils.preventDefault(i);return}if(l&&(x=l.previousSibling)){if(o==46&&l.childNodes.length){return}if(dtd.$list[x.tagName]){x=x.lastChild}e.undoManger&&e.undoManger.save();v=l.firstChild;if(domUtils.isBlockElm(v)){if(domUtils.isEmptyNode(v)){x.appendChild(v);c.setStart(v,0).setCursor(false,true);while(l.firstChild){x.appendChild(l.firstChild)}}else{b=e.document.createElement("span");c.insertNode(b);if(domUtils.isEmptyBlock(x)){x.innerHTML=""}domUtils.moveChild(l,x);c.setStartBefore(b).collapse(true).select(true);domUtils.remove(b)}}else{if(domUtils.isEmptyNode(l)){var y=e.document.createElement("p");x.appendChild(y);c.setStart(y,0).setCursor()}else{c.setEnd(x,x.childNodes.length).collapse().select(true);while(l.firstChild){x.appendChild(l.firstChild)}}}domUtils.remove(l);e.fireEvent("contentchange");e.fireEvent("saveScene");domUtils.preventDefault(i);return}if(l&&!l.previousSibling){var g=l.parentNode;var m=c.createBookmark();if(domUtils.isTagNode(g.parentNode,"ol ul")){g.parentNode.insertBefore(l,g);if(domUtils.isEmptyNode(g)){domUtils.remove(g)}}else{while(l.firstChild){g.parentNode.insertBefore(l.firstChild,g)}domUtils.remove(l);if(domUtils.isEmptyNode(g)){domUtils.remove(g)}}c.moveToBookmark(m).setCursor(false,true);e.fireEvent("contentchange");e.fireEvent("saveScene");domUtils.preventDefault(i);return}}}}});e.addListener("keyup",function(t,i){var n=i.keyCode||i.which;if(n==8){var r=e.selection.getRange(),o;if(o=domUtils.findParentByTagName(r.startContainer,["ol","ul"],true)){d(o,o.tagName.toLowerCase(),s(o)||domUtils.getComputedStyle(o,"list-style-type"),true)}}});e.addListener("tabkeydown",function(){var t=e.selection.getRange();function i(t){if(e.options.maxListLevel!=-1){var i=t.parentNode,n=0;while(/[ou]l/i.test(i.tagName)){n++;i=i.parentNode}if(n>=e.options.maxListLevel){return true}}}var n=domUtils.findParentByTagName(t.startContainer,"li",true);if(n){var o;if(t.collapsed){if(i(n))return true;var a=n.parentNode,l=e.document.createElement(a.tagName),u=utils.indexOf(r[l.tagName],s(a)||domUtils.getComputedStyle(a,"list-style-type"));u=u+1==r[l.tagName].length?0:u+1;var f=r[l.tagName][u];c(l,f);if(domUtils.isStartInblock(t)){e.fireEvent("saveScene");o=t.createBookmark();a.insertBefore(l,n);l.appendChild(n);d(l,l.tagName.toLowerCase(),f);e.fireEvent("contentchange");t.moveToBookmark(o).select(true);return true}}else{e.fireEvent("saveScene");o=t.createBookmark();for(var h=0,p,m=domUtils.findParents(n),g;g=m[h++];){if(domUtils.isTagNode(g,"ol ul")){p=g;break}}var v=n;if(o.end){while(v&&!(domUtils.getPosition(v,o.end)&domUtils.POSITION_FOLLOWING)){if(i(v)){v=domUtils.getNextDomNode(v,false,null,function(e){return e!==p});continue}var a=v.parentNode,l=e.document.createElement(a.tagName),u=utils.indexOf(r[l.tagName],s(a)||domUtils.getComputedStyle(a,"list-style-type"));var y=u+1==r[l.tagName].length?0:u+1;var f=r[l.tagName][y];c(l,f);a.insertBefore(l,v);while(v&&!(domUtils.getPosition(v,o.end)&domUtils.POSITION_FOLLOWING)){n=v.nextSibling;l.appendChild(v);if(!n||domUtils.isTagNode(n,"ol ul")){if(n){while(n=n.firstChild){if(n.tagName=="LI"){break}}}else{n=domUtils.getNextDomNode(v,false,null,function(e){return e!==p})}break}v=n}d(l,l.tagName.toLowerCase(),f);v=n}}e.fireEvent("contentchange");t.moveToBookmark(o).select();return true}}});function f(e){while(e&&!domUtils.isBody(e)){if(e.nodeName=="TABLE"){return null}if(e.nodeName=="LI"){return e}e=e.parentNode}}e.commands["insertorderedlist"]=e.commands["insertunorderedlist"]={execCommand:function(e,i){if(!i){i=e.toLowerCase()=="insertorderedlist"?"decimal":"disc"}var n=this,r=this.selection.getRange(),o=function(e){return e.nodeType==1?e.tagName.toLowerCase()!="br":!domUtils.isWhitespace(e)},a=e.toLowerCase()=="insertorderedlist"?"ol":"ul",l=n.document.createDocumentFragment();r.adjustmentBoundary().shrinkBoundary();var u=r.createBookmark(true),h=f(n.document.getElementById(u.start)),p=0,m=f(n.document.getElementById(u.end)),g=0,v,y,b,w;if(h||m){h&&(v=h.parentNode);if(!u.end){m=h}m&&(y=m.parentNode);if(v===y){while(h!==m){w=h;h=h.nextSibling;if(!domUtils.isBlockElm(w.firstChild)){var x=n.document.createElement("p");while(w.firstChild){x.appendChild(w.firstChild)}w.appendChild(x)}l.appendChild(w)}w=n.document.createElement("span");v.insertBefore(w,m);if(!domUtils.isBlockElm(m.firstChild)){x=n.document.createElement("p");while(m.firstChild){x.appendChild(m.firstChild)}m.appendChild(x)}l.appendChild(m);domUtils.breakParent(w,v);if(domUtils.isEmptyNode(w.previousSibling)){domUtils.remove(w.previousSibling)}if(domUtils.isEmptyNode(w.nextSibling)){domUtils.remove(w.nextSibling)}var C=s(v)||domUtils.getComputedStyle(v,"list-style-type")||(e.toLowerCase()=="insertorderedlist"?"decimal":"disc");if(v.tagName.toLowerCase()==a&&C==i){for(var _=0,T,E=n.document.createDocumentFragment();T=l.firstChild;){if(domUtils.isTagNode(T,"ol ul")){E.appendChild(T)}else{while(T.firstChild){E.appendChild(T.firstChild);domUtils.remove(T)}}}w.parentNode.insertBefore(E,w)}else{b=n.document.createElement(a);c(b,i);b.appendChild(l);w.parentNode.insertBefore(b,w)}domUtils.remove(w);b&&d(b,a,i);r.moveToBookmark(u).select();return}if(h){while(h){w=h.nextSibling;if(domUtils.isTagNode(h,"ol ul")){l.appendChild(h)}else{var S=n.document.createDocumentFragment(),k=0;while(h.firstChild){if(domUtils.isBlockElm(h.firstChild)){k=1}S.appendChild(h.firstChild)}if(!k){var N=n.document.createElement("p");N.appendChild(S);l.appendChild(N)}else{l.appendChild(S)}domUtils.remove(h)}h=w}v.parentNode.insertBefore(l,v.nextSibling);if(domUtils.isEmptyNode(v)){r.setStartBefore(v);domUtils.remove(v)}else{r.setStartAfter(v)}p=1}if(m&&domUtils.inDoc(y,n.document)){h=y.firstChild;while(h&&h!==m){w=h.nextSibling;if(domUtils.isTagNode(h,"ol ul")){l.appendChild(h)}else{S=n.document.createDocumentFragment();k=0;while(h.firstChild){if(domUtils.isBlockElm(h.firstChild)){k=1}S.appendChild(h.firstChild)}if(!k){N=n.document.createElement("p");N.appendChild(S);l.appendChild(N)}else{l.appendChild(S)}domUtils.remove(h)}h=w}var U=domUtils.createElement(n.document,"div",{tmpDiv:1});domUtils.moveChild(m,U);l.appendChild(U);domUtils.remove(m);y.parentNode.insertBefore(l,y);r.setEndBefore(y);if(domUtils.isEmptyNode(y)){domUtils.remove(y)}g=1}}if(!p){r.setStartBefore(n.document.getElementById(u.start))}if(u.end&&!g){r.setEndAfter(n.document.getElementById(u.end))}r.enlarge(true,function(e){return t[e.tagName]});l=n.document.createDocumentFragment();var R=r.createBookmark(),A=domUtils.getNextDomNode(R.start,false,o),I=r.cloneRange(),D,O=domUtils.isBlockElm;while(A&&A!==R.end&&domUtils.getPosition(A,R.end)&domUtils.POSITION_PRECEDING){if(A.nodeType==3||dtd.li[A.tagName]){if(A.nodeType==1&&dtd.$list[A.tagName]){while(A.firstChild){l.appendChild(A.firstChild)}D=domUtils.getNextDomNode(A,false,o);domUtils.remove(A);A=D;continue}D=A;I.setStartBefore(A);while(A&&A!==R.end&&(!O(A)||domUtils.isBookmarkNode(A))){D=A;A=domUtils.getNextDomNode(A,false,null,function(e){return!t[e.tagName]})}if(A&&O(A)){w=domUtils.getNextDomNode(D,false,o);if(w&&domUtils.isBookmarkNode(w)){A=domUtils.getNextDomNode(w,false,o);D=w}}I.setEndAfter(D);A=domUtils.getNextDomNode(D,false,o);var L=r.document.createElement("li");L.appendChild(I.extractContents());if(domUtils.isEmptyNode(L)){var D=r.document.createElement("p");while(L.firstChild){D.appendChild(L.firstChild)}L.appendChild(D)}l.appendChild(L)}else{A=domUtils.getNextDomNode(A,true,o)}}r.moveToBookmark(R).collapse(true);b=n.document.createElement(a);c(b,i);b.appendChild(l);r.insertNode(b);d(b,a,i);for(var _=0,T,B=domUtils.getElementsByTagName(b,"div");T=B[_++];){if(T.getAttribute("tmpDiv")){domUtils.remove(T,true)}}r.moveToBookmark(u).select()},queryCommandState:function(e){var t=e.toLowerCase()=="insertorderedlist"?"ol":"ul";var i=this.selection.getStartElementPath();for(var n=0,r;r=i[n++];){if(r.nodeName=="TABLE"){return 0}if(t==r.nodeName.toLowerCase()){return 1}}return 0},queryCommandValue:function(e){var t=e.toLowerCase()=="insertorderedlist"?"ol":"ul";var i=this.selection.getStartElementPath(),n;for(var r=0,o;o=i[r++];){if(o.nodeName=="TABLE"){n=null;break}if(t==o.nodeName.toLowerCase()){n=o;break}}return n?s(n)||domUtils.getComputedStyle(n,"list-style-type"):null}}};(function(){var e={textarea:function(e,t){var i=t.ownerDocument.createElement("textarea");i.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;";if(browser.ie&&browser.version<8){i.style.width=t.offsetWidth+"px";i.style.height=t.offsetHeight+"px";t.onresize=function(){i.style.width=t.offsetWidth+"px";i.style.height=t.offsetHeight+"px"}}t.appendChild(i);return{setContent:function(e){i.value=e},getContent:function(){return i.value},select:function(){var e;if(browser.ie){e=i.createTextRange();e.collapse(true);e.select()}else{i.setSelectionRange(0,0);i.focus()}},dispose:function(){t.removeChild(i);t.onresize=null;i=null;t=null}}},codemirror:function(e,t){var i=window.CodeMirror(t,{mode:"text/html",tabMode:"indent",lineNumbers:true,lineWrapping:true});var n=i.getWrapperElement();n.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;';i.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;";i.refresh();return{getCodeMirror:function(){return i},setContent:function(e){i.setValue(e)},getContent:function(){return i.getValue()},select:function(){i.focus()},dispose:function(){t.removeChild(n);n=null;i=null}}}};UE.plugins["source"]=function(){var t=this;var i=this.options;var n=false;var r;var o;i.sourceEditor=browser.ie?"textarea":i.sourceEditor||"codemirror";t.setOpt({sourceEditorFirst:false});function a(n){return e[i.sourceEditor=="codemirror"&&window.CodeMirror?"codemirror":"textarea"](t,n)}var s;var l,d;t.commands["source"]={execCommand:function(){n=!n;if(n){d=t.selection.getRange().createAddress(false,true);t.undoManger&&t.undoManger.save(true);if(browser.gecko){t.body.contentEditable=false}s=t.iframe.style.cssText;t.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;";t.fireEvent("beforegetcontent");var e=UE.htmlparser(t.body.innerHTML);t.filterOutputRule(e);e.traversal(function(e){if(e.type=="element"){switch(e.tagName){case"td":case"th":case"caption":if(e.children&&e.children.length==1){if(e.firstChild().tagName=="br"){e.removeChild(e.firstChild())}};break;case"pre":e.innerText(e.innerText().replace(/&nbsp;/g," "))}}});t.fireEvent("aftergetcontent");var i=e.toHtml(true);r=a(t.iframe.parentNode);r.setContent(i);o=t.setContent;t.setContent=function(e){var i=UE.htmlparser(e);t.filterInputRule(i);e=i.toHtml();r.setContent(e)};setTimeout(function(){r.select();t.addListener("fullscreenchanged",function(){try{r.getCodeMirror().refresh()}catch(e){}})});l=t.getContent;t.getContent=function(){return r.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>"}}else{t.iframe.style.cssText=s;var c=r.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>";c=c.replace(new RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(e,t){if(t&&!dtd.$inlineWithA[t.toLowerCase()]){return e.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,"")}return e.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")});t.setContent=o;t.setContent(c);r.dispose();r=null;t.getContent=l;var u=t.body.firstChild;if(!u){t.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";u=t.body.firstChild}t.undoManger&&t.undoManger.save(true);if(browser.gecko){var f=document.createElement("input");f.style.cssText="position:absolute;left:0;top:-32768px";document.body.appendChild(f);t.body.contentEditable=false;setTimeout(function(){domUtils.setViewportOffset(f,{left:-32768,top:0});f.focus();setTimeout(function(){t.body.contentEditable=true;t.selection.getRange().moveToAddress(d).select(true);domUtils.remove(f)})})}else{try{t.selection.getRange().moveToAddress(d).select(true)}catch(e){}}}this.fireEvent("sourcemodechanged",n)},queryCommandState:function(){return n|0},notNeedUndo:1};var c=t.queryCommandState;t.queryCommandState=function(e){e=e.toLowerCase();if(n){return e in{source:1,fullscreen:1}?1:-1}return c.apply(this,arguments)};if(i.sourceEditor=="codemirror"){t.addListener("ready",function(){utils.loadFile(document,{src:i.codeMirrorJsUrl||i.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){if(i.sourceEditorFirst){setTimeout(function(){t.execCommand("source")},0)}});utils.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:i.codeMirrorCssUrl||i.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})}}})();UE.plugins["enterkey"]=function(){var e,t=this,i=t.options.enterTag;t.addListener("keyup",function(i,n){var r=n.keyCode||n.which;if(r==13){var o=t.selection.getRange(),a=o.startContainer,s;if(!browser.ie){if(/h\d/i.test(e)){if(browser.gecko){var l=domUtils.findParentByTagName(a,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],true);if(!l){t.document.execCommand("formatBlock",false,"<p>");s=1}}else{if(a.nodeType==1){var d=t.document.createTextNode(""),c;o.insertNode(d);c=domUtils.findParentByTagName(d,"div",true);if(c){var u=t.document.createElement("p");while(c.firstChild){u.appendChild(c.firstChild)}c.parentNode.insertBefore(u,c);domUtils.remove(c);o.setStartBefore(d).setCursor();s=1}domUtils.remove(d)}}if(t.undoManger&&s){t.undoManger.save()}}browser.opera&&o.select()}else{t.fireEvent("saveScene",true,true)}}});t.addListener("keydown",function(n,r){var o=r.keyCode||r.which;if(o==13){if(t.fireEvent("beforeenterkeydown")){domUtils.preventDefault(r);return}t.fireEvent("saveScene",true,true);e="";var a=t.selection.getRange();if(!a.collapsed){var s=a.startContainer,l=a.endContainer,d=domUtils.findParentByTagName(s,"td",true),c=domUtils.findParentByTagName(l,"td",true);if(d&&c&&d!==c||!d&&c||d&&!c){r.preventDefault?r.preventDefault():r.returnValue=false;return}}if(i=="p"){if(!browser.ie){s=domUtils.findParentByTagName(a.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],true);if(!s&&!browser.opera){t.document.execCommand("formatBlock",false,"<p>");if(browser.gecko){a=t.selection.getRange();s=domUtils.findParentByTagName(a.startContainer,"p",true);s&&domUtils.removeDirtyAttr(s)}}else{e=s.tagName;s.tagName.toLowerCase()=="p"&&browser.gecko&&domUtils.removeDirtyAttr(s)}}}else{r.preventDefault?r.preventDefault():r.returnValue=false;if(!a.collapsed){a.deleteContents();s=a.startContainer;if(s.nodeType==1&&(s=s.childNodes[a.startOffset])){while(s.nodeType==1){if(dtd.$empty[s.tagName]){a.setStartBefore(s).setCursor();if(t.undoManger){t.undoManger.save()}return false}if(!s.firstChild){var u=a.document.createElement("br");s.appendChild(u);a.setStart(s,0).setCursor();if(t.undoManger){t.undoManger.save()}return false}s=s.firstChild}if(s===a.startContainer.childNodes[a.startOffset]){u=a.document.createElement("br");a.insertNode(u).setCursor()}else{a.setStart(s,0).setCursor()}}else{u=a.document.createElement("br");a.insertNode(u).setStartAfter(u).setCursor()}}else{u=a.document.createElement("br");a.insertNode(u);var f=u.parentNode;if(f.lastChild===u){u.parentNode.insertBefore(u.cloneNode(true),u);a.setStartBefore(u)}else{a.setStartAfter(u)}a.setCursor()}}}})};UE.plugins["keystrokes"]=function(){var e=this;var t=true;e.addListener("keydown",function(i,n){var r=n.keyCode||n.which,o=e.selection.getRange();if(!o.collapsed&&!(n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)&&(r>=65&&r<=90||r>=48&&r<=57||r>=96&&r<=111||{13:1,8:1,46:1}[r])){var a=o.startContainer;if(domUtils.isFillChar(a)){o.setStartBefore(a)}a=o.endContainer;if(domUtils.isFillChar(a)){o.setEndAfter(a)}o.txtToElmBoundary();if(o.endContainer&&o.endContainer.nodeType==1){a=o.endContainer.childNodes[o.endOffset];if(a&&domUtils.isBr(a)){o.setEndAfter(a)}}if(o.startOffset==0){a=o.startContainer;if(domUtils.isBoundaryNode(a,"firstChild")){a=o.endContainer;if(o.endOffset==(a.nodeType==3?a.nodeValue.length:a.childNodes.length)&&domUtils.isBoundaryNode(a,"lastChild")){e.fireEvent("saveScene");e.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";o.setStart(e.body.firstChild,0).setCursor(false,true);e._selectionChange();return}}}}if(r==keymap.Backspace){o=e.selection.getRange();t=o.collapsed;if(e.fireEvent("delkeydown",n)){return}var s,l;if(o.collapsed&&o.inFillChar()){s=o.startContainer;if(domUtils.isFillChar(s)){o.setStartBefore(s).shrinkBoundary(true).collapse(true);domUtils.remove(s)}else{s.nodeValue=s.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"");o.startOffset--;o.collapse(true).select(true)}}if(s=o.getClosedNode()){e.fireEvent("saveScene");o.setStartBefore(s);domUtils.remove(s);o.setCursor();e.fireEvent("saveScene");domUtils.preventDefault(n);return}if(!browser.ie){s=domUtils.findParentByTagName(o.startContainer,"table",true);l=domUtils.findParentByTagName(o.endContainer,"table",true);if(s&&!l||!s&&l||s!==l){n.preventDefault();return}}}if(r==keymap.Tab){var d={ol:1,ul:1,table:1};if(e.fireEvent("tabkeydown",n)){domUtils.preventDefault(n);return}var c=e.selection.getRange();e.fireEvent("saveScene");for(var u=0,f="",h=e.options.tabSize||4,p=e.options.tabNode||"&nbsp;";u<h;u++){f+=p}var m=e.document.createElement("span");m.innerHTML=f+domUtils.fillChar;if(c.collapsed){c.insertNode(m.cloneNode(true).firstChild).setCursor(true)}else{var g=function(e){return domUtils.isBlockElm(e)&&!d[e.tagName.toLowerCase()]};s=domUtils.findParent(c.startContainer,g,true);l=domUtils.findParent(c.endContainer,g,true);if(s&&l&&s===l){c.deleteContents();c.insertNode(m.cloneNode(true).firstChild).setCursor(true)}else{var v=c.createBookmark();c.enlarge(true);var y=c.createBookmark(),b=domUtils.getNextDomNode(y.start,false,g);while(b&&!(domUtils.getPosition(b,y.end)&domUtils.POSITION_FOLLOWING)){b.insertBefore(m.cloneNode(true).firstChild,b.firstChild);b=domUtils.getNextDomNode(b,false,g)}c.moveToBookmark(y).moveToBookmark(v).select()}}domUtils.preventDefault(n)}if(browser.gecko&&r==46){c=e.selection.getRange();if(c.collapsed){s=c.startContainer;if(domUtils.isEmptyBlock(s)){var w=s.parentNode;while(domUtils.getChildCount(w)==1&&!domUtils.isBody(w)){s=w;w=w.parentNode}if(s===w.lastChild)n.preventDefault();return}}}});e.addListener("keyup",function(e,i){var n=i.keyCode||i.which,r,o=this;if(n==keymap.Backspace){if(o.fireEvent("delkeyup")){return}r=o.selection.getRange();if(r.collapsed){var a,s=["h1","h2","h3","h4","h5","h6"];if(a=domUtils.findParentByTagName(r.startContainer,s,true)){if(domUtils.isEmptyBlock(a)){var l=a.previousSibling;if(l&&l.nodeName!="TABLE"){domUtils.remove(a);r.setStartAtLast(l).setCursor(false,true);return}else{var d=a.nextSibling;if(d&&d.nodeName!="TABLE"){domUtils.remove(a);r.setStartAtFirst(d).setCursor(false,true);return}}}}if(domUtils.isBody(r.startContainer)){var a=domUtils.createElement(o.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});r.insertNode(a).setStart(a,0).setCursor(false,true)}}if(!t&&(r.startContainer.nodeType==3||r.startContainer.nodeType==1&&domUtils.isEmptyBlock(r.startContainer))){if(browser.ie){var c=r.document.createElement("span");r.insertNode(c).setStartBefore(c).collapse(true);r.select();domUtils.remove(c)}else{r.select()}}}})};UE.plugins["fiximgclick"]=function(){var e=false;function t(){this.editor=null;this.resizer=null;this.cover=null;this.doc=document;this.prePos={x:0,y:0};this.startPos={x:0,y:0}}(function(){var n=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];t.prototype={init:function(e){var t=this;t.editor=e;t.startPos=this.prePos={x:0,y:0};t.dragId=-1;var n=[],r=t.cover=document.createElement("div"),o=t.resizer=document.createElement("div");r.id=t.editor.ui.id+"_imagescale_cover";r.style.cssText="position:absolute;display:none;z-index:"+t.editor.options.zIndex+";filter:alpha(opacity=0); opacity:0;background:#CCC;";domUtils.on(r,"mousedown click",function(){t.hide()});for(i=0;i<8;i++){n.push('<span class="edui-editor-imagescale-hand'+i+'"></span>')}o.id=t.editor.ui.id+"_imagescale";o.className="edui-editor-imagescale";o.innerHTML=n.join("");o.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+t.editor.options.zIndex+";";t.editor.ui.getDom().appendChild(r);t.editor.ui.getDom().appendChild(o);t.initStyle();t.initEvents()},initStyle:function(){utils.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}"+".edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}"+".edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){var e=this;e.startPos.x=e.startPos.y=0;e.isDraging=false},_eventHandler:function(t){var i=this;switch(t.type){case"mousedown":var n=t.target||t.srcElement,n;if(n.className.indexOf("edui-editor-imagescale-hand")!=-1&&i.dragId==-1){i.dragId=n.className.slice(-1);i.startPos.x=i.prePos.x=t.clientX;i.startPos.y=i.prePos.y=t.clientY;domUtils.on(i.doc,"mousemove",i.proxy(i._eventHandler,i))}break;case"mousemove":if(i.dragId!=-1){i.updateContainerStyle(i.dragId,{x:t.clientX-i.prePos.x,y:t.clientY-i.prePos.y});i.prePos.x=t.clientX;i.prePos.y=t.clientY;e=true;i.updateTargetElement()}break;case"mouseup":if(i.dragId!=-1){i.updateContainerStyle(i.dragId,{x:t.clientX-i.prePos.x,y:t.clientY-i.prePos.y});i.updateTargetElement();if(i.target.parentNode)i.attachTo(i.target);i.dragId=-1}domUtils.un(i.doc,"mousemove",i.proxy(i._eventHandler,i));if(e){e=false;i.editor.fireEvent("contentchange")}break;default:break}},updateTargetElement:function(){var e=this;domUtils.setStyles(e.target,{width:e.resizer.style.width,height:e.resizer.style.height});e.target.width=parseInt(e.resizer.style.width);e.target.height=parseInt(e.resizer.style.height);e.attachTo(e.target)},updateContainerStyle:function(e,t){var i=this,r=i.resizer,o;if(n[e][0]!=0){o=parseInt(r.style.left)+t.x;r.style.left=i._validScaledProp("left",o)+"px"}if(n[e][1]!=0){o=parseInt(r.style.top)+t.y;r.style.top=i._validScaledProp("top",o)+"px"}if(n[e][2]!=0){o=r.clientWidth+n[e][2]*t.x;r.style.width=i._validScaledProp("width",o)+"px"}if(n[e][3]!=0){o=r.clientHeight+n[e][3]*t.y;r.style.height=i._validScaledProp("height",o)+"px"}},_validScaledProp:function(e,t){var i=this.resizer,n=document;t=isNaN(t)?0:t;switch(e){case"left":return t<0?0:t+i.clientWidth>n.clientWidth?n.clientWidth-i.clientWidth:t;case"top":return t<0?0:t+i.clientHeight>n.clientHeight?n.clientHeight-i.clientHeight:t;case"width":return t<=0?1:t+i.offsetLeft>n.clientWidth?n.clientWidth-i.offsetLeft:t;case"height":return t<=0?1:t+i.offsetTop>n.clientHeight?n.clientHeight-i.offsetTop:t}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var e=this,t=domUtils.getXY(e.editor.ui.getDom()),i=domUtils.getXY(e.editor.iframe);domUtils.setStyles(e.cover,{width:e.editor.iframe.offsetWidth+"px",height:e.editor.iframe.offsetHeight+"px",top:i.y-t.y+"px",left:i.x-t.x+"px",position:"absolute",display:""})},show:function(e){var t=this;t.resizer.style.display="block";if(e)t.attachTo(e);domUtils.on(this.resizer,"mousedown",t.proxy(t._eventHandler,t));domUtils.on(t.doc,"mouseup",t.proxy(t._eventHandler,t));t.showCover();t.editor.fireEvent("afterscaleshow",t);t.editor.fireEvent("saveScene")},hide:function(){var e=this;e.hideCover();e.resizer.style.display="none";domUtils.un(e.resizer,"mousedown",e.proxy(e._eventHandler,e));domUtils.un(e.doc,"mouseup",e.proxy(e._eventHandler,e));e.editor.fireEvent("afterscalehide",e)},proxy:function(e,t){return function(i){return e.apply(t||this,arguments)}},attachTo:function(e){var t=this,i=t.target=e,n=this.resizer,r=domUtils.getXY(i),o=domUtils.getXY(t.editor.iframe),a=domUtils.getXY(n.parentNode);domUtils.setStyles(n,{width:i.width+"px",height:i.height+"px",left:o.x+r.x-t.editor.document.body.scrollLeft-a.x-parseInt(n.style.borderLeftWidth)+"px",top:o.y+r.y-t.editor.document.body.scrollTop-a.y-parseInt(n.style.borderTopWidth)+"px"})}}})();return function(){var e=this,i;e.setOpt("imageScaleEnabled",true);if(!browser.ie&&e.options.imageScaleEnabled){e.addListener("click",function(n,r){var o=e.selection.getRange(),a=o.getClosedNode();if(a&&a.tagName=="IMG"&&e.body.contentEditable!="false"){if(a.className.indexOf("edui-faked-music")!=-1||a.getAttribute("anchorname")||domUtils.hasClass(a,"loadingclass")||domUtils.hasClass(a,"loaderrorclass")){return}if(!i){i=new t;i.init(e);e.ui.getDom().appendChild(i.resizer);var s=function(t){i.hide();if(i.target)e.selection.getRange().selectNode(i.target).select()},l=function(e){var t=e.target||e.srcElement;if(t&&(t.className===undefined||t.className.indexOf("edui-editor-imagescale")==-1)){s(e)}},d;e.addListener("afterscaleshow",function(t){e.addListener("beforekeydown",s);e.addListener("beforemousedown",l);domUtils.on(document,"keydown",s);domUtils.on(document,"mousedown",l);e.selection.getNative().removeAllRanges()});e.addListener("afterscalehide",function(t){e.removeListener("beforekeydown",s);e.removeListener("beforemousedown",l);domUtils.un(document,"keydown",s);domUtils.un(document,"mousedown",l);var n=i.target;if(n.parentNode){e.selection.getRange().selectNode(n).select()}});domUtils.on(i.resizer,"mousedown",function(t){e.selection.getNative().removeAllRanges();var n=t.target||t.srcElement;if(n&&n.className.indexOf("edui-editor-imagescale-hand")==-1){d=setTimeout(function(){i.hide();if(i.target)e.selection.getRange().selectNode(n).select()},200)}});domUtils.on(i.resizer,"mouseup",function(e){var t=e.target||e.srcElement;if(t&&t.className.indexOf("edui-editor-imagescale-hand")==-1){clearTimeout(d)}})}i.show(a)}else{if(i&&i.resizer.style.display!="none")i.hide()}})}if(browser.webkit){e.addListener("click",function(t,i){if(i.target.tagName=="IMG"&&e.body.contentEditable!="false"){var n=new dom.Range(e.document);n.selectNode(i.target).select()}})}}}();UE.plugin.register("autolink",function(){var e=0;return!browser.ie?{bindEvents:{reset:function(){e=0},keydown:function(e,t){var i=this;var n=t.keyCode||t.which;if(n==32||n==13){var r=i.selection.getNative(),o=r.getRangeAt(0).cloneRange(),a,s;var l=o.startContainer;while(l.nodeType==1&&o.startOffset>0){l=o.startContainer.childNodes[o.startOffset-1];if(!l){break}o.setStart(l,l.nodeType==1?l.childNodes.length:l.nodeValue.length);o.collapse(true);l=o.startContainer}do{if(o.startOffset==0){l=o.startContainer.previousSibling;while(l&&l.nodeType==1){l=l.lastChild}if(!l||domUtils.isFillChar(l)){break}a=l.nodeValue.length}else{l=o.startContainer;a=o.startOffset}o.setStart(l,a-1);s=o.toString().charCodeAt(0)}while(s!=160&&s!=32);if(o.toString().replace(new RegExp(domUtils.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){while(o.toString().length){if(/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(o.toString())){break}try{o.setStart(o.startContainer,o.startOffset+1)}catch(e){var l=o.startContainer;while(!(next=l.nextSibling)){if(domUtils.isBody(l)){return}l=l.parentNode}o.setStart(next,0)}}if(domUtils.findParentByTagName(o.startContainer,"a",true)){return}var d=i.document.createElement("a"),c=i.document.createTextNode(" "),u;i.undoManger&&i.undoManger.save();d.appendChild(o.extractContents());d.href=d.innerHTML=d.innerHTML.replace(/<[^>]+>/g,"");u=d.getAttribute("href").replace(new RegExp(domUtils.fillChar,"g"),"");u=/^(?:https?:\/\/)/gi.test(u)?u:"http://"+u;d.setAttribute("_src",utils.html(u));d.href=utils.html(u);o.insertNode(d);d.parentNode.insertBefore(c,d.nextSibling);o.setStart(c,0);o.collapse(true);r.removeAllRanges();r.addRange(o);i.undoManger&&i.undoManger.save()}}}}}:{}},function(){var e={37:1,38:1,39:1,40:1,13:1,32:1};function t(e){if(e.nodeType==3){return null}if(e.nodeName=="A"){return e}var t=e.lastChild;while(t){if(t.nodeName=="A"){return t}if(t.nodeType==3){if(domUtils.isWhitespace(t)){t=t.previousSibling;continue}return null}t=t.lastChild}}browser.ie&&this.addListener("keyup",function(i,n){var r=this,o=n.keyCode;if(e[o]){var a=r.selection.getRange();var s=a.startContainer;if(o==13){while(s&&!domUtils.isBody(s)&&!domUtils.isBlockElm(s)){s=s.parentNode}if(s&&!domUtils.isBody(s)&&s.nodeName=="P"){var l=s.previousSibling;if(l&&l.nodeType==1){var l=t(l);if(l&&!l.getAttribute("_href")){domUtils.remove(l,true)}}}}else if(o==32){if(s.nodeType==3&&/^\s$/.test(s.nodeValue)){s=s.previousSibling;if(s&&s.nodeName=="A"&&!s.getAttribute("_href")){domUtils.remove(s,true)}}}else{s=domUtils.findParentByTagName(s,"a",true);if(s&&!s.getAttribute("_href")){var d=a.createBookmark();domUtils.remove(s,true);a.moveToBookmark(d).select(true)}}}})});UE.plugins["autoheight"]=function(){var e=this;e.autoHeightEnabled=e.options.autoHeightEnabled!==false;if(!e.autoHeightEnabled){return}var t,i=0,n=e.options,r,o;function a(){var e=this;clearTimeout(o);if(s)return;if(!e.queryCommandState||e.queryCommandState&&e.queryCommandState("source")!=1){o=setTimeout(function(){var t=e.body.lastChild;while(t&&t.nodeType!=1){t=t.previousSibling}if(t&&t.nodeType==1){t.style.clear="both";r=Math.max(domUtils.getXY(t).y+t.offsetHeight+25,Math.max(n.minFrameHeight,n.initialFrameHeight));if(r!=i){if(r!==parseInt(e.iframe.parentNode.style.height)){e.iframe.parentNode.style.height=r+"px"}e.body.style.height=r+"px";i=r}domUtils.removeStyle(t,"clear")}},50)}}var s;e.addListener("fullscreenchanged",function(e,t){s=t});e.addListener("destroy",function(){e.removeListener("contentchange afterinserthtml keyup mouseup",a)});e.enableAutoHeight=function(){var e=this;if(!e.autoHeightEnabled){return}var i=e.document;e.autoHeightEnabled=true;t=i.body.style.overflowY;i.body.style.overflowY="hidden";e.addListener("contentchange afterinserthtml keyup mouseup",a);setTimeout(function(){a.call(e)},browser.gecko?100:0);e.fireEvent("autoheightchanged",e.autoHeightEnabled)};e.disableAutoHeight=function(){e.body.style.overflowY=t||"";e.removeListener("contentchange",a);e.removeListener("keyup",a);e.removeListener("mouseup",a);e.autoHeightEnabled=false;e.fireEvent("autoheightchanged",e.autoHeightEnabled)};e.on("setHeight",function(){e.disableAutoHeight()});e.addListener("ready",function(){e.enableAutoHeight();var t;domUtils.on(browser.ie?e.body:e.document,browser.webkit?"dragover":"drop",function(){clearTimeout(t);t=setTimeout(function(){a.call(e)},100)});var i;window.onscroll=function(){if(i===null){i=this.scrollY}else if(this.scrollY==0&&i!=0){e.window.scrollTo(0,0);i=null}}})};UE.plugins["autofloat"]=function(){var e=this,t=e.getLang();e.setOpt({topOffset:0});var i=e.options.autoFloatEnabled!==false,n=e.options.topOffset;if(!i){return}var r=UE.ui.uiUtils,o=browser.ie&&browser.version<=6,a=browser.quirks;function s(){if(!UE.ui){alert(t.autofloatMsg);return 0}return 1}function l(){var e=document.body.style;e.backgroundImage='url("about:blank")';e.backgroundAttachment="fixed"}var d,c=document.createElement("div"),u,f,h,p=true;function m(){var t=domUtils.getXY(u),i=domUtils.getComputedStyle(u,"position"),r=domUtils.getComputedStyle(u,"left");u.style.width=u.offsetWidth+"px";u.style.zIndex=e.options.zIndex*1+1;u.parentNode.insertBefore(c,u);if(o||a&&browser.ie){if(u.style.position!="absolute"){u.style.position="absolute"}u.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-f+n+"px"}else{if(browser.ie7Compat&&p){p=false;u.style.left=domUtils.getXY(u).x-document.documentElement.getBoundingClientRect().left+2+"px"}if(u.style.position!="fixed"){u.style.position="fixed";u.style.top=n+"px";(i=="absolute"||i=="relative")&&parseFloat(r)&&(u.style.left=t.x+"px")}}}function g(){p=true;if(c.parentNode){c.parentNode.removeChild(c)}u.style.cssText=d}function v(){var t=h(e.container);var i=e.options.toolbarTopOffset||0;if(t.top<0&&t.bottom-u.offsetHeight>i){m()}else{g()}}var y=utils.defer(function(){v()},browser.ie?200:100,true);e.addListener("destroy",function(){domUtils.un(window,["scroll","resize"],v);e.removeListener("keydown",y)});e.addListener("ready",function(){if(s(e)){if(!e.ui){return}h=r.getClientRect;u=e.ui.getDom("toolbarbox");f=h(u).top;d=u.style.cssText;c.style.height=u.offsetHeight+"px";if(o){l()}domUtils.on(window,["scroll","resize"],v);e.addListener("keydown",y);e.addListener("beforefullscreenchange",function(e,t){if(t){g()}});e.addListener("fullscreenchanged",function(e,t){if(!t){v()}});e.addListener("sourcemodechanged",function(e,t){setTimeout(function(){v()},0)});e.addListener("clearDoc",function(){setTimeout(function(){v()},0)})}})};UE.plugins["video"]=function(){var e=this;function t(t,i,n,r,o,a,s){t=utils.unhtmlForUrl(t);o=utils.unhtml(o);a=utils.unhtml(a);i=parseInt(i,10)||0;n=parseInt(n,10)||0;var l;switch(s){case"image":l="<img "+(r?'id="'+r+'"':"")+' width="'+i+'" height="'+n+'" _url="'+t+'" class="'+a.replace(/\bvideo-js\b/,"")+'"'+' src="'+e.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+e.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(o?"float:"+o+";":"")+'" />';break;case"embed":l='<embed type="application/x-shockwave-flash" class="'+a+'" pluginspage="http://www.macromedia.com/go/getflashplayer"'+' src="'+utils.html(t)+'" width="'+i+'" height="'+n+'"'+(o?' style="float:'+o+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":var d=t.substr(t.lastIndexOf(".")+1);if(d=="ogv")d="ogg";l="<video"+(r?' id="'+r+'"':"")+' class="'+a+' video-js" '+(o?' style="float:'+o+'"':"")+' controls preload="none" width="'+i+'" height="'+n+'" src="'+t+'" data-setup="{}">'+'<source src="'+t+'" type="video/'+d+'" /></video>';break}return l}function i(e,i){utils.each(e.getNodesByTagName(i?"img":"embed video"),function(e){var n=e.getAttr("class");if(n&&n.indexOf("edui-faked-video")!=-1){var r=t(i?e.getAttr("_url"):e.getAttr("src"),e.getAttr("width"),e.getAttr("height"),null,e.getStyle("float")||"",n,i?"embed":"image");e.parentNode.replaceChild(UE.uNode.createElement(r),e)}if(n&&n.indexOf("edui-upload-video")!=-1){var r=t(i?e.getAttr("_url"):e.getAttr("src"),e.getAttr("width"),e.getAttr("height"),null,e.getStyle("float")||"",n,i?"video":"image");e.parentNode.replaceChild(UE.uNode.createElement(r),e)}})}e.addOutputRule(function(e){i(e,true)});e.addInputRule(function(e){i(e)});e.commands["insertvideo"]={execCommand:function(i,n,r){n=utils.isArray(n)?n:[n];var o=[],a="tmpVedio",s;for(var l=0,d,c=n.length;l<c;l++){d=n[l];s=r=="upload"?"edui-upload-video video-js vjs-default-skin":"edui-faked-video";o.push(t(d.url,d.width||420,d.height||280,a+l,null,s,"image"))}e.execCommand("inserthtml",o.join(""),true);var u=this.selection.getRange();for(var l=0,c=n.length;l<c;l++){var f=this.document.getElementById("tmpVedio"+l);domUtils.removeAttributes(f,"id");u.selectNode(f).select();e.execCommand("imagefloat",n[l].align)}},queryCommandState:function(){var t=e.selection.getRange().getClosedNode(),i=t&&(t.className=="edui-faked-video"||t.className.indexOf("edui-upload-video")!=-1);return i?1:0}}};(function(){var e=UE.UETable=function(e){this.table=e;this.indexTable=[];this.selectedTds=[];this.cellsRange={};this.update(e)};e.removeSelectedClass=function(e){utils.each(e,function(e){domUtils.removeClasses(e,"selectTdClass")})};e.addSelectedClass=function(e){utils.each(e,function(e){domUtils.addClass(e,"selectTdClass")})};e.isEmptyBlock=function(e){var t=new RegExp(domUtils.fillChar,"g");if(e[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length>0){return 0}for(var i in dtd.$isNotEmpty)if(dtd.$isNotEmpty.hasOwnProperty(i)){if(e.getElementsByTagName(i).length){return 0}}return 1};e.getWidth=function(e){if(!e)return 0;return parseInt(domUtils.getComputedStyle(e,"width"),10)};e.getTableCellAlignState=function(e){!utils.isArray(e)&&(e=[e]);var t={},i=["align","valign"],n=null,r=true;utils.each(e,function(e){utils.each(i,function(i){n=e.getAttribute(i);if(!t[i]&&n){t[i]=n}else if(!t[i]||n!==t[i]){r=false;return false}});return r});return r?t:null};e.getTableItemsByRange=function(e){var t=e.selection.getStart();if(t&&t.id&&t.id.indexOf("_baidu_bookmark_start_")===0&&t.nextSibling){t=t.nextSibling}var i=t&&domUtils.findParentByTagName(t,["td","th"],true),n=i&&i.parentNode,r=t&&domUtils.findParentByTagName(t,"caption",true),o=r?r.parentNode:n&&n.parentNode.parentNode;return{cell:i,tr:n,table:o,caption:r}};e.getUETableBySelected=function(t){var i=e.getTableItemsByRange(t).table;if(i&&i.ueTable&&i.ueTable.selectedTds.length){return i.ueTable}return null};e.getDefaultValue=function(e,t){var i={thin:"0px",medium:"1px",thick:"2px"},n,r,o,a;if(!t){t=e.document.createElement("table");t.insertRow(0).insertCell(0).innerHTML="xxx";e.body.appendChild(t);var s=t.getElementsByTagName("td")[0];a=domUtils.getComputedStyle(t,"border-left-width");n=parseInt(i[a]||a,10);a=domUtils.getComputedStyle(s,"padding-left");r=parseInt(i[a]||a,10);a=domUtils.getComputedStyle(s,"border-left-width");o=parseInt(i[a]||a,10);domUtils.remove(t);return{tableBorder:n,tdPadding:r,tdBorder:o}}else{s=t.getElementsByTagName("td")[0];a=domUtils.getComputedStyle(t,"border-left-width");n=parseInt(i[a]||a,10);a=domUtils.getComputedStyle(s,"padding-left");r=parseInt(i[a]||a,10);a=domUtils.getComputedStyle(s,"border-left-width");o=parseInt(i[a]||a,10);return{tableBorder:n,tdPadding:r,tdBorder:o}}};e.getUETable=function(t){var i=t.tagName.toLowerCase();t=i=="td"||i=="th"||i=="caption"?domUtils.findParentByTagName(t,"table",true):t;if(!t.ueTable){t.ueTable=new e(t)}return t.ueTable};e.cloneCell=function(e,t,i){if(!e||utils.isString(e)){return this.table.ownerDocument.createElement(e||"td")}var n=domUtils.hasClass(e,"selectTdClass");n&&domUtils.removeClasses(e,"selectTdClass");var r=e.cloneNode(true);if(t){r.rowSpan=r.colSpan=1}!i&&domUtils.removeAttributes(r,"width height");!i&&domUtils.removeAttributes(r,"style");r.style.borderLeftStyle="";r.style.borderTopStyle="";r.style.borderLeftColor=e.style.borderRightColor;r.style.borderLeftWidth=e.style.borderRightWidth;r.style.borderTopColor=e.style.borderBottomColor;r.style.borderTopWidth=e.style.borderBottomWidth;n&&domUtils.addClass(e,"selectTdClass");return r};e.prototype={getMaxRows:function(){var e=this.table.rows,t=1;for(var i=0,n;n=e[i];i++){var r=1;for(var o=0,a;a=n.cells[o++];){r=Math.max(a.rowSpan||1,r)}t=Math.max(r+i,t)}return t},getMaxCols:function(){var e=this.table.rows,t=0,i={};for(var n=0,r;r=e[n];n++){var o=0;for(var a=0,s;s=r.cells[a++];){o+=s.colSpan||1;if(s.rowSpan&&s.rowSpan>1){for(var l=1;l<s.rowSpan;l++){if(!i["row_"+(n+l)]){i["row_"+(n+l)]=s.colSpan||1}else{i["row_"+(n+l)]++}}}}o+=i["row_"+n]||0;t=Math.max(o,t)}return t},getCellColIndex:function(e){},getHSideCell:function(e,i){try{var n=this.getCellInfo(e),r,o;var a=this.selectedTds.length,s=this.cellsRange;if(!i&&(!a?!n.colIndex:!s.beginColIndex)||i&&(!a?n.colIndex==this.colsNum-1:s.endColIndex==this.colsNum-1))return null;r=!a?n.rowIndex:s.beginRowIndex;o=!i?!a?n.colIndex<1?0:n.colIndex-1:s.beginColIndex-1:!a?n.colIndex+1:s.endColIndex+1;return this.getCell(this.indexTable[r][o].rowIndex,this.indexTable[r][o].cellIndex)}catch(e){t(e)}},getTabNextCell:function(e,t){var i=this.getCellInfo(e),n=t||i.rowIndex,r=i.colIndex+1+(i.colSpan-1),o;try{o=this.getCell(this.indexTable[n][r].rowIndex,this.indexTable[n][r].cellIndex)}catch(e){try{n=n*1+1;r=0;o=this.getCell(this.indexTable[n][r].rowIndex,this.indexTable[n][r].cellIndex)}catch(e){}}return o},getVSideCell:function(e,i,n){try{var r=this.getCellInfo(e),o,a;var s=this.selectedTds.length&&!n,l=this.cellsRange;if(!i&&r.rowIndex==0||i&&(!s?r.rowIndex+r.rowSpan>this.rowsNum-1:l.endRowIndex==this.rowsNum-1))return null;o=!i?!s?r.rowIndex-1:l.beginRowIndex-1:!s?r.rowIndex+r.rowSpan:l.endRowIndex+1;a=!s?r.colIndex:l.beginColIndex;return this.getCell(this.indexTable[o][a].rowIndex,this.indexTable[o][a].cellIndex)}catch(e){t(e)}},getSameEndPosCells:function(e,i){try{var n=i.toLowerCase()==="x",r=domUtils.getXY(e)[n?"x":"y"]+e["offset"+(n?"Width":"Height")],o=this.table.rows,a=null,s=[];for(var l=0;l<this.rowsNum;l++){a=o[l].cells;for(var d=0,c;c=a[d++];){var u=domUtils.getXY(c)[n?"x":"y"]+c["offset"+(n?"Width":"Height")];if(u>r&&n)break;if(e==c||r==u){if(c[n?"colSpan":"rowSpan"]==1){s.push(c)}if(n)break}}}return s}catch(e){t(e)}},setCellContent:function(e,t){e.innerHTML=t||(browser.ie?domUtils.fillChar:"<br />")},cloneCell:e.cloneCell,getSameStartPosXCells:function(e){try{var i=domUtils.getXY(e).x+e.offsetWidth,n=this.table.rows,r,o=[];for(var a=0;a<this.rowsNum;a++){r=n[a].cells;for(var s=0,l;l=r[s++];){var d=domUtils.getXY(l).x;if(d>i)break;if(d==i&&l.colSpan==1){o.push(l);break}}}return o}catch(e){t(e)}},update:function(e){this.table=e||this.table;this.selectedTds=[];this.cellsRange={};this.indexTable=[];var t=this.table.rows,i=this.getMaxRows(),n=i-t.length,r=this.getMaxCols();while(n--){this.table.insertRow(t.length)}this.rowsNum=i;this.colsNum=r;for(var o=0,a=t.length;o<a;o++){this.indexTable[o]=new Array(r)}for(var s=0,l;l=t[s];s++){for(var d=0,c,u=l.cells;c=u[d];d++){if(c.rowSpan>i){c.rowSpan=i}var f=d,h=c.rowSpan||1,p=c.colSpan||1;while(this.indexTable[s][f])f++;for(var m=0;m<h;m++){for(var g=0;g<p;g++){this.indexTable[s+m][f+g]={rowIndex:s,cellIndex:d,colIndex:f,rowSpan:h,colSpan:p}}}}}for(m=0;m<i;m++){for(g=0;g<r;g++){if(this.indexTable[m][g]===undefined){l=t[m];c=l.cells[l.cells.length-1];c=c?c.cloneNode(true):this.table.ownerDocument.createElement("td");this.setCellContent(c);if(c.colSpan!==1)c.colSpan=1;if(c.rowSpan!==1)c.rowSpan=1;l.appendChild(c);this.indexTable[m][g]={rowIndex:m,cellIndex:c.cellIndex,colIndex:g,rowSpan:1,colSpan:1}}}}var v=domUtils.getElementsByTagName(this.table,"td"),y=[];utils.each(v,function(e){if(domUtils.hasClass(e,"selectTdClass")){y.push(e)}});if(y.length){var b=y[0],w=y[y.length-1],x=this.getCellInfo(b),C=this.getCellInfo(w);this.selectedTds=y;this.cellsRange={beginRowIndex:x.rowIndex,beginColIndex:x.colIndex,endRowIndex:C.rowIndex+C.rowSpan-1,endColIndex:C.colIndex+C.colSpan-1}}if(!domUtils.hasClass(this.table.rows[0],"firstRow")){domUtils.addClass(this.table.rows[0],"firstRow");for(var o=1;o<this.table.rows.length;o++){domUtils.removeClasses(this.table.rows[o],"firstRow")}}},getCellInfo:function(e){if(!e)return;var t=e.cellIndex,i=e.parentNode.rowIndex,n=this.indexTable[i],r=this.colsNum;for(var o=t;o<r;o++){var a=n[o];if(a.rowIndex===i&&a.cellIndex===t){return a}}},getCell:function(e,t){return e<this.rowsNum&&this.table.rows[e].cells[t]||null},deleteCell:function(e,t){t=typeof t=="number"?t:e.parentNode.rowIndex;var i=this.table.rows[t];i.deleteCell(e.cellIndex)},getCellsRange:function(e,t){function i(e,t,r,o){var a=e,s=t,l=r,d=o,c,u,f;if(e>0){for(u=t;u<o;u++){c=n.indexTable[e][u];f=c.rowIndex;if(f<e){a=Math.min(f,a)}}}if(o<n.colsNum){for(f=e;f<r;f++){c=n.indexTable[f][o];u=c.colIndex+c.colSpan-1;if(u>o){d=Math.max(u,d)}}}if(r<n.rowsNum){for(u=t;u<o;u++){c=n.indexTable[r][u];f=c.rowIndex+c.rowSpan-1;if(f>r){l=Math.max(f,l)}}}if(t>0){for(f=e;f<r;f++){c=n.indexTable[f][t];u=c.colIndex;if(u<t){s=Math.min(c.colIndex,s)}}}if(a!=e||s!=t||l!=r||d!=o){return i(a,s,l,d)}else{return{beginRowIndex:e,beginColIndex:t,endRowIndex:r,endColIndex:o}}}try{var n=this,r=n.getCellInfo(e);if(e===t){return{beginRowIndex:r.rowIndex,beginColIndex:r.colIndex,endRowIndex:r.rowIndex+r.rowSpan-1,endColIndex:r.colIndex+r.colSpan-1}}var o=n.getCellInfo(t);var a=Math.min(r.rowIndex,o.rowIndex),s=Math.min(r.colIndex,o.colIndex),l=Math.max(r.rowIndex+r.rowSpan-1,o.rowIndex+o.rowSpan-1),d=Math.max(r.colIndex+r.colSpan-1,o.colIndex+o.colSpan-1);return i(a,s,l,d)}catch(e){}},getCells:function(e){this.clearSelected();var t=e.beginRowIndex,i=e.beginColIndex,n=e.endRowIndex,r=e.endColIndex,o,a,s,l={},d=[];for(var c=t;c<=n;c++){for(var u=i;u<=r;u++){o=this.indexTable[c][u];a=o.rowIndex;s=o.colIndex;var f=a+"|"+s;if(l[f])continue;l[f]=1;if(a<c||s<u||a+o.rowSpan-1>n||s+o.colSpan-1>r){return null}d.push(this.getCell(a,o.cellIndex))}}return d},clearSelected:function(){e.removeSelectedClass(this.selectedTds);this.selectedTds=[];this.cellsRange={}},setSelected:function(t){var i=this.getCells(t);e.addSelectedClass(i);this.selectedTds=i;this.cellsRange=t},isFullRow:function(){var e=this.cellsRange;return e.endColIndex-e.beginColIndex+1==this.colsNum},isFullCol:function(){var e=this.cellsRange,t=this.table,i=t.getElementsByTagName("th"),n=e.endRowIndex-e.beginRowIndex+1;return!i.length?n==this.rowsNum:n==this.rowsNum||n==this.rowsNum-1},getNextCell:function(e,i,n){try{var r=this.getCellInfo(e),o,a;var s=this.selectedTds.length&&!n,l=this.cellsRange;if(!i&&r.rowIndex==0||i&&(!s?r.rowIndex+r.rowSpan>this.rowsNum-1:l.endRowIndex==this.rowsNum-1))return null;o=!i?!s?r.rowIndex-1:l.beginRowIndex-1:!s?r.rowIndex+r.rowSpan:l.endRowIndex+1;a=!s?r.colIndex:l.beginColIndex;return this.getCell(this.indexTable[o][a].rowIndex,this.indexTable[o][a].cellIndex)}catch(e){t(e)}},getPreviewCell:function(e,i){try{var n=this.getCellInfo(e),r,o;var a=this.selectedTds.length,s=this.cellsRange;if(!i&&(!a?!n.colIndex:!s.beginColIndex)||i&&(!a?n.rowIndex>this.colsNum-1:s.endColIndex==this.colsNum-1))return null;r=!i?!a?n.rowIndex:s.beginRowIndex:!a?n.rowIndex<1?0:n.rowIndex-1:s.beginRowIndex;o=!i?!a?n.colIndex<1?0:n.colIndex-1:s.beginColIndex-1:!a?n.colIndex:s.endColIndex+1;return this.getCell(this.indexTable[r][o].rowIndex,this.indexTable[r][o].cellIndex)}catch(e){t(e)}},moveContent:function(t,i){if(e.isEmptyBlock(i))return;if(e.isEmptyBlock(t)){t.innerHTML=i.innerHTML;return}var n=t.lastChild;if(n.nodeType==3||!dtd.$block[n.tagName]){t.appendChild(t.ownerDocument.createElement("br"))}while(n=i.firstChild){t.appendChild(n)}},mergeRight:function(e){var t=this.getCellInfo(e),i=t.colIndex+t.colSpan,n=this.indexTable[t.rowIndex][i],r=this.getCell(n.rowIndex,n.cellIndex);e.colSpan=t.colSpan+n.colSpan;e.removeAttribute("width");this.moveContent(e,r);this.deleteCell(r,n.rowIndex);this.update()},mergeDown:function(e){var t=this.getCellInfo(e),i=t.rowIndex+t.rowSpan,n=this.indexTable[i][t.colIndex],r=this.getCell(n.rowIndex,n.cellIndex);e.rowSpan=t.rowSpan+n.rowSpan;e.removeAttribute("height");this.moveContent(e,r);this.deleteCell(r,n.rowIndex);this.update()},mergeRange:function(){var e=this.cellsRange,t=this.getCell(e.beginRowIndex,this.indexTable[e.beginRowIndex][e.beginColIndex].cellIndex);if(t.tagName=="TH"&&e.endRowIndex!==e.beginRowIndex){var i=this.indexTable,n=this.getCellInfo(t);t=this.getCell(1,i[1][n.colIndex].cellIndex);e=this.getCellsRange(t,this.getCell(i[this.rowsNum-1][n.colIndex].rowIndex,i[this.rowsNum-1][n.colIndex].cellIndex))}var r=this.getCells(e);for(var o=0,a;a=r[o++];){if(a!==t){this.moveContent(t,a);this.deleteCell(a)}}t.rowSpan=e.endRowIndex-e.beginRowIndex+1;t.rowSpan>1&&t.removeAttribute("height");t.colSpan=e.endColIndex-e.beginColIndex+1;t.colSpan>1&&t.removeAttribute("width");if(t.rowSpan==this.rowsNum&&t.colSpan!=1){t.colSpan=1}if(t.colSpan==this.colsNum&&t.rowSpan!=1){var s=t.parentNode.rowIndex;if(this.table.deleteRow){for(var o=s+1,l=s+1,d=t.rowSpan;o<d;o++){this.table.deleteRow(l)}}else{for(var o=0,d=t.rowSpan-1;o<d;o++){var c=this.table.rows[s+1];c.parentNode.removeChild(c)}}t.rowSpan=1}this.update()},insertRow:function(e,t){var i=this.colsNum,n=this.table,r=n.insertRow(e),o,a=typeof t=="string"&&t.toUpperCase()=="TH";function s(e,t,i){if(e==0){var n=i.nextSibling||i.previousSibling,r=n.cells[e];if(r.tagName=="TH"){r=t.ownerDocument.createElement("th");r.appendChild(t.firstChild);i.insertBefore(r,t);domUtils.remove(t)}}else{if(t.tagName=="TH"){var o=t.ownerDocument.createElement("td");o.appendChild(t.firstChild);i.insertBefore(o,t);domUtils.remove(t)}}}if(e==0||e==this.rowsNum){for(var l=0;l<i;l++){o=this.cloneCell(t,true);this.setCellContent(o);o.getAttribute("vAlign")&&o.setAttribute("vAlign",o.getAttribute("vAlign"));r.appendChild(o);if(!a)s(l,o,r)}}else{var d=this.indexTable[e],c=0;for(l=0;l<i;l++){var u=d[l];if(u.rowIndex<e){o=this.getCell(u.rowIndex,u.cellIndex);o.rowSpan=u.rowSpan+1}else{o=this.cloneCell(t,true);this.setCellContent(o);r.appendChild(o)}if(!a)s(l,o,r)}}this.update();return r},deleteRow:function(e){var t=this.table.rows[e],i=this.indexTable[e],n=this.colsNum,r=0;for(var o=0;o<n;){var a=i[o],s=this.getCell(a.rowIndex,a.cellIndex);if(s.rowSpan>1){if(a.rowIndex==e){var l=s.cloneNode(true);l.rowSpan=s.rowSpan-1;l.innerHTML="";s.rowSpan=1;var d=e+1,c=this.table.rows[d],u,f=this.getPreviewMergedCellsNum(d,o)-r;if(f<o){u=o-f-1;domUtils.insertAfter(c.cells[u],l)}else{if(c.cells.length)c.insertBefore(l,c.cells[0])}r+=1}}o+=s.colSpan||1}var h=[],p={};for(o=0;o<n;o++){var m=i[o].rowIndex,g=i[o].cellIndex,v=m+"_"+g;if(p[v])continue;p[v]=1;s=this.getCell(m,g);h.push(s)}var y=[];utils.each(h,function(e){if(e.rowSpan==1){e.parentNode.removeChild(e)}else{y.push(e)}});utils.each(y,function(e){e.rowSpan--});t.parentNode.removeChild(t);this.update()},insertCol:function(e,t,i){var n=this.rowsNum,r=0,o,a,s=parseInt((this.table.offsetWidth-(this.colsNum+1)*20-(this.colsNum+1))/(this.colsNum+1),10),l=typeof t=="string"&&t.toUpperCase()=="TH";function d(e,t,i){if(e==0){var n=t.nextSibling||t.previousSibling;if(n.tagName=="TH"){n=t.ownerDocument.createElement("th");n.appendChild(t.firstChild);i.insertBefore(n,t);domUtils.remove(t)}}else{if(t.tagName=="TH"){var r=t.ownerDocument.createElement("td");r.appendChild(t.firstChild);i.insertBefore(r,t);domUtils.remove(t)}}}var c;if(e==0||e==this.colsNum){for(;r<n;r++){o=this.table.rows[r];c=o.cells[e==0?e:o.cells.length];a=this.cloneCell(t,true);this.setCellContent(a);a.setAttribute("vAlign",a.getAttribute("vAlign"));c&&a.setAttribute("width",c.getAttribute("width"));if(!e){o.insertBefore(a,o.cells[0])}else{domUtils.insertAfter(o.cells[o.cells.length-1],a)}if(!l)d(r,a,o)}}else{for(;r<n;r++){var u=this.indexTable[r][e];if(u.colIndex<e){a=this.getCell(u.rowIndex,u.cellIndex);a.colSpan=u.colSpan+1}else{o=this.table.rows[r];c=o.cells[u.cellIndex];a=this.cloneCell(t,true);this.setCellContent(a);a.setAttribute("vAlign",a.getAttribute("vAlign"));c&&a.setAttribute("width",c.getAttribute("width"));c?o.insertBefore(a,c):o.appendChild(a)}if(!l)d(r,a,o)}}this.update();this.updateWidth(s,i||{tdPadding:10,tdBorder:1})},updateWidth:function(t,i){var n=this.table,r=e.getWidth(n)-i.tdPadding*2-i.tdBorder+t;if(r<n.ownerDocument.body.offsetWidth){n.setAttribute("width",r);return}var o=domUtils.getElementsByTagName(this.table,"td th");utils.each(o,function(e){e.setAttribute("width",t)})},deleteCol:function(e){var t=this.indexTable,i=this.table.rows,n=this.table.getAttribute("width"),r=0,o=this.rowsNum,a={};for(var s=0;s<o;){var l=t[s],d=l[e],c=d.rowIndex+"_"+d.colIndex;if(a[c])continue;a[c]=1;var u=this.getCell(d.rowIndex,d.cellIndex);if(!r)r=u&&parseInt(u.offsetWidth/u.colSpan,10).toFixed(0);if(u.colSpan>1){u.colSpan--}else{i[s].deleteCell(d.cellIndex)}s+=d.rowSpan||1}this.table.setAttribute("width",n-r);this.update()},splitToCells:function(e){var t=this,i=this.splitToRows(e);utils.each(i,function(e){t.splitToCols(e)})},splitToRows:function(e){var t=this.getCellInfo(e),i=t.rowIndex,n=t.colIndex,r=[];e.rowSpan=1;r.push(e);for(var o=i,a=i+t.rowSpan;o<a;o++){if(o==i)continue;var s=this.table.rows[o],l=s.insertCell(n-this.getPreviewMergedCellsNum(o,n));l.colSpan=t.colSpan;this.setCellContent(l);l.setAttribute("vAlign",e.getAttribute("vAlign"));l.setAttribute("align",e.getAttribute("align"));if(e.style.cssText){l.style.cssText=e.style.cssText}r.push(l)}this.update();return r},getPreviewMergedCellsNum:function(e,t){var i=this.indexTable[e],n=0;for(var r=0;r<t;){var o=i[r].colSpan,a=i[r].rowIndex;n+=o-(a==e?1:0);r+=o}return n},splitToCols:function(e){var t=(e.offsetWidth/e.colSpan-22).toFixed(0),i=this.getCellInfo(e),n=i.rowIndex,r=i.colIndex,o=[];e.colSpan=1;e.setAttribute("width",t);o.push(e);for(var a=r,s=r+i.colSpan;a<s;a++){if(a==r)continue;var l=this.table.rows[n],d=l.insertCell(this.indexTable[n][a].cellIndex+1);d.rowSpan=i.rowSpan;this.setCellContent(d);d.setAttribute("vAlign",e.getAttribute("vAlign"));d.setAttribute("align",e.getAttribute("align"));d.setAttribute("width",t);if(e.style.cssText){d.style.cssText=e.style.cssText}if(e.tagName=="TH"){var c=e.ownerDocument.createElement("th");c.appendChild(d.firstChild);c.setAttribute("vAlign",e.getAttribute("vAlign"));c.rowSpan=d.rowSpan;l.insertBefore(c,d);domUtils.remove(d)}o.push(d)}this.update();return o},isLastCell:function(e,t,i){t=t||this.rowsNum;i=i||this.colsNum;var n=this.getCellInfo(e);return n.rowIndex+n.rowSpan==t&&n.colIndex+n.colSpan==i},getLastCell:function(e){e=e||this.table.getElementsByTagName("td");var t=this.getCellInfo(e[0]);var i=this,n=e[0],r=n.parentNode,o=0,a=0,s;utils.each(e,function(e){if(e.parentNode==r)a+=e.colSpan||1;o+=e.rowSpan*e.colSpan||1});s=o/a;utils.each(e,function(e){if(i.isLastCell(e,s,a)){n=e;return false}});return n},selectRow:function(e){var t=this.indexTable[e],i=this.getCell(t[0].rowIndex,t[0].cellIndex),n=this.getCell(t[this.colsNum-1].rowIndex,t[this.colsNum-1].cellIndex),r=this.getCellsRange(i,n);this.setSelected(r)},selectTable:function(){var e=this.table.getElementsByTagName("td"),t=this.getCellsRange(e[0],e[e.length-1]);this.setSelected(t)},setBackground:function(e,t){if(typeof t==="string"){utils.each(e,function(e){e.style.backgroundColor=t})}else if(typeof t==="object"){t=utils.extend({repeat:true,colorList:["#ddd","#fff"]},t);var i=this.getCellInfo(e[0]).rowIndex,n=0,r=t.colorList,o=function(e,t,i){return e[t]?e[t]:i?e[t%e.length]:""};for(var a=0,s;s=e[a++];){var l=this.getCellInfo(s);s.style.backgroundColor=o(r,i+n==l.rowIndex?n:++n,t.repeat)}}},removeBackground:function(e){utils.each(e,function(e){e.style.backgroundColor=""})}};function t(e){}})();(function(){var e=UE.UETable,t=function(t){return e.getTableItemsByRange(t)},i=function(t){return e.getUETableBySelected(t)},n=function(t,i){return e.getDefaultValue(t,i)},r=function(t){return e.getUETable(t)};UE.commands["inserttable"]={queryCommandState:function(){return t(this).table?-1:0},execCommand:function(e,t){function i(e,t){var i=[],n=e.numRows,r=e.numCols;for(var o=0;o<n;o++){i.push("<tr"+(o==0?' class="firstRow"':"")+">");for(var a=0;a<r;a++){i.push('<td width="'+t+'"  vAlign="'+e.tdvalign+'" >'+(browser.ie&&browser.version<11?domUtils.fillChar:"<br/>")+"</td>")}i.push("</tr>")}return"<table><tbody>"+i.join("")+"</tbody></table>"}if(!t){t=utils.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign})}var r=this;var o=this.selection.getRange(),a=o.startContainer,s=domUtils.findParent(a,function(e){return domUtils.isBlockElm(e)},true)||r.body;var l=n(r),d=s.offsetWidth,c=Math.floor(d/t.numCols-l.tdPadding*2-l.tdBorder);!t.tdvalign&&(t.tdvalign=r.options.tdvalign);r.execCommand("inserthtml",i(t,c))}};UE.commands["insertparagraphbeforetable"]={queryCommandState:function(){return t(this).cell?0:-1},execCommand:function(){var e=t(this).table;if(e){var i=this.document.createElement("p");i.innerHTML=browser.ie?"&nbsp;":"<br />";e.parentNode.insertBefore(i,e);this.selection.getRange().setStart(i,0).setCursor()}}};UE.commands["deletetable"]={queryCommandState:function(){var e=this.selection.getRange();return domUtils.findParentByTagName(e.startContainer,"table",true)?0:-1},execCommand:function(e,t){var i=this.selection.getRange();t=t||domUtils.findParentByTagName(i.startContainer,"table",true);if(t){var n=t.nextSibling;if(!n){n=domUtils.createElement(this.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});t.parentNode.insertBefore(n,t)}domUtils.remove(t);i=this.selection.getRange();if(n.nodeType==3){i.setStartBefore(n)}else{i.setStart(n,0)}i.setCursor(false,true);this.fireEvent("tablehasdeleted")}}};UE.commands["cellalign"]={queryCommandState:function(){return s(this).length?0:-1},execCommand:function(e,t){var i=s(this);if(i.length){for(var n=0,r;r=i[n++];){r.setAttribute("align",t)}}}};UE.commands["cellvalign"]={queryCommandState:function(){return s(this).length?0:-1},execCommand:function(e,t){var i=s(this);if(i.length){for(var n=0,r;r=i[n++];){r.setAttribute("vAlign",t)}}}};UE.commands["insertcaption"]={queryCommandState:function(){var e=t(this).table;if(e){return e.getElementsByTagName("caption").length==0?1:-1}return-1},execCommand:function(){var e=t(this).table;if(e){var i=this.document.createElement("caption");i.innerHTML=browser.ie?domUtils.fillChar:"<br/>";e.insertBefore(i,e.firstChild);var n=this.selection.getRange();n.setStart(i,0).setCursor()}}};UE.commands["deletecaption"]={queryCommandState:function(){var e=this.selection.getRange(),t=domUtils.findParentByTagName(e.startContainer,"table");if(t){return t.getElementsByTagName("caption").length==0?-1:1}return-1},execCommand:function(){var e=this.selection.getRange(),t=domUtils.findParentByTagName(e.startContainer,"table");if(t){domUtils.remove(t.getElementsByTagName("caption")[0]);var i=this.selection.getRange();i.setStart(t.rows[0].cells[0],0).setCursor()}}};UE.commands["inserttitle"]={queryCommandState:function(){var e=t(this).table;if(e){var i=e.rows[0];return i.cells[i.cells.length-1].tagName.toLowerCase()!="th"?0:-1}return-1},execCommand:function(){var e=t(this).table;if(e){r(e).insertRow(0,"th")}var i=e.getElementsByTagName("th")[0];this.selection.getRange().setStart(i,0).setCursor(false,true)}};UE.commands["deletetitle"]={queryCommandState:function(){var e=t(this).table;if(e){var i=e.rows[0];return i.cells[i.cells.length-1].tagName.toLowerCase()=="th"?0:-1}return-1},execCommand:function(){var e=t(this).table;if(e){domUtils.remove(e.rows[0])}var i=e.getElementsByTagName("td")[0];this.selection.getRange().setStart(i,0).setCursor(false,true)}};UE.commands["inserttitlecol"]={queryCommandState:function(){var e=t(this).table;if(e){var i=e.rows[e.rows.length-1];return i.getElementsByTagName("th").length?-1:0}return-1},execCommand:function(e){var i=t(this).table;if(i){r(i).insertCol(0,"th")}o(i,this);var n=i.getElementsByTagName("th")[0];this.selection.getRange().setStart(n,0).setCursor(false,true)}};UE.commands["deletetitlecol"]={queryCommandState:function(){var e=t(this).table;if(e){var i=e.rows[e.rows.length-1];return i.getElementsByTagName("th").length?0:-1}return-1},execCommand:function(){var e=t(this).table;if(e){for(var i=0;i<e.rows.length;i++){domUtils.remove(e.rows[i].children[0])}}o(e,this);var n=e.getElementsByTagName("td")[0];this.selection.getRange().setStart(n,0).setCursor(false,true)}};UE.commands["mergeright"]={queryCommandState:function(e){var i=t(this),n=i.table,o=i.cell;if(!n||!o)return-1;var a=r(n);if(a.selectedTds.length)return-1;var s=a.getCellInfo(o),l=s.colIndex+s.colSpan;if(l>=a.colsNum)return-1;var d=a.indexTable[s.rowIndex][l],c=n.rows[d.rowIndex].cells[d.cellIndex];if(!c||o.tagName!=c.tagName)return-1;return d.rowIndex==s.rowIndex&&d.rowSpan==s.rowSpan?0:-1},execCommand:function(e){var i=this.selection.getRange(),n=i.createBookmark(true);var o=t(this).cell,a=r(o);a.mergeRight(o);i.moveToBookmark(n).select()}};UE.commands["mergedown"]={queryCommandState:function(e){var i=t(this),n=i.table,o=i.cell;if(!n||!o)return-1;var a=r(n);if(a.selectedTds.length)return-1;var s=a.getCellInfo(o),l=s.rowIndex+s.rowSpan;if(l>=a.rowsNum)return-1;var d=a.indexTable[l][s.colIndex],c=n.rows[d.rowIndex].cells[d.cellIndex];if(!c||o.tagName!=c.tagName)return-1;return d.colIndex==s.colIndex&&d.colSpan==s.colSpan?0:-1},execCommand:function(){var e=this.selection.getRange(),i=e.createBookmark(true);var n=t(this).cell,o=r(n);o.mergeDown(n);e.moveToBookmark(i).select()}};UE.commands["mergecells"]={queryCommandState:function(){return i(this)?0:-1},execCommand:function(){var e=i(this);if(e&&e.selectedTds.length){var t=e.selectedTds[0];e.mergeRange();var n=this.selection.getRange();if(domUtils.isEmptyBlock(t)){n.setStart(t,0).collapse(true)}else{n.selectNodeContents(t)}n.select()}}};UE.commands["insertrow"]={queryCommandState:function(){var e=t(this),i=e.cell;return i&&(i.tagName=="TD"||i.tagName=="TH"&&e.tr!==e.table.rows[0])&&r(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),i=e.createBookmark(true);var n=t(this),o=n.cell,a=n.table,s=r(a),l=s.getCellInfo(o);if(!s.selectedTds.length){s.insertRow(l.rowIndex,o)}else{var d=s.cellsRange;for(var c=0,u=d.endRowIndex-d.beginRowIndex+1;c<u;c++){s.insertRow(d.beginRowIndex,o)}}e.moveToBookmark(i).select();if(a.getAttribute("interlaced")==="enabled")this.fireEvent("interlacetable",a)}};UE.commands["insertrownext"]={queryCommandState:function(){var e=t(this),i=e.cell;return i&&i.tagName=="TD"&&r(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),i=e.createBookmark(true);var n=t(this),o=n.cell,a=n.table,s=r(a),l=s.getCellInfo(o);if(!s.selectedTds.length){s.insertRow(l.rowIndex+l.rowSpan,o)}else{var d=s.cellsRange;for(var c=0,u=d.endRowIndex-d.beginRowIndex+1;c<u;c++){s.insertRow(d.endRowIndex+1,o)}}e.moveToBookmark(i).select();if(a.getAttribute("interlaced")==="enabled")this.fireEvent("interlacetable",a)}};UE.commands["deleterow"]={queryCommandState:function(){var e=t(this);return e.cell?0:-1},execCommand:function(){var e=t(this).cell,i=r(e),n=i.cellsRange,o=i.getCellInfo(e),a=i.getVSideCell(e),s=i.getVSideCell(e,true),l=this.selection.getRange();if(utils.isEmptyObject(n)){i.deleteRow(o.rowIndex)}else{for(var d=n.beginRowIndex;d<n.endRowIndex+1;d++){i.deleteRow(n.beginRowIndex)}}var c=i.table;if(!c.getElementsByTagName("td").length){var u=c.nextSibling;domUtils.remove(c);if(u){l.setStart(u,0).setCursor(false,true)}}else{if(o.rowSpan==1||o.rowSpan==n.endRowIndex-n.beginRowIndex+1){if(s||a)l.selectNodeContents(s||a).setCursor(false,true)}else{var f=i.getCell(o.rowIndex,i.indexTable[o.rowIndex][o.colIndex].cellIndex);if(f)l.selectNodeContents(f).setCursor(false,true)}}if(c.getAttribute("interlaced")==="enabled")this.fireEvent("interlacetable",c)}};UE.commands["insertcol"]={queryCommandState:function(e){var i=t(this),n=i.cell;return n&&(n.tagName=="TD"||n.tagName=="TH"&&n!==i.tr.cells[0])&&r(i.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(e){var i=this.selection.getRange(),n=i.createBookmark(true);if(this.queryCommandState(e)==-1)return;var o=t(this).cell,a=r(o),s=a.getCellInfo(o);if(!a.selectedTds.length){a.insertCol(s.colIndex,o)}else{var l=a.cellsRange;for(var d=0,c=l.endColIndex-l.beginColIndex+1;d<c;d++){a.insertCol(l.beginColIndex,o)}}i.moveToBookmark(n).select(true)}};UE.commands["insertcolnext"]={queryCommandState:function(){var e=t(this),i=e.cell;return i&&r(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var e=this.selection.getRange(),i=e.createBookmark(true);var n=t(this).cell,o=r(n),a=o.getCellInfo(n);if(!o.selectedTds.length){o.insertCol(a.colIndex+a.colSpan,n)}else{var s=o.cellsRange;for(var l=0,d=s.endColIndex-s.beginColIndex+1;l<d;l++){o.insertCol(s.endColIndex+1,n)}}e.moveToBookmark(i).select()}};UE.commands["deletecol"]={queryCommandState:function(){var e=t(this);return e.cell?0:-1},execCommand:function(){var e=t(this).cell,i=r(e),n=i.cellsRange,o=i.getCellInfo(e),a=i.getHSideCell(e),s=i.getHSideCell(e,true);if(utils.isEmptyObject(n)){i.deleteCol(o.colIndex)}else{for(var l=n.beginColIndex;l<n.endColIndex+1;l++){i.deleteCol(n.beginColIndex)}}var d=i.table,c=this.selection.getRange();if(!d.getElementsByTagName("td").length){var u=d.nextSibling;domUtils.remove(d);if(u){c.setStart(u,0).setCursor(false,true)}}else{if(domUtils.inDoc(e,this.document)){c.setStart(e,0).setCursor(false,true)}else{if(s&&domUtils.inDoc(s,this.document)){c.selectNodeContents(s).setCursor(false,true)}else{if(a&&domUtils.inDoc(a,this.document)){c.selectNodeContents(a).setCursor(true,true)}}}}}};UE.commands["splittocells"]={queryCommandState:function(){var e=t(this),i=e.cell;if(!i)return-1;var n=r(e.table);if(n.selectedTds.length>0)return-1;return i&&(i.colSpan>1||i.rowSpan>1)?0:-1},execCommand:function(){var e=this.selection.getRange(),i=e.createBookmark(true);var n=t(this).cell,o=r(n);o.splitToCells(n);e.moveToBookmark(i).select()}};UE.commands["splittorows"]={queryCommandState:function(){var e=t(this),i=e.cell;if(!i)return-1;var n=r(e.table);if(n.selectedTds.length>0)return-1;return i&&i.rowSpan>1?0:-1},execCommand:function(){var e=this.selection.getRange(),i=e.createBookmark(true);var n=t(this).cell,o=r(n);o.splitToRows(n);e.moveToBookmark(i).select()}};UE.commands["splittocols"]={queryCommandState:function(){var e=t(this),i=e.cell;if(!i)return-1;var n=r(e.table);if(n.selectedTds.length>0)return-1;return i&&i.colSpan>1?0:-1},execCommand:function(){var e=this.selection.getRange(),i=e.createBookmark(true);var n=t(this).cell,o=r(n);o.splitToCols(n);e.moveToBookmark(i).select()}};UE.commands["adaptbytext"]=UE.commands["adaptbywindow"]={queryCommandState:function(){return t(this).table?0:-1},execCommand:function(e){var i=t(this),n=i.table;if(n){if(e=="adaptbywindow"){o(n,this)}else{var r=domUtils.getElementsByTagName(n,"td th");utils.each(r,function(e){e.removeAttribute("width")});n.removeAttribute("width")}}}};UE.commands["averagedistributecol"]={queryCommandState:function(){var e=i(this);if(!e)return-1;return e.isFullRow()||e.isFullCol()?0:-1},execCommand:function(e){var t=this,r=i(t);function o(){var e=r.table,i,o=0,a=0,s=n(t,e);if(r.isFullRow()){o=e.offsetWidth;a=r.colsNum}else{var l=r.cellsRange.beginColIndex,d=r.cellsRange.endColIndex,c;for(var u=l;u<=d;){c=r.selectedTds[u];o+=c.offsetWidth;u+=c.colSpan;a+=1}}i=Math.ceil(o/a)-s.tdBorder*2-s.tdPadding*2;return i}function a(e){utils.each(domUtils.getElementsByTagName(r.table,"th"),function(e){e.setAttribute("width","")});var t=r.isFullRow()?domUtils.getElementsByTagName(r.table,"td"):r.selectedTds;utils.each(t,function(t){if(t.colSpan==1){t.setAttribute("width",e)}})}if(r&&r.selectedTds.length){a(o())}}};UE.commands["averagedistributerow"]={queryCommandState:function(){var e=i(this);if(!e)return-1;if(e.selectedTds&&/th/gi.test(e.selectedTds[0].tagName))return-1;return e.isFullRow()||e.isFullCol()?0:-1},execCommand:function(e){var t=this,r=i(t);function o(){var e,i,o=0,a=r.table,s=n(t,a),l=parseInt(domUtils.getComputedStyle(a.getElementsByTagName("td")[0],"padding-top"));if(r.isFullCol()){var d=domUtils.getElementsByTagName(a,"caption"),c=domUtils.getElementsByTagName(a,"th"),u,f;if(d.length>0){u=d[0].offsetHeight}if(c.length>0){f=c[0].offsetHeight}o=a.offsetHeight-(u||0)-(f||0);i=c.length==0?r.rowsNum:r.rowsNum-1}else{var h=r.cellsRange.beginRowIndex,p=r.cellsRange.endRowIndex,m=0,g=domUtils.getElementsByTagName(a,"tr");for(var v=h;v<=p;v++){o+=g[v].offsetHeight;m+=1}i=m}if(browser.ie&&browser.version<9){e=Math.ceil(o/i)}else{e=Math.ceil(o/i)-s.tdBorder*2-l*2}return e}function a(e){var t=r.isFullCol()?domUtils.getElementsByTagName(r.table,"td"):r.selectedTds;utils.each(t,function(t){if(t.rowSpan==1){t.setAttribute("height",e)}})}if(r&&r.selectedTds.length){a(o())}}};UE.commands["cellalignment"]={queryCommandState:function(){return t(this).table?0:-1},execCommand:function(e,t){var n=this,r=i(n);if(!r){var o=n.selection.getStart(),a=o&&domUtils.findParentByTagName(o,["td","th","caption"],true);if(!/caption/gi.test(a.tagName)){domUtils.setAttributes(a,t)}else{a.style.textAlign=t.align;a.style.verticalAlign=t.vAlign}n.selection.getRange().setCursor(true)}else{utils.each(r.selectedTds,function(e){domUtils.setAttributes(e,t)})}},queryCommandValue:function(e){var i=t(this).cell;if(!i){i=s(this)[0]}if(!i){return null}else{var n=UE.UETable.getUETable(i).selectedTds;!n.length&&(n=i);return UE.UETable.getTableCellAlignState(n)}}};UE.commands["tablealignment"]={queryCommandState:function(){if(browser.ie&&browser.version<8){return-1}return t(this).table?0:-1},execCommand:function(e,t){var i=this,n=i.selection.getStart(),r=n&&domUtils.findParentByTagName(n,["table"],true);if(r){r.setAttribute("align",t)}}};UE.commands["edittable"]={queryCommandState:function(){return t(this).table?0:-1},execCommand:function(e,t){var i=this.selection.getRange(),n=domUtils.findParentByTagName(i.startContainer,"table");if(n){var r=domUtils.getElementsByTagName(n,"td").concat(domUtils.getElementsByTagName(n,"th"),domUtils.getElementsByTagName(n,"caption"));utils.each(r,function(e){e.style.borderColor=t})}}};UE.commands["edittd"]={queryCommandState:function(){return t(this).table?0:-1},execCommand:function(e,t){var n=this,r=i(n);if(!r){var o=n.selection.getStart(),a=o&&domUtils.findParentByTagName(o,["td","th","caption"],true);if(a){a.style.backgroundColor=t}}else{utils.each(r.selectedTds,function(e){e.style.backgroundColor=t})}}};UE.commands["settablebackground"]={queryCommandState:function(){return s(this).length>1?0:-1},execCommand:function(e,t){var i,n;i=s(this);n=r(i[0]);n.setBackground(i,t)}};UE.commands["cleartablebackground"]={queryCommandState:function(){var e=s(this);if(!e.length)return-1;for(var t=0,i;i=e[t++];){if(i.style.backgroundColor!=="")return 0}return-1},execCommand:function(){var e=s(this),t=r(e[0]);t.removeBackground(e)}};UE.commands["interlacetable"]=UE.commands["uninterlacetable"]={queryCommandState:function(e){var i=t(this).table;if(!i)return-1;var n=i.getAttribute("interlaced");if(e=="interlacetable"){return n==="enabled"?-1:0}else{return!n||n==="disabled"?-1:0}},execCommand:function(e,i){var n=t(this).table;if(e=="interlacetable"){n.setAttribute("interlaced","enabled");this.fireEvent("interlacetable",n,i)}else{n.setAttribute("interlaced","disabled");this.fireEvent("uninterlacetable",n)}}};UE.commands["setbordervisible"]={queryCommandState:function(e){var i=t(this).table;if(!i)return-1;return 0},execCommand:function(){var e=t(this).table;utils.each(domUtils.getElementsByTagName(e,"td"),function(e){e.style.borderWidth="1px";e.style.borderStyle="solid"})}};function o(e,t){var i=domUtils.getElementsByTagName(e,"td th");utils.each(i,function(e){e.removeAttribute("width")});e.setAttribute("width",a(t,true,n(t,e)));var r=[];setTimeout(function(){utils.each(i,function(e){e.colSpan==1&&r.push(e.offsetWidth)});utils.each(i,function(e,t){e.colSpan==1&&e.setAttribute("width",r[t]+"")})},0)}function a(e,t,i){var n=e.body;return n.offsetWidth-(t?parseInt(domUtils.getComputedStyle(n,"margin-left"),10)*2:0)-i.tableBorder*2-(e.options.offsetWidth||0)}function s(e){var i=t(e).cell;if(i){var n=r(i);return n.selectedTds.length?n.selectedTds:[i]}else{return[]}}})();UE.plugins["table"]=function(){var e=this,t=null,i=null,n=null,r=5,o=false,a=5,s=10,l=0,d=null,c=360,u=UE.UETable,f=function(e){return u.getUETable(e)},h=function(e){return u.getUETableBySelected(e)},p=function(e,t){return u.getDefaultValue(e,t)},m=function(e){return u.removeSelectedClass(e)};function g(e){}e.ready(function(){var e=this;var t=e.selection.getText;e.selection.getText=function(){var i=h(e);if(i){var n="";utils.each(i.selectedTds,function(e){n+=e[browser.ie?"innerText":"textContent"]});return n}else{return t.call(e.selection)}}});var v=null,y=null,b="",w=false,x=null,C=false,_=null,T=null;var E=false,S=true;e.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:e.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:false,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]});e.getUETable=f;var k={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};e.ready(function(){utils.cssRule("table",".selectTdClass{background-color:#edf5fa !important}"+"table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}"+"table{margin-bottom:10px;border-collapse:collapse;display:table;}"+"td,th{padding: 5px 10px;border: 1px solid #DDD;}"+"caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}"+"th{border-top:1px solid #BBB;background-color:#F7F7F7;}"+"table tr.firstRow th{border-top-width:2px;}"+".ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }"+"td p{margin:0;padding:0;}",e.document);var t,i,n;e.addListener("keydown",function(e,r){var o=this;var a=r.keyCode||r.which;if(a==8){var s=h(o);if(s&&s.selectedTds.length){if(s.isFullCol()){o.execCommand("deletecol")}else if(s.isFullRow()){o.execCommand("deleterow")}else{o.fireEvent("delcells")}domUtils.preventDefault(r)}var l=domUtils.findParentByTagName(o.selection.getStart(),"caption",true),d=o.selection.getRange();if(d.collapsed&&l&&A(l)){o.fireEvent("saveScene");var c=l.parentNode;domUtils.remove(l);if(c){d.setStart(c.rows[0].cells[0],0).setCursor(false,true)}o.fireEvent("saveScene")}}if(a==46){s=h(o);if(s){o.fireEvent("saveScene");for(var u=0,f;f=s.selectedTds[u++];){domUtils.fillNode(o.document,f)}o.fireEvent("saveScene");domUtils.preventDefault(r)}}if(a==13){var p=o.selection.getRange(),l=domUtils.findParentByTagName(p.startContainer,"caption",true);if(l){var c=domUtils.findParentByTagName(l,"table");if(!p.collapsed){p.deleteContents();o.fireEvent("saveScene")}else{if(l){p.setStart(c.rows[0].cells[0],0).setCursor(false,true)}}domUtils.preventDefault(r);return}if(p.collapsed){var c=domUtils.findParentByTagName(p.startContainer,"table");if(c){var m=c.rows[0].cells[0],g=domUtils.findParentByTagName(o.selection.getStart(),["td","th"],true),v=c.previousSibling;if(m===g&&(!v||v.nodeType==1&&v.tagName=="TABLE")&&domUtils.isStartInblock(p)){var y=domUtils.findParent(o.selection.getStart(),function(e){return domUtils.isBlockElm(e)},true);if(y&&(/t(h|d)/i.test(y.tagName)||y===g.firstChild)){o.execCommand("insertparagraphbeforetable");domUtils.preventDefault(r)}}}}}if((r.ctrlKey||r.metaKey)&&r.keyCode=="67"){t=null;var s=h(o);if(s){var b=s.selectedTds;i=s.isFullCol();n=s.isFullRow();t=[[s.cloneCell(b[0],null,true)]];for(var u=1,f;f=b[u];u++){if(f.parentNode!==b[u-1].parentNode){t.push([s.cloneCell(f,null,true)])}else{t[t.length-1].push(s.cloneCell(f,null,true))}}}}});e.addListener("tablehasdeleted",function(){H(this,false,"",null);if(x)domUtils.remove(x)});e.addListener("beforepaste",function(e,r){var o=this;var a=o.selection.getRange();if(domUtils.findParentByTagName(a.startContainer,"caption",true)){var s=o.document.createElement("div");s.innerHTML=r.html;r.html=s[browser.ie9below?"innerText":"textContent"];return}var l=h(o);if(t){o.fireEvent("saveScene");var a=o.selection.getRange();var d=domUtils.findParentByTagName(a.startContainer,["td","th"],true),c,m;if(d){var g=f(d);if(n){var v=g.getCellInfo(d).rowIndex;if(d.tagName=="TH"){v++}for(var y=0,b;b=t[y++];){var w=g.insertRow(v++,"td");for(var x=0,C;C=b[x];x++){var _=w.cells[x];if(!_){_=w.insertCell(x)}_.innerHTML=C.innerHTML;C.getAttribute("width")&&_.setAttribute("width",C.getAttribute("width"));C.getAttribute("vAlign")&&_.setAttribute("vAlign",C.getAttribute("vAlign"));C.getAttribute("align")&&_.setAttribute("align",C.getAttribute("align"));C.style.cssText&&(_.style.cssText=C.style.cssText)}for(var x=0,C;C=w.cells[x];x++){if(!b[x])break;C.innerHTML=b[x].innerHTML;b[x].getAttribute("width")&&C.setAttribute("width",b[x].getAttribute("width"));b[x].getAttribute("vAlign")&&C.setAttribute("vAlign",b[x].getAttribute("vAlign"));b[x].getAttribute("align")&&C.setAttribute("align",b[x].getAttribute("align"));b[x].style.cssText&&(C.style.cssText=b[x].style.cssText)}}}else{if(i){k=g.getCellInfo(d);var T=0;for(var x=0,b=t[0],C;C=b[x++];){T+=C.colSpan||1}o.__hasEnterExecCommand=true;for(y=0;y<T;y++){o.execCommand("insertcol")}o.__hasEnterExecCommand=false;d=g.table.rows[0].cells[k.cellIndex];if(d.tagName=="TH"){d=g.table.rows[1].cells[k.cellIndex]}}for(var y=0,b;b=t[y++];){c=d;for(var x=0,C;C=b[x++];){if(d){d.innerHTML=C.innerHTML;C.getAttribute("width")&&d.setAttribute("width",C.getAttribute("width"));C.getAttribute("vAlign")&&d.setAttribute("vAlign",C.getAttribute("vAlign"));C.getAttribute("align")&&d.setAttribute("align",C.getAttribute("align"));C.style.cssText&&(d.style.cssText=C.style.cssText);m=d;d=d.nextSibling}else{var E=C.cloneNode(true);domUtils.removeAttributes(E,["class","rowSpan","colSpan"]);m.parentNode.appendChild(E)}}d=g.getNextCell(c,true,true);if(!t[y])break;if(!d){var k=g.getCellInfo(c);g.table.insertRow(g.table.rows.length);g.update();d=g.getVSideCell(c,true)}}}g.update()}else{l=o.document.createElement("table");for(var y=0,b;b=t[y++];){var w=l.insertRow(l.rows.length);for(var x=0,C;C=b[x++];){E=u.cloneCell(C,null,true);domUtils.removeAttributes(E,["class"]);w.appendChild(E)}if(x==2&&E.rowSpan>1){E.rowSpan=1}}var U=p(o),R=o.body.offsetWidth-(S?parseInt(domUtils.getComputedStyle(o.body,"margin-left"),10)*2:0)-U.tableBorder*2-(o.options.offsetWidth||0);o.execCommand("insertHTML","<table  "+(i&&n?'width="'+R+'"':"")+">"+l.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}o.fireEvent("contentchange");o.fireEvent("saveScene");r.html="";return true}else{var s=o.document.createElement("div"),I;s.innerHTML=r.html;I=s.getElementsByTagName("table");if(domUtils.findParentByTagName(o.selection.getStart(),"table")){utils.each(I,function(e){domUtils.remove(e)});if(domUtils.findParentByTagName(o.selection.getStart(),"caption",true)){s.innerHTML=s[browser.ie?"innerText":"textContent"]}}else{utils.each(I,function(e){N(e,true);domUtils.removeAttributes(e,["style","border"]);utils.each(domUtils.getElementsByTagName(e,"td"),function(e){if(A(e)){domUtils.fillNode(o.document,e)}N(e,true)})})}r.html=s.innerHTML}});e.addListener("afterpaste",function(){utils.each(domUtils.getElementsByTagName(e.body,"table"),function(t){if(t.offsetWidth>e.body.offsetWidth){var i=p(e,t);t.style.width=e.body.offsetWidth-(S?parseInt(domUtils.getComputedStyle(e.body,"margin-left"),10)*2:0)-i.tableBorder*2-(e.options.offsetWidth||0)+"px"}})});e.addListener("blur",function(){t=null});var r;e.addListener("keydown",function(){clearTimeout(r);r=setTimeout(function(){var t=e.selection.getRange(),i=domUtils.findParentByTagName(t.startContainer,["th","td"],true);if(i){var n=i.parentNode.parentNode.parentNode;if(n.offsetWidth>n.getAttribute("width")){i.style.wordBreak="break-all"}}},100)});e.addListener("selectionchange",function(){H(e,false,"",null)});e.addListener("contentchange",function(){var e=this;pe(e);if(h(e))return;var t=e.selection.getRange();var i=t.startContainer;i=domUtils.findParentByTagName(i,["td","th"],true);utils.each(domUtils.getElementsByTagName(e.document,"table"),function(t){if(e.fireEvent("excludetable",t)===true)return;t.ueTable=new u(t);t.onmouseover=function(){e.fireEvent("tablemouseover",t)};t.onmousemove=function(){e.fireEvent("tablemousemove",t);e.options.tableDragable&&L(true,this,e);utils.defer(function(){e.fireEvent("contentchange",50)},true)};t.onmouseout=function(){e.fireEvent("tablemouseout",t);H(e,false,"",null);pe(e)};t.onclick=function(t){t=e.window.event||t;var i=R(t.target||t.srcElement);if(!i)return;var n=f(i),r=n.table,o=n.getCellInfo(i),a,s=e.selection.getRange();if(M(r,i,t,true)){var l=n.getCell(n.indexTable[n.rowsNum-1][o.colIndex].rowIndex,n.indexTable[n.rowsNum-1][o.colIndex].cellIndex);if(t.shiftKey&&n.selectedTds.length){if(n.selectedTds[0]!==l){a=n.getCellsRange(n.selectedTds[0],l);n.setSelected(a)}else{s&&s.selectNodeContents(l).select()}}else{if(i!==l){a=n.getCellsRange(i,l);n.setSelected(a)}else{s&&s.selectNodeContents(l).select()}}return}if(M(r,i,t)){var d=n.getCell(n.indexTable[o.rowIndex][n.colsNum-1].rowIndex,n.indexTable[o.rowIndex][n.colsNum-1].cellIndex);if(t.shiftKey&&n.selectedTds.length){if(n.selectedTds[0]!==d){a=n.getCellsRange(n.selectedTds[0],d);n.setSelected(a)}else{s&&s.selectNodeContents(d).select()}}else{if(i!==d){a=n.getCellsRange(i,d);n.setSelected(a)}else{s&&s.selectNodeContents(d).select()}}}}});ge(e,true)});domUtils.on(e.document,"mousemove",D);domUtils.on(e.document,"mouseout",function(t){var i=t.target||t.srcElement;if(i.tagName=="TABLE"){H(e,false,"",null)}});e.addListener("interlacetable",function(e,t,i){if(!t)return;var n=this,r=t.rows,o=r.length,a=function(e,t,i){return e[t]?e[t]:i?e[t%e.length]:""};for(var s=0;s<o;s++){r[s].className=a(i||n.options.classList,s,true)}});e.addListener("uninterlacetable",function(e,t){if(!t)return;var i=this,n=t.rows,r=i.options.classList,o=n.length;for(var a=0;a<o;a++){domUtils.removeClasses(n[a],r)}});e.addListener("mousedown",W);e.addListener("mouseup",ee);domUtils.on(e.body,"dragstart",function(t){ee.call(e,"dragstart",t)});e.addOutputRule(function(e){utils.each(e.getNodesByTagName("div"),function(e){if(e.getAttr("id")=="ue_tableDragLine"){e.parentNode.removeChild(e)}})});var o=0;e.addListener("mousedown",function(){o=0});e.addListener("tabkeydown",function(){var t=this.selection.getRange(),i=t.getCommonAncestor(true,true),n=domUtils.findParentByTagName(i,"table");if(n){if(domUtils.findParentByTagName(i,"caption",true)){var r=domUtils.getElementsByTagName(n,"th td");if(r&&r.length){t.setStart(r[0],0).setCursor(false,true)}}else{var r=domUtils.findParentByTagName(i,["td","th"],true),a=f(r);o=r.rowSpan>1?o:a.getCellInfo(r).rowIndex;var s=a.getTabNextCell(r,o);if(s){if(A(s)){t.setStart(s,0).setCursor(false,true)}else{t.selectNodeContents(s).select()}}else{e.fireEvent("saveScene");e.__hasEnterExecCommand=true;this.execCommand("insertrownext");e.__hasEnterExecCommand=false;t=this.selection.getRange();t.setStart(n.rows[n.rows.length-1].cells[0],0).setCursor();e.fireEvent("saveScene")}}return true}});browser.ie&&e.addListener("selectionchange",function(){H(this,false,"",null)});e.addListener("keydown",function(e,t){var i=this;var n=t.keyCode||t.which;if(n==8||n==46){return}var r=!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey;r&&m(domUtils.getElementsByTagName(i.body,"td"));var o=h(i);if(!o)return;r&&o.clearSelected()});e.addListener("beforegetcontent",function(){ge(this,false);browser.ie&&utils.each(this.document.getElementsByTagName("caption"),function(e){if(domUtils.isEmptyNode(e)){e.innerHTML="&nbsp;"}})});e.addListener("aftergetcontent",function(){ge(this,true)});e.addListener("getAllHtml",function(){m(e.document.getElementsByTagName("td"))});e.addListener("fullscreenchanged",function(t,i){if(!i){var n=this.body.offsetWidth/document.body.offsetWidth,r=domUtils.getElementsByTagName(this.body,"table");utils.each(r,function(t){if(t.offsetWidth<e.body.offsetWidth)return false;var i=domUtils.getElementsByTagName(t,"td"),r=[];utils.each(i,function(e){r.push(e.offsetWidth)});for(var o=0,a;a=i[o];o++){a.setAttribute("width",Math.floor(r[o]*n))}t.setAttribute("width",Math.floor(ve(e,S,p(e))))})}});var a=e.execCommand;e.execCommand=function(e,t){var i=this,n=arguments;e=e.toLowerCase();var r=h(i),o,s=new dom.Range(i.document),l=i.commands[e]||UE.commands[e],d;if(!l)return;if(r&&!k[e]&&!l.notNeedUndo&&!i.__hasEnterExecCommand){i.__hasEnterExecCommand=true;i.fireEvent("beforeexeccommand",e);o=r.selectedTds;var c=-2,u=-2,f,p;for(var m=0,g;g=o[m];m++){if(A(g)){s.setStart(g,0).setCursor(false,true)}else{s.selectNode(g).select(true)}p=i.queryCommandState(e);f=i.queryCommandValue(e);if(p!=-1){if(c!==p||u!==f){i._ignoreContentChange=true;d=a.apply(i,arguments);i._ignoreContentChange=false}c=i.queryCommandState(e);u=i.queryCommandValue(e);if(domUtils.isEmptyBlock(g)){domUtils.fillNode(i.document,g)}}}s.setStart(o[0],0).shrinkBoundary(true).setCursor(false,true);i.fireEvent("contentchange");i.fireEvent("afterexeccommand",e);i.__hasEnterExecCommand=false;i._selectionChange()}else{d=a.apply(i,arguments)}return d}});function N(e,t){U(e,"width",true);U(e,"height",true)}function U(e,t,i){if(e.style[t]){i&&e.setAttribute(t,parseInt(e.style[t],10));e.style[t]=""}}function R(e){if(e.tagName=="TD"||e.tagName=="TH")return e;var t;if(t=domUtils.findParentByTagName(e,"td",true)||domUtils.findParentByTagName(e,"th",true))return t;return null}function A(e){var t=new RegExp(domUtils.fillChar,"g");if(e[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length>0){return 0}for(var i in dtd.$isNotEmpty){if(e.getElementsByTagName(i).length){return 0}}return 1}function I(t){if(t.pageX||t.pageY){return{x:t.pageX,y:t.pageY}}return{x:t.clientX+e.document.body.scrollLeft-e.document.body.clientLeft,y:t.clientY+e.document.body.scrollTop-e.document.body.clientTop}}function D(t){if(oe()){return}try{var i=R(t.target||t.srcElement),n;if(o){e.body.style.webkitUserSelect="none";if(Math.abs(d.x-t.clientX)>s||Math.abs(d.y-t.clientY)>s){Z();o=false;l=0;J(t)}}if(b&&T){l=0;e.body.style.webkitUserSelect="none";e.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();n=I(t);H(e,true,b,n,i);if(b=="h"){_.style.left=P(T,t)+"px"}else if(b=="v"){_.style.top=F(T,t)+"px"}return}if(i){if(e.fireEvent("excludetable",i)===true)return;n=I(t);var r=z(i,n),a=domUtils.findParentByTagName(i,"table",true);if(M(a,i,t,true)){if(e.fireEvent("excludetable",a)===true)return;e.body.style.cursor="url("+e.options.cursorpath+"h.png),pointer"}else if(M(a,i,t)){if(e.fireEvent("excludetable",a)===true)return;e.body.style.cursor="url("+e.options.cursorpath+"v.png),pointer"}else{e.body.style.cursor="text";var c=i;if(/\d/.test(r)){r=r.replace(/\d/,"");i=f(i).getPreviewCell(i,r=="v")}H(e,i?!!r:false,i?r:"",n,i)}}else{L(false,a,e)}}catch(e){g(e)}}var O;function L(e,t,i){if(!e){if(C)return;O=setTimeout(function(){!C&&x&&x.parentNode&&x.parentNode.removeChild(x)},2e3)}else{B(t,i)}}function B(e,t){var i=domUtils.getXY(e),n=e.ownerDocument;if(x&&x.parentNode)return x;x=n.createElement("div");x.contentEditable=false;x.innerHTML="";x.style.cssText="width:15px;height:15px;background-image:url("+t.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(i.y-15)+"px;left:"+i.x+"px;";domUtils.unSelectable(x);x.onmouseover=function(e){C=true};x.onmouseout=function(e){C=false};domUtils.on(x,"click",function(e,t){o(t,this)});domUtils.on(x,"dblclick",function(e,t){a(t)});domUtils.on(x,"dragstart",function(e,t){domUtils.preventDefault(t)});var r;function o(i,n){clearTimeout(r);r=setTimeout(function(){t.fireEvent("tableClicked",e,n)},300)}function a(i){clearTimeout(r);var n=f(e),o=e.rows[0].cells[0],a=n.getLastCell(),s=n.getCellsRange(o,a);t.selection.getRange().setStart(o,0).setCursor(false,true);n.setSelected(s)}n.body.appendChild(x)}function M(e,t,i,n){var r=I(i),o=z(t,r);if(n){var a=e.getElementsByTagName("caption")[0],s=a?a.offsetHeight:0;return o=="v1"&&r.y-domUtils.getXY(e).y-s<8}else{return o=="h1"&&r.x-domUtils.getXY(e).x<8}}function P(t,i){var n=f(t);if(n){var o=n.getSameEndPosCells(t,"x")[0],a=n.getSameStartPosXCells(t)[0],s=I(i).x,l=(o?domUtils.getXY(o).x:domUtils.getXY(n.table).x)+20,d=a?domUtils.getXY(a).x+a.offsetWidth-20:e.body.offsetWidth+5||parseInt(domUtils.getComputedStyle(e.body,"width"),10);l+=r;d-=r;return s<l?l:s>d?d:s}}function F(e,t){try{var i=domUtils.getXY(e).y,n=I(t).y;return n<i?i:n}catch(e){g(e)}}function H(e,t,i,n,r){try{e.body.style.cursor=i=="h"?"col-resize":i=="v"?"row-resize":"text";if(browser.ie){if(i&&!E&&!h(e)){he(e,e.document);me(i,r)}else{pe(e)}}w=t}catch(e){g(e)}}function $(){var e="_UETableResizeLine",t=this.document.getElementById(e);if(!t){t=this.document.createElement("div");t.id=e;t.contnetEditable=false;t.setAttribute("unselectable","on");var i={width:2*a+1+"px",position:"absolute","z-index":1e5,cursor:"col-resize",background:"red",display:"none"};t.onmouseout=function(){this.style.display="none"};utils.extend(t.style,i);this.document.body.appendChild(t)}return t}function j(e,t){var i=$.call(this),n=t.table,r={top:domUtils.getXY(n).y+"px",left:domUtils.getXY(e).x+e.offsetWidth-a+"px",display:"block",height:n.offsetHeight+"px"};utils.extend(i.style,r)}function q(e){var t=f(e);j.call(this,e,t)}function z(e,t){var i=domUtils.getXY(e);if(!i){return""}if(i.x+e.offsetWidth-t.x<a){return"h"}if(t.x-i.x<a){return"h1"}if(i.y+e.offsetHeight-t.y<a){return"v"}if(t.y-i.y<a){return"v1"}return""}function W(t,i){if(oe()){return}d={x:i.clientX,y:i.clientY};if(i.button==2){var n=h(e),r=false;if(n){var o=ye(e,i);utils.each(n.selectedTds,function(e){if(e===o){r=true}});if(!r){m(domUtils.getElementsByTagName(e.body,"th td"));n.clearSelected()}else{o=n.selectedTds[0];setTimeout(function(){e.selection.getRange().setStart(o,0).setCursor(false,true)},0)}}}else{X(i)}}function V(){t&&clearTimeout(t);t=null}function Y(t){l=0;t=t||e.window.event;var i=R(t.target||t.srcElement);if(i){var n;if(n=z(i,I(t))){pe(e);if(n=="h1"){n="h";if(M(domUtils.findParentByTagName(i,"table"),i,t)){e.execCommand("adaptbywindow")}else{i=f(i).getPreviewCell(i);if(i){var r=e.selection.getRange();r.selectNodeContents(i).setCursor(true,true)}}}if(n=="h"){var o=f(i),a=o.table,s=se(i,a,true);s=K(s,"left");o.width=o.offsetWidth;var d=[],c=[];utils.each(s,function(e){d.push(e.offsetWidth)});utils.each(s,function(e){e.removeAttribute("width")});window.setTimeout(function(){var e=true;utils.each(s,function(t,i){var n=t.offsetWidth;if(n>d[i]){e=false;return false}c.push(n)});var t=e?c:d;utils.each(s,function(e,i){e.width=t[i]-fe()})},0)}}}}function X(t){m(domUtils.getElementsByTagName(e.body,"td th"));utils.each(e.document.getElementsByTagName("table"),function(e){e.ueTable=null});v=ye(e,t);if(!v)return;var i=domUtils.findParentByTagName(v,"table",true);ut=f(i);ut&&ut.clearSelected();if(!w){e.document.body.style.webkitUserSelect="";E=true;e.addListener("mouseover",te)}else{G(t)}}function G(e){if(browser.ie){e=Q(e)}Z();o=true;i=setTimeout(function(){J(e)},c)}function K(e,t){var i=[],n=null;for(var r=0,o=e.length;r<o;r++){n=e[r][t];if(n){i.push(n)}}return i}function Z(){i&&clearTimeout(i);i=null}function Q(e){var t=["pageX","pageY","clientX","clientY","srcElement","target"],i={};if(e){for(var n=0,r,o;r=t[n];n++){o=e[r];o&&(i[r]=o)}}return i}function J(t){o=false;v=t.target||t.srcElement;if(!v)return;var i=z(v,I(t));if(/\d/.test(i)){i=i.replace(/\d/,"");v=f(v).getPreviewCell(v,i=="v")}pe(e);he(e,e.document);e.fireEvent("saveScene");me(i,v);E=true;b=i;T=v}function ee(e,t){if(oe()){return}Z();o=false;if(w){l=++l%3;d={x:t.clientX,y:t.clientY};n=setTimeout(function(){l>0&&l--},c);if(l===2){l=0;Y(t);return}}if(t.button==2)return;var i=this;var r=i.selection.getRange(),a=domUtils.findParentByTagName(r.startContainer,"table",true),s=domUtils.findParentByTagName(r.endContainer,"table",true);if(a||s){if(a===s){a=domUtils.findParentByTagName(r.startContainer,["td","th","caption"],true);s=domUtils.findParentByTagName(r.endContainer,["td","th","caption"],true);if(a!==s){i.selection.clearRange()}}else{i.selection.clearRange()}}E=false;i.document.body.style.webkitUserSelect="";if(b&&T){i.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();l=0;_=i.document.getElementById("ue_tableDragLine");if(_){var u=domUtils.getXY(T),h=domUtils.getXY(_);switch(b){case"h":re(T,h.x-u.x);break;case"v":ae(T,h.y-u.y-T.offsetHeight);break;default:}b="";T=null;pe(i);i.fireEvent("saveScene");return}}if(!v){var p=domUtils.findParentByTagName(t.target||t.srcElement,"td",true);if(!p)p=domUtils.findParentByTagName(t.target||t.srcElement,"th",true);if(p&&(p.tagName=="TD"||p.tagName=="TH")){if(i.fireEvent("excludetable",p)===true)return;r=new dom.Range(i.document);r.setStart(p,0).setCursor(false,true)}}else{var m=f(v),g=m?m.selectedTds[0]:null;if(g){r=new dom.Range(i.document);if(domUtils.isEmptyBlock(g)){r.setStart(g,0).setCursor(false,true)}else{r.selectNodeContents(g).shrinkBoundary().setCursor(false,true)}}else{r=i.selection.getRange().shrinkBoundary();if(!r.collapsed){var a=domUtils.findParentByTagName(r.startContainer,["td","th"],true),s=domUtils.findParentByTagName(r.endContainer,["td","th"],true);if(a&&!s||!a&&s||a&&s&&a!==s){r.setCursor(false,true)}}}v=null;i.removeListener("mouseover",te)}i._selectionChange(250,t)}function te(e,t){if(oe()){return}var i=this,n=t.target||t.srcElement;y=domUtils.findParentByTagName(n,"td",true)||domUtils.findParentByTagName(n,"th",true);if(v&&y&&(v.tagName=="TD"&&y.tagName=="TD"||v.tagName=="TH"&&y.tagName=="TH")&&domUtils.findParentByTagName(v,"table")==domUtils.findParentByTagName(y,"table")){var r=f(y);if(v!=y){i.document.body.style.webkitUserSelect="none";i.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();var o=r.getCellsRange(v,y);r.setSelected(o)}else{i.document.body.style.webkitUserSelect="";r.clearSelected()}}t.preventDefault?t.preventDefault():t.returnValue=false}function ie(e,t,i){var n=parseInt(domUtils.getComputedStyle(e,"line-height"),10),r=i+t;t=r<n?n:r;if(e.style.height)e.style.height="";e.rowSpan==1?e.setAttribute("height",t):e.removeAttribute&&e.removeAttribute("height")}function ne(e){if(!e)return 0;return parseInt(domUtils.getComputedStyle(e,"width"),10)}function re(e,t){var i=f(e);if(i){var n=i.table,r=se(e,n);n.style.width="";n.removeAttribute("width");t=de(t,e,r);if(e.nextSibling){var o=0;utils.each(r,function(e){e.left.width=+e.left.width+t;e.right&&(e.right.width=+e.right.width-t)})}else{utils.each(r,function(e){e.left.width-=-t})}}}function oe(){return e.body.contentEditable==="false"}function ae(e,t){if(Math.abs(t)<10)return;var i=f(e);if(i){var n=i.getSameEndPosCells(e,"y"),r=n[0]?n[0].offsetHeight:0;for(var o=0,a;a=n[o++];){ie(a,t,r)}}}function se(e,t,i){if(!t){t=domUtils.findParentByTagName(e,"table")}if(!t){return null}var n=domUtils.getNodeIndex(e),r=e,o=t.rows,a=0;while(r){if(r.nodeType===1){a+=r.colSpan||1}r=r.previousSibling}r=null;var s=[];utils.each(o,function(e){var t=e.cells,n=0;utils.each(t,function(e){n+=e.colSpan||1;if(n===a){s.push({left:e,right:e.nextSibling||null});return false}else if(n>a){if(i){s.push({left:e})}return false}})});return s}function le(e){var t=Number.MAX_VALUE;for(var i=0,n;n=e[i];i++){t=Math.min(t,n.width||ce(n))}return t}function de(e,t,i){e-=fe();if(e<0){return 0}e-=ce(t);var n=e<0?"left":"right";e=Math.abs(e);utils.each(i,function(t){var i=t[n];if(i){e=Math.min(e,ce(i)-r)}});e=e<0?0:e;return n==="left"?-e:e}function ce(e){var t=0,i=0,t=e.offsetWidth-fe();if(!e.nextSibling){t-=ue(e)}t=t<0?0:t;try{e.width=t}catch(e){}return t}function ue(e){tab=domUtils.findParentByTagName(e,"table",false);if(tab.offsetVal===undefined){var t=e.previousSibling;if(t){tab.offsetVal=e.offsetWidth-t.offsetWidth===u.borderWidth?u.borderWidth:0}else{tab.offsetVal=0}}return tab.offsetVal}function fe(){if(u.tabcellSpace===undefined){var t=null,i=e.document.createElement("table"),n=e.document.createElement("tbody"),r=e.document.createElement("tr"),o=e.document.createElement("td"),a=null;o.style.cssText="border: 0;";o.width=1;r.appendChild(o);r.appendChild(a=o.cloneNode(false));n.appendChild(r);i.appendChild(n);i.style.cssText="visibility: hidden;";e.body.appendChild(i);u.paddingSpace=o.offsetWidth-1;var s=i.offsetWidth;o.style.cssText="";a.style.cssText="";u.borderWidth=(i.offsetWidth-s)/3;u.tabcellSpace=u.paddingSpace+u.borderWidth;e.body.removeChild(i)}fe=function(){return u.tabcellSpace};return u.tabcellSpace}function he(e,t){if(E)return;_=e.document.createElement("div");domUtils.setAttributes(_,{id:"ue_tableDragLine",unselectable:"on",contenteditable:false,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"});e.body.appendChild(_)}function pe(e){if(E)return;var t;while(t=e.document.getElementById("ue_tableDragLine")){domUtils.remove(t)}}function me(e,t){if(!t)return;var i=domUtils.findParentByTagName(t,"table"),n=i.getElementsByTagName("caption"),r=i.offsetWidth,o=i.offsetHeight-(n.length>0?n[0].offsetHeight:0),a=domUtils.getXY(i),s=domUtils.getXY(t),l;switch(e){case"h":l="height:"+o+"px;top:"+(a.y+(n.length>0?n[0].offsetHeight:0))+"px;left:"+(s.x+t.offsetWidth);_.style.cssText=l+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":l="width:"+r+"px;left:"+a.x+"px;top:"+(s.y+t.offsetHeight);_.style.cssText=l+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)";break;default:}}function ge(e,t){var i=domUtils.getElementsByTagName(e.body,"table"),n;for(var r=0,o;o=i[r++];){var a=domUtils.getElementsByTagName(o,"td");if(a[0]){if(t){n=a[0].style.borderColor.replace(/\s/g,"");if(/(#ffffff)|(rgb\(255,255,255\))/gi.test(n))domUtils.addClass(o,"noBorderTable")}else{domUtils.removeClasses(o,"noBorderTable")}}}}function ve(e,t,i){var n=e.body;return n.offsetWidth-(t?parseInt(domUtils.getComputedStyle(n,"margin-left"),10)*2:0)-i.tableBorder*2-(e.options.offsetWidth||0)}function ye(e,t){var i=domUtils.findParentByTagName(t.target||t.srcElement,["td","th"],true),n=null;if(!i){return null}n=z(i,I(t));if(!i){return null}if(n==="h1"&&i.previousSibling){var r=domUtils.getXY(i),o=i.offsetWidth;if(Math.abs(r.x+o-t.clientX)>o/3){i=i.previousSibling}}else if(n==="v1"&&i.parentNode.previousSibling){var r=domUtils.getXY(i),a=i.offsetHeight;if(Math.abs(r.y+a-t.clientY)>a/3){i=i.parentNode.previousSibling.firstChild}}return i&&!(e.fireEvent("excludetable",i)===true)?i:null}};UE.UETable.prototype.sortTable=function(e,t){var i=this.table,n=i.rows,r=[],o=n[0].cells[0].tagName==="TH",a=0;if(this.selectedTds.length){var s=this.cellsRange,l=s.endRowIndex+1;for(var d=s.beginRowIndex;d<l;d++){r[d]=n[d]}r.splice(0,s.beginRowIndex);a=s.endRowIndex+1===this.rowsNum?0:s.endRowIndex+1}else{for(var d=0,l=n.length;d<l;d++){r[d]=n[d]}}var c={reversecurrent:function(e,t){return 1},orderbyasc:function(e,t){var i=e.innerText||e.textContent,n=t.innerText||t.textContent;return i.localeCompare(n)},reversebyasc:function(e,t){var i=e.innerHTML,n=t.innerHTML;return n.localeCompare(i)},orderbynum:function(e,t){var i=e[browser.ie?"innerText":"textContent"].match(/\d+/),n=t[browser.ie?"innerText":"textContent"].match(/\d+/);if(i)i=+i[0];if(n)n=+n[0];return(i||0)-(n||0)},reversebynum:function(e,t){var i=e[browser.ie?"innerText":"textContent"].match(/\d+/),n=t[browser.ie?"innerText":"textContent"].match(/\d+/);if(i)i=+i[0];if(n)n=+n[0];return(n||0)-(i||0)}};i.setAttribute("data-sort-type",t&&typeof t==="string"&&c[t]?t:"");o&&r.splice(0,1);r=utils.sort(r,function(i,n){var r;if(t&&typeof t==="function"){r=t.call(this,i.cells[e],n.cells[e])}else if(t&&typeof t==="number"){r=1}else if(t&&typeof t==="string"&&c[t]){r=c[t].call(this,i.cells[e],n.cells[e])}else{r=c["orderbyasc"].call(this,i.cells[e],n.cells[e])}return r});var u=i.ownerDocument.createDocumentFragment();for(var f=0,l=r.length;f<l;f++){u.appendChild(r[f])}var h=i.getElementsByTagName("tbody")[0];if(!a){h.appendChild(u)}else{h.insertBefore(u,n[a-s.endRowIndex+s.beginRowIndex-1])}};UE.plugins["tablesort"]=function(){var e=this,t=UE.UETable,i=function(e){return t.getUETable(e)},n=function(e){return t.getTableItemsByRange(e)};e.ready(function(){utils.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;"+"   background-image:url("+e.options.themePath+e.options.theme+"/images/sortable.png);}",e.document);e.addListener("afterexeccommand",function(e,t){if(t=="mergeright"||t=="mergedown"||t=="mergecells"){this.execCommand("disablesort")}})});UE.commands["sorttable"]={queryCommandState:function(){var e=this,t=n(e);if(!t.cell)return-1;var i=t.table,r=i.getElementsByTagName("td");for(var o=0,a;a=r[o++];){if(a.rowSpan!=1||a.colSpan!=1)return-1}return 0},execCommand:function(e,t){var r=this,o=r.selection.getRange(),a=o.createBookmark(true),s=n(r),l=s.cell,d=i(s.table),c=d.getCellInfo(l);d.sortTable(c.cellIndex,t);o.moveToBookmark(a);try{o.select()}catch(e){}}};UE.commands["enablesort"]=UE.commands["disablesort"]={queryCommandState:function(e){var t=n(this).table;if(t&&e=="enablesort"){var i=domUtils.getElementsByTagName(t,"th td");for(var r=0;r<i.length;r++){if(i[r].getAttribute("colspan")>1||i[r].getAttribute("rowspan")>1)return-1}}return!t?-1:e=="enablesort"^t.getAttribute("data-sort")!="sortEnabled"?-1:0},execCommand:function(e){var t=n(this).table;t.setAttribute("data-sort",e=="enablesort"?"sortEnabled":"sortDisabled");e=="enablesort"?domUtils.addClass(t,"sortEnabled"):domUtils.removeClasses(t,"sortEnabled")}}};UE.plugins["contextmenu"]=function(){var e=this;e.setOpt("enableContextMenu",true);if(e.getOpt("enableContextMenu")===false){return}var t=e.getLang("contextMenu"),i,n=e.options.contextMenu||[{label:t["selectall"],cmdName:"selectall"},{label:t.cleardoc,cmdName:"cleardoc",exec:function(){if(confirm(t.confirmclear)){this.execCommand("cleardoc")}}},"-",{label:t.unlink,cmdName:"unlink"},"-",{group:t.paragraph,icon:"justifyjustify",subMenu:[{label:t.justifyleft,cmdName:"justify",value:"left"},{label:t.justifyright,cmdName:"justify",value:"right"},{label:t.justifycenter,cmdName:"justify",value:"center"},{label:t.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:t.table,icon:"table",subMenu:[{label:t.inserttable,cmdName:"inserttable"},{label:t.deletetable,cmdName:"deletetable"},"-",{label:t.deleterow,cmdName:"deleterow"},{label:t.deletecol,cmdName:"deletecol"},{label:t.insertcol,cmdName:"insertcol"},{label:t.insertcolnext,cmdName:"insertcolnext"},{label:t.insertrow,cmdName:"insertrow"},{label:t.insertrownext,cmdName:"insertrownext"},"-",{label:t.insertcaption,cmdName:"insertcaption"},{label:t.deletecaption,cmdName:"deletecaption"},{label:t.inserttitle,cmdName:"inserttitle"},{label:t.deletetitle,cmdName:"deletetitle"},{label:t.inserttitlecol,cmdName:"inserttitlecol"},{label:t.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:t.mergecells,cmdName:"mergecells"},{label:t.mergeright,cmdName:"mergeright"},{label:t.mergedown,cmdName:"mergedown"},"-",{label:t.splittorows,cmdName:"splittorows"},{label:t.splittocols,cmdName:"splittocols"},{label:t.splittocells,cmdName:"splittocells"},"-",{label:t.averageDiseRow,cmdName:"averagedistributerow"},{label:t.averageDisCol,cmdName:"averagedistributecol"},"-",{label:t.edittd,cmdName:"edittd",exec:function(){if(UE.ui["edittd"]){new UE.ui["edittd"](this)}this.getDialog("edittd").open()}},{label:t.edittable,cmdName:"edittable",exec:function(){if(UE.ui["edittable"]){new UE.ui["edittable"](this)}this.getDialog("edittable").open()}},{label:t.setbordervisible,cmdName:"setbordervisible"}]},{group:t.tablesort,icon:"tablesort",subMenu:[{label:t.enablesort,cmdName:"enablesort"},{label:t.disablesort,cmdName:"disablesort"},"-",{label:t.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:t.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:t.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:t.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:t.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:t.borderbk,icon:"borderBack",subMenu:[{label:t.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:t.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:t.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["#bbb","#ccc"]})}},{label:t.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:t.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["red","blue"]})}},{label:t.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:t.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:t.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:t.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:t.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:t.tableright,value:"right"}]},"-",{label:t.insertparagraphbefore,cmdName:"insertparagraph",value:true},{label:t.insertparagraphafter,cmdName:"insertparagraph"},{label:t["copy"],cmdName:"copy"},{label:t["paste"],cmdName:"paste"}];if(!n.length){return}var r=UE.ui.uiUtils;e.addListener("contextmenu",function(o,a){var s=r.getViewportOffsetByEvent(a);e.fireEvent("beforeselectionchange");if(i){i.destroy()}for(var l=0,d,c=[];d=n[l];l++){var u;(function(i){if(i=="-"){if((u=c[c.length-1])&&u!=="-"){c.push("-")}}else if(i.hasOwnProperty("group")){for(var n=0,r,o=[];r=i.subMenu[n];n++){(function(t){if(t=="-"){if((u=o[o.length-1])&&u!=="-"){o.push("-")}else{o.splice(o.length-1)}}else{if((e.commands[t.cmdName]||UE.commands[t.cmdName]||t.query)&&(t.query?t.query():e.queryCommandState(t.cmdName))>-1){o.push({label:t.label||e.getLang("contextMenu."+t.cmdName+(t.value||""))||"",className:"edui-for-"+t.cmdName+(t.className?" edui-for-"+t.cmdName+"-"+t.className:""),onclick:t.exec?function(){t.exec.call(e)}:function(){e.execCommand(t.cmdName,t.value)}})}}})(r)}if(o.length){function a(){switch(i.icon){case"table":return e.getLang("contextMenu.table");case"justifyjustify":return e.getLang("contextMenu.paragraph");case"aligntd":return e.getLang("contextMenu.aligntd");case"aligntable":return e.getLang("contextMenu.aligntable");case"tablesort":return t.tablesort;case"borderBack":return t.borderbk;default:return""}}c.push({label:a(),className:"edui-for-"+i.icon,subMenu:{items:o,editor:e}})}}else{if((e.commands[i.cmdName]||UE.commands[i.cmdName]||i.query)&&(i.query?i.query.call(e):e.queryCommandState(i.cmdName))>-1){c.push({label:i.label||e.getLang("contextMenu."+i.cmdName),className:"edui-for-"+(i.icon?i.icon:i.cmdName+(i.value||"")),onclick:i.exec?function(){i.exec.call(e)}:function(){e.execCommand(i.cmdName,i.value)}})}}})(d)}if(c[c.length-1]=="-"){c.pop()}i=new UE.ui.Menu({items:c,className:"edui-contextmenu",editor:e});i.render();i.showAt(s);e.fireEvent("aftershowcontextmenu",i);domUtils.preventDefault(a);if(browser.ie){var f;try{f=e.selection.getNative().createRange()}catch(e){return}if(f.item){var h=new dom.Range(e.document);h.selectNode(f.item(0)).select(true,true)}}});e.addListener("aftershowcontextmenu",function(t,i){if(e.zeroclipboard){var n=i.items;for(var r in n){if(n[r].className=="edui-for-copy"){e.zeroclipboard.clip(n[r].getDom())}}}})};UE.plugins["shortcutmenu"]=function(){var e=this,t,i=e.options.shortcutMenu||[];if(!i.length){return}e.addListener("contextmenu mouseup",function(e,n){var r=this,o={type:e,target:n.target||n.srcElement,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY};setTimeout(function(){var n=r.selection.getRange();if(n.collapsed===false||e=="contextmenu"){if(!t){t=new baidu.editor.ui.ShortCutMenu({editor:r,items:i,theme:r.options.theme,className:"edui-shortcutmenu"});t.render();r.fireEvent("afterrendershortcutmenu",t)}t.show(o,!!UE.plugins["contextmenu"])}});if(e=="contextmenu"){domUtils.preventDefault(n);if(browser.ie9below){var a;try{a=r.selection.getNative().createRange()}catch(n){return}if(a.item){var s=new dom.Range(r.document);s.selectNode(a.item(0)).select(true,true)}}}});e.addListener("keydown",function(e){if(e=="keydown"){t&&!t.isHidden&&t.hide()}})};UE.plugins["basestyle"]=function(){var e={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},t=function(e,t){return domUtils.filterNodeList(e.selection.getStartElementPath(),t)},i=this;i.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"});i.addInputRule(function(e){utils.each(e.getNodesByTagName("b i"),function(e){switch(e.tagName){case"b":e.tagName="strong";break;case"i":e.tagName="em"}})});for(var n in e){(function(e,n){i.commands[e]={execCommand:function(e){var r=i.selection.getRange(),o=t(this,n);if(r.collapsed){if(o){var a=i.document.createTextNode("");r.insertNode(a).removeInlineStyle(n);r.setStartBefore(a);domUtils.remove(a)}else{var s=r.document.createElement(n[0]);if(e=="superscript"||e=="subscript"){a=i.document.createTextNode("");r.insertNode(a).removeInlineStyle(["sub","sup"]).setStartBefore(a).collapse(true)}r.insertNode(s).setStart(s,0)}r.collapse(true)}else{if(e=="superscript"||e=="subscript"){if(!o||o.tagName.toLowerCase()!=e){r.removeInlineStyle(["sub","sup"])}}o?r.removeInlineStyle(n):r.applyInlineStyle(n[0])}r.select()},queryCommandState:function(){return t(this,n)?1:0}}})(n,e[n])}};UE.plugins["elementpath"]=function(){var e,t,i=this;i.setOpt("elementPathEnabled",true);if(!i.options.elementPathEnabled){return}i.commands["elementpath"]={execCommand:function(n,r){var o=t[r],a=i.selection.getRange();e=r*1;a.selectNode(o).select()},queryCommandValue:function(){var i=[].concat(this.selection.getStartElementPath()).reverse(),n=[];t=i;for(var r=0,o;o=i[r];r++){if(o.nodeType==3){continue}var a=o.tagName.toLowerCase();if(a=="img"&&o.getAttribute("anchorname")){a="anchor"}n[r]=a;if(e==r){e=-1;break}}return n}}};UE.plugins["formatmatch"]=function(){var e=this,t=[],i,n=0;e.addListener("reset",function(){t=[];n=0});function r(o,a){if(browser.webkit){var s=a.target.tagName=="IMG"?a.target:null}function l(e){if(f){e.selectNode(f)}return e.applyInlineStyle(t[t.length-1].tagName,null,t)}e.undoManger&&e.undoManger.save();var d=e.selection.getRange(),c=s||d.getClosedNode();if(i&&c&&c.tagName=="IMG"){c.style.cssText+=";float:"+(i.style.cssFloat||i.style.styleFloat||"none")+";display:"+(i.style.display||"inline");i=null}else{if(!i){var u=d.collapsed;if(u){var f=e.document.createTextNode("match");d.insertNode(f).select()}e.__hasEnterExecCommand=true;var h=e.options.removeFormatAttributes;e.options.removeFormatAttributes="";e.execCommand("removeformat");e.options.removeFormatAttributes=h;e.__hasEnterExecCommand=false;d=e.selection.getRange();if(t.length){l(d)}if(f){d.setStartBefore(f).collapse(true)}d.select();f&&domUtils.remove(f)}}e.undoManger&&e.undoManger.save();e.removeListener("mouseup",r);n=0}e.commands["formatmatch"]={execCommand:function(o){if(n){n=0;t=[];e.removeListener("mouseup",r);return}var a=e.selection.getRange();i=a.getClosedNode();if(!i||i.tagName!="IMG"){a.collapse(true).shrinkBoundary();var s=a.startContainer;t=domUtils.findParents(s,true,function(e){return!domUtils.isBlockElm(e)&&e.nodeType==1});for(var l=0,d;d=t[l];l++){if(d.tagName=="A"){t.splice(l,1);break}}}e.addListener("mouseup",r);n=1},queryCommandState:function(){return n},notNeedUndo:1}};UE.plugin.register("searchreplace",function(){var e=this;var t={table:1,tbody:1,tr:1,ol:1,ul:1};function i(e,t,i){var n=t.searchStr;if(t.dir==-1){e=e.split("").reverse().join("");n=n.split("").reverse().join("");i=e.length-i}var r=new RegExp(n,"g"+(t.casesensitive?"":"i")),o;while(o=r.exec(e)){if(o.index>=i){return t.dir==-1?e.length-o.index-t.searchStr.length:o.index}}return-1}function n(e,n,r){var o,a,s=r.all||r.dir==1?"getNextDomNode":"getPreDomNode";if(domUtils.isBody(e)){e=e.firstChild}var l=1;while(e){o=e.nodeType==3?e.nodeValue:e[browser.ie?"innerText":"textContent"];a=i(o,r,n);l=0;if(a!=-1){return{node:e,index:a}}e=domUtils[s](e);while(e&&t[e.nodeName.toLowerCase()]){e=domUtils[s](e,true)}if(e){n=r.dir==-1?(e.nodeType==3?e.nodeValue:e[browser.ie?"innerText":"textContent"]).length:0}}}function r(e,t,i){var n=0,o=e.firstChild,a=0,s;while(o){if(o.nodeType==3){a=o.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length;n+=a;if(n>=t){return{node:o,index:a-(n-t)}}}else if(!dtd.$empty[o.tagName]){a=o[browser.ie?"innerText":"textContent"].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length;n+=a;if(n>=t){s=r(o,a-(n-t),i);if(s){return s}}}o=domUtils.getNextDomNode(o)}}function o(e,t){var i=e.selection.getRange(),o,s=t.searchStr,l=e.document.createElement("span");l.innerHTML="$$ueditor_searchreplace_key$$";i.shrinkBoundary(true);if(!i.collapsed){i.select();var d=e.selection.getText();if(new RegExp("^"+t.searchStr+"$",t.casesensitive?"":"i").test(d)){if(t.replaceStr!=undefined){a(i,t.replaceStr);i.select();return true}else{i.collapse(t.dir==-1)}}}i.insertNode(l);i.enlargeToBlockElm(true);o=i.startContainer;var c=o[browser.ie?"innerText":"textContent"].indexOf("$$ueditor_searchreplace_key$$");i.setStartBefore(l);domUtils.remove(l);var u=n(o,c,t);if(u){var f=r(u.node,u.index,s);var h=r(u.node,u.index+s.length,s);i.setStart(f.node,f.index).setEnd(h.node,h.index);if(t.replaceStr!==undefined){a(i,t.replaceStr)}i.select();return true}else{i.setCursor()}}function a(t,i){i=e.document.createTextNode(i);t.deleteContents().insertNode(i)}return{commands:{searchreplace:{execCommand:function(t,i){utils.extend(i,{all:false,casesensitive:false,dir:1},true);var n=0;if(i.all){var r=e.selection.getRange(),a=e.body.firstChild;if(a&&a.nodeType==1){r.setStart(a,0);r.shrinkBoundary(true)}else if(a.nodeType==3){r.setStartBefore(a)}r.collapse(true).select(true);if(i.replaceStr!==undefined){e.fireEvent("saveScene")}while(o(this,i)){n++}if(n){e.fireEvent("saveScene")}}else{if(i.replaceStr!==undefined){e.fireEvent("saveScene")}if(o(this,i)){n++}if(n){e.fireEvent("saveScene")}}return n},notNeedUndo:1}}}});UE.plugins["customstyle"]=function(){var e=this;e.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]});e.commands["customstyle"]={execCommand:function(e,t){var i=this,n=t.tag,r=domUtils.findParent(i.selection.getStart(),function(e){return e.getAttribute("label")},true),o,a,s={};for(var l in t){if(t[l]!==undefined)s[l]=t[l]}delete s.tag;if(r&&r.getAttribute("label")==t.label){o=this.selection.getRange();a=o.createBookmark();if(o.collapsed){if(dtd.$block[r.tagName]){var d=i.document.createElement("p");domUtils.moveChild(r,d);r.parentNode.insertBefore(d,r);domUtils.remove(r)}else{domUtils.remove(r,true)}}else{var c=domUtils.getCommonAncestor(a.start,a.end),u=domUtils.getElementsByTagName(c,n);if(new RegExp(n,"i").test(c.tagName)){u.push(c)}for(var f=0,h;h=u[f++];){if(h.getAttribute("label")==t.label){var p=domUtils.getPosition(h,a.start),m=domUtils.getPosition(h,a.end);if((p&domUtils.POSITION_FOLLOWING||p&domUtils.POSITION_CONTAINS)&&(m&domUtils.POSITION_PRECEDING||m&domUtils.POSITION_CONTAINS))if(dtd.$block[n]){var d=i.document.createElement("p");domUtils.moveChild(h,d);h.parentNode.insertBefore(d,h)}domUtils.remove(h,true)}}r=domUtils.findParent(c,function(e){return e.getAttribute("label")==t.label},true);if(r){domUtils.remove(r,true)}}o.moveToBookmark(a).select()}else{if(dtd.$block[n]){this.execCommand("paragraph",n,s,"customstyle");o=i.selection.getRange();if(!o.collapsed){o.collapse();r=domUtils.findParent(i.selection.getStart(),function(e){return e.getAttribute("label")==t.label},true);var g=i.document.createElement("p");domUtils.insertAfter(r,g);domUtils.fillNode(i.document,g);o.setStart(g,0).setCursor()}}else{o=i.selection.getRange();if(o.collapsed){r=i.document.createElement(n);domUtils.setAttributes(r,s);o.insertNode(r).setStart(r,0).setCursor();return}a=o.createBookmark();o.applyInlineStyle(n,s).moveToBookmark(a).select()}}},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return e.getAttribute("label")});return e?e.getAttribute("label"):""}};e.addListener("keyup",function(t,i){var n=i.keyCode||i.which;if(n==32||n==13){var r=e.selection.getRange();if(r.collapsed){var o=domUtils.findParent(e.selection.getStart(),function(e){return e.getAttribute("label")},true);if(o&&dtd.$block[o.tagName]&&domUtils.isEmptyNode(o)){var a=e.document.createElement("p");domUtils.insertAfter(o,a);domUtils.fillNode(e.document,a);domUtils.remove(o);r.setStart(a,0).setCursor()}}}})};UE.plugins["catchremoteimage"]=function(){var me=this,ajax=UE.ajax;if(me.options.catchRemoteImageEnable===false)return;me.setOpt({catchRemoteImageEnable:false});me.addListener("afterpaste",function(){me.fireEvent("catchRemoteImage")});me.addListener("catchRemoteImage",function(){var catcherLocalDomain=me.getOpt("catcherLocalDomain"),catcherActionUrl=me.getActionUrl(me.getOpt("catcherActionName")),catcherUrlPrefix=me.getOpt("catcherUrlPrefix"),catcherFieldName=me.getOpt("catcherFieldName");var remoteImages=[],imgs=domUtils.getElementsByTagName(me.document,"img"),test=function(e,t){if(e.indexOf(location.host)!=-1||/(^\.)|(^\/)/.test(e)){return true}if(t){for(var i=0,n;n=t[i++];){if(e.indexOf(n)!==-1){return true}}}return false};for(var i=0,ci;ci=imgs[i++];){if(ci.getAttribute("word_img")){continue}var src=ci.getAttribute("_src")||ci.src||"";if(/^(https?|ftp):/i.test(src)&&!test(src,catcherLocalDomain)){remoteImages.push(src)}}if(remoteImages.length){catchremoteimage(remoteImages,{success:function(r){try{var info=r.state!==undefined?r:eval("("+r.responseText+")")}catch(e){return}var i,j,ci,cj,oldSrc,newSrc,list=info.list;for(i=0;ci=imgs[i++];){oldSrc=ci.getAttribute("_src")||ci.src||"";for(j=0;cj=list[j++];){if(oldSrc==cj.source&&cj.state=="SUCCESS"){newSrc=catcherUrlPrefix+cj.url;domUtils.setAttributes(ci,{src:newSrc,_src:newSrc});break}}}me.fireEvent("catchremotesuccess")},error:function(){me.fireEvent("catchremoteerror")}})}function catchremoteimage(e,t){var i=utils.serializeParam(me.queryCommandValue("serverparam"))||"",n=utils.formatUrl(catcherActionUrl+(catcherActionUrl.indexOf("?")==-1?"?":"&")+i),r=utils.isCrossDomainUrl(n),o={method:"POST",dataType:r?"jsonp":"",timeout:6e4,onsuccess:t["success"],onerror:t["error"]};o[catcherFieldName]=e;ajax.request(n,o)}})};UE.plugin.register("snapscreen",function(){var me=this;var snapplugin;function getLocation(e){var t,i=document.createElement("a"),n=utils.serializeParam(me.queryCommandValue("serverparam"))||"";i.href=e;if(browser.ie){i.href=i.href}t=i.search;if(n){t=t+(t.indexOf("?")==-1?"?":"&")+n;t=t.replace(/[&]+/gi,"&")}return{port:i.port,hostname:i.hostname,path:i.pathname+t||+i.hash}}return{commands:{snapscreen:{execCommand:function(cmd){var url,local,res;var lang=me.getLang("snapScreen_plugin");if(!snapplugin){var container=me.container;var doc=me.container.ownerDocument||me.container.document;snapplugin=doc.createElement("object");try{snapplugin.type="application/x-pluginbaidusnap"}catch(e){return}snapplugin.style.cssText="position:absolute;left:-9999px;width:0;height:0;";snapplugin.setAttribute("width","0");snapplugin.setAttribute("height","0");container.appendChild(snapplugin)}function onSuccess(rs){try{rs=eval("("+rs+")");if(rs.state=="SUCCESS"){var opt=me.options;me.execCommand("insertimage",{src:opt.snapscreenUrlPrefix+rs.url,_src:opt.snapscreenUrlPrefix+rs.url,alt:rs.title||"",floatStyle:opt.snapscreenImgAlign})}else{alert(rs.state)}}catch(e){alert(lang.callBackErrorMsg)}}url=me.getActionUrl(me.getOpt("snapscreenActionName"));local=getLocation(url);setTimeout(function(){try{res=snapplugin.saveSnapshot(local.hostname,local.path,local.port)}catch(e){me.ui._dialogs["snapscreenDialog"].open();return}onSuccess(res)},50)},queryCommandState:function(){return navigator.userAgent.indexOf("Windows",0)!=-1?0:-1}}}}});UE.commands["insertparagraph"]={execCommand:function(e,t){var i=this,n=i.selection.getRange(),r=n.startContainer,o;while(r){if(domUtils.isBody(r)){break}o=r;r=r.parentNode}if(o){var a=i.document.createElement("p");if(t){o.parentNode.insertBefore(a,o)}else{o.parentNode.insertBefore(a,o.nextSibling)}domUtils.fillNode(i.document,a);n.setStart(a,0).setCursor(false,true)}}};UE.plugin.register("webapp",function(){var e=this;function t(t,i){return!i?'<img title="'+t.title+'" width="'+t.width+'" height="'+t.height+'"'+' src="'+e.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+t.logo+'" style="background:url('+t.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+t.url+'" '+(t.align&&!t.cssfloat?'align="'+t.align+'"':"")+(t.cssfloat?'style="float:'+t.cssfloat+'"':"")+"/>":'<iframe class="edui-faked-webapp" title="'+t.title+'" '+(t.align&&!t.cssfloat?'align="'+t.align+'"':"")+(t.cssfloat?'style="float:'+t.cssfloat+'"':"")+'width="'+t.width+'" height="'+t.height+'"  scrolling="no" frameborder="0" src="'+t.url+'" logo_url = "'+t.logo+'"></iframe>'}return{outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){var i;if(e.getAttr("class")=="edui-faked-webapp"){i=t({title:e.getAttr("title"),width:e.getAttr("width"),height:e.getAttr("height"),align:e.getAttr("align"),cssfloat:e.getStyle("float"),url:e.getAttr("_url"),logo:e.getAttr("_logo_url")},true);var n=UE.uNode.createElement(i);e.parentNode.replaceChild(n,e)}})},inputRule:function(e){utils.each(e.getNodesByTagName("iframe"),function(e){if(e.getAttr("class")=="edui-faked-webapp"){var i=UE.uNode.createElement(t({title:e.getAttr("title"),width:e.getAttr("width"),height:e.getAttr("height"),align:e.getAttr("align"),cssfloat:e.getStyle("float"),url:e.getAttr("src"),logo:e.getAttr("logo_url")}));e.parentNode.replaceChild(i,e)}})},commands:{webapp:{execCommand:function(e,i){var n=this,r=t(utils.extend(i,{align:"none"}),false);n.execCommand("inserthtml",r)},queryCommandState:function(){var e=this,t=e.selection.getRange().getClosedNode(),i=t&&t.className=="edui-faked-webapp";return i?1:0}}}}});UE.plugins["template"]=function(){UE.commands["template"]={execCommand:function(e,t){t.html&&this.execCommand("inserthtml",t.html)}};this.addListener("click",function(e,t){var i=t.target||t.srcElement,n=this.selection.getRange();var r=domUtils.findParent(i,function(e){if(e.className&&domUtils.hasClass(e,"ue_t")){return e}},true);r&&n.selectNode(r).shrinkBoundary().select()});this.addListener("keydown",function(e,t){var i=this.selection.getRange();if(!i.collapsed){if(!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey){var n=domUtils.findParent(i.startContainer,function(e){if(e.className&&domUtils.hasClass(e,"ue_t")){return e}},true);if(n){domUtils.removeClasses(n,["ue_t"])}}}})};UE.plugin.register("music",function(){var e=this;function t(t,i,n,r,o,a){return!a?"<img "+(r&&!o?'align="'+r+'"':"")+(o?'style="float:'+o+'"':"")+' width="'+i+'" height="'+n+'" _url="'+t+'" class="edui-faked-music"'+' src="'+e.options.langPath+e.options.lang+'/images/music.png" />':'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer"'+' src="'+t+'" width="'+i+'" height="'+n+'" '+(r&&!o?'align="'+r+'"':"")+(o?'style="float:'+o+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >'}return{outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){var i;if(e.getAttr("class")=="edui-faked-music"){var n=e.getStyle("float");var r=e.getAttr("align");i=t(e.getAttr("_url"),e.getAttr("width"),e.getAttr("height"),r,n,true);var o=UE.uNode.createElement(i);e.parentNode.replaceChild(o,e)}})},inputRule:function(e){utils.each(e.getNodesByTagName("embed"),function(e){if(e.getAttr("class")=="edui-faked-music"){var i=e.getStyle("float");var n=e.getAttr("align");html=t(e.getAttr("src"),e.getAttr("width"),e.getAttr("height"),n,i,false);var r=UE.uNode.createElement(html);e.parentNode.replaceChild(r,e)}})},commands:{music:{execCommand:function(e,i){var n=this,r=t(i.url,i.width||400,i.height||95,"none",false);n.execCommand("inserthtml",r)},queryCommandState:function(){var e=this,t=e.selection.getRange().getClosedNode(),i=t&&t.className=="edui-faked-music";return i?1:0}}}}});UE.plugin.register("autoupload",function(){function e(e,t){var i=t;var n,r,o,a,s,l,d,c,u=/image\/\w+/i.test(e.type)?"image":"file",f="loading_"+(+new Date).toString(36);n=i.getOpt(u+"FieldName");r=i.getOpt(u+"UrlPrefix");o=i.getOpt(u+"MaxSize");a=i.getOpt(u+"AllowFiles");s=i.getActionUrl(i.getOpt(u+"ActionName"));d=function(e){var t=i.document.getElementById(f);t&&domUtils.remove(t);i.fireEvent("showmessage",{id:f,content:e,type:"error",timeout:4e3})};if(u=="image"){l='<img class="loadingclass" id="'+f+'" src="'+i.options.themePath+i.options.theme+'/images/spacer.gif" title="'+(i.getLang("autoupload.loading")||"")+'" >';c=function(e){var t=r+e.url,n=i.document.getElementById(f);if(n){n.setAttribute("src",t);n.setAttribute("_src",t);n.setAttribute("title",e.title||"");n.setAttribute("alt",e.original||"");n.removeAttribute("id");domUtils.removeClasses(n,"loadingclass")}}}else{l="<p>"+'<img class="loadingclass" id="'+f+'" src="'+i.options.themePath+i.options.theme+'/images/spacer.gif" title="'+(i.getLang("autoupload.loading")||"")+'" >'+"</p>";c=function(e){var t=r+e.url,n=i.document.getElementById(f);var o=i.selection.getRange(),a=o.createBookmark();o.selectNode(n).select();i.execCommand("insertfile",{url:t});o.moveToBookmark(a).select()}}i.execCommand("inserthtml",l);if(!i.getOpt(u+"ActionName")){d(i.getLang("autoupload.errorLoadConfig"));return}if(e.size>o){d(i.getLang("autoupload.exceedSizeError"));return}var h=e.name?e.name.substr(e.name.lastIndexOf(".")):"";if(h&&u!="image"||a&&(a.join("")+".").indexOf(h.toLowerCase()+".")==-1){d(i.getLang("autoupload.exceedTypeError"));return}var p=new XMLHttpRequest,m=new FormData,g=utils.serializeParam(i.queryCommandValue("serverparam"))||"",v=utils.formatUrl(s+(s.indexOf("?")==-1?"?":"&")+g);m.append(n,e,e.name||"blob."+e.type.substr("image/".length));m.append("type","ajax");p.open("post",v,true);p.setRequestHeader("X-Requested-With","XMLHttpRequest");p.addEventListener("load",function(e){try{var t=new Function("return "+utils.trim(e.target.response))();if(t.state=="SUCCESS"&&t.url){c(t)}else{d(t.state)}}catch(e){d(i.getLang("autoupload.loadError"))}});p.send(m)}function t(e){return e.clipboardData&&e.clipboardData.items&&e.clipboardData.items.length==1&&/^image\//.test(e.clipboardData.items[0].type)?e.clipboardData.items:null}function i(e){return e.dataTransfer&&e.dataTransfer.files?e.dataTransfer.files:null}return{outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){if(/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))){e.parentNode.removeChild(e)}});utils.each(e.getNodesByTagName("p"),function(e){if(/\bloadpara\b/.test(e.getAttr("class"))){e.parentNode.removeChild(e)}})},bindEvents:{ready:function(n){var r=this;if(window.FormData&&window.FileReader){domUtils.on(r.body,"paste drop",function(n){var o=false,a;a=n.type=="paste"?t(n):i(n);if(a){var s=a.length,l;while(s--){l=a[s];if(l.getAsFile)l=l.getAsFile();if(l&&l.size>0){e(l,r);o=true}}o&&n.preventDefault()}});domUtils.on(r.body,"dragover",function(e){if(e.dataTransfer.types[0]=="Files"){e.preventDefault()}});utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n"+".loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;"+"}",this.document)}}}}});UE.plugin.register("autosave",function(){var e=this,t=new Date,i=20,n=null;function r(r){var o;if(new Date-t<i){return}if(!r.hasContents()){n&&e.removePreferences(n);return}t=new Date;r._saveFlag=null;o=e.body.innerHTML;if(r.fireEvent("beforeautosave",{content:o})===false){return}e.setPreferences(n,o);r.fireEvent("afterautosave",{content:o})}return{defaultOptions:{saveInterval:500},bindEvents:{ready:function(){var t="-drafts-data",i=null;if(e.key){i=e.key+t}else{i=(e.container.parentNode.id||"ue-common")+t}n=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+i},contentchange:function(){if(!n){return}if(e._saveFlag){window.clearTimeout(e._saveFlag)}if(e.options.saveInterval>0){e._saveFlag=window.setTimeout(function(){r(e)},e.options.saveInterval)}else{r(e)}}},commands:{clearlocaldata:{execCommand:function(t,i){if(n&&e.getPreferences(n)){e.removePreferences(n)}},notNeedUndo:true,ignoreContentChange:true},getlocaldata:{execCommand:function(t,i){return n?e.getPreferences(n)||"":""},notNeedUndo:true,ignoreContentChange:true},drafts:{execCommand:function(t,i){if(n){e.body.innerHTML=e.getPreferences(n)||"<p>"+domUtils.fillHtml+"</p>";e.focus(true)}},queryCommandState:function(){return n?e.getPreferences(n)===null?-1:0:-1},notNeedUndo:true,ignoreContentChange:true}}}});UE.plugin.register("charts",function(){var e=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(i,n){var r=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",true),o=[],a={};if(!r){return false}if(!t(r)){e.fireEvent("chartserror");return false}a.title=n.title||"";a.subTitle=n.subTitle||"";a.xTitle=n.xTitle||"";a.yTitle=n.yTitle||"";a.suffix=n.suffix||"";a.tip=n.tip||"";a.dataFormat=n.tableDataFormat||"";a.chartType=n.chartType||0;for(var s in a){if(!a.hasOwnProperty(s)){continue}o.push(s+":"+a[s])}r.setAttribute("data-chart",o.join(";"));domUtils.addClass(r,"edui-charts-table")},queryCommandState:function(e,i){var n=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",true);return n&&t(n)?0:-1}}},inputRule:function(e){utils.each(e.getNodesByTagName("table"),function(e){if(e.getAttr("data-chart")!==undefined){e.setAttr("style")}})},outputRule:function(e){utils.each(e.getNodesByTagName("table"),function(e){if(e.getAttr("data-chart")!==undefined){e.setAttr("style","display: none;")}})}};function t(e){var t=null,i=0;if(e.rows.length<2){return false}if(e.rows[0].cells.length<2){return false}t=e.rows[0].cells;i=t.length;for(var n=0,r;r=t[n];n++){if(r.tagName.toLowerCase()!=="th"){return false}}for(var n=1,o;o=e.rows[n];n++){if(o.cells.length!=i){return false}if(o.cells[0].tagName.toLowerCase()!=="th"){return false}for(var a=1,r;r=o.cells[a];a++){var s=utils.trim(r.innerText||r.textContent||"");s=s.replace(new RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,"");if(!/^\d*\.?\d+$/.test(s)){return false}}}return true}});UE.plugin.register("section",function(){function e(e){this.tag="";this.level=-1,this.dom=null;this.nextSection=null;this.previousSection=null;this.parentSection=null;this.startAddress=[];this.endAddress=[];this.children=[]}function t(t){var i=new e;return utils.extend(i,t)}function i(e,t){var i=t;for(var n=0;n<e.length;n++){if(!i.childNodes)return null;i=i.childNodes[e[n]]}return i}var n=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){n.fireEvent("updateSections")}},bindEvents:{ready:function(){n.fireEvent("updateSections");domUtils.on(n.body,"drop paste",function(){n.fireEvent("updateSections")})},afterexeccommand:function(e,t){if(t=="paragraph"){n.fireEvent("updateSections")}},keyup:function(e,t){var i=this,n=i.selection.getRange();if(n.collapsed!=true){i.fireEvent("updateSections")}else{var r=t.keyCode||t.which;if(r==13||r==8||r==46){i.fireEvent("updateSections")}}}},commands:{getsections:{execCommand:function(e,i){var n=i||["h1","h2","h3","h4","h5","h6"];for(var r=0;r<n.length;r++){if(typeof n[r]=="string"){n[r]=function(e){return function(t){return t.tagName==e.toUpperCase()}}(n[r])}else if(typeof n[r]!="function"){n[r]=function(e){return null}}}function o(e){for(var t=0;t<n.length;t++){if(n[t](e))return t}return-1}var a=this,s=t({level:-1,title:"root"}),l=s;function d(e,i){var n,r=null,s,c,u=e.childNodes;for(var f=0,h=u.length;f<h;f++){c=u[f];n=o(c);if(n>=0){var p=a.selection.getRange().selectNode(c).createAddress(true).startAddress,m=t({tag:c.tagName,title:c.innerText||c.textContent||"",level:n,dom:c,startAddress:utils.clone(p,[]),endAddress:utils.clone(p,[]),children:[]});l.nextSection=m;m.previousSection=l;s=l;while(n<=s.level){s=s.parentSection}m.parentSection=s;s.children.push(m);r=l=m}else{c.nodeType===1&&d(c,i);r&&r.endAddress[r.endAddress.length-1]++}}}d(a.body,s);return s},notNeedUndo:true},movesection:{execCommand:function(e,t,n,r){var o=this,a,s;if(!t||!n||n.level==-1)return;a=r?n.endAddress:n.startAddress;s=i(a,o.body);if(!a||!s||f(t.startAddress,t.endAddress,a))return;var l=i(t.startAddress,o.body),d=i(t.endAddress,o.body),c,u;if(r){c=d;while(c&&!(domUtils.getPosition(l,c)&domUtils.POSITION_FOLLOWING)){u=c.previousSibling;domUtils.insertAfter(s,c);if(c==l)break;c=u}}else{c=l;while(c&&!(domUtils.getPosition(c,d)&domUtils.POSITION_FOLLOWING)){u=c.nextSibling;s.parentNode.insertBefore(c,s);if(c==d)break;c=u}}o.fireEvent("updateSections");function f(e,t,i){var n=false,r=false;for(var o=0;o<e.length;o++){if(o>=i.length)break;if(i[o]>e[o]){n=true;break}else if(i[o]<e[o]){break}}for(var o=0;o<t.length;o++){if(o>=i.length)break;if(i[o]<e[o]){r=true;break}else if(i[o]>e[o]){break}}return n&&r}}},deletesection:{execCommand:function(e,t,i){var n=this;if(!t)return;function r(e){var t=n.body;for(var i=0;i<e.length;i++){if(!t.childNodes)return null;t=t.childNodes[e[i]]}return t}var o=r(t.startAddress),a=r(t.endAddress),s=o,l;if(!i){while(s&&domUtils.inDoc(a,n.document)&&!(domUtils.getPosition(s,a)&domUtils.POSITION_FOLLOWING)){l=s.nextSibling;domUtils.remove(s);s=l}}else{domUtils.remove(s)}n.fireEvent("updateSections")}},selectsection:{execCommand:function(e,t){if(!t&&!t.dom)return false;var i=this,n=i.selection.getRange(),r={startAddress:utils.clone(t.startAddress,[]),endAddress:utils.clone(t.endAddress,[])};r.endAddress[r.endAddress.length-1]++;n.moveToAddress(r).select().scrollToView();return true},notNeedUndo:true},scrolltosection:{execCommand:function(e,t){if(!t&&!t.dom)return false;var i=this,n=i.selection.getRange(),r={startAddress:t.startAddress,endAddress:t.endAddress};r.endAddress[r.endAddress.length-1]++;n.moveToAddress(r).scrollToView();return true},notNeedUndo:true}}}});UE.plugin.register("simpleupload",function(){var e=this,t=false,i;function n(){var n=i.offsetWidth||20,r=i.offsetHeight||20,o=document.createElement("iframe"),a="display:block;width:"+n+"px;height:"+r+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";domUtils.on(o,"load",function(){var i=(+new Date).toString(36),s,l,d;l=o.contentDocument||o.contentWindow.document;d=l.body;s=l.createElement("div");s.innerHTML='<form id="edui_form_'+i+'" target="edui_iframe_'+i+'" method="POST" enctype="multipart/form-data" action="'+e.getOpt("serverUrl")+'" '+'style="'+a+'">'+'<input id="edui_input_'+i+'" type="file" accept="image/*" name="'+e.options.imageFieldName+'" '+'style="'+a+'">'+"</form>"+'<iframe id="edui_iframe_'+i+'" name="edui_iframe_'+i+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>';s.className="edui-"+e.options.theme;s.id=e.ui.id+"_iframeupload";d.style.cssText=a;d.style.width=n+"px";d.style.height=r+"px";d.appendChild(s);if(d.parentNode){d.parentNode.style.width=n+"px";d.parentNode.style.height=n+"px"}var c=l.getElementById("edui_form_"+i);var u=l.getElementById("edui_input_"+i);var f=l.getElementById("edui_iframe_"+i);domUtils.on(u,"change",function(){if(!u.value)return;var t="loading_"+(+new Date).toString(36);var i=utils.serializeParam(e.queryCommandValue("serverparam"))||"";var n=e.getActionUrl(e.getOpt("imageActionName"));var r=e.getOpt("imageAllowFiles");e.focus();e.execCommand("inserthtml",'<img class="loadingclass" id="'+t+'" src="'+e.options.themePath+e.options.theme+'/images/spacer.gif" title="'+(e.getLang("simpleupload.loading")||"")+'" >');function o(){try{var i,n,r,s=(f.contentDocument||f.contentWindow.document).body,l=s.innerText||s.textContent||"";n=new Function("return "+l)();i=e.options.imageUrlPrefix+n.url;if(n.state=="SUCCESS"&&n.url){r=e.document.getElementById(t);r.setAttribute("src",i);r.setAttribute("_src",i);r.setAttribute("title",n.title||"");r.setAttribute("alt",n.original||"");r.removeAttribute("id");domUtils.removeClasses(r,"loadingclass")}else{a&&a(n.state)}}catch(t){a&&a(e.getLang("simpleupload.loadError"))}c.reset();domUtils.un(f,"load",o)}function a(i){if(t){var n=e.document.getElementById(t);n&&domUtils.remove(n);e.fireEvent("showmessage",{id:t,content:i,type:"error",timeout:4e3})}}if(!e.getOpt("imageActionName")){errorHandler(e.getLang("autoupload.errorLoadConfig"));return}var s=u.value,l=s?s.substr(s.lastIndexOf(".")):"";if(!l||r&&(r.join("")+".").indexOf(l.toLowerCase()+".")==-1){a(e.getLang("simpleupload.exceedTypeError"));return}domUtils.on(f,"load",o);c.action=utils.formatUrl(n+(n.indexOf("?")==-1?"?":"&")+i);c.submit()});var h;e.addListener("selectionchange",function(){clearTimeout(h);h=setTimeout(function(){var t=e.queryCommandState("simpleupload");if(t==-1){u.disabled="disabled"}else{u.disabled=false}},400)});t=true});o.style.cssText=a;i.appendChild(o)}return{bindEvents:{ready:function(){utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n"+".loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;"+"}",this.document)},simpleuploadbtnready:function(t,r){i=r;e.afterConfigReady(n)}},outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){if(/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))){e.parentNode.removeChild(e)}})},commands:{simpleupload:{queryCommandState:function(){return t?0:-1}}}}});UE.plugin.register("serverparam",function(){var e=this,t={};return{commands:{serverparam:{execCommand:function(e,i,n){if(i===undefined||i===null){t={}}else if(utils.isString(i)){if(n===undefined||n===null){delete t[i]}else{t[i]=n}}else if(utils.isObject(i)){utils.extend(t,i,true)}else if(utils.isFunction(i)){utils.extend(t,i(),true)}},queryCommandValue:function(){return t||{}}}}}});UE.plugin.register("insertfile",function(){var e=this;function t(e){var t=e.substr(e.lastIndexOf(".")+1).toLowerCase(),i={rar:"icon_rar.gif",zip:"icon_rar.gif",tar:"icon_rar.gif",gz:"icon_rar.gif",bz2:"icon_rar.gif",doc:"icon_doc.gif",docx:"icon_doc.gif",pdf:"icon_pdf.gif",mp3:"icon_mp3.gif",xls:"icon_xls.gif",chm:"icon_chm.gif",ppt:"icon_ppt.gif",pptx:"icon_ppt.gif",avi:"icon_mv.gif",rmvb:"icon_mv.gif",wmv:"icon_mv.gif",flv:"icon_mv.gif",swf:"icon_mv.gif",rm:"icon_mv.gif",exe:"icon_exe.gif",psd:"icon_psd.gif",txt:"icon_txt.gif",jpg:"icon_jpg.gif",png:"icon_jpg.gif",jpeg:"icon_jpg.gif",gif:"icon_jpg.gif",ico:"icon_jpg.gif",bmp:"icon_jpg.gif"};return i[t]?i[t]:i["txt"]}return{commands:{insertfile:{execCommand:function(i,n){n=utils.isArray(n)?n:[n];var r,o,a,s,l="",d=e.getOpt("UEDITOR_HOME_URL"),c=d+(d.substr(d.length-1)=="/"?"":"/")+"dialogs/attachment/fileTypeImages/";for(r=0;r<n.length;r++){o=n[r];a=c+t(o.url);s=o.title||o.url.substr(o.url.lastIndexOf("/")+1);l+='<p style="line-height: 16px;">'+'<img style="vertical-align: middle; margin-right: 2px;" src="'+a+'" _src="'+a+'" />'+'<a style="font-size:12px; color:#0066cc;" href="'+o.url+'" title="'+s+'">'+s+"</a>"+"</p>"}e.execCommand("insertHtml",l)}}}}});UE.plugins.xssFilter=function(){var e=UEDITOR_CONFIG;var t=e.whitList;function i(e){var i=e.tagName;var n=e.attrs;if(!t.hasOwnProperty(i)){e.parentNode.removeChild(e);return false}UE.utils.each(n,function(n,r){if(t[i].indexOf(r)===-1){e.setAttr(r)}})}if(t&&e.xssFilterRules){this.options.filterRules=function(){var e={};UE.utils.each(t,function(t,n){e[n]=function(e){return i(e)}});return e}()}var n=[];UE.utils.each(t,function(e,t){n.push(t)});if(t&&e.inputXssFilter){this.addInputRule(function(e){e.traversal(function(e){if(e.type!=="element"){return false}i(e)})})}if(t&&e.outputXssFilter){this.addOutputRule(function(e){e.traversal(function(e){if(e.type!=="element"){return false}i(e)})})}};var baidu=baidu||{};baidu.editor=baidu.editor||{};UE.ui=baidu.editor.ui={};(function(){var e=baidu.editor.browser,t=baidu.editor.dom.domUtils;var i="$EDITORUI";var n=window[i]={};var r="ID"+i;var o=0;var a=baidu.editor.ui.uiUtils={uid:function(e){return e?e[r]||(e[r]=++o):++o},hook:function(e,t){var i;if(e&&e._callbacks){i=e}else{i=function(){var t;if(e){t=e.apply(this,arguments)}var n=i._callbacks;var r=n.length;while(r--){var o=n[r].apply(this,arguments);if(t===undefined){t=o}}return t};i._callbacks=[]}i._callbacks.push(t);return i},createElementByHtml:function(e){var t=document.createElement("div");t.innerHTML=e;t=t.firstChild;t.parentNode.removeChild(t);return t},getViewportElement:function(){return e.ie&&e.quirks?document.body:document.documentElement},getClientRect:function(e){var i;try{i=e.getBoundingClientRect()}catch(e){i={left:0,top:0,height:0,width:0}}var n={left:Math.round(i.left),top:Math.round(i.top),height:Math.round(i.bottom-i.top),width:Math.round(i.right-i.left)};var r;while((r=e.ownerDocument)!==document&&(e=t.getWindow(r).frameElement)){i=e.getBoundingClientRect();n.left+=i.left;n.top+=i.top}n.bottom=n.top+n.height;n.right=n.left+n.width;return n},getViewportRect:function(){var e=a.getViewportElement();var t=(window.innerWidth||e.clientWidth)|0;var i=(window.innerHeight||e.clientHeight)|0;return{left:0,top:0,height:i,width:t,bottom:i,right:t}},setViewportOffset:function(e,i){var n;var r=a.getFixedLayer();if(e.parentNode===r){e.style.left=i.left+"px";e.style.top=i.top+"px"}else{t.setViewportOffset(e,i)}},getEventOffset:function(e){var t=e.target||e.srcElement;var i=a.getClientRect(t);var n=a.getViewportOffsetByEvent(e);return{left:n.left-i.left,top:n.top-i.top}},getViewportOffsetByEvent:function(e){var i=e.target||e.srcElement;var n=t.getWindow(i).frameElement;var r={left:e.clientX,top:e.clientY};if(n&&i.ownerDocument!==document){var o=a.getClientRect(n);r.left+=o.left;r.top+=o.top}return r},setGlobal:function(e,t){n[e]=t;return i+'["'+e+'"]'},unsetGlobal:function(e){delete n[e]},copyAttributes:function(i,n){var r=n.attributes;var o=r.length;while(o--){var a=r[o];if(a.nodeName!="style"&&a.nodeName!="class"&&(!e.ie||a.specified)){i.setAttribute(a.nodeName,a.nodeValue)}}if(n.className){t.addClass(i,n.className)}if(n.style.cssText){i.style.cssText+=";"+n.style.cssText}},removeStyle:function(e,t){if(e.style.removeProperty){e.style.removeProperty(t)}else if(e.style.removeAttribute){e.style.removeAttribute(t)}else throw""},contains:function(e,t){return e&&t&&(e===t?false:e.contains?e.contains(t):e.compareDocumentPosition(t)&16)},startDrag:function(e,t,i){var i=i||document;var n=e.clientX;var r=e.clientY;function o(e){var i=e.clientX-n;var o=e.clientY-r;t.ondragmove(i,o,e);if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}if(i.addEventListener){function a(e){i.removeEventListener("mousemove",o,true);i.removeEventListener("mouseup",a,true);window.removeEventListener("mouseup",a,true);t.ondragstop()}i.addEventListener("mousemove",o,true);i.addEventListener("mouseup",a,true);window.addEventListener("mouseup",a,true);e.preventDefault()}else{var s=e.srcElement;s.setCapture();function l(){s.releaseCapture();s.detachEvent("onmousemove",o);s.detachEvent("onmouseup",l);s.detachEvent("onlosecaptrue",l);t.ondragstop()}s.attachEvent("onmousemove",o);s.attachEvent("onmouseup",l);s.attachEvent("onlosecaptrue",l);e.returnValue=false}t.ondragstart()},getFixedLayer:function(){var t=document.getElementById("edui_fixedlayer");if(t==null){t=document.createElement("div");t.id="edui_fixedlayer";document.body.appendChild(t);if(e.ie&&e.version<=8){t.style.position="absolute";l();setTimeout(s)}else{t.style.position="fixed"}t.style.left="0";t.style.top="0";t.style.width="0";t.style.height="0"}return t},makeUnselectable:function(t){if(e.opera||e.ie&&e.version<9){t.unselectable="on";if(t.hasChildNodes()){for(var i=0;i<t.childNodes.length;i++){if(t.childNodes[i].nodeType==1){a.makeUnselectable(t.childNodes[i])}}}}else{if(t.style.MozUserSelect!==undefined){t.style.MozUserSelect="none"}else if(t.style.WebkitUserSelect!==undefined){t.style.WebkitUserSelect="none"}else if(t.style.KhtmlUserSelect!==undefined){t.style.KhtmlUserSelect="none"}}}};function s(){var e=document.getElementById("edui_fixedlayer");a.setViewportOffset(e,{left:0,top:0})}function l(e){t.on(window,"scroll",s);t.on(window,"resize",baidu.editor.utils.defer(s,0,true))}})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=baidu.editor.EventBase,n=baidu.editor.ui.UIBase=function(){};n.prototype={className:"",uiName:"",initOptions:function(e){var i=this;for(var n in e){i[n]=e[n]}this.id=this.id||"edui"+t.uid()},initUIBase:function(){this._globalKey=e.unhtml(t.setGlobal(this.id,this))},render:function(e){var i=this.renderHtml();var n=t.createElementByHtml(i);var r=domUtils.getElementsByTagName(n,"*");var o="edui-"+(this.theme||this.editor.options.theme);var a=document.getElementById("edui_fixedlayer");for(var s=0,l;l=r[s++];){domUtils.addClass(l,o)}domUtils.addClass(n,o);if(a){a.className="";domUtils.addClass(a,o)}var d=this.getDom();if(d!=null){d.parentNode.replaceChild(n,d);t.copyAttributes(n,d)}else{if(typeof e=="string"){e=document.getElementById(e)}e=e||t.getFixedLayer();domUtils.addClass(e,o);e.appendChild(n)}this.postRender()},getDom:function(e){if(!e){return document.getElementById(this.id)}else{return document.getElementById(this.id+"_"+e)}},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(e){var t="edui-"+this.uiName;return e.replace(/##/g,this.id).replace(/%%-/g,this.uiName?t+"-":"").replace(/%%/g,(this.uiName?t:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var e=this.getDom();if(e)baidu.editor.dom.domUtils.remove(e);t.unsetGlobal(this.id)}};e.inherits(n,i)})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,i=baidu.editor.ui.Separator=function(e){this.initOptions(e);this.initSeparator()};i.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}};e.inherits(i,t)})();(function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,i=baidu.editor.ui.UIBase,n=baidu.editor.ui.uiUtils;var r=baidu.editor.ui.Mask=function(e){this.initOptions(e);this.initUIBase()};r.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var e=this;t.on(window,"resize",function(){setTimeout(function(){if(!e.isHidden()){e._fill()}})})},show:function(e){this._fill();this.getDom().style.display="";this.getDom().style.zIndex=e},hide:function(){this.getDom().style.display="none";this.getDom().style.zIndex=""},isHidden:function(){return this.getDom().style.display=="none"},_onMouseDown:function(){return false},_onClick:function(e,t){this.fireEvent("click",e,t)},_fill:function(){var e=this.getDom();var t=n.getViewportRect();e.style.width=t.width+"px";e.style.height=t.height+"px"}};e.inherits(r,i)})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=baidu.editor.dom.domUtils,n=baidu.editor.ui.UIBase,r=baidu.editor.ui.Popup=function(e){this.initOptions(e);this.initPopup()};var o=[];function a(e,t){for(var i=0;i<o.length;i++){var n=o[i];if(!n.isHidden()){if(n.queryAutoHide(t)!==false){if(e&&/scroll/gi.test(e.type)&&n.className=="edui-wordpastepop")return;n.hide()}}}if(o.length)n.editor.fireEvent("afterhidepop")}r.postHide=a;var s=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];r.prototype={SHADOW_RADIUS:5,content:null,_hidden:false,autoRender:true,canSideLeft:true,canSideUp:true,initPopup:function(){this.initUIBase();o.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;">'+' <div id="##_body" class="edui-popup-body">'+' <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe>'+' <div class="edui-shadow"></div>'+' <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div>"+" </div>"+"</div>"},getContentHtmlTpl:function(){if(this.content){if(typeof this.content=="string"){return this.content}return this.content.renderHtml()}else{return""}},_UIBase_postRender:n.prototype.postRender,postRender:function(){if(this.content instanceof n){this.content.postRender()}if(this.captureWheel&&!this.captured){this.captured=true;var e=(document.documentElement.clientHeight||document.body.clientHeight)-80,r=this.getDom().offsetHeight,o=t.getClientRect(this.combox.getDom()).top,a=this.getDom("content"),s=this.getDom("body").getElementsByTagName("iframe"),l=this;s.length&&(s=s[0]);while(o+r>e){r-=30}a.style.height=r+"px";s&&(s.style.height=r+"px");if(window.XMLHttpRequest){i.on(a,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}if(e.wheelDelta){a.scrollTop-=e.wheelDelta/120*60}else{a.scrollTop-=e.detail/-3*60}})}else{i.on(this.getDom(),"mousewheel",function(e){e.returnValue=false;l.getDom("content").scrollTop-=e.wheelDelta/120*60})}}this.fireEvent("postRenderAfter");this.hide(true);this._UIBase_postRender()},_doAutoRender:function(){if(!this.getDom()&&this.autoRender){this.render()}},mesureSize:function(){var e=this.getDom("content");return t.getClientRect(e)},fitSize:function(){if(this.captureWheel&&this.sized){return this.__size}this.sized=true;var e=this.getDom("body");e.style.width="";e.style.height="";var t=this.mesureSize();if(this.captureWheel){e.style.width=-(-20-t.width)+"px";var i=parseInt(this.getDom("content").style.height,10);!window.isNaN(i)&&(t.height=i)}else{e.style.width=t.width+"px"}e.style.height=t.height+"px";this.__size=t;this.captureWheel&&(this.getDom("content").style.overflow="auto");return t},showAnchor:function(e,i){this.showAnchorRect(t.getClientRect(e),i)},showAnchorRect:function(e,n,r){this._doAutoRender();var o=t.getViewportRect();this.getDom().style.visibility="hidden";this._show();var a=this.fitSize();var l,d,c,u;if(n){l=this.canSideLeft&&(e.right+a.width>o.right&&e.left>a.width);d=this.canSideUp&&(e.top+a.height>o.bottom&&e.bottom>a.height);c=l?e.left-a.width:e.right;u=d?e.bottom-a.height:e.top}else{l=this.canSideLeft&&(e.right+a.width>o.right&&e.left>a.width);d=this.canSideUp&&(e.top+a.height>o.bottom&&e.bottom>a.height);c=l?e.right-a.width:e.left;u=d?e.top-a.height:e.bottom}var f=this.getDom();t.setViewportOffset(f,{left:c,top:u});i.removeClasses(f,s);f.className+=" "+s[(d?1:0)*2+(l?1:0)];if(this.editor){f.style.zIndex=this.editor.container.style.zIndex*1+10;baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=f.style.zIndex-1}this.getDom().style.visibility="visible"},showAt:function(e){var t=e.left;var i=e.top;var n={left:t,top:i,right:t,bottom:i,height:0,width:0};this.showAnchorRect(n,false,true)},_show:function(){if(this._hidden){var e=this.getDom();e.style.display="";this._hidden=false;this.fireEvent("show")}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender();this._show()},hide:function(e){if(!this._hidden&&this.getDom()){this.getDom().style.display="none";this._hidden=true;if(!e){this.fireEvent("hide")}}},queryAutoHide:function(e){return!e||!t.contains(this.getDom(),e)}};e.inherits(r,n);i.on(document,"mousedown",function(e){var t=e.target||e.srcElement;a(e,t)});i.on(window,"scroll",function(e,t){a(e,t)})})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,i=baidu.editor.ui.ColorPicker=function(e){this.initOptions(e);this.noColorText=this.noColorText||this.editor.getLang("clearColor");this.initUIBase()};i.prototype={getHtmlTpl:function(){return r(this.noColorText,this.editor)},_onTableClick:function(e){var t=e.target||e.srcElement;var i=t.getAttribute("data-color");if(i){this.fireEvent("pickcolor",i)}},_onTableOver:function(e){var t=e.target||e.srcElement;var i=t.getAttribute("data-color");if(i){this.getDom("preview").style.backgroundColor=i}},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}};e.inherits(i,t);var n=("ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,"+"f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,"+"d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,"+"bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,"+"a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,"+"7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,"+"c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,").split(",");function r(e,t){var i='<div id="##" class="edui-colorpicker %%">'+'<div class="edui-colorpicker-topbar edui-clearfix">'+'<div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div>'+'<div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+e+"</div>"+"</div>"+'<table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0">'+'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+t.getLang("themeColor")+"</td> </tr>"+'<tr class="edui-colorpicker-tablefirstrow" >';for(var r=0;r<n.length;r++){if(r&&r%10===0){i+="</tr>"+(r==60?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+t.getLang("standardColor")+"</td></tr>":"")+"<tr"+(r==60?' class="edui-colorpicker-tablefirstrow"':"")+">"}i+=r<70?'<td style="padding: 0 2px;"><a hidefocus title="'+n[r]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell"'+' data-color="#'+n[r]+'"'+' style="background-color:#'+n[r]+";border:solid #ccc;"+(r<10||r>=60?"border-width:1px;":r>=10&&r<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"'+"></a></td>":""}i+="</tr></table></div>";return i}})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=baidu.editor.ui.UIBase;var n=baidu.editor.ui.TablePicker=function(e){this.initOptions(e);this.initTablePicker()};n.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){var e=this;return'<div id="##" class="edui-tablepicker %%">'+'<div class="edui-tablepicker-body">'+'<div class="edui-infoarea">'+'<span id="##_label" class="edui-label"></span>'+"</div>"+'<div class="edui-pickarea"'+' onmousemove="$$._onMouseMove(event, this);"'+' onmouseover="$$._onMouseOver(event, this);"'+' onmouseout="$$._onMouseOut(event, this);"'+' onclick="$$._onClick(event, this);"'+">"+'<div id="##_overlay" class="edui-overlay"></div>'+"</div>"+"</div>"+"</div>"},_UIBase_render:i.prototype.render,render:function(e){this._UIBase_render(e);this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(e,t){var i=this.getDom("overlay").style;var n=this.lengthOfCellSide;i.width=e*n+"px";i.height=t*n+"px";var r=this.getDom("label");r.innerHTML=e+this.editor.getLang("t_col")+" x "+t+this.editor.getLang("t_row");this.numCols=e;this.numRows=t},_onMouseOver:function(e,i){var n=e.relatedTarget||e.fromElement;if(!t.contains(i,n)&&i!==n){this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row");this.getDom("overlay").style.visibility=""}},_onMouseOut:function(e,i){var n=e.relatedTarget||e.toElement;if(!t.contains(i,n)&&i!==n){this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row");this.getDom("overlay").style.visibility="hidden"}},_onMouseMove:function(e,i){var n=this.getDom("overlay").style;var r=t.getEventOffset(e);var o=this.lengthOfCellSide;var a=Math.ceil(r.left/o);var s=Math.ceil(r.top/o);this._track(a,s)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}};e.inherits(n,i)})();(function(){var e=baidu.editor.browser,t=baidu.editor.dom.domUtils,i=baidu.editor.ui.uiUtils;var n='onmousedown="$$.Stateful_onMouseDown(event, this);"'+' onmouseup="$$.Stateful_onMouseUp(event, this);"'+(e.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);"'+' onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);"'+' onmouseout="$$.Stateful_onMouseOut(event, this);"');baidu.editor.ui.Stateful={alwalysHoverable:false,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl;this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var e=this._Stateful_dGetHtmlTpl();return e.replace(/stateful/g,function(){return n})},Stateful_onMouseEnter:function(e,t){this.target=t;if(!this.isDisabled()||this.alwalysHoverable){this.addState("hover");this.fireEvent("over")}},Stateful_onMouseLeave:function(e,t){if(!this.isDisabled()||this.alwalysHoverable){this.removeState("hover");this.removeState("active");this.fireEvent("out")}},Stateful_onMouseOver:function(e,t){var n=e.relatedTarget;if(!i.contains(t,n)&&t!==n){this.Stateful_onMouseEnter(e,t)}},Stateful_onMouseOut:function(e,t){var n=e.relatedTarget;if(!i.contains(t,n)&&t!==n){this.Stateful_onMouseLeave(e,t)}},Stateful_onMouseDown:function(e,t){if(!this.isDisabled()){this.addState("active")}},Stateful_onMouseUp:function(e,t){if(!this.isDisabled()){this.removeState("active")}},Stateful_postRender:function(){if(this.disabled&&!this.hasState("disabled")){this.addState("disabled")}},hasState:function(e){return t.hasClass(this.getStateDom(),"edui-state-"+e)},addState:function(e){if(!this.hasState(e)){this.getStateDom().className+=" edui-state-"+e}},removeState:function(e){if(this.hasState(e)){t.removeClasses(this.getStateDom(),["edui-state-"+e])}},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(e){if(!this.isDisabled()&&e){this.addState("checked")}else{this.removeState("checked")}},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(e){if(e){this.removeState("hover");this.removeState("checked");this.removeState("active");this.addState("disabled")}else{this.removeState("disabled")}}}})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,i=baidu.editor.ui.Stateful,n=baidu.editor.ui.Button=function(e){if(e.name){var t=e.name;var i=e.cssRules;if(!e.className){e.className="edui-for-"+t}e.cssRules=".edui-default  .edui-for-"+t+" .edui-icon {"+i+"}"}this.initOptions(e);this.initButton()};n.prototype={uiName:"button",label:"",title:"",showIcon:true,showText:true,cssRules:"",initButton:function(){this.initUIBase();this.Stateful_init();if(this.cssRules){e.cssRule("edui-customize-"+this.name+"-style",this.cssRules)}},getHtmlTpl:function(){return'<div id="##" class="edui-box %%">'+'<div id="##_state" stateful>'+'<div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div>"+"</div>"+"</div></div>"},postRender:function(){this.Stateful_postRender();this.setDisabled(this.disabled)},_onMouseDown:function(e){var t=e.target||e.srcElement,i=t&&t.tagName&&t.tagName.toLowerCase();if(i=="input"||i=="object"||i=="object"){return false}},_onClick:function(){if(!this.isDisabled()){this.fireEvent("click")}},setTitle:function(e){var t=this.getDom("label");t.innerHTML=e}};e.inherits(n,t);e.extend(n.prototype,i)})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=baidu.editor.dom.domUtils,n=baidu.editor.ui.UIBase,r=baidu.editor.ui.Stateful,o=baidu.editor.ui.SplitButton=function(e){this.initOptions(e);this.initSplitButton()};o.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase();this.Stateful_init();var e=this;if(this.popup!=null){var t=this.popup;this.popup=null;this.setPopup(t)}},_UIBase_postRender:n.prototype.postRender,postRender:function(){this.Stateful_postRender();this._UIBase_postRender()},setPopup:function(i){if(this.popup===i)return;if(this.popup!=null){this.popup.dispose()}i.addListener("show",e.bind(this._onPopupShow,this));i.addListener("hide",e.bind(this._onPopupHide,this));i.addListener("postrender",e.bind(function(){i.getDom("body").appendChild(t.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(t.getClientRect(this.getDom()).width+20)+'px"></div>'));i.getDom().className+=" "+this.className},this));this.popup=i},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%">'+"<div "+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body">'+'<div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);">'+'<div class="edui-box edui-icon"></div>'+"</div>"+'<div class="edui-box edui-splitborder"></div>'+'<div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div>'+"</div></div></div>"},showPopup:function(){var e=t.getClientRect(this.getDom());e.top-=this.popup.SHADOW_RADIUS;e.height+=this.popup.SHADOW_RADIUS;this.popup.showAnchorRect(e)},_onArrowClick:function(e,t){if(!this.isDisabled()){this.showPopup()}},_onButtonClick:function(){if(!this.isDisabled()){this.fireEvent("buttonclick")}}};e.inherits(o,n);e.extend(o.prototype,r,true)})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=baidu.editor.ui.ColorPicker,n=baidu.editor.ui.Popup,r=baidu.editor.ui.SplitButton,o=baidu.editor.ui.ColorButton=function(e){this.initOptions(e);this.initColorButton()};o.prototype={initColorButton:function(){var e=this;this.popup=new n({content:new i({noColorText:e.editor.getLang("clearColor"),editor:e.editor,onpickcolor:function(t,i){e._onPickColor(i)},onpicknocolor:function(t,i){e._onPickNoColor(i)}}),editor:e.editor});this.initSplitButton()},_SplitButton_postRender:r.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.getDom("button_body").appendChild(t.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>'));this.getDom().className+=" edui-colorbutton"},setColor:function(e){this.getDom("colorlump").style.backgroundColor=e;this.color=e},_onPickColor:function(e){if(this.fireEvent("pickcolor",e)!==false){this.setColor(e);this.popup.hide()}},_onPickNoColor:function(e){if(this.fireEvent("picknocolor")!==false){this.popup.hide()}}};e.inherits(o,r)})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.Popup,i=baidu.editor.ui.TablePicker,n=baidu.editor.ui.SplitButton,r=baidu.editor.ui.TableButton=function(e){this.initOptions(e);this.initTableButton()};r.prototype={initTableButton:function(){var e=this;this.popup=new t({content:new i({editor:e.editor,onpicktable:function(t,i,n){e._onPickTable(i,n)}}),editor:e.editor});this.initSplitButton()},_onPickTable:function(e,t){if(this.fireEvent("picktable",e,t)!==false){this.popup.hide()}}};e.inherits(r,n)})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase;var i=baidu.editor.ui.AutoTypeSetPicker=function(e){this.initOptions(e);this.initAutoTypeSetPicker()};i.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var e=this.editor,t=e.options.autotypeset,i=e.getLang("autoTypeSet");var n="textAlignValue"+e.uid,r="imageBlockLineValue"+e.uid,o="symbolConverValue"+e.uid;return'<div id="##" class="edui-autotypesetpicker %%">'+'<div class="edui-autotypesetpicker-body">'+"<table >"+'<tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(t["mergeEmptyline"]?"checked":"")+">"+i.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(t["removeEmptyline"]?"checked":"")+">"+i.delLine+"</td></tr>"+'<tr><td nowrap><input type="checkbox" name="removeClass" '+(t["removeClass"]?"checked":"")+">"+i.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(t["indent"]?"checked":"")+">"+i.indent+"</td></tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="textAlign" '+(t["textAlign"]?"checked":"")+">"+i.alignment+"</td>"+'<td colspan="2" id="'+n+'">'+'<input type="radio" name="'+n+'" value="left" '+(t["textAlign"]&&t["textAlign"]=="left"?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+n+'" value="center" '+(t["textAlign"]&&t["textAlign"]=="center"?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+n+'" value="right" '+(t["textAlign"]&&t["textAlign"]=="right"?"checked":"")+">"+e.getLang("justifyright")+"</td>"+"</tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="imageBlockLine" '+(t["imageBlockLine"]?"checked":"")+">"+i.imageFloat+"</td>"+'<td nowrap id="'+r+'">'+'<input type="radio" name="'+r+'" value="none" '+(t["imageBlockLine"]&&t["imageBlockLine"]=="none"?"checked":"")+">"+e.getLang("default")+'<input type="radio" name="'+r+'" value="left" '+(t["imageBlockLine"]&&t["imageBlockLine"]=="left"?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+r+'" value="center" '+(t["imageBlockLine"]&&t["imageBlockLine"]=="center"?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+r+'" value="right" '+(t["imageBlockLine"]&&t["imageBlockLine"]=="right"?"checked":"")+">"+e.getLang("justifyright")+"</td>"+"</tr>"+'<tr><td nowrap><input type="checkbox" name="clearFontSize" '+(t["clearFontSize"]?"checked":"")+">"+i.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(t["clearFontFamily"]?"checked":"")+">"+i.removeFontFamily+"</td></tr>"+'<tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(t["removeEmptyNode"]?"checked":"")+">"+i.removeHtml+"</td></tr>"+'<tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(t["pasteFilter"]?"checked":"")+">"+i.pasteFilter+"</td></tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="symbolConver" '+(t["bdc2sb"]||t["tobdc"]?"checked":"")+">"+i.symbol+"</td>"+'<td id="'+o+'">'+'<input type="radio" name="bdc" value="bdc2sb" '+(t["bdc2sb"]?"checked":"")+">"+i.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(t["tobdc"]?"checked":"")+">"+i.tobdc+""+"</td>"+'<td nowrap align="right"><button >'+i.run+"</button></td>"+"</tr>"+"</table>"+"</div>"+"</div>"},_UIBase_render:t.prototype.render};e.inherits(i,t)})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.Popup,i=baidu.editor.ui.AutoTypeSetPicker,n=baidu.editor.ui.SplitButton,r=baidu.editor.ui.AutoTypeSetButton=function(e){this.initOptions(e);this.initAutoTypeSetButton()};function o(t){var i={},n=t.getDom(),r=t.editor.uid,o=null,a=null,s=domUtils.getElementsByTagName(n,"input");for(var l=s.length-1,d;d=s[l--];){o=d.getAttribute("type");if(o=="checkbox"){a=d.getAttribute("name");i[a]&&delete i[a];if(d.checked){var c=document.getElementById(a+"Value"+r);if(c){if(/input/gi.test(c.tagName)){i[a]=c.value}else{var u=c.getElementsByTagName("input");for(var f=u.length-1,h;h=u[f--];){if(h.checked){i[a]=h.value;break}}}}else{i[a]=true}}else{i[a]=false}}else{i[d.getAttribute("value")]=d.checked}}var p=domUtils.getElementsByTagName(n,"select");for(var l=0,m;m=p[l++];){var g=m.getAttribute("name");i[g]=i[g]?m.value:""}e.extend(t.editor.options.autotypeset,i);t.editor.setPreferences("autotypeset",i)}r.prototype={initAutoTypeSetButton:function(){var e=this;this.popup=new t({content:new i({editor:e.editor}),editor:e.editor,hide:function(){if(!this._hidden&&this.getDom()){o(this);this.getDom().style.display="none";this._hidden=true;this.fireEvent("hide")}}});var n=0;this.popup.addListener("postRenderAfter",function(){var t=this;if(n)return;var i=this.getDom(),r=i.getElementsByTagName("button")[0];r.onclick=function(){o(t);e.editor.execCommand("autotypeset");t.hide()};domUtils.on(i,"click",function(i){var n=i.target||i.srcElement,r=e.editor.uid;if(n&&n.tagName=="INPUT"){if(n.name=="imageBlockLine"||n.name=="textAlign"||n.name=="symbolConver"){var a=n.checked,s=document.getElementById(n.name+"Value"+r),l=s.getElementsByTagName("input"),d={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"};for(var c=0;c<l.length;c++){if(a){if(l[c].value==d[n.name]){l[c].checked="checked"}}else{l[c].checked=false}}}if(n.name=="imageBlockLineValue"+r||n.name=="textAlignValue"+r||n.name=="bdc"){var u=n.parentNode.previousSibling.getElementsByTagName("input");u&&(u[0].checked=true)}o(t)}});n=1});this.initSplitButton()}};e.inherits(r,n)})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.Popup,i=baidu.editor.ui.Stateful,n=baidu.editor.ui.UIBase;var r=baidu.editor.ui.CellAlignPicker=function(e){this.initOptions(e);this.initSelected();this.initCellAlignPicker()};r.prototype={initSelected:function(){var e={valign:{top:0,middle:1,bottom:2},align:{left:0,center:1,right:2},count:3},t=-1;if(this.selected){this.selectedIndex=e.valign[this.selected.valign]*e.count+e.align[this.selected.align]}},initCellAlignPicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){var e=["left","center","right"],t=9,i=null,n=-1,r=[];for(var o=0;o<t;o++){i=this.selectedIndex===o?' class="edui-cellalign-selected" ':"";n=o%3;n===0&&r.push("<tr>");r.push('<td index="'+o+'" '+i+' stateful><div class="edui-icon edui-'+e[n]+'"></div></td>');n===2&&r.push("</tr>")}return'<div id="##" class="edui-cellalignpicker %%">'+'<div class="edui-cellalignpicker-body">'+'<table onclick="$$._onClick(event);">'+r.join("")+"</table>"+"</div>"+"</div>"},getStateDom:function(){return this.target},_onClick:function(e){var i=e.target||e.srcElement;if(/icon/.test(i.className)){this.items[i.parentNode.getAttribute("index")].onclick();t.postHide(e)}},_UIBase_render:n.prototype.render};e.inherits(r,n);e.extend(r.prototype,i,true)})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.Stateful,i=baidu.editor.ui.uiUtils,n=baidu.editor.ui.UIBase;var r=baidu.editor.ui.PastePicker=function(e){this.initOptions(e);this.initPastePicker()};r.prototype={initPastePicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div>'+'<div class="edui-pastecontainer">'+'<div class="edui-title">'+this.editor.getLang("pasteOpt")+"</div>"+'<div class="edui-button">'+'<div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful>'+'<div class="edui-richtxticon"></div></div>'+'<div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful>'+'<div class="edui-tagicon"></div></div>'+'<div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful>'+'<div class="edui-plaintxticon"></div></div>'+"</div>"+"</div>"+"</div>"},getStateDom:function(){return this.target},format:function(e){this.editor.ui._isTransfer=true;this.editor.fireEvent("pasteTransfer",e)},_onClick:function(e){var t=domUtils.getNextDomNode(e),n=i.getViewportRect().height,r=i.getClientRect(t);if(r.top+r.height>n)t.style.top=-r.height-e.offsetHeight+"px";else t.style.top="";if(/hidden/gi.test(domUtils.getComputedStyle(t,"visibility"))){t.style.visibility="visible";domUtils.addClass(e,"edui-state-opened")}else{t.style.visibility="hidden";domUtils.removeClasses(e,"edui-state-opened")}},_UIBase_render:n.prototype.render};e.inherits(r,n);e.extend(r.prototype,t,true)})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=baidu.editor.ui.UIBase,n=baidu.editor.ui.Toolbar=function(e){this.initOptions(e);this.initToolbar()};n.prototype={items:null,initToolbar:function(){this.items=this.items||[];this.initUIBase()},add:function(e,t){if(t===undefined){this.items.push(e)}else{this.items.splice(t,0,e)}},getHtmlTpl:function(){var e=[];for(var t=0;t<this.items.length;t++){e[t]=this.items[t].renderHtml()}return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+e.join("")+"</div>"},postRender:function(){var e=this.getDom();for(var i=0;i<this.items.length;i++){this.items[i].postRender()}t.makeUnselectable(e)},_onMouseDown:function(e){var t=e.target||e.srcElement,i=t&&t.tagName&&t.tagName.toLowerCase();if(i=="input"||i=="object"||i=="object"){return false}}};e.inherits(n,i)})();(function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,i=baidu.editor.ui.uiUtils,n=baidu.editor.ui.UIBase,r=baidu.editor.ui.Popup,o=baidu.editor.ui.Stateful,a=baidu.editor.ui.CellAlignPicker,s=baidu.editor.ui.Menu=function(e){this.initOptions(e);this.initMenu()};var l={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return true}};s.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[];this.initPopup();this.initItems()},initItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];if(t=="-"){this.items[e]=this.getSeparator()}else if(!(t instanceof d)){t.editor=this.editor;t.theme=this.editor.options.theme;this.items[e]=this.createItem(t)}}},getSeparator:function(){return l},createItem:function(e){e.menu=this;return new d(e)},_Popup_getContentHtmlTpl:r.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(this.items.length==0){return this._Popup_getContentHtmlTpl()}var e=[];for(var t=0;t<this.items.length;t++){var i=this.items[t];e[t]=i.renderHtml()}return'<div class="%%-body">'+e.join("")+"</div>"},_Popup_postRender:r.prototype.postRender,postRender:function(){var e=this;for(var n=0;n<this.items.length;n++){var r=this.items[n];r.ownerMenu=this;r.postRender()}t.on(this.getDom(),"mouseover",function(t){t=t||event;var n=t.relatedTarget||t.fromElement;var r=e.getDom();if(!i.contains(r,n)&&r!==n){e.fireEvent("over")}});this._Popup_postRender()},queryAutoHide:function(e){if(e){if(i.contains(this.getDom(),e)){return false}for(var t=0;t<this.items.length;t++){var n=this.items[t];if(n.queryAutoHide(e)===false){return false}}}},clearItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];clearTimeout(t._showingTimer);clearTimeout(t._closingTimer);if(t.subMenu){t.subMenu.destroy()}}this.items=[]},destroy:function(){if(this.getDom()){t.remove(this.getDom())}this.clearItems()},dispose:function(){this.destroy()}};e.inherits(s,r);var d=baidu.editor.ui.MenuItem=function(e){this.initOptions(e);this.initUIBase();this.Stateful_init();if(this.subMenu&&!(this.subMenu instanceof s)){if(e.className&&e.className.indexOf("aligntd")!=-1){var i=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment");this.subMenu=new r({content:new a(this.subMenu),parentMenu:i,editor:i.editor,destroy:function(){if(this.getDom()){t.remove(this.getDom())}}});this.subMenu.addListener("postRenderAfter",function(){t.on(this.getDom(),"mouseover",function(){i.addState("opened")})})}else{this.subMenu=new s(this.subMenu)}}};d.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:true,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);">'+'<div class="%%-body">'+this.renderLabelHtml()+"</div>"+"</div>"},postRender:function(){var e=this;this.addListener("over",function(){e.ownerMenu.fireEvent("submenuover",e);if(e.subMenu){e.delayShowSubMenu()}});if(this.subMenu){this.getDom().className+=" edui-hassubmenu";this.subMenu.render();this.addListener("out",function(){e.delayHideSubMenu()});this.subMenu.addListener("over",function(){clearTimeout(e._closingTimer);e._closingTimer=null;e.addState("opened")});this.ownerMenu.addListener("hide",function(){e.hideSubMenu()});this.ownerMenu.addListener("submenuover",function(t,i){if(i!==e){e.delayHideSubMenu()}});this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide;this.subMenu.queryAutoHide=function(t){if(t&&i.contains(e.getDom(),t)){return false}return this._bakQueryAutoHide(t)}}this.getDom().style.tabIndex="-1";i.makeUnselectable(this.getDom());this.Stateful_postRender()},delayShowSubMenu:function(){var e=this;if(!e.isDisabled()){e.addState("opened");clearTimeout(e._showingTimer);clearTimeout(e._closingTimer);e._closingTimer=null;e._showingTimer=setTimeout(function(){e.showSubMenu()},250)}},delayHideSubMenu:function(){var e=this;if(!e.isDisabled()){e.removeState("opened");clearTimeout(e._showingTimer);if(!e._closingTimer){e._closingTimer=setTimeout(function(){if(!e.hasState("opened")){e.hideSubMenu()}e._closingTimer=null},400)}}},renderLabelHtml:function(){return'<div class="edui-arrow"></div>'+'<div class="edui-box edui-icon"></div>'+'<div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(e){if(this.subMenu&&this.hasState("opened")){return this.subMenu.queryAutoHide(e)}},_onClick:function(e,t){if(this.hasState("disabled"))return;if(this.fireEvent("click",e,t)!==false){if(this.subMenu){this.showSubMenu()}else{r.postHide(e)}}},showSubMenu:function(){var e=i.getClientRect(this.getDom());e.right-=5;e.left+=2;e.width-=7;e.top-=4;e.bottom+=4;e.height+=8;this.subMenu.showAnchorRect(e,true,true)},hideSubMenu:function(){this.subMenu.hide()}};e.inherits(d,n);e.extend(d.prototype,o,true)})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=baidu.editor.ui.Menu,n=baidu.editor.ui.SplitButton,r=baidu.editor.ui.Combox=function(e){this.initOptions(e);this.initCombox()};r.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var e=this;this.items=this.items||[];for(var t=0;t<this.items.length;t++){var n=this.items[t];n.uiName="listitem";n.index=t;n.onclick=function(){e.selectByIndex(this.index)}}this.popup=new i({items:this.items,uiName:"list",editor:this.editor,captureWheel:true,combox:this});this.initSplitButton()},_SplitButton_postRender:n.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.setLabel(this.label||"");this.setValue(this.initValue||"")},showPopup:function(){var e=t.getClientRect(this.getDom());e.top+=1;e.bottom-=1;e.height-=2;this.popup.showAnchorRect(e)},getValue:function(){return this.value},setValue:function(e){var t=this.indexByValue(e);if(t!=-1){this.selectedIndex=t;this.setLabel(this.items[t].label);this.value=this.items[t].value}else{this.selectedIndex=-1;this.setLabel(this.getLabelForUnknowValue(e));this.value=e}},setLabel:function(e){this.getDom("button_body").innerHTML=e;this.label=e},getLabelForUnknowValue:function(e){return e},indexByValue:function(e){for(var t=0;t<this.items.length;t++){if(e==this.items[t].value){return t}}return-1},getItem:function(e){return this.items[e]},selectByIndex:function(e){if(e<this.items.length&&this.fireEvent("select",e)!==false){this.selectedIndex=e;this.value=this.items[e].value;this.setLabel(this.items[e].label)}}};e.inherits(r,n)})();(function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,i=baidu.editor.ui.uiUtils,n=baidu.editor.ui.Mask,r=baidu.editor.ui.UIBase,o=baidu.editor.ui.Button,a=baidu.editor.ui.Dialog=function(t){if(t.name){var i=t.name;var n=t.cssRules;if(!t.className){t.className="edui-for-"+i}if(n){t.cssRules=".edui-default .edui-for-"+i+" .edui-dialog-content  {"+n+"}"}}this.initOptions(e.extend({autoReset:true,draggable:true,onok:function(){},oncancel:function(){},onclose:function(e,t){return t?this.onok():this.oncancel()},holdScroll:false},t));this.initDialog()};var s;var l;var d;a.prototype={draggable:false,uiName:"dialog",initDialog:function(){var t=this,i=this.editor.options.theme;if(this.cssRules){e.cssRule("edui-customize-"+this.name+"-style",this.cssRules)}this.initUIBase();this.modalMask=s||(s=new n({className:"edui-dialog-modalmask",theme:i,onclick:function(){d&&d.close(false)}}));this.dragMask=l||(l=new n({className:"edui-dialog-dragmask",theme:i}));this.closeButton=new o({className:"edui-dialog-closebutton",title:t.closeDialog,theme:i,onclick:function(){t.close(false)}});this.fullscreen&&this.initResizeEvent();if(this.buttons){for(var r=0;r<this.buttons.length;r++){if(!(this.buttons[r]instanceof o)){this.buttons[r]=new o(e.extend(this.buttons[r],{editor:this.editor},true))}}}},initResizeEvent:function(){var e=this;t.on(window,"resize",function(){if(e._hidden||e._hidden===undefined){return}if(e.__resizeTimer){window.clearTimeout(e.__resizeTimer)}e.__resizeTimer=window.setTimeout(function(){e.__resizeTimer=null;var t=e.getDom(),n=e.getDom("content"),r=UE.ui.uiUtils.getClientRect(t),o=UE.ui.uiUtils.getClientRect(n),a=i.getViewportRect();n.style.width=a.width-r.width+o.width+"px";n.style.height=a.height-r.height+o.height+"px";t.style.width=a.width+"px";t.style.height=a.height+"px";e.fireEvent("resize")},100)})},fitSize:function(){var e=this.getDom("body");var t=this.mesureSize();e.style.width=t.width+"px";e.style.height=t.height+"px";return t},safeSetOffset:function(e){var t=this;var n=t.getDom();var r=i.getViewportRect();var o=i.getClientRect(n);var a=e.left;if(a+o.width>r.right){a=r.right-o.width}var s=e.top;if(s+o.height>r.bottom){s=r.bottom-o.height}n.style.left=Math.max(a,0)+"px";n.style.top=Math.max(s,0)+"px"},showAtCenter:function(){var e=i.getViewportRect();if(!this.fullscreen){this.getDom().style.display="";var n=this.fitSize();var r=this.getDom("titlebar").offsetHeight|0;var o=e.width/2-n.width/2;var a=e.height/2-(n.height-r)/2-r;var s=this.getDom();this.safeSetOffset({left:Math.max(o|0,0),top:Math.max(a|0,0)});if(!t.hasClass(s,"edui-state-centered")){s.className+=" edui-state-centered"}}else{var l=this.getDom(),d=this.getDom("content");l.style.display="block";var c=UE.ui.uiUtils.getClientRect(l),u=UE.ui.uiUtils.getClientRect(d);l.style.left="-100000px";d.style.width=e.width-c.width+u.width+"px";d.style.height=e.height-c.height+u.height+"px";l.style.width=e.width+"px";l.style.height=e.height+"px";l.style.left=0;this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}};document.documentElement.style.overflowX="hidden";document.documentElement.style.overflowY="hidden";document.body.style.overflowX="hidden";document.body.style.overflowY="hidden"}this._show()},getContentHtml:function(){var e="";if(typeof this.content=="string"){e=this.content}else if(this.iframeUrl){e='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'}return e},getHtmlTpl:function(){var e="";if(this.buttons){var t=[];for(var i=0;i<this.buttons.length;i++){t[i]=this.buttons[i].renderHtml()}e='<div class="%%-foot">'+'<div id="##_buttons" class="%%-buttons">'+t.join("")+"</div>"+"</div>"}return'<div id="##" class="%%"><div '+(!this.fullscreen?'class="%%"':'class="%%-wrap edui-dialog-fullscreen-flag"')+'><div id="##_body" class="%%-body">'+'<div class="%%-shadow"></div>'+'<div id="##_titlebar" class="%%-titlebar">'+'<div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);">'+'<span class="%%-caption">'+(this.title||"")+"</span>"+"</div>"+this.closeButton.renderHtml()+"</div>"+'<div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+e+"</div></div></div>"},postRender:function(){if(!this.modalMask.getDom()){this.modalMask.render();this.modalMask.hide()}if(!this.dragMask.getDom()){this.dragMask.render();this.dragMask.hide()}var e=this;this.addListener("show",function(){e.modalMask.show(this.getDom().style.zIndex-2)});this.addListener("hide",function(){e.modalMask.hide()});if(this.buttons){for(var n=0;n<this.buttons.length;n++){this.buttons[n].postRender()}}t.on(window,"resize",function(){setTimeout(function(){if(!e.isHidden()){e.safeSetOffset(i.getClientRect(e.getDom()))}})});this._hide()},mesureSize:function(){var e=this.getDom("body");var t=i.getClientRect(this.getDom("content")).width;var n=e.style;n.width=t;return i.getClientRect(e)},_onTitlebarMouseDown:function(e,n){if(this.draggable){var r;var o=i.getViewportRect();var a=this;i.startDrag(e,{ondragstart:function(){r=i.getClientRect(a.getDom());a.getDom("contmask").style.visibility="visible";a.dragMask.show(a.getDom().style.zIndex-1)},ondragmove:function(e,t){var i=r.left+e;var n=r.top+t;a.safeSetOffset({left:i,top:n})},ondragstop:function(){a.getDom("contmask").style.visibility="hidden";t.removeClasses(a.getDom(),["edui-state-centered"]);a.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml();this.fireEvent("dialogafterreset")},_show:function(){if(this._hidden){this.getDom().style.display="";this.editor.container.style.zIndex&&(this.getDom().style.zIndex=this.editor.container.style.zIndex*1+10);this._hidden=false;this.fireEvent("show");baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4}},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var e=this.getDom();e.style.display="none";e.style.zIndex="";e.style.width="";e.style.height="";this._hidden=true;this.fireEvent("hide")}},open:function(){if(this.autoReset){try{this.reset()}catch(e){this.render();this.open()}}this.showAtCenter();if(this.iframeUrl){try{this.getDom("iframe").focus()}catch(e){}}d=this},_onCloseButtonClick:function(e,t){this.close(false)},close:function(e){if(this.fireEvent("close",e)!==false){if(this.fullscreen){document.documentElement.style.overflowX=this._originalContext.html.overflowX;document.documentElement.style.overflowY=this._originalContext.html.overflowY;document.body.style.overflowX=this._originalContext.body.overflowX;document.body.style.overflowY=this._originalContext.body.overflowY;delete this._originalContext}this._hide();var i=this.getDom("content");var n=this.getDom("iframe");if(i&&n){var r=n.contentDocument||n.contentWindow.document;r&&(r.body.innerHTML="");t.remove(i)}}}};e.inherits(a,r)})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.Menu,i=baidu.editor.ui.SplitButton,n=baidu.editor.ui.MenuButton=function(e){this.initOptions(e);this.initMenuButton()};n.prototype={initMenuButton:function(){var e=this;this.uiName="menubutton";this.popup=new t({items:e.items,className:e.className,editor:e.editor});this.popup.addListener("show",function(){var t=this;for(var i=0;i<t.items.length;i++){t.items[i].removeState("checked");if(t.items[i].value==e._value){t.items[i].addState("checked");this.value=e._value}}});this.initSplitButton()},setValue:function(e){this._value=e}};e.inherits(n,i)})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.Popup,i=baidu.editor.ui.SplitButton,n=baidu.editor.ui.MultiMenuPop=function(e){this.initOptions(e);this.initMultiMenu()};n.prototype={initMultiMenu:function(){var e=this;this.popup=new t({content:"",editor:e.editor,iframe_rendered:false,onshow:function(){if(!this.iframe_rendered){this.iframe_rendered=true;this.getDom("content").innerHTML='<iframe id="'+e.id+'_iframe" src="'+e.iframeUrl+'" frameborder="0"></iframe>';e.editor.container.style.zIndex&&(this.getDom().style.zIndex=e.editor.container.style.zIndex*1+1)}}});this.onbuttonclick=function(){this.showPopup()};this.initSplitButton()}};e.inherits(n,i)})();(function(){var e=baidu.editor.ui,t=e.UIBase,i=e.uiUtils,n=baidu.editor.utils,r=baidu.editor.dom.domUtils;var o=[],a,s=false;var l=e.ShortCutMenu=function(e){this.initOptions(e);this.initShortCutMenu()};l.postHide=d;l.prototype={isHidden:true,SPACE:5,initShortCutMenu:function(){this.items=this.items||[];this.initUIBase();this.initItems();this.initEvent();o.push(this)},initEvent:function(){var e=this,t=e.editor.document;r.on(t,"mousemove",function(t){if(e.isHidden===false){if(e.getSubMenuMark()||e.eventType=="contextmenu")return;var i=true,n=e.getDom(),r=n.offsetWidth,o=n.offsetHeight,s=r/2+e.SPACE,l=o/2,d=Math.abs(t.screenX-e.left),c=Math.abs(t.screenY-e.top);clearTimeout(a);a=setTimeout(function(){if(c>0&&c<l){e.setOpacity(n,"1")}else if(c>l&&c<l+70){e.setOpacity(n,"0.5");i=false}else if(c>l+70&&c<l+140){e.hide()}if(i&&d>0&&d<s){e.setOpacity(n,"1")}else if(d>s&&d<s+70){e.setOpacity(n,"0.5")}else if(d>s+70&&d<s+140){e.hide()}})}});if(browser.chrome){r.on(t,"mouseout",function(t){var i=t.relatedTarget||t.toElement;if(i==null||i.tagName=="HTML"){e.hide()}})}e.editor.addListener("afterhidepop",function(){if(!e.isHidden){s=true}})},initItems:function(){if(n.isArray(this.items)){for(var t=0,i=this.items.length;t<i;t++){var r=this.items[t].toLowerCase();if(e[r]){this.items[t]=new e[r](this.editor);this.items[t].className+=" edui-shortcutsubmenu "}}}},setOpacity:function(e,t){if(browser.ie&&browser.version<9){e.style.filter="alpha(opacity = "+parseFloat(t)*100+");"}else{e.style.opacity=t}},getSubMenuMark:function(){s=false;var e=i.getFixedLayer();var t=r.getElementsByTagName(e,"div",function(e){return r.hasClass(e,"edui-shortcutsubmenu edui-popup")});for(var n=0,o;o=t[n++];){if(o.style.display!="none"){s=true}}return s},show:function(e,t){var n=this,o={},a=this.getDom(),s=i.getFixedLayer();function l(e){if(e.left<0){e.left=0}if(e.top<0){e.top=0}a.style.cssText="position:absolute;left:"+e.left+"px;top:"+e.top+"px;"}function d(e){if(!e.tagName){e=e.getDom()}o.left=parseInt(e.style.left);o.top=parseInt(e.style.top);o.top-=a.offsetHeight+15;l(o)}n.eventType=e.type;a.style.cssText="display:block;left:-9999px";if(e.type=="contextmenu"&&t){var c=r.getElementsByTagName(s,"div","edui-contextmenu")[0];if(c){d(c)}else{n.editor.addListener("aftershowcontextmenu",function(e,t){d(t)})}}else{o=i.getViewportOffsetByEvent(e);o.top-=a.offsetHeight+n.SPACE;o.left+=n.SPACE+20;l(o);n.setOpacity(a,.2)}n.isHidden=false;n.left=e.screenX+a.offsetWidth/2-n.SPACE;n.top=e.screenY-a.offsetHeight/2-n.SPACE;if(n.editor){a.style.zIndex=n.editor.container.style.zIndex*1+10;s.style.zIndex=a.style.zIndex-1}},hide:function(){if(this.getDom()){this.getDom().style.display="none"}this.isHidden=true},postRender:function(){if(n.isArray(this.items)){for(var e=0,t;t=this.items[e++];){t.postRender()}}},getHtmlTpl:function(){var e;if(n.isArray(this.items)){e=[];for(var t=0;t<this.items.length;t++){e[t]=this.items[t].renderHtml()}e=e.join("")}else{e=this.items}return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+e+"</div>"}};n.inherits(l,t);function d(e){var t=e.target||e.srcElement,i=r.findParent(t,function(e){return r.hasClass(e,"edui-shortcutmenu")||r.hasClass(e,"edui-popup")},true);if(!i){for(var n=0,a;a=o[n++];){a.hide()}}}r.on(document,"mousedown",function(e){d(e)});r.on(window,"scroll",function(e){d(e)})})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,i=baidu.editor.ui.Breakline=function(e){this.initOptions(e);this.initSeparator()};i.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}};e.inherits(i,t)})();(function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,i=baidu.editor.ui.UIBase,n=baidu.editor.ui.Message=function(e){this.initOptions(e);this.initMessage()};n.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%">'+' <div id="##_closer" class="edui-message-closer"></div>'+' <div id="##_body" class="edui-message-body edui-message-type-info">'+' <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe>'+' <div class="edui-shadow"></div>'+' <div id="##_content" class="edui-message-content">'+"  </div>"+" </div>"+"</div>"},reset:function(e){var t=this;if(!e.keepshow){clearTimeout(this.timer);t.timer=setTimeout(function(){t.hide()},e.timeout||4e3)}e.content!==undefined&&t.setContent(e.content);e.type!==undefined&&t.setType(e.type);t.show()},postRender:function(){var e=this,i=this.getDom("closer");i&&t.on(i,"click",function(){e.hide()})},setContent:function(e){this.getDom("content").innerHTML=e},setType:function(e){e=e||"info";var t=this.getDom("body");t.className=t.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+e)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var e=this.getDom("body").match(/edui-message-type-([\w-]+)/);return e?e[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var e=this.getDom();if(e){e.style.display="none";e.parentNode&&e.parentNode.removeChild(e)}}};e.inherits(n,i)})();(function(){var e=baidu.editor.utils;var t=baidu.editor.ui;var i=t.Dialog;t.buttons={};t.Dialog=function(e){var t=new i(e);t.addListener("hide",function(){if(t.editor){var e=t.editor;try{if(browser.gecko){var i=e.window.scrollY,n=e.window.scrollX;e.body.focus();e.window.scrollTo(n,i)}else{e.focus()}}catch(e){}}});return t};var n={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"};var r=["undo","redo","formatmatch","bold","italic","underline","fontborder","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable","drafts"];for(var o=0,a;a=r[o++];){a=a.toLowerCase();t[a]=function(e){return function(i){var n=new t.Button({className:"edui-for-"+e,title:i.options.labelMap[e]||i.getLang("labelMap."+e)||"",onclick:function(){i.execCommand(e)},theme:i.options.theme,showText:false});t.buttons[e]=n;i.addListener("selectionchange",function(t,r,o){var a=i.queryCommandState(e);if(a==-1){n.setDisabled(true);n.setChecked(false)}else{if(!o){n.setDisabled(false);n.setChecked(a)}}});return n}}(a)}t.cleardoc=function(e){var i=new t.Button({className:"edui-for-cleardoc",title:e.options.labelMap.cleardoc||e.getLang("labelMap.cleardoc")||"",theme:e.options.theme,onclick:function(){if(confirm(e.getLang("confirmClear"))){e.execCommand("cleardoc")}}});t.buttons["cleardoc"]=i;e.addListener("selectionchange",function(){i.setDisabled(e.queryCommandState("cleardoc")==-1)});return i};var s={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var l in s){(function(e,i){for(var n=0,r;r=i[n++];){(function(i){t[e.replace("float","")+i]=function(n){var r=new t.Button({className:"edui-for-"+e.replace("float","")+i,title:n.options.labelMap[e.replace("float","")+i]||n.getLang("labelMap."+e.replace("float","")+i)||"",theme:n.options.theme,onclick:function(){n.execCommand(e,i)}});t.buttons[e]=r;n.addListener("selectionchange",function(t,o,a){r.setDisabled(n.queryCommandState(e)==-1);r.setChecked(n.queryCommandValue(e)==i&&!a)});return r}})(r)}})(l,s[l])}for(var o=0,a;a=["backcolor","forecolor"][o++];){t[a]=function(e){return function(i){var n=new t.ColorButton({className:"edui-for-"+e,color:"default",title:i.options.labelMap[e]||i.getLang("labelMap."+e)||"",editor:i,onpickcolor:function(t,n){i.execCommand(e,n)},onpicknocolor:function(){i.execCommand(e,"default");this.setColor("transparent");this.color="default"},onbuttonclick:function(){i.execCommand(e,this.color)}});t.buttons[e]=n;i.addListener("selectionchange",function(){n.setDisabled(i.queryCommandState(e)==-1)});return n}}(a)}var d={noOk:["searchreplace","help","spechars","webapp","preview"],ok:["attachment","anchor","link","insertimage","map","gmap","insertframe","wordimage","insertvideo","insertframe","edittip","edittable","edittd","scrawl","template","music","background","charts"]};for(var l in d){(function(i,r){for(var o=0,a;a=r[o++];){if(browser.opera&&a==="searchreplace"){continue}(function(r){t[r]=function(o,a,s){a=a||(o.options.iframeUrlMap||{})[r]||n[r];s=o.options.labelMap[r]||o.getLang("labelMap."+r)||"";var l;if(a){l=new t.Dialog(e.extend({iframeUrl:o.ui.mapUrl(a),editor:o,className:"edui-for-"+r,title:s,holdScroll:r==="insertimage",fullscreen:/charts|preview/.test(r),closeDialog:o.getLang("closeDialog")},i=="ok"?{buttons:[{className:"edui-okbutton",label:o.getLang("ok"),editor:o,onclick:function(){l.close(true)}},{className:"edui-cancelbutton",label:o.getLang("cancel"),editor:o,onclick:function(){l.close(false)}}]}:{}));o.ui._dialogs[r+"Dialog"]=l}var d=new t.Button({className:"edui-for-"+r,title:s,onclick:function(){if(l){switch(r){case"wordimage":var e=o.execCommand("wordimage");if(e&&e.length){l.render();l.open()}break;case"scrawl":if(o.queryCommandState("scrawl")!=-1){l.render();l.open()}break;default:l.render();l.open()}}},theme:o.options.theme,disabled:r=="scrawl"&&o.queryCommandState("scrawl")==-1||r=="charts"});t.buttons[r]=d;o.addListener("selectionchange",function(){var e={edittable:1};if(r in e)return;var t=o.queryCommandState(r);if(d.getDom()){d.setDisabled(t==-1);d.setChecked(t)}});return d}})(a.toLowerCase())}})(l,d[l])}t.snapscreen=function(e,i,r){r=e.options.labelMap["snapscreen"]||e.getLang("labelMap.snapscreen")||"";var o=new t.Button({className:"edui-for-snapscreen",title:r,onclick:function(){e.execCommand("snapscreen")},theme:e.options.theme});t.buttons["snapscreen"]=o;i=i||(e.options.iframeUrlMap||{})["snapscreen"]||n["snapscreen"];if(i){var a=new t.Dialog({iframeUrl:e.ui.mapUrl(i),editor:e,className:"edui-for-snapscreen",title:r,buttons:[{className:"edui-okbutton",label:e.getLang("ok"),editor:e,onclick:function(){a.close(true)}},{className:"edui-cancelbutton",label:e.getLang("cancel"),editor:e,onclick:function(){a.close(false)}}]});a.render();e.ui._dialogs["snapscreenDialog"]=a}e.addListener("selectionchange",function(){o.setDisabled(e.queryCommandState("snapscreen")==-1)});return o};t.insertcode=function(i,n,r){n=i.options["insertcode"]||[];r=i.options.labelMap["insertcode"]||i.getLang("labelMap.insertcode")||"";var o=[];e.each(n,function(e,t){o.push({label:e,value:t,theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var a=new t.Combox({editor:i,items:o,onselect:function(e,t){i.execCommand("insertcode",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:r,initValue:r,className:"edui-for-insertcode",indexByValue:function(e){if(e){for(var t=0,i;i=this.items[t];t++){if(i.value.indexOf(e)!=-1)return t}}return-1}});t.buttons["insertcode"]=a;i.addListener("selectionchange",function(e,t,n){if(!n){var o=i.queryCommandState("insertcode");if(o==-1){a.setDisabled(true)}else{a.setDisabled(false);var s=i.queryCommandValue("insertcode");if(!s){a.setValue(r);return}s&&(s=s.replace(/['"]/g,"").split(",")[0]);a.setValue(s)}}});return a};t.fontfamily=function(i,n,r){n=i.options["fontfamily"]||[];r=i.options.labelMap["fontfamily"]||i.getLang("labelMap.fontfamily")||"";if(!n.length)return;for(var o=0,a,s=[];a=n[o];o++){var l=i.getLang("fontfamily")[a.name]||"";(function(t,n){s.push({label:t,value:n,theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+e.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})})(a.label||l,a.val)}var d=new t.Combox({editor:i,items:s,onselect:function(e,t){i.execCommand("FontFamily",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:r,initValue:r,className:"edui-for-fontfamily",indexByValue:function(e){if(e){for(var t=0,i;i=this.items[t];t++){if(i.value.indexOf(e)!=-1)return t}}return-1}});t.buttons["fontfamily"]=d;i.addListener("selectionchange",function(e,t,n){if(!n){var r=i.queryCommandState("FontFamily");if(r==-1){d.setDisabled(true)}else{d.setDisabled(false);var o=i.queryCommandValue("FontFamily");o&&(o=o.replace(/['"]/g,"").split(",")[0]);d.setValue(o)}}});return d};t.fontsize=function(e,i,n){n=e.options.labelMap["fontsize"]||e.getLang("labelMap.fontsize")||"";i=i||e.options["fontsize"]||[];if(!i.length)return;var r=[];for(var o=0;o<i.length;o++){var a=i[o]+"px";r.push({label:a,value:a,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var s=new t.Combox({editor:e,items:r,title:n,initValue:n,onselect:function(t,i){e.execCommand("FontSize",this.items[i].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});t.buttons["fontsize"]=s;e.addListener("selectionchange",function(t,i,n){if(!n){var r=e.queryCommandState("FontSize");if(r==-1){s.setDisabled(true)}else{s.setDisabled(false);s.setValue(e.queryCommandValue("FontSize"))}}});return s};t.paragraph=function(i,n,r){r=i.options.labelMap["paragraph"]||i.getLang("labelMap.paragraph")||"";n=i.options["paragraph"]||[];if(e.isEmptyObject(n))return;var o=[];for(var a in n){o.push({value:a,label:n[a]||i.getLang("paragraph")[a],theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}})}var s=new t.Combox({editor:i,items:o,title:r,initValue:r,className:"edui-for-paragraph",onselect:function(e,t){i.execCommand("Paragraph",this.items[t].value)},onbuttonclick:function(){this.showPopup()}});t.buttons["paragraph"]=s;i.addListener("selectionchange",function(e,t,n){if(!n){var r=i.queryCommandState("Paragraph");if(r==-1){s.setDisabled(true)}else{s.setDisabled(false);var o=i.queryCommandValue("Paragraph");var a=s.indexByValue(o);if(a!=-1){s.setValue(o)}else{s.setValue(s.initValue)}}}});return s};t.customstyle=function(e){var i=e.options["customstyle"]||[],n=e.options.labelMap["customstyle"]||e.getLang("labelMap.customstyle")||"";if(!i.length)return;var r=e.getLang("customstyle");for(var o=0,a=[],s;s=i[o++];){(function(t){var i={};i.label=t.label?t.label:r[t.name];i.style=t.style;i.className=t.className;i.tag=t.tag;a.push({label:i.label,value:i,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label">'+"<"+i.tag+" "+(i.className?' class="'+i.className+'"':"")+(i.style?' style="'+i.style+'"':"")+">"+i.label+"</"+i.tag+">"+"</div>"}})})(s)}var l=new t.Combox({editor:e,items:a,title:n,initValue:n,className:"edui-for-customstyle",onselect:function(t,i){e.execCommand("customstyle",this.items[i].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(e){for(var t=0,i;i=this.items[t++];){if(i.label==e){return t-1}}return-1}});t.buttons["customstyle"]=l;e.addListener("selectionchange",function(t,i,n){if(!n){var r=e.queryCommandState("customstyle");if(r==-1){l.setDisabled(true)}else{l.setDisabled(false);var o=e.queryCommandValue("customstyle");var a=l.indexByValue(o);if(a!=-1){l.setValue(o)}else{l.setValue(l.initValue)}}}});return l};t.inserttable=function(e,i,n){n=e.options.labelMap["inserttable"]||e.getLang("labelMap.inserttable")||"";var r=new t.TableButton({editor:e,title:n,className:"edui-for-inserttable",onpicktable:function(t,i,n){e.execCommand("InsertTable",{numRows:n,numCols:i,border:1})},onbuttonclick:function(){this.showPopup()}});t.buttons["inserttable"]=r;e.addListener("selectionchange",function(){r.setDisabled(e.queryCommandState("inserttable")==-1)});return r};t.lineheight=function(e){var i=e.options.lineheight||[];if(!i.length)return;for(var n=0,r,o=[];r=i[n++];){o.push({label:r,value:r,theme:e.options.theme,onclick:function(){e.execCommand("lineheight",this.value)}})}var a=new t.MenuButton({editor:e,className:"edui-for-lineheight",title:e.options.labelMap["lineheight"]||e.getLang("labelMap.lineheight")||"",items:o,onbuttonclick:function(){var t=e.queryCommandValue("LineHeight")||this.value;e.execCommand("LineHeight",t)}});t.buttons["lineheight"]=a;e.addListener("selectionchange",function(){var t=e.queryCommandState("LineHeight");if(t==-1){a.setDisabled(true)}else{a.setDisabled(false);var i=e.queryCommandValue("LineHeight");i&&a.setValue((i+"").replace(/cm/,""));a.setChecked(t)}});return a};var c=["top","bottom"];for(var u=0,f;f=c[u++];){(function(e){t["rowspacing"+e]=function(i){var n=i.options["rowspacing"+e]||[];if(!n.length)return null;for(var r=0,o,a=[];o=n[r++];){a.push({label:o,value:o,theme:i.options.theme,onclick:function(){i.execCommand("rowspacing",this.value,e)}})}var s=new t.MenuButton({editor:i,className:"edui-for-rowspacing"+e,title:i.options.labelMap["rowspacing"+e]||i.getLang("labelMap.rowspacing"+e)||"",items:a,onbuttonclick:function(){var t=i.queryCommandValue("rowspacing",e)||this.value;i.execCommand("rowspacing",t,e)}});t.buttons[e]=s;i.addListener("selectionchange",function(){var t=i.queryCommandState("rowspacing",e);if(t==-1){s.setDisabled(true)}else{s.setDisabled(false);var n=i.queryCommandValue("rowspacing",e);n&&s.setValue((n+"").replace(/%/,""));s.setChecked(t)}});return s}})(f)}var h=["insertorderedlist","insertunorderedlist"];for(var p=0,m;m=h[p++];){(function(e){t[e]=function(i){var n=i.options[e],r=function(){i.execCommand(e,this.value)},o=[];for(var a in n){o.push({label:n[a]||i.getLang()[e][a]||"",value:a,theme:i.options.theme,onclick:r})}var s=new t.MenuButton({editor:i,className:"edui-for-"+e,title:i.getLang("labelMap."+e)||"",items:o,onbuttonclick:function(){var t=i.queryCommandValue(e)||this.value;i.execCommand(e,t)}});t.buttons[e]=s;i.addListener("selectionchange",function(){var t=i.queryCommandState(e);if(t==-1){s.setDisabled(true)}else{s.setDisabled(false);var n=i.queryCommandValue(e);s.setValue(n);s.setChecked(t)}});return s}})(m)}t.fullscreen=function(e,i){i=e.options.labelMap["fullscreen"]||e.getLang("labelMap.fullscreen")||"";var n=new t.Button({className:"edui-for-fullscreen",title:i,theme:e.options.theme,onclick:function(){if(e.ui){e.ui.setFullScreen(!e.ui.isFullScreen())}this.setChecked(e.ui.isFullScreen())}});t.buttons["fullscreen"]=n;e.addListener("selectionchange",function(){var t=e.queryCommandState("fullscreen");n.setDisabled(t==-1);n.setChecked(e.ui.isFullScreen())});return n};t["emotion"]=function(e,i){var r="emotion";var o=new t.MultiMenuPop({title:e.options.labelMap[r]||e.getLang("labelMap."+r+"")||"",editor:e,className:"edui-for-"+r,iframeUrl:e.ui.mapUrl(i||(e.options.iframeUrlMap||{})[r]||n[r])});t.buttons[r]=o;e.addListener("selectionchange",function(){o.setDisabled(e.queryCommandState(r)==-1)});return o};t.autotypeset=function(e){var i=new t.AutoTypeSetButton({editor:e,title:e.options.labelMap["autotypeset"]||e.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){e.execCommand("autotypeset")}});t.buttons["autotypeset"]=i;e.addListener("selectionchange",function(){i.setDisabled(e.queryCommandState("autotypeset")==-1)});return i};t["simpleupload"]=function(e){var i="simpleupload",n=new t.Button({className:"edui-for-"+i,title:e.options.labelMap[i]||e.getLang("labelMap."+i)||"",onclick:function(){},theme:e.options.theme,showText:false});t.buttons[i]=n;e.addListener("ready",function(){var t=n.getDom("body"),i=t.children[0];e.fireEvent("simpleuploadbtnready",i)});e.addListener("selectionchange",function(t,r,o){var a=e.queryCommandState(i);if(a==-1){n.setDisabled(true);n.setChecked(false)}else{if(!o){n.setDisabled(false);n.setChecked(a)}}});return n}})();(function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=baidu.editor.ui.UIBase,n=baidu.editor.dom.domUtils;var r=[];function o(e){this.initOptions(e);this.initEditorUI()}o.prototype={uiName:"editor",initEditorUI:function(){this.editor.ui=this;this._dialogs={};this.initUIBase();this._initToolbars();var e=this.editor,t=this;e.addListener("ready",function(){e.getDialog=function(t){return e.ui._dialogs[t+"Dialog"]};n.on(e.window,"scroll",function(e){baidu.editor.ui.Popup.postHide(e)});e.ui._actualFrameWidth=e.options.initialFrameWidth;UE.browser.ie&&UE.browser.version===6&&e.container.ownerDocument.execCommand("BackgroundImageCache",false,true);if(e.options.elementPathEnabled){e.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+e.getLang("elementPathTip")+":</div>"}if(e.options.wordCount){function i(){a(e,t);n.un(e.document,"click",arguments.callee)}n.on(e.document,"click",i);e.ui.getDom("wordcount").innerHTML=e.getLang("wordCountTip")}e.ui._scale();if(e.options.scaleEnabled){if(e.autoHeightEnabled){e.disableAutoHeight()}t.enableScale()}else{t.disableScale()}if(!e.options.elementPathEnabled&&!e.options.wordCount&&!e.options.scaleEnabled){e.ui.getDom("elementpath").style.display="none";e.ui.getDom("wordcount").style.display="none";e.ui.getDom("scale").style.display="none"}if(!e.selection.isFocus())return;e.fireEvent("selectionchange",false,true)});e.addListener("mousedown",function(e,t){var i=t.target||t.srcElement;baidu.editor.ui.Popup.postHide(t,i);baidu.editor.ui.ShortCutMenu.postHide(t)});e.addListener("delcells",function(){if(UE.ui["edittip"]){new UE.ui["edittip"](e)}e.getDialog("edittip").open()});var i,r=false,o;e.addListener("afterpaste",function(){if(e.queryCommandState("pasteplain"))return;if(baidu.editor.ui.PastePicker){i=new baidu.editor.ui.Popup({content:new baidu.editor.ui.PastePicker({editor:e}),editor:e,className:"edui-wordpastepop"});i.render()}r=true});e.addListener("afterinserthtml",function(){clearTimeout(o);o=setTimeout(function(){if(i&&(r||e.ui._isTransfer)){if(i.isHidden()){var t=n.createElement(e.document,"span",{style:"line-height:0px;",innerHTML:"\ufeff"}),o=e.selection.getRange();o.insertNode(t);var a=getDomNode(t,"firstChild","previousSibling");a&&i.showAnchor(a.nodeType==3?a.parentNode:a);n.remove(t)}else{i.show()}delete e.ui._isTransfer;r=false}},200)});e.addListener("contextmenu",function(e,t){baidu.editor.ui.Popup.postHide(t)});e.addListener("keydown",function(e,t){if(i)i.dispose(t);var n=t.keyCode||t.which;if(t.altKey&&n==90){UE.ui.buttons["fullscreen"].onclick()}});e.addListener("wordcount",function(e){a(this,t)});function a(e,t){e.setOpt({wordCount:true,maximumWords:1e4,wordCountMsg:e.options.wordCountMsg||e.getLang("wordCountMsg"),wordOverFlowMsg:e.options.wordOverFlowMsg||e.getLang("wordOverFlowMsg")});var i=e.options,n=i.maximumWords,r=i.wordCountMsg,o=i.wordOverFlowMsg,a=t.getDom("wordcount");if(!i.wordCount){return}var s=e.getContentLength(true);if(s>n){a.innerHTML=o;e.fireEvent("wordcountoverflow")}else{a.innerHTML=r.replace("{#leave}",n-s).replace("{#count}",s)}}e.addListener("selectionchange",function(){if(e.options.elementPathEnabled){t[(e.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"]()}if(e.options.scaleEnabled){t[(e.queryCommandState("scale")==-1?"dis":"en")+"ableScale"]()}});var s=new baidu.editor.ui.Popup({editor:e,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide();e.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(t){this.hide();e.ui._dialogs[t]&&e.ui._dialogs[t].open()},_onImgSetFloat:function(t){this.hide();e.execCommand("imagefloat",t)},_setIframeAlign:function(e){var t=s.anchorEl;var i=t.cloneNode(true);switch(e){case-2:i.setAttribute("align","");break;case-1:i.setAttribute("align","left");break;case 1:i.setAttribute("align","right");break}t.parentNode.insertBefore(i,t);n.remove(t);s.anchorEl=i;s.showAnchor(s.anchorEl)},_updateIframe:function(){var t=e._iframe=s.anchorEl;if(n.hasClass(t,"ueditor_baidumap")){e.selection.getRange().selectNode(t).select();e.ui._dialogs.mapDialog.open();s.hide()}else{e.ui._dialogs.insertframeDialog.open();s.hide()}},_onRemoveButtonClick:function(t){e.execCommand(t);this.hide()},queryAutoHide:function(t){if(t&&t.ownerDocument==e.document){if(t.tagName.toLowerCase()=="img"||n.findParentByTagName(t,"a",true)){return t!==s.anchorEl}}return baidu.editor.ui.Popup.prototype.queryAutoHide.call(this,t)}});s.render();if(e.options.imagePopup){e.addListener("mouseover",function(t,i){i=i||window.event;var n=i.target||i.srcElement;if(e.ui._dialogs.insertframeDialog&&/iframe/gi.test(n.tagName)){var r=s.formatHtml("<nobr>"+e.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+e.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+e.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+e.getLang("justifyright")+"</span>&nbsp;&nbsp;"+' <span onclick="$$._updateIframe( this);" class="edui-clickable">'+e.getLang("modify")+"</span></nobr>");if(r){s.getDom("content").innerHTML=r;s.anchorEl=n;s.showAnchor(s.anchorEl)}else{s.hide()}}});e.addListener("selectionchange",function(t,i){if(!i)return;var r="",o="",a=e.selection.getRange().getClosedNode(),l=e.ui._dialogs;if(a&&a.tagName=="IMG"){var d="insertimageDialog";if(a.className.indexOf("edui-faked-video")!=-1||a.className.indexOf("edui-upload-video")!=-1){d="insertvideoDialog"}if(a.className.indexOf("edui-faked-webapp")!=-1){d="webappDialog"}if(a.src.indexOf("http://api.map.baidu.com")!=-1){d="mapDialog"}if(a.className.indexOf("edui-faked-music")!=-1){d="musicDialog"}if(a.src.indexOf("http://maps.google.com/maps/api/staticmap")!=-1){d="gmapDialog"}if(a.getAttribute("anchorname")){d="anchorDialog";r=s.formatHtml("<nobr>"+e.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+e.getLang("modify")+"</span>&nbsp;&nbsp;"+"<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+e.getLang("delete")+"</span></nobr>")}if(a.getAttribute("word_img")){e.word_img=[a.getAttribute("word_img")];d="wordimageDialog"}if(n.hasClass(a,"loadingclass")||n.hasClass(a,"loaderrorclass")){d=""}if(!l[d]){return}o="<nobr>"+e.getLang("property")+": "+'<span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+e.getLang("default")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+e.getLang("justifyleft")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+e.getLang("justifyright")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+e.getLang("justifycenter")+"</span>&nbsp;&nbsp;"+"<span onclick=\"$$._onImgEditButtonClick('"+d+'\');" class="edui-clickable">'+e.getLang("modify")+"</span></nobr>";!r&&(r=s.formatHtml(o))}if(e.ui._dialogs.linkDialog){var c=e.queryCommandValue("link");var u;if(c&&(u=c.getAttribute("_href")||c.getAttribute("href",2))){var f=u;if(u.length>30){f=u.substring(0,20)+"..."}if(r){r+='<div style="height:5px;"></div>'}r+=s.formatHtml("<nobr>"+e.getLang("anthorMsg")+': <a target="_blank" href="'+u+'" title="'+u+'" >'+f+"</a>"+' <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+e.getLang("modify")+"</span>"+' <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+e.getLang("clear")+"</span></nobr>");s.showAnchor(c)}}if(r){s.getDom("content").innerHTML=r;s.anchorEl=a||c;s.showAnchor(s.anchorEl)}else{s.hide()}})}},_initToolbars:function(){var t=this.editor;var i=this.toolbars||[];var n=[];for(var r=0;r<i.length;r++){var o=i[r];var a=new baidu.editor.ui.Toolbar({theme:t.options.theme});for(var s=0;s<o.length;s++){var l=o[s];var d=null;if(typeof l=="string"){l=l.toLowerCase();if(l=="|"){l="Separator"}if(l=="||"){l="Breakline"}if(baidu.editor.ui[l]){d=new baidu.editor.ui[l](t)}if(l=="fullscreen"){if(n&&n[0]){n[0].items.splice(0,0,d)}else{d&&a.items.splice(0,0,d)}continue}}else{d=l}if(d&&d.id){a.add(d)}}n[r]=a}e.each(UE._customizeUI,function(e,i){var n,r;if(e.id&&e.id!=t.key){return false}n=e.execFn.call(t,t,i);if(n){r=e.index;if(r===undefined){r=a.items.length}a.add(n,r)}});this.toolbars=n},getHtmlTpl:function(){return'<div id="##" class="%%">'+'<div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;">'+'<div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+"</div>"+'<div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div>'+'<div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div>'+'<div style="height:0;overflow:hidden;clear:both;"></div>'+"</div>"+'<div id="##_message_holder" class="%%-messageholder"></div>'+"</div>"+'<div id="##_iframeholder" class="%%-iframeholder">'+"</div>"+'<div id="##_bottombar" class="%%-bottomContainer"><table><tr>'+'<td id="##_elementpath" class="%%-bottombar"></td>'+'<td id="##_wordcount" class="%%-wordcount"></td>'+'<td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td>'+"</tr></table></div>"+'<div id="##_scalelayer"></div>'+"</div>"},showWordImageDialog:function(){this._dialogs["wordimageDialog"].open()},renderToolbarBoxHtml:function(){var e=[];for(var t=0;t<this.toolbars.length;t++){e.push(this.toolbars[t].renderHtml())}return e.join("")},setFullScreen:function(e){var t=this.editor,i=t.container.parentNode.parentNode;if(this._fullscreen!=e){this._fullscreen=e;this.editor.fireEvent("beforefullscreenchange",e);if(baidu.editor.browser.gecko){var n=t.selection.getRange().createBookmark()}if(e){while(i.tagName!="BODY"){var o=baidu.editor.dom.domUtils.getComputedStyle(i,"position");r.push(o);i.style.position="static";i=i.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow;this._bakBodyOverflow=document.body.style.overflow;this._bakAutoHeight=this.editor.autoHeightEnabled;this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop);this._bakEditorContaninerWidth=t.iframe.parentNode.offsetWidth;if(this._bakAutoHeight){t.autoHeightEnabled=false;this.editor.disableAutoHeight()}document.documentElement.style.overflow="hidden";window.scrollTo(0,window.scrollY);this._bakCssText=this.getDom().style.cssText;this._bakCssText1=this.getDom("iframeholder").style.cssText;t.iframe.parentNode.style.width="";this._updateFullScreen()}else{while(i.tagName!="BODY"){i.style.position=r.shift();i=i.parentNode}this.getDom().style.cssText=this._bakCssText;this.getDom("iframeholder").style.cssText=this._bakCssText1;if(this._bakAutoHeight){t.autoHeightEnabled=true;this.editor.enableAutoHeight()}document.documentElement.style.overflow=this._bakHtmlOverflow;document.body.style.overflow=this._bakBodyOverflow;t.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px";window.scrollTo(0,this._bakScrollTop)}if(browser.gecko&&t.body.contentEditable==="true"){var a=document.createElement("input");document.body.appendChild(a);t.body.contentEditable=false;setTimeout(function(){a.focus();setTimeout(function(){t.body.contentEditable=true;t.fireEvent("fullscreenchanged",e);t.selection.getRange().moveToBookmark(n).select(true);baidu.editor.dom.domUtils.remove(a);e&&window.scroll(0,0)},0)},0)}if(t.body.contentEditable==="true"){this.editor.fireEvent("fullscreenchanged",e);this.triggerLayout()}}},_updateFullScreen:function(){if(this._fullscreen){var e=t.getViewportRect();this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+e.width+"px;height:"+e.height+"px;z-index:"+(this.getDom().style.zIndex*1+100);t.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0});this.editor.setHeight(e.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),true);if(browser.gecko){try{window.onresize()}catch(e){}}}},_updateElementPath:function(){var e=this.getDom("elementpath"),t;if(this.elementPathEnabled&&(t=this.editor.queryCommandValue("elementpath"))){var i=[];for(var n=0,r;r=t[n];n++){i[n]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+n+'&quot;);">'+r+"</span>")}e.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+i.join(" &gt; ")+"</div>"}else{e.style.display="none"}},disableElementPath:function(){var e=this.getDom("elementpath");e.innerHTML="";e.style.display="none";this.elementPathEnabled=false},enableElementPath:function(){var e=this.getDom("elementpath");e.style.display="";this.elementPathEnabled=true;this._updateElementPath()},_scale:function(){var e=document,t=this.editor,i=t.container,r=t.document,o=this.getDom("toolbarbox"),a=this.getDom("bottombar"),s=this.getDom("scale"),l=this.getDom("scalelayer");var d=false,c=null,u=0,f=t.options.minFrameWidth,h=0,p=0,m=0,g=0;function v(){c=n.getXY(i);if(!u){u=t.options.minFrameHeight+o.offsetHeight+a.offsetHeight}l.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+i.offsetWidth+"px;height:"+i.offsetHeight+"px;z-index:"+(t.options.zIndex+1);n.on(e,"mousemove",b);n.on(r,"mouseup",w);n.on(e,"mouseup",w)}var y=this;this.editor.addListener("fullscreenchanged",function(e,t){if(t){y.disableScale()}else{if(y.editor.options.scaleEnabled){y.enableScale();var i=y.editor.document.createElement("span");y.editor.body.appendChild(i);y.editor.body.style.height=Math.max(n.getXY(i).y,y.editor.iframe.offsetHeight-20)+"px";n.remove(i)}}});function b(t){x();var i=t||window.event;h=i.pageX||e.documentElement.scrollLeft+i.clientX;p=i.pageY||e.documentElement.scrollTop+i.clientY;m=h-c.x;g=p-c.y;if(m>=f){d=true;l.style.width=m+"px"}if(g>=u){d=true;l.style.height=g+"px"}}function w(){if(d){d=false;t.ui._actualFrameWidth=l.offsetWidth-2;i.style.width=t.ui._actualFrameWidth+"px";t.setHeight(l.offsetHeight-a.offsetHeight-o.offsetHeight-2,true)}if(l){l.style.display="none"}x();n.un(e,"mousemove",b);n.un(r,"mouseup",w);n.un(e,"mouseup",w)}function x(){if(browser.ie)e.selection.clear();else window.getSelection().removeAllRanges()}this.enableScale=function(){if(t.queryCommandState("source")==1)return;s.style.display="";this.scaleEnabled=true;n.on(s,"mousedown",v)};this.disableScale=function(){s.style.display="none";this.scaleEnabled=false;n.un(s,"mousedown",v)}},isFullScreen:function(){return this._fullscreen},postRender:function(){i.prototype.postRender.call(this);for(var e=0;e<this.toolbars.length;e++){this.toolbars[e].postRender()}var t=this;var n,r=baidu.editor.dom.domUtils,o=function(){clearTimeout(n);n=setTimeout(function(){t._updateFullScreen()})};r.on(window,"resize",o);t.addListener("destroy",function(){r.un(window,"resize",o);clearTimeout(n)})},showToolbarMsg:function(e,t){this.getDom("toolbarmsg_label").innerHTML=e;this.getDom("toolbarmsg").style.display="";if(!t){var i=this.getDom("upload_dialog");i.style.display="none"}},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(e){return e?e.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var e=this.getDom();if(e.style.zoom=="1"){e.style.zoom="100%"}else{e.style.zoom="1"}}};e.inherits(o,baidu.editor.ui.UIBase);var a={};UE.ui.Editor=function(t){var i=new UE.Editor(t);i.options.editor=i;e.loadFile(document,{href:i.options.themePath+i.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var r=i.render;i.render=function(t){if(t.constructor===String){i.key=t;a[t]=i}e.domReady(function(){i.langIsReady?e():i.addListener("langReady",e);function e(){i.setOpt({labelMap:i.options.labelMap||i.getLang("labelMap")});new o(i.options);if(t){if(t.constructor===String){t=document.getElementById(t)}t&&t.getAttribute("name")&&(i.options.textarea=t.getAttribute("name"));if(t&&/script|textarea/gi.test(t.tagName)){var e=document.createElement("div");t.parentNode.insertBefore(e,t);var a=t.value||t.innerHTML;i.options.initialContent=/^[\t\r\n ]*$/.test(a)?i.options.initialContent:a.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><");t.className&&(e.className=t.className);t.style.cssText&&(e.style.cssText=t.style.cssText);if(/textarea/i.test(t.tagName)){i.textarea=t;i.textarea.style.display="none"}else{t.parentNode.removeChild(t)}if(t.id){e.id=t.id;n.removeAttributes(t,"id")}t=e;t.innerHTML=""}}n.addClass(t,"edui-"+i.options.theme);i.ui.render(t);var s=i.options;i.container=i.ui.getDom();var l=n.findParents(t,true);var d=[];for(var c=0,u;u=l[c];c++){d[c]=u.style.display;u.style.display="block"}if(s.initialFrameWidth){s.minFrameWidth=s.initialFrameWidth}else{s.minFrameWidth=s.initialFrameWidth=t.offsetWidth;var f=t.style.width;if(/%$/.test(f)){s.initialFrameWidth=f}}if(s.initialFrameHeight){s.minFrameHeight=s.initialFrameHeight}else{s.initialFrameHeight=s.minFrameHeight=t.offsetHeight}for(var c=0,u;u=l[c];c++){u.style.display=d[c]}if(t.style.height){t.style.height=""}i.container.style.width=s.initialFrameWidth+(/%$/.test(s.initialFrameWidth)?"":"px");i.container.style.zIndex=s.zIndex;r.call(i,i.ui.getDom("iframeholder"));i.fireEvent("afteruiready")}})};return i};UE.getEditor=function(e,t){var i=a[e];if(!i){i=a[e]=new UE.ui.Editor(t);i.render(e)}return i};UE.delEditor=function(e){var t;if(t=a[e]){t.key&&t.destroy();delete a[e]}};UE.registerUI=function(t,i,n,r){e.each(t.split(/\s+/),function(e){UE._customizeUI[e]={id:r,execFn:i,index:n}})}})();UE.registerUI("message",function(e){var t=baidu.editor.ui;var i=t.Message;var n;var r=[];var o=e;o.addListener("ready",function(){n=document.getElementById(o.ui.id+"_message_holder");a();setTimeout(function(){a()},500)});o.addListener("showmessage",function(e,t){t=utils.isString(t)?{content:t}:t;var s=new i({timeout:t.timeout,type:t.type,content:t.content,keepshow:t.keepshow,editor:o}),l=t.id||"msg_"+(+new Date).toString(36);s.render(n);r[l]=s;s.reset(t);a();return l});o.addListener("updatemessage",function(e,t,i){i=utils.isString(i)?{content:i}:i;var o=r[t];o.render(n);o&&o.reset(i)});o.addListener("hidemessage",function(e,t){var i=r[t];i&&i.hide()});function a(){var e=o.ui.getDom("toolbarbox");if(e){n.style.top=e.offsetHeight+3+"px"}n.style.zIndex=Math.max(o.options.zIndex,o.iframe.style.zIndex)+1}});UE.registerUI("autosave",function(e){var t=null,i=null;e.on("afterautosave",function(){clearTimeout(t);t=setTimeout(function(){if(i){e.trigger("hidemessage",i)}i=e.trigger("showmessage",{content:e.getLang("autosave.success"),timeout:2e3})},2e3)})})})();define("baidueditor",["zeroclipboard","ueditorconfig"],function(e){return function(){var t,i;i=function(e){window.ZeroClipboard=e};t=i.apply(e,arguments);return t||e.UE}}(this));require.config({urlArgs:"v="+requirejs.s.contexts._.config.config.site.version,packages:[{name:"moment",location:"../libs/moment",main:"moment"}],include:["css","layer","toastr","fast","backend","table","form","dragsort","drag","drop","addtabs","selectpage"],paths:{lang:"empty:",pagination:"require-pagination",form:"require-form",table:"require-table",upload:"require-upload",validator:"require-validator",drag:"jquery.drag.min",drop:"jquery.drop.min",echarts:"echarts.min","echarts-theme":"echarts-theme",adminlte:"adminlte","bootstrap-table-commonsearch":"bootstrap-table-commonsearch","bootstrap-table-template":"bootstrap-table-template",jquery:"../libs/jquery/dist/jquery.min",bootstrap:"../libs/bootstrap/dist/js/bootstrap.min","bootstrap-datetimepicker":"../libs/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min","bootstrap-select":"../libs/bootstrap-select/dist/js/bootstrap-select.min","bootstrap-select-lang":"../libs/bootstrap-select/dist/js/i18n/defaults-zh_CN","bootstrap-table":"../libs/bootstrap-table/dist/bootstrap-table.min","bootstrap-table-export":"../libs/bootstrap-table/dist/extensions/export/bootstrap-table-export.min","bootstrap-table-mobile":"../libs/bootstrap-table/dist/extensions/mobile/bootstrap-table-mobile","bootstrap-table-lang":"../libs/bootstrap-table/dist/locale/bootstrap-table-zh-CN","bootstrap-paginator":"../libs/bootstrap-paginator/bootstrap-paginator",tableexport:"../libs/tableExport.jquery.plugin/tableExport.min",dragsort:"../libs/dragsort/jquery.dragsort",qrcode:"../libs/jquery-qrcode/jquery.qrcode.min",sortable:"../libs/Sortable/Sortable.min",addtabs:"../libs/jquery-addtabs/jquery.addtabs",slimscroll:"../libs/jquery-slimscroll/jquery.slimscroll",summernote:"../libs/summernote/dist/lang/summernote-zh-CN.min","validator-core":"../libs/nice-validator/dist/jquery.validator","validator-lang":"../libs/nice-validator/dist/local/zh-CN",plupload:"../libs/plupload/js/plupload.min",toastr:"../libs/toastr/toastr",jstree:"../libs/jstree/dist/jstree.min",layer:"../libs/layer/src/layer",cookie:"../libs/jquery.cookie/jquery.cookie",cxselect:"../libs/jquery-cxselect/js/jquery.cxselect",template:"../libs/art-template/dist/template-native",selectpage:"../libs/selectpage/selectpage",citypicker:"../libs/city-picker/dist/js/city-picker.min","citypicker-data":"../libs/city-picker/dist/js/city-picker.data",baidueditor:"../libs/ueditor/ueditor.all",ueditorconfig:"../libs/ueditor/ueditor.config",zeroclipboard:"../libs/ueditor/third-party/zeroclipboard/ZeroClipboard"},shim:{addons:["backend"],bootstrap:["jquery"],"bootstrap-table":{deps:["bootstrap"],exports:"$.fn.bootstrapTable"},"bootstrap-table-lang":{deps:["bootstrap-table"],exports:"$.fn.bootstrapTable.defaults"},"bootstrap-table-export":{deps:["bootstrap-table","tableexport"],exports:"$.fn.bootstrapTable.defaults"},"bootstrap-table-mobile":{deps:["bootstrap-table"],exports:"$.fn.bootstrapTable.defaults"},"bootstrap-table-advancedsearch":{deps:["bootstrap-table"],exports:"$.fn.bootstrapTable.defaults"},"bootstrap-table-commonsearch":{deps:["bootstrap-table"],exports:"$.fn.bootstrapTable.defaults"},"bootstrap-table-template":{deps:["bootstrap-table","template"],exports:"$.fn.bootstrapTable.defaults"},tableexport:{deps:["jquery"],exports:"$.fn.extend"},slimscroll:{deps:["jquery"],exports:"$.fn.extend"},adminlte:{deps:["bootstrap","slimscroll"],exports:"$.AdminLTE"},"bootstrap-datetimepicker":["moment/locale/zh-cn"],"bootstrap-select":["css!../libs/bootstrap-select/dist/css/bootstrap-select.min.css"],"bootstrap-select-lang":["bootstrap-select"],summernote:["../libs/summernote/dist/summernote.min","css!../libs/summernote/dist/summernote.css"],jstree:["css!../libs/jstree/dist/themes/default/style.css"],plupload:{deps:["../libs/plupload/js/moxie.min"],exports:"plupload"},"validator-lang":["validator-core"],citypicker:["citypicker-data","css!../libs/city-picker/dist/css/city-picker.css"],baidueditor:{deps:["zeroclipboard","ueditorconfig"],exports:"UE",init:function(e){window.ZeroClipboard=e}}},baseUrl:requirejs.s.contexts._.config.config.site.cdnurl+"/assets/js/",map:{"*":{css:"../libs/require-css/css.min"}},waitSeconds:30,charset:"utf-8"});require(["jquery","bootstrap","baidueditor"],function(e,t,i){var n=requirejs.s.contexts._.config.config;window.Config=n;var r={};r["lang"]=n.moduleurl+"/ajax/lang?callback=define&controllername="+n.controllername;r["backend/"]="backend/";require.config({paths:r});i.Editor.prototype._bkGetActionUrl=i.Editor.prototype.getActionUrl;i.Editor.prototype.getActionUrl=function(e){if(e!="config"){return n.upload.editoruploadurl+"&action="+e}else{return this._bkGetActionUrl.call(this,e)}};e(function(){require(["fast"],function(e){require(["backend","addons"],function(e,i){if(n.jsname){require([n.jsname],function(e){e[n.actionname]!=t&&e[n.actionname]()},function(e){console.error(e)})}})})})});define("require-backend",function(){});define("../libs/require-css/css.min",[],function(){if("undefined"==typeof window)return{load:function(e,t,i){i()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)|AndroidWebKit\/([^ ;]*)/)||0,i=!1,n=!0;t[1]||t[7]?i=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]||t[8]?n=!1:t[4]&&(i=parseInt(t[4])<18);var r={};r.pluginBuilder="./css-builder";var o,a,s,l=function(){o=document.createElement("style"),e.appendChild(o),a=o.styleSheet||o.sheet},d=0,c=[],u=function(e){a.addImport(e),o.onload=function(){f()},d++,31==d&&(l(),d=0)},f=function(){s();var e=c.shift();return e?(s=e[1],void u(e[0])):void(s=null)},h=function(e,t){if(a&&a.addImport||l(),a&&a.addImport)s?c.push([e,t]):(u(e),s=t);else{o.textContent='@import "'+e+'";';var i=setInterval(function(){try{o.sheet.cssRules,clearInterval(i),t()}catch(e){}},10)}},p=function(t,i){var r=document.createElement("link");if(r.type="text/css",r.rel="stylesheet",n)r.onload=function(){r.onload=function(){},setTimeout(i,7)};else var o=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==r.href)return clearInterval(o),i()}},10);r.href=t,e.appendChild(r)};return r.normalize=function(e,t){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)},r.load=function(e,t,n,r){(i?h:p)(t.toUrl(e+".css"),n)},r});!function(e,t){var i=e.layui&&layui.define,n,r,o={getPath:function(){var e=document.scripts,t=e[e.length-1],i=t.src;if(t.getAttribute("merge"))return;return i.substring(0,i.lastIndexOf("/")+1)}(),config:{},end:{},minIndex:0,minLeft:[],btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],type:["dialog","page","iframe","loading","tips"]};var a={v:"3.0.3",ie:function(){var t=navigator.userAgent.toLowerCase();return!!e.ActiveXObject||"ActiveXObject"in e?(t.match(/msie\s(\d+)/)||[])[1]||"11":false}(),index:e.layer&&e.layer.v?1e5:0,path:o.getPath,config:function(e,t){e=e||{};a.cache=o.config=n.extend({},o.config,e);a.path=o.config.path||a.path;typeof e.extend==="string"&&(e.extend=[e.extend]);if(o.config.path)a.ready();if(!e.extend)return this;i?layui.addcss("modules/layer/"+e.extend):a.link("skin/"+e.extend);return this},link:function(t,i,r){if(!a.path)return;var o=n("head")[0],s=document.createElement("link");if(typeof i==="string")r=i;var l=(r||t).replace(/\.|\//g,"");var d="layuicss-"+l,c=0;s.rel="stylesheet";s.href=a.path+t;s.id=d;if(!n("#"+d)[0]){o.appendChild(s)}if(typeof i!=="function")return;(function t(){if(++c>8*1e3/100){return e.console&&console.error("layer.css: Invalid")}parseInt(n("#"+d).css("width"))===1989?i():setTimeout(t,100)})()},ready:function(e){var t="skinlayercss",n="303";i?layui.addcss("modules/layer/default/layer.css?v="+a.v+n,e,t):a.link("skin/default/layer.css?v="+a.v+n,e,t);return this},alert:function(e,t,i){var r=typeof t==="function";if(r)i=t;return a.open(n.extend({content:e,yes:i},r?{}:t))},confirm:function(e,t,i,r){var s=typeof t==="function";if(s){r=i;i=t}return a.open(n.extend({content:e,btn:o.btn,yes:i,btn2:r},s?{}:t))},msg:function(e,i,r){var s=typeof i==="function",d=o.config.skin;var c=(d?d+" "+d+"-msg":"")||"layui-layer-msg";var u=l.anim.length-1;if(s)r=i;return a.open(n.extend({content:e,time:3e3,shade:false,skin:c,title:false,closeBtn:false,btn:false,resize:false,end:r},s&&!o.config.skin?{skin:c+" layui-layer-hui",anim:u}:function(){i=i||{};if(i.icon===-1||i.icon===t&&!o.config.skin){i.skin=c+" "+(i.skin||"layui-layer-hui")}return i}()))},load:function(e,t){return a.open(n.extend({type:3,icon:e||0,resize:false,shade:.01},t))},tips:function(e,t,i){return a.open(n.extend({type:4,content:[e,t],closeBtn:false,time:3e3,shade:false,resize:false,fixed:false,maxWidth:210},i))}};var s=function(e){var t=this;t.index=++a.index;t.config=n.extend({},t.config,o.config,e);document.body?t.creat():setTimeout(function(){t.creat()},30)};s.pt=s.prototype;var l=["layui-layer",".layui-layer-title",".layui-layer-main",".layui-layer-dialog","layui-layer-iframe","layui-layer-content","layui-layer-btn","layui-layer-close"];l.anim=["layer-anim","layer-anim-01","layer-anim-02","layer-anim-03","layer-anim-04","layer-anim-05","layer-anim-06"];s.pt.config={type:0,shade:.3,fixed:true,move:l[1],title:"&#x4FE1;&#x606F;",offset:"auto",area:"auto",closeBtn:1,time:0,zIndex:19891014,maxWidth:360,anim:0,isOutAnim:true,icon:-1,moveType:1,resize:true,scrollbar:true,tips:2};s.pt.vessel=function(e,t){var i=this,r=i.index,a=i.config;var s=a.zIndex+r,d=typeof a.title==="object";var c=a.maxmin&&(a.type===1||a.type===2);var u=a.title?'<div class="layui-layer-title" style="'+(d?a.title[1]:"")+'">'+(d?a.title[0]:a.title)+"</div>":"";a.zIndex=s;t([a.shade?'<div class="layui-layer-shade" id="layui-layer-shade'+r+'" times="'+r+'" style="'+("z-index:"+(s-1)+"; background-color:"+(a.shade[1]||"#000")+"; opacity:"+(a.shade[0]||a.shade)+"; filter:alpha(opacity="+(a.shade[0]*100||a.shade*100)+");")+'"></div>':"",'<div class="'+l[0]+(" layui-layer-"+o.type[a.type])+((a.type==0||a.type==2)&&!a.shade?" layui-layer-border":"")+" "+(a.skin||"")+'" id="'+l[0]+r+'" type="'+o.type[a.type]+'" times="'+r+'" showtime="'+a.time+'" conType="'+(e?"object":"string")+'" style="z-index: '+s+"; width:"+a.area[0]+";height:"+a.area[1]+(a.fixed?"":";position:absolute;")+'">'+(e&&a.type!=2?"":u)+'<div id="'+(a.id||"")+'" class="layui-layer-content'+(a.type==0&&a.icon!==-1?" layui-layer-padding":"")+(a.type==3?" layui-layer-loading"+a.icon:"")+'">'+(a.type==0&&a.icon!==-1?'<i class="layui-layer-ico layui-layer-ico'+a.icon+'"></i>':"")+(a.type==1&&e?"":a.content||"")+"</div>"+'<span class="layui-layer-setwin">'+function(){var e=c?'<a class="layui-layer-min" href="javascript:;"><cite></cite></a><a class="layui-layer-ico layui-layer-max" href="javascript:;"></a>':"";a.closeBtn&&(e+='<a class="layui-layer-ico '+l[7]+" "+l[7]+(a.title?a.closeBtn:a.type==4?"1":"2")+'" href="javascript:;"></a>');return e}()+"</span>"+(a.btn?function(){var e="";typeof a.btn==="string"&&(a.btn=[a.btn]);for(var t=0,i=a.btn.length;t<i;t++){e+='<a class="'+l[6]+""+t+'">'+a.btn[t]+"</a>"}return'<div class="'+l[6]+" layui-layer-btn-"+(a.btnAlign||"")+'">'+e+"</div>"}():"")+(a.resize?'<span class="layui-layer-resize"></span>':"")+"</div>"],u,n('<div class="layui-layer-move"></div>'));return i};s.pt.creat=function(){var e=this,t=e.config,i=e.index,s,d=t.content,c=typeof d==="object",u=n("body");if(t.id&&n("#"+t.id)[0])return;if(typeof t.area==="string"){t.area=t.area==="auto"?["",""]:[t.area,""]}if(t.shift){t.anim=t.shift}if(a.ie==6){t.fixed=false}switch(t.type){case 0:t.btn="btn"in t?t.btn:o.btn[0];a.closeAll("dialog");break;case 2:var d=t.content=c?t.content:[t.content||"http://layer.layui.com","auto"];t.content='<iframe scrolling="'+(t.content[1]||"auto")+'" allowtransparency="true" id="'+l[4]+""+i+'" name="'+l[4]+""+i+'" onload="this.className=\'\';" class="layui-layer-load" frameborder="0" src="'+t.content[0]+'"></iframe>';break;case 3:delete t.title;delete t.closeBtn;t.icon===-1&&t.icon===0;a.closeAll("loading");break;case 4:c||(t.content=[t.content,"body"]);t.follow=t.content[1];t.content=t.content[0]+'<i class="layui-layer-TipsG"></i>';delete t.title;t.tips=typeof t.tips==="object"?t.tips:[t.tips,true];t.tipsMore||a.closeAll("tips");break}e.vessel(c,function(r,a,s){u.append(r[0]);c?function(){t.type==2||t.type==4?function(){n("body").append(r[1])}():function(){if(!d.parents("."+l[0])[0]){d.data("display",d.css("display")).show().addClass("layui-layer-wrap").wrap(r[1]);n("#"+l[0]+i).find("."+l[5]).before(a)}}()}():u.append(r[1]);n(".layui-layer-move")[0]||u.append(o.moveElem=s);e.layero=n("#"+l[0]+i);t.scrollbar||l.html.css("overflow","hidden").attr("layer-full",i)}).auto(i);t.type==2&&a.ie==6&&e.layero.find("iframe").attr("src",d[0]);t.type==4?e.tips():e.offset();if(t.fixed){r.on("resize",function(){e.offset();(/^\d+%$/.test(t.area[0])||/^\d+%$/.test(t.area[1]))&&e.auto(i);t.type==4&&e.tips()})}t.time<=0||setTimeout(function(){a.close(e.index)},t.time);e.move().callback();if(l.anim[t.anim]){e.layero.addClass(l.anim[t.anim])}if(t.isOutAnim){e.layero.data("isOutAnim",true)}};s.pt.auto=function(e){var t=this,i=t.config,o=n("#"+l[0]+e);if(i.area[0]===""&&i.maxWidth>0){if(a.ie&&a.ie<8&&i.btn){o.width(o.innerWidth())}o.outerWidth()>i.maxWidth&&o.width(i.maxWidth)}var s=[o.innerWidth(),o.innerHeight()];var d=o.find(l[1]).outerHeight()||0;var c=o.find("."+l[6]).outerHeight()||0;function u(e){e=o.find(e);e.height(s[1]-d-c-2*(parseFloat(e.css("padding-top"))|0))}switch(i.type){case 2:u("iframe");break;default:if(i.area[1]===""){if(i.fixed&&s[1]>=r.height()){s[1]=r.height();u("."+l[5])}}else{u("."+l[5])}break}return t};s.pt.offset=function(){var e=this,t=e.config,i=e.layero;var n=[i.outerWidth(),i.outerHeight()];var o=typeof t.offset==="object";e.offsetTop=(r.height()-n[1])/2;e.offsetLeft=(r.width()-n[0])/2;if(o){e.offsetTop=t.offset[0];e.offsetLeft=t.offset[1]||e.offsetLeft}else if(t.offset!=="auto"){if(t.offset==="t"){e.offsetTop=0}else if(t.offset==="r"){e.offsetLeft=r.width()-n[0]}else if(t.offset==="b"){e.offsetTop=r.height()-n[1]}else if(t.offset==="l"){e.offsetLeft=0}else if(t.offset==="lt"){e.offsetTop=0;e.offsetLeft=0}else if(t.offset==="lb"){e.offsetTop=r.height()-n[1];e.offsetLeft=0}else if(t.offset==="rt"){e.offsetTop=0;e.offsetLeft=r.width()-n[0]}else if(t.offset==="rb"){e.offsetTop=r.height()-n[1];e.offsetLeft=r.width()-n[0]}else{e.offsetTop=t.offset}}if(!t.fixed){e.offsetTop=/%$/.test(e.offsetTop)?r.height()*parseFloat(e.offsetTop)/100:parseFloat(e.offsetTop);e.offsetLeft=/%$/.test(e.offsetLeft)?r.width()*parseFloat(e.offsetLeft)/100:parseFloat(e.offsetLeft);e.offsetTop+=r.scrollTop();e.offsetLeft+=r.scrollLeft()}if(i.attr("minLeft")){e.offsetTop=r.height()-(i.find(l[1]).outerHeight()||0);e.offsetLeft=i.css("left")}i.css({top:e.offsetTop,left:e.offsetLeft})};s.pt.tips=function(){var e=this,t=e.config,i=e.layero;var o=[i.outerWidth(),i.outerHeight()],a=n(t.follow);if(!a[0])a=n("body");var s={width:a.outerWidth(),height:a.outerHeight(),top:a.offset().top,left:a.offset().left},d=i.find(".layui-layer-TipsG");var c=t.tips[0];t.tips[1]||d.remove();s.autoLeft=function(){if(s.left+o[0]-r.width()>0){s.tipLeft=s.left+s.width-o[0];d.css({right:12,left:"auto"})}else{s.tipLeft=s.left}};s.where=[function(){s.autoLeft();s.tipTop=s.top-o[1]-10;d.removeClass("layui-layer-TipsB").addClass("layui-layer-TipsT").css("border-right-color",t.tips[1])},function(){s.tipLeft=s.left+s.width+10;s.tipTop=s.top;d.removeClass("layui-layer-TipsL").addClass("layui-layer-TipsR").css("border-bottom-color",t.tips[1])},function(){s.autoLeft();s.tipTop=s.top+s.height+10;d.removeClass("layui-layer-TipsT").addClass("layui-layer-TipsB").css("border-right-color",t.tips[1])},function(){s.tipLeft=s.left-o[0]-10;s.tipTop=s.top;d.removeClass("layui-layer-TipsR").addClass("layui-layer-TipsL").css("border-bottom-color",t.tips[1])}];s.where[c-1]();if(c===1){s.top-(r.scrollTop()+o[1]+8*2)<0&&s.where[2]()}else if(c===2){r.width()-(s.left+s.width+o[0]+8*2)>0||s.where[3]()}else if(c===3){s.top-r.scrollTop()+s.height+o[1]+8*2-r.height()>0&&s.where[0]()}else if(c===4){o[0]+8*2-s.left>0&&s.where[1]()}i.find("."+l[5]).css({"background-color":t.tips[1],"padding-right":t.closeBtn?"30px":""});i.css({left:s.tipLeft-(t.fixed?r.scrollLeft():0),top:s.tipTop-(t.fixed?r.scrollTop():0)})};s.pt.move=function(){var e=this,t=e.config,i=n(document),s=e.layero,l=s.find(t.move),d=s.find(".layui-layer-resize"),c={};if(t.move){l.css("cursor","move")}l.on("mousedown",function(e){e.preventDefault();if(t.move){c.moveStart=true;c.offset=[e.clientX-parseFloat(s.css("left")),e.clientY-parseFloat(s.css("top"))];o.moveElem.css("cursor","move").show()}});d.on("mousedown",function(e){e.preventDefault();c.resizeStart=true;c.offset=[e.clientX,e.clientY];c.area=[s.outerWidth(),s.outerHeight()];o.moveElem.css("cursor","se-resize").show()});i.on("mousemove",function(i){if(c.moveStart){var n=i.clientX-c.offset[0],o=i.clientY-c.offset[1],l=s.css("position")==="fixed";i.preventDefault();c.stX=l?0:r.scrollLeft();c.stY=l?0:r.scrollTop();if(!t.moveOut){var d=r.width()-s.outerWidth()+c.stX,u=r.height()-s.outerHeight()+c.stY;n<c.stX&&(n=c.stX);n>d&&(n=d);o<c.stY&&(o=c.stY);o>u&&(o=u)}s.css({left:n,top:o})}if(t.resize&&c.resizeStart){var n=i.clientX-c.offset[0],o=i.clientY-c.offset[1];i.preventDefault();a.style(e.index,{width:c.area[0]+n,height:c.area[1]+o});c.isResize=true;t.resizing&&t.resizing(s)}}).on("mouseup",function(e){if(c.moveStart){delete c.moveStart;o.moveElem.hide();t.moveEnd&&t.moveEnd(s)}if(c.resizeStart){delete c.resizeStart;o.moveElem.hide()}});return e};s.pt.callback=function(){var e=this,t=e.layero,i=e.config;e.openLayer();if(i.success){if(i.type==2){t.find("iframe").on("load",function(){i.success(t,e.index)})}else{i.success(t,e.index)}}a.ie==6&&e.IE6(t);t.find("."+l[6]).children("a").on("click",function(){var r=n(this).index();if(r===0){if(i.yes){i.yes(e.index,t)}else if(i["btn1"]){i["btn1"](e.index,t)}else{a.close(e.index)}}else{var o=i["btn"+(r+1)]&&i["btn"+(r+1)](e.index,t);o===false||a.close(e.index)}});function r(){var n=i.cancel&&i.cancel(e.index,t);n===false||a.close(e.index)}t.find("."+l[7]).on("click",r);if(i.shadeClose){n("#layui-layer-shade"+e.index).on("click",function(){a.close(e.index)})}t.find(".layui-layer-min").on("click",function(){var n=i.min&&i.min(t);n===false||a.min(e.index,i)});t.find(".layui-layer-max").on("click",function(){if(n(this).hasClass("layui-layer-maxmin")){a.restore(e.index);i.restore&&i.restore(t)}else{a.full(e.index,i);setTimeout(function(){i.full&&i.full(t)},100)}});i.end&&(o.end[e.index]=i.end)};o.reselect=function(){n.each(n("select"),function(e,t){var i=n(this);if(!i.parents("."+l[0])[0]){i.attr("layer")==1&&n("."+l[0]).length<1&&i.removeAttr("layer").show()}i=null})};s.pt.IE6=function(e){n("select").each(function(e,t){var i=n(this);if(!i.parents("."+l[0])[0]){i.css("display")==="none"||i.attr({layer:"1"}).hide()}i=null})};s.pt.openLayer=function(){var e=this;a.zIndex=e.config.zIndex;a.setTop=function(e){var t=function(){a.zIndex++;e.css("z-index",a.zIndex+1)};a.zIndex=parseInt(e[0].style.zIndex);e.on("mousedown",t);return a.zIndex}};o.record=function(e){var t=[e.width(),e.height(),e.position().top,e.position().left+parseFloat(e.css("margin-left"))];e.find(".layui-layer-max").addClass("layui-layer-maxmin");e.attr({area:t})};o.rescollbar=function(e){if(l.html.attr("layer-full")==e){if(l.html[0].style.removeProperty){l.html[0].style.removeProperty("overflow")}else{l.html[0].style.removeAttribute("overflow")}l.html.removeAttr("layer-full")}};e.layer=a;a.getChildFrame=function(e,t){t=t||n("."+l[4]).attr("times");return n("#"+l[0]+t).find("iframe").contents().find(e)};a.getFrameIndex=function(e){return n("#"+e).parents("."+l[4]).attr("times")};a.iframeAuto=function(e){if(!e)return;var t=a.getChildFrame("html",e).outerHeight();var i=n("#"+l[0]+e);var r=i.find(l[1]).outerHeight()||0;var o=i.find("."+l[6]).outerHeight()||0;i.css({height:t+r+o});i.find("iframe").css({height:t})};a.iframeSrc=function(e,t){n("#"+l[0]+e).find("iframe").attr("src",t)};a.style=function(e,t,i){var r=n("#"+l[0]+e),a=r.find(".layui-layer-content"),s=r.attr("type"),d=r.find(l[1]).outerHeight()||0,c=r.find("."+l[6]).outerHeight()||0,u=r.attr("minLeft");if(s===o.type[3]||s===o.type[4]){return}if(!i){if(parseFloat(t.width)<=260){t.width=260}if(parseFloat(t.height)-d-c<=64){t.height=64+d+c}}r.css(t);c=r.find("."+l[6]).outerHeight();if(s===o.type[2]){r.find("iframe").css({height:parseFloat(t.height)-d-c})}else{a.css({height:parseFloat(t.height)-d-c-parseFloat(a.css("padding-top"))-parseFloat(a.css("padding-bottom"))})}};a.min=function(e,t){var i=n("#"+l[0]+e),s=i.find(l[1]).outerHeight()||0,d=i.attr("minLeft")||181*o.minIndex+"px",c=i.css("position");o.record(i);if(o.minLeft[0]){d=o.minLeft[0];o.minLeft.shift()}i.attr("position",c);a.style(e,{width:180,height:s,left:d,top:r.height()-s,position:"fixed",overflow:"hidden"},true);i.find(".layui-layer-min").hide();i.attr("type")==="page"&&i.find(l[4]).hide();o.rescollbar(e);if(!i.attr("minLeft")){o.minIndex++}i.attr("minLeft",d)};a.restore=function(e){var t=n("#"+l[0]+e),i=t.attr("area").split(",");var r=t.attr("type");a.style(e,{width:parseFloat(i[0]),height:parseFloat(i[1]),top:parseFloat(i[2]),left:parseFloat(i[3]),position:t.attr("position"),overflow:"visible"},true);t.find(".layui-layer-max").removeClass("layui-layer-maxmin");t.find(".layui-layer-min").show();t.attr("type")==="page"&&t.find(l[4]).show();o.rescollbar(e)};a.full=function(e){var t=n("#"+l[0]+e),i;o.record(t);if(!l.html.attr("layer-full")){l.html.css("overflow","hidden").attr("layer-full",e)}clearTimeout(i);i=setTimeout(function(){var i=t.css("position")==="fixed";a.style(e,{top:i?0:r.scrollTop(),left:i?0:r.scrollLeft(),width:r.width(),height:r.height()},true);t.find(".layui-layer-min").hide()},100)};a.title=function(e,t){var i=n("#"+l[0]+(t||a.index)).find(l[1]);i.html(e)};a.close=function(e){var t=n("#"+l[0]+e),i=t.attr("type"),r="layer-anim-close";if(!t[0])return;var s="layui-layer-wrap",d=function(){if(i===o.type[1]&&t.attr("conType")==="object"){t.children(":not(."+l[5]+")").remove();var r=t.find("."+s);for(var a=0;a<2;a++){r.unwrap()}r.css("display",r.data("display")).removeClass(s)}else{if(i===o.type[2]){try{var d=n("#"+l[4]+e)[0];d.contentWindow.document.write("");d.contentWindow.close();t.find("."+l[5])[0].removeChild(d)}catch(e){}}t[0].innerHTML="";t.remove()}typeof o.end[e]==="function"&&o.end[e]();delete o.end[e]};if(t.data("isOutAnim")){t.addClass(r)}n("#layui-layer-moves, #layui-layer-shade"+e).remove();a.ie==6&&o.reselect();o.rescollbar(e);if(t.attr("minLeft")){o.minIndex--;o.minLeft.push(t.attr("minLeft"))}if(a.ie&&a.ie<10||!t.data("isOutAnim")){d()}else{setTimeout(function(){d()},200)}};a.closeAll=function(e){n.each(n("."+l[0]),function(){var t=n(this);var i=e?t.attr("type")===e:1;i&&a.close(t.attr("times"));i=null})};var d=a.cache||{},c=function(e){return d.skin?" "+d.skin+" "+d.skin+"-"+e:""};a.prompt=function(e,t){var i="";e=e||{};if(typeof e==="function")t=e;if(e.area){var o=e.area;i='style="width: '+o[0]+"; height: "+o[1]+';"';delete e.area}var s,l=e.formType==2?'<textarea class="layui-layer-input"'+i+">"+(e.value||"")+"</textarea>":function(){return'<input type="'+(e.formType==1?"password":"text")+'" class="layui-layer-input" value="'+(e.value||"")+'">'}();var d=e.success;delete e.success;return a.open(n.extend({type:1,btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],content:l,skin:"layui-layer-prompt"+c("prompt"),maxWidth:r.width(),success:function(e){s=e.find(".layui-layer-input");s.focus();typeof d==="function"&&d(e)},resize:false,yes:function(i){var n=s.val();if(n===""){s.focus()}else if(n.length>(e.maxlength||500)){a.tips("&#x6700;&#x591A;&#x8F93;&#x5165;"+(e.maxlength||500)+"&#x4E2A;&#x5B57;&#x6570;",s,{tips:1})}else{t&&t(n,i,s)}}},e))};a.tab=function(e){e=e||{};var t=e.tab||{},i=e.success;delete e.success;return a.open(n.extend({type:1,skin:"layui-layer-tab"+c("tab"),resize:false,title:function(){var e=t.length,i=1,n="";if(e>0){n='<span class="layui-layer-tabnow">'+t[0].title+"</span>";for(;i<e;i++){n+="<span>"+t[i].title+"</span>"}}return n}(),content:'<ul class="layui-layer-tabmain">'+function(){var e=t.length,i=1,n="";if(e>0){n='<li class="layui-layer-tabli xubox_tab_layer">'+(t[0].content||"no content")+"</li>";for(;i<e;i++){n+='<li class="layui-layer-tabli">'+(t[i].content||"no  content")+"</li>"}}return n}()+"</ul>",success:function(t){var r=t.find(".layui-layer-title").children();var o=t.find(".layui-layer-tabmain").children();r.on("mousedown",function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=true;var i=n(this),r=i.index();i.addClass("layui-layer-tabnow").siblings().removeClass("layui-layer-tabnow");o.eq(r).show().siblings().hide();typeof e.change==="function"&&e.change(r)});typeof i==="function"&&i(t)}},e))};a.photos=function(t,i,r){var o={};t=t||{};if(!t.photos)return;var s=t.photos.constructor===Object;var l=s?t.photos:{},d=l.data||[];var u=l.start||0;o.imgIndex=(u|0)+1;t.img=t.img||"img";var f=t.success;delete t.success;if(!s){var h=n(t.photos),p=function(){d=[];h.find(t.img).each(function(e){var t=n(this);t.attr("layer-index",e);d.push({alt:t.attr("alt"),pid:t.attr("layer-pid"),src:t.attr("layer-src")||t.attr("src"),thumb:t.attr("src")})})};p();if(d.length===0)return;i||h.on("click",t.img,function(){var e=n(this),i=e.attr("layer-index");a.photos(n.extend(t,{photos:{start:i,data:d,tab:t.tab},full:t.full}),true);p()});if(!i)return}else if(d.length===0){return a.msg("&#x6CA1;&#x6709;&#x56FE;&#x7247;")}o.imgprev=function(e){o.imgIndex--;if(o.imgIndex<1){o.imgIndex=d.length}o.tabimg(e)};o.imgnext=function(e,t){o.imgIndex++;if(o.imgIndex>d.length){o.imgIndex=1;if(t){return}}o.tabimg(e)};o.keyup=function(e){if(!o.end){var t=e.keyCode;e.preventDefault();if(t===37){o.imgprev(true)}else if(t===39){o.imgnext(true)}else if(t===27){a.close(o.index)}}};o.tabimg=function(e){if(d.length<=1)return;l.start=o.imgIndex-1;a.close(o.index);return a.photos(t,true,e);setTimeout(function(){a.photos(t,true,e)},200)};o.event=function(){o.bigimg.hover(function(){o.imgsee.show()},function(){o.imgsee.hide()});o.bigimg.find(".layui-layer-imgprev").on("click",function(e){e.preventDefault();o.imgprev()});o.bigimg.find(".layui-layer-imgnext").on("click",function(e){e.preventDefault();o.imgnext()});n(document).on("keyup",o.keyup)};function m(e,t,i){var n=new Image;n.src=e;if(n.complete){return t(n)}n.onload=function(){n.onload=null;t(n)};n.onerror=function(e){n.onerror=null;i(e)}}o.loadi=a.load(1,{shade:"shade"in t?false:.9,scrollbar:false});m(d[u].src,function(i){a.close(o.loadi);o.index=a.open(n.extend({type:1,id:"layui-layer-photos",area:function(){var r=[i.width,i.height];var o=[n(e).width()-100,n(e).height()-100];if(!t.full&&(r[0]>o[0]||r[1]>o[1])){var a=[r[0]/o[0],r[1]/o[1]];if(a[0]>a[1]){r[0]=r[0]/a[0];r[1]=r[1]/a[0]}else if(a[0]<a[1]){r[0]=r[0]/a[1];r[1]=r[1]/a[1]}}return[r[0]+"px",r[1]+"px"]}(),title:false,shade:.9,shadeClose:true,closeBtn:false,move:".layui-layer-phimg img",moveType:1,scrollbar:false,moveOut:true,isOutAnim:false,skin:"layui-layer-photos"+c("photos"),content:'<div class="layui-layer-phimg">'+'<img src="'+d[u].src+'" alt="'+(d[u].alt||"")+'" layer-pid="'+d[u].pid+'">'+'<div class="layui-layer-imgsee">'+(d.length>1?'<span class="layui-layer-imguide"><a href="javascript:;" class="layui-layer-iconext layui-layer-imgprev"></a><a href="javascript:;" class="layui-layer-iconext layui-layer-imgnext"></a></span>':"")+'<div class="layui-layer-imgbar" style="display:'+(r?"block":"")+'"><span class="layui-layer-imgtit"><a href="javascript:;">'+(d[u].alt||"")+"</a><em>"+o.imgIndex+"/"+d.length+"</em></span></div>"+"</div>"+"</div>",success:function(e,i){o.bigimg=e.find(".layui-layer-phimg");o.imgsee=e.find(".layui-layer-imguide,.layui-layer-imgbar");o.event(e);t.tab&&t.tab(d[u],e);typeof f==="function"&&f(e)},end:function(){o.end=true;n(document).off("keyup",o.keyup)}},t))},function(){a.close(o.loadi);a.msg("&#x5F53;&#x524D;&#x56FE;&#x7247;&#x5730;&#x5740;&#x5F02;&#x5E38;<br>&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x4E0B;&#x4E00;&#x5F20;&#xFF1F;",{time:3e4,btn:["&#x4E0B;&#x4E00;&#x5F20;","&#x4E0D;&#x770B;&#x4E86;"],yes:function(){d.length>1&&o.imgnext(true,true)}})})};o.run=function(t){n=t;r=n(e);l.html=n("html");a.open=function(e){var t=new s(e);return t.index}};e.layui&&layui.define?(a.ready(),layui.define("jquery",function(t){a.path=layui.cache.dir;o.run(layui.jquery);e.layer=a;t("layer",a)})):typeof define==="function"&&define.amd?define("layer",["jquery"],function(){o.run(e.jQuery);return a}):function(){o.run(e.jQuery);a.ready()}()}(window);(function(e){e("toastr",["jquery"],function(e){return function(){var t;var i;var n=0;var r={error:"error",info:"info",success:"success",warning:"warning"};var o={clear:h,remove:p,error:s,getContainer:l,info:d,options:{},subscribe:c,success:u,version:"2.1.3",warning:f};var a;return o;function s(e,t,i){return w({type:r.error,iconClass:x().iconClasses.error,message:e,optionsOverride:i,title:t})}function l(i,n){if(!i){i=x()}t=e("#"+i.containerId);if(t.length){return t}if(n){t=v(i)}return t}function d(e,t,i){return w({type:r.info,iconClass:x().iconClasses.info,message:e,optionsOverride:i,title:t})}function c(e){i=e}function u(e,t,i){return w({type:r.success,iconClass:x().iconClasses.success,message:e,optionsOverride:i,title:t})}function f(e,t,i){return w({type:r.warning,iconClass:x().iconClasses.warning,message:e,optionsOverride:i,title:t})}function h(e,i){var n=x();if(!t){l(n)}if(!g(e,n,i)){m(n)}}function p(i){var n=x();if(!t){l(n)}if(i&&e(":focus",i).length===0){C(i);return}if(t.children().length){t.remove()}}function m(i){var n=t.children();for(var r=n.length-1;r>=0;r--){g(e(n[r]),i)}}function g(t,i,n){var r=n&&n.force?n.force:false;if(t&&(r||e(":focus",t).length===0)){t[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){C(t)}});return true}return false}function v(i){t=e("<div/>").attr("id",i.containerId).addClass(i.positionClass);t.appendTo(e(i.target));return t}function y(){return{tapToDismiss:true,toastClass:"toast",containerId:"toast-container",debug:false,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:undefined,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:undefined,closeMethod:false,closeDuration:false,closeEasing:false,closeOnHover:true,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:false,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:true,preventDuplicates:false,progressBar:false,progressClass:"toast-progress",rtl:false}}function b(e){if(!i){return}i(e)}function w(i){var r=x();var o=i.iconClass||r.iconClass;if(typeof i.optionsOverride!=="undefined"){r=e.extend(r,i.optionsOverride);o=i.optionsOverride.iconClass||o}if(A(r,i)){return}n++;t=l(r,true);var s=null;var d=e("<div/>");var c=e("<div/>");var u=e("<div/>");var f=e("<div/>");var h=e(r.closeHtml);var p={intervalId:null,hideEta:null,maxHideTime:null};var m={toastId:n,state:"visible",startTime:new Date,options:r,map:i};v();_();w();b(m);if(r.debug&&console){console.log(m)}return d;function g(e){if(e==null){e=""}return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function v(){T();S();k();N();U();R();E();y()}function y(){var e="";switch(i.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}d.attr("aria-live",e)}function w(){if(r.closeOnHover){d.hover(O,D)}if(!r.onclick&&r.tapToDismiss){d.click(I)}if(r.closeButton&&h){h.click(function(e){if(e.stopPropagation){e.stopPropagation()}else if(e.cancelBubble!==undefined&&e.cancelBubble!==true){e.cancelBubble=true}if(r.onCloseClick){r.onCloseClick(e)}I(true)})}if(r.onclick){d.click(function(e){r.onclick(e);I()})}}function _(){d.hide();d[r.showMethod]({duration:r.showDuration,easing:r.showEasing,complete:r.onShown});if(r.timeOut>0){s=setTimeout(I,r.timeOut);p.maxHideTime=parseFloat(r.timeOut);p.hideEta=(new Date).getTime()+p.maxHideTime;if(r.progressBar){p.intervalId=setInterval(L,10)}}}function T(){if(i.iconClass){d.addClass(r.toastClass).addClass(o)}}function E(){if(r.newestOnTop){t.prepend(d)}else{t.append(d)}}function S(){if(i.title){var e=i.title;if(r.escapeHtml){e=g(i.title)}c.append(e).addClass(r.titleClass);d.append(c)}}function k(){if(i.message){var e=i.message;if(r.escapeHtml){e=g(i.message)}u.append(e).addClass(r.messageClass);d.append(u)}}function N(){if(r.closeButton){h.addClass(r.closeClass).attr("role","button");d.prepend(h)}}function U(){if(r.progressBar){f.addClass(r.progressClass);d.prepend(f)}}function R(){if(r.rtl){d.addClass("rtl")}}function A(e,t){if(e.preventDuplicates){if(t.message===a){return true}else{a=t.message}}return false}function I(t){var i=t&&r.closeMethod!==false?r.closeMethod:r.hideMethod;var n=t&&r.closeDuration!==false?r.closeDuration:r.hideDuration;var o=t&&r.closeEasing!==false?r.closeEasing:r.hideEasing;if(e(":focus",d).length&&!t){return}clearTimeout(p.intervalId);return d[i]({duration:n,easing:o,complete:function(){C(d);clearTimeout(s);if(r.onHidden&&m.state!=="hidden"){r.onHidden()}m.state="hidden";m.endTime=new Date;b(m)}})}function D(){if(r.timeOut>0||r.extendedTimeOut>0){s=setTimeout(I,r.extendedTimeOut);p.maxHideTime=parseFloat(r.extendedTimeOut);p.hideEta=(new Date).getTime()+p.maxHideTime}}function O(){clearTimeout(s);p.hideEta=0;d.stop(true,true)[r.showMethod]({duration:r.showDuration,easing:r.showEasing})}function L(){var e=(p.hideEta-(new Date).getTime())/p.maxHideTime*100;f.width(e+"%")}}function x(){return e.extend({},y(),o.options)}function C(e){if(!t){t=l()}if(e.is(":visible")){return}e.remove();e=null;if(t.children().length===0){t.remove();a=undefined}}}()})})(typeof define==="function"&&define.amd?define:function(e,t){if(typeof module!=="undefined"&&module.exports){module.exports=t(require("jquery"))}else{window.toastr=t(window.jQuery)}});define("fast",["jquery","bootstrap","toastr","layer","lang"],function(e,t,i,n,r){var o={config:{toastr:{closeButton:true,debug:false,newestOnTop:false,progressBar:false,positionClass:"toast-top-center",preventDuplicates:false,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}},events:{onAjaxSuccess:function(e,t){var n=typeof e.data!=="undefined"?e.data:null;var r=typeof e.msg!=="undefined"&&e.msg?e.msg:__("Operation completed");if(typeof t==="function"){var o=t.call(this,n,e);if(o===false)return}i.success(r)},onAjaxError:function(e,t){var n=typeof e.data!=="undefined"?e.data:null;if(typeof t==="function"){var r=t.call(this,n,e);if(r===false){return}}i.error(e.msg)},onAjaxResponse:function(t){try{var i=typeof t==="object"?t:JSON.parse(t);if(!i.hasOwnProperty("code")){e.extend(i,{code:-2,msg:t,data:null})}}catch(e){var i={code:-1,msg:e.message,data:null}}return i}},api:{ajax:function(t,i,r){t=typeof t==="string"?{url:t}:t;var a=n.load();t=e.extend({type:"POST",dataType:"json",success:function(e){n.close(a);e=o.events.onAjaxResponse(e);if(e.code===1){o.events.onAjaxSuccess(e,i)}else{o.events.onAjaxError(e,r)}},error:function(e){n.close(a);var t={code:e.status,msg:e.statusText,data:null};o.events.onAjaxError(t,r)}},t);e.ajax(t)},fixurl:function(e){if(e.substr(0,1)!=="/"){var t=new RegExp("^(?:[a-z]+:)?//","i");if(!t.test(e)){e=Config.moduleurl+"/"+e}}return e},cdnurl:function(e){return/^(?:[a-z]+:)?\/\//i.test(e)?e:Config.upload.cdnurl+e},query:function(e,t){if(!t){t=window.location.href}e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=i.exec(t);if(!n)return null;if(!n[2])return"";return decodeURIComponent(n[2].replace(/\+/g," "))},open:function(t,i,r){i=i?i:"";t=o.api.fixurl(t);t=t+(t.indexOf("?")>-1?"&":"?")+"dialog=1";var a=[e(window).width()>800?"800px":"95%",e(window).height()>600?"600px":"95%"];r=e.extend({type:2,title:i,shadeClose:true,shade:false,maxmin:true,moveOut:true,area:a,content:t,zIndex:n.zIndex,success:function(t,i){var r=this;e(t).data("callback",r.callback);n.setTop(t);var a=n.getChildFrame("html",i);var s=a.find(".layer-footer");o.api.layerfooter(t,i,r);if(s.size()>0){var l=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;var d=s[0];var c=new l(function(e){o.api.layerfooter(t,i,r);e.forEach(function(e){})});var u={attributes:true,childList:true,characterData:true,subtree:true};c.observe(d,u)}}},r?r:{});if(e(window).width()<480||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&top.$(".tab-pane.active").size()>0){r.area=[top.$(".tab-pane.active").width()+"px",top.$(".tab-pane.active").height()+"px"];r.offset=[top.$(".tab-pane.active").scrollTop()+"px","0px"]}n.open(r);return false},close:function(e){var i=parent.Layer.getFrameIndex(window.name);var n=parent.$("#layui-layer"+i).data("callback");parent.Layer.close(i);if(typeof n==="function"){n.call(t,e)}},layerfooter:function(t,i,r){var o=n.getChildFrame("html",i);var a=o.find(".layer-footer");if(a.size()>0){e(".layui-layer-footer",t).remove();var s=e("<div />").addClass("layui-layer-btn layui-layer-footer");s.html(a.html());if(e(".row",s).size()===0){e(">",s).wrapAll("<div class='row'></div>")}s.insertAfter(t.find(".layui-layer-content"));s.on("click",".btn",function(){if(e(this).hasClass("disabled")||e(this).parent().hasClass("disabled")){return}e(".btn:eq("+e(this).index()+")",a).trigger("click")});var l=t.find(".layui-layer-title").outerHeight()||0;var d=t.find(".layui-layer-btn").outerHeight()||0;e("iframe",t).height(t.height()-l-d)}if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var l=t.find(".layui-layer-title").outerHeight()||0;var d=t.find(".layui-layer-btn").outerHeight()||0;e("iframe",t).parent().css("height",t.height()-l-d);e("iframe",t).css("height","100%")}},success:function(t,i){var r=typeof t==="function";if(r){i=t}return n.msg(__("Operation completed"),e.extend({offset:0,icon:1},r?{}:t),i)},error:function(t,i){var r=typeof t==="function";if(r){i=t}return n.msg(__("Operation failed"),e.extend({offset:0,icon:2},r?{}:t),i)},toastr:i,layer:n},lang:function(){var e=arguments,t=e[0],i=1;t=t.toLowerCase();if(typeof r[t]!="undefined"){if(typeof r[t]=="object")return r[t];t=r[t]}else if(t.indexOf(".")!==-1&&false){var n=t.split(".");var o=r[n[0]];for(var i=1;i<n.length;i++){o=typeof o[n[i]]!="undefined"?o[n[i]]:"";if(typeof o!="object")break}if(typeof o=="object")return o;t=o}else{t=e[0]}return t.replace(/%((%)|s|d)/g,function(t){var n=null;if(t[2]){n=t[2]}else{n=e[i];switch(t){case"%d":n=parseFloat(n);if(isNaN(n)){n=0}break}i++}return n})},init:function(){e.ajaxSetup({beforeSend:function(e,t){t.url=o.api.fixurl(t.url)}});n.config({skin:"layui-layer-fast"});e(window).keyup(function(t){if(t.keyCode==27){if(e(".layui-layer").size()>0){var i=0;e(".layui-layer").each(function(){i=Math.max(i,parseInt(e(this).attr("times")))});if(i){n.close(i)}}}});i.options=o.config.toastr}};window.Layer=n;window.Toastr=i;window.__=o.lang;window.Fast=o;o.init();return o});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define("moment/moment",t):e.moment=t()})(this,function(){"use strict";var e;function t(){return e.apply(null,arguments)}function i(t){e=t}function n(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function r(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function o(e){var t;for(t in e){return false}return true}function a(e){return e===void 0}function s(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}function l(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function d(e,t){var i=[],n;for(n=0;n<e.length;++n){i.push(t(e[n],n))}return i}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var i in t){if(c(t,i)){e[i]=t[i]}}if(c(t,"toString")){e.toString=t.toString}if(c(t,"valueOf")){e.valueOf=t.valueOf}return e}function f(e,t,i,n){return Hi(e,t,i,n,true).utc()}function h(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false}}function p(e){if(e._pf==null){e._pf=h()}return e._pf}var m;if(Array.prototype.some){m=Array.prototype.some}else{m=function(e){var t=Object(this);var i=t.length>>>0;for(var n=0;n<i;n++){if(n in t&&e.call(this,t[n],n,t)){return true}}return false}}var g=m;function v(e){if(e._isValid==null){var t=p(e);var i=g.call(t.parsedDateParts,function(e){return e!=null});var n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict){n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(e)){e._isValid=n}else{return n}}return e._isValid}function y(e){var t=f(NaN);if(e!=null){u(p(t),e)}else{p(t).userInvalidated=true}return t}var b=t.momentProperties=[];function w(e,t){var i,n,r;if(!a(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!a(t._i)){e._i=t._i}if(!a(t._f)){e._f=t._f}if(!a(t._l)){e._l=t._l}if(!a(t._strict)){e._strict=t._strict}if(!a(t._tzm)){e._tzm=t._tzm}if(!a(t._isUTC)){e._isUTC=t._isUTC}if(!a(t._offset)){e._offset=t._offset}if(!a(t._pf)){e._pf=p(t)}if(!a(t._locale)){e._locale=t._locale}if(b.length>0){for(i=0;i<b.length;i++){n=b[i];r=t[n];if(!a(r)){e[n]=r}}}return e}var x=false;function C(e){w(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(x===false){x=true;t.updateOffset(this);x=false}}function _(e){return e instanceof C||e!=null&&e._isAMomentObject!=null}function T(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function E(e){var t=+e,i=0;if(t!==0&&isFinite(t)){i=T(t)}return i}function S(e,t,i){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0,a;for(a=0;a<n;a++){if(i&&e[a]!==t[a]||!i&&E(e[a])!==E(t[a])){o++}}return o+r}function k(e){if(t.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function N(e,i){var n=true;return u(function(){if(t.deprecationHandler!=null){t.deprecationHandler(null,e)}if(n){var r=[];var o;for(var a=0;a<arguments.length;a++){o="";if(typeof arguments[a]==="object"){o+="\n["+a+"] ";for(var s in arguments[0]){o+=s+": "+arguments[0][s]+", "}o=o.slice(0,-2)}else{o=arguments[a]}r.push(o)}k(e+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack);n=false}return i.apply(this,arguments)},i)}var U={};function R(e,i){if(t.deprecationHandler!=null){t.deprecationHandler(e,i)}if(!U[e]){k(i);U[e]=true}}t.suppressDeprecationWarnings=false;t.deprecationHandler=null;function A(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function I(e){var t,i;for(i in e){t=e[i];if(A(t)){this[i]=t}else{this["_"+i]=t}}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function D(e,t){var i=u({},e),n;for(n in t){if(c(t,n)){if(r(e[n])&&r(t[n])){i[n]={};u(i[n],e[n]);u(i[n],t[n])}else if(t[n]!=null){i[n]=t[n]}else{delete i[n]}}}for(n in e){if(c(e,n)&&!c(t,n)&&r(e[n])){i[n]=u({},i[n])}}return i}function O(e){if(e!=null){this.set(e)}}var L;if(Object.keys){L=Object.keys}else{L=function(e){var t,i=[];for(t in e){if(c(e,t)){i.push(t)}}return i}}var B=L;var M={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function P(e,t,i){var n=this._calendar[e]||this._calendar["sameElse"];return A(n)?n.call(t,i):n}var F={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function H(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];if(t||!i){return t}this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]}var $="Invalid date";function j(){return this._invalidDate}var q="%d";var z=/\d{1,2}/;function W(e){return this._ordinal.replace("%d",e)}var V={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Y(e,t,i,n){var r=this._relativeTime[i];return A(r)?r(e,t,i,n):r.replace(/%d/i,e)}function X(e,t){var i=this._relativeTime[e>0?"future":"past"];return A(i)?i(t):i.replace(/%s/i,t)}var G={};function K(e,t){var i=e.toLowerCase();G[i]=G[i+"s"]=G[t]=e}function Z(e){return typeof e==="string"?G[e]||G[e.toLowerCase()]:undefined}function Q(e){var t={},i,n;for(n in e){if(c(e,n)){i=Z(n);if(i){t[i]=e[n]}}}return t}var J={};function ee(e,t){J[e]=t}function te(e){var t=[];for(var i in e){t.push({unit:i,priority:J[i]})}t.sort(function(e,t){return e.priority-t.priority});return t}function ie(e,i){return function(n){if(n!=null){re(this,e,n);t.updateOffset(this,i);return this}else{return ne(this,e)}}}function ne(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function re(e,t,i){if(e.isValid()){e._d["set"+(e._isUTC?"UTC":"")+t](i)}}function oe(e){e=Z(e);if(A(this[e])){return this[e]()}return this}function ae(e,t){if(typeof e==="object"){e=Q(e);var i=te(e);for(var n=0;n<i.length;n++){this[i[n].unit](e[i[n].unit])}}else{e=Z(e);if(A(this[e])){return this[e](t)}}return this}function se(e,t,i){var n=""+Math.abs(e),r=t-n.length,o=e>=0;return(o?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}var le=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var de=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var ce={};var ue={};function fe(e,t,i,n){var r=n;if(typeof n==="string"){r=function(){return this[n]()}}if(e){ue[e]=r}if(t){ue[t[0]]=function(){return se(r.apply(this,arguments),t[1],t[2])}}if(i){ue[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)}}}function he(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function pe(e){var t=e.match(le),i,n;for(i=0,n=t.length;i<n;i++){if(ue[t[i]]){t[i]=ue[t[i]]}else{t[i]=he(t[i])}}return function(i){var r="",o;for(o=0;o<n;o++){r+=A(t[o])?t[o].call(i,e):t[o]}return r}}function me(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=ge(t,e.localeData());ce[t]=ce[t]||pe(t);return ce[t](e)}function ge(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}de.lastIndex=0;while(i>=0&&de.test(e)){e=e.replace(de,n);de.lastIndex=0;i-=1}return e}var ve=/\d/;var ye=/\d\d/;var be=/\d{3}/;var we=/\d{4}/;var xe=/[+-]?\d{6}/;var Ce=/\d\d?/;var _e=/\d\d\d\d?/;var Te=/\d\d\d\d\d\d?/;var Ee=/\d{1,3}/;var Se=/\d{1,4}/;var ke=/[+-]?\d{1,6}/;var Ne=/\d+/;var Ue=/[+-]?\d+/;var Re=/Z|[+-]\d\d:?\d\d/gi;var Ae=/Z|[+-]\d\d(?::?\d\d)?/gi;var Ie=/[+-]?\d+(\.\d{1,3})?/;var De=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var Oe={};function Le(e,t,i){Oe[e]=A(t)?t:function(e,n){return e&&i?i:t}}function Be(e,t){if(!c(Oe,e)){return new RegExp(Me(e))}return Oe[e](t._strict,t._locale)}function Me(e){return Pe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,r){return t||i||n||r}))}function Pe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Fe={};function He(e,t){var i,n=t;if(typeof e==="string"){e=[e]}if(s(t)){n=function(e,i){i[t]=E(e)}}for(i=0;i<e.length;i++){Fe[e[i]]=n}}function $e(e,t){He(e,function(e,i,n,r){n._w=n._w||{};t(e,n._w,n,r)})}function je(e,t,i){if(t!=null&&c(Fe,e)){Fe[e](t,i._a,i,e)}}var qe=0;var ze=1;var We=2;var Ve=3;var Ye=4;var Xe=5;var Ge=6;var Ke=7;var Ze=8;var Qe;if(Array.prototype.indexOf){Qe=Array.prototype.indexOf}else{Qe=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}var Je=Qe;function et(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}fe("M",["MM",2],"Mo",function(){return this.month()+1});fe("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});fe("MMMM",0,0,function(e){return this.localeData().months(this,e)});K("month","M");ee("month",8);Le("M",Ce);Le("MM",Ce,ye);Le("MMM",function(e,t){return t.monthsShortRegex(e)});Le("MMMM",function(e,t){return t.monthsRegex(e)});He(["M","MM"],function(e,t){t[ze]=E(e)-1});He(["MMM","MMMM"],function(e,t,i,n){var r=i._locale.monthsParse(e,n,i._strict);if(r!=null){t[ze]=r}else{p(i).invalidMonth=e}});var tt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var it="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function nt(e,t){if(!e){return n(this._months)?this._months:this._months["standalone"]}return n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||tt).test(t)?"format":"standalone"][e.month()]}var rt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function ot(e,t){if(!e){return n(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[tt.test(t)?"format":"standalone"][e.month()]}function at(e,t,i){var n,r,o,a=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(n=0;n<12;++n){o=f([2e3,n]);this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase();this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase()}}if(i){if(t==="MMM"){r=Je.call(this._shortMonthsParse,a);return r!==-1?r:null}else{r=Je.call(this._longMonthsParse,a);return r!==-1?r:null}}else{if(t==="MMM"){r=Je.call(this._shortMonthsParse,a);if(r!==-1){return r}r=Je.call(this._longMonthsParse,a);return r!==-1?r:null}else{r=Je.call(this._longMonthsParse,a);if(r!==-1){return r}r=Je.call(this._shortMonthsParse,a);return r!==-1?r:null}}}function st(e,t,i){var n,r,o;if(this._monthsParseExact){return at.call(this,e,t,i)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(n=0;n<12;n++){r=f([2e3,n]);if(i&&!this._longMonthsParse[n]){this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i");this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")}if(!i&&!this._monthsParse[n]){o="^"+this.months(r,"")+"|^"+this.monthsShort(r,"");this._monthsParse[n]=new RegExp(o.replace(".",""),"i")}if(i&&t==="MMMM"&&this._longMonthsParse[n].test(e)){return n}else if(i&&t==="MMM"&&this._shortMonthsParse[n].test(e)){return n}else if(!i&&this._monthsParse[n].test(e)){return n}}}function lt(e,t){var i;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=E(t)}else{t=e.localeData().monthsParse(t);if(!s(t)){return e}}}i=Math.min(e.date(),et(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i);return e}function dt(e){if(e!=null){lt(this,e);t.updateOffset(this,true);return this}else{return ne(this,"Month")}}function ct(){return et(this.year(),this.month())}var ut=De;function ft(e){if(this._monthsParseExact){if(!c(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!c(this,"_monthsShortRegex")){this._monthsShortRegex=ut}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}var ht=De;function pt(e){if(this._monthsParseExact){if(!c(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!c(this,"_monthsRegex")){this._monthsRegex=ht}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function mt(){function e(e,t){return t.length-e.length}var t=[],i=[],n=[],r,o;for(r=0;r<12;r++){o=f([2e3,r]);t.push(this.monthsShort(o,""));i.push(this.months(o,""));n.push(this.months(o,""));n.push(this.monthsShort(o,""))}t.sort(e);i.sort(e);n.sort(e);for(r=0;r<12;r++){t[r]=Pe(t[r]);i[r]=Pe(i[r])}for(r=0;r<24;r++){n[r]=Pe(n[r])}this._monthsRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}fe("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e});fe(0,["YY",2],0,function(){return this.year()%100});fe(0,["YYYY",4],0,"year");fe(0,["YYYYY",5],0,"year");fe(0,["YYYYYY",6,true],0,"year");K("year","y");ee("year",1);Le("Y",Ue);Le("YY",Ce,ye);Le("YYYY",Se,we);Le("YYYYY",ke,xe);Le("YYYYYY",ke,xe);He(["YYYYY","YYYYYY"],qe);He("YYYY",function(e,i){i[qe]=e.length===2?t.parseTwoDigitYear(e):E(e)});He("YY",function(e,i){i[qe]=t.parseTwoDigitYear(e)});He("Y",function(e,t){t[qe]=parseInt(e,10)});function gt(e){return vt(e)?366:365}function vt(e){return e%4===0&&e%100!==0||e%400===0}t.parseTwoDigitYear=function(e){return E(e)+(E(e)>68?1900:2e3)};var yt=ie("FullYear",true);function bt(){return vt(this.year())}function wt(e,t,i,n,r,o,a){var s=new Date(e,t,i,n,r,o,a);if(e<100&&e>=0&&isFinite(s.getFullYear())){s.setFullYear(e)}return s}function xt(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<100&&e>=0&&isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}return t}function Ct(e,t,i){var n=7+t-i,r=(7+xt(e,0,n).getUTCDay()-t)%7;return-r+n-1}function _t(e,t,i,n,r){var o=(7+i-n)%7,a=Ct(e,n,r),s=1+7*(t-1)+o+a,l,d;if(s<=0){l=e-1;d=gt(l)+s}else if(s>gt(e)){l=e+1;d=s-gt(e)}else{l=e;d=s}return{year:l,dayOfYear:d}}function Tt(e,t,i){var n=Ct(e.year(),t,i),r=Math.floor((e.dayOfYear()-n-1)/7)+1,o,a;if(r<1){a=e.year()-1;o=r+Et(a,t,i)}else if(r>Et(e.year(),t,i)){o=r-Et(e.year(),t,i);a=e.year()+1}else{a=e.year();o=r}return{week:o,year:a}}function Et(e,t,i){var n=Ct(e,t,i),r=Ct(e+1,t,i);return(gt(e)-n+r)/7}fe("w",["ww",2],"wo","week");fe("W",["WW",2],"Wo","isoWeek");K("week","w");K("isoWeek","W");ee("week",5);ee("isoWeek",5);Le("w",Ce);Le("ww",Ce,ye);Le("W",Ce);Le("WW",Ce,ye);$e(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=E(e)});function St(e){return Tt(e,this._week.dow,this._week.doy).week}var kt={dow:0,doy:6};function Nt(){return this._week.dow}function Ut(){return this._week.doy}function Rt(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function At(e){var t=Tt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}fe("d",0,"do","day");fe("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});fe("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});fe("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});fe("e",0,0,"weekday");fe("E",0,0,"isoWeekday");K("day","d");K("weekday","e");K("isoWeekday","E");ee("day",11);ee("weekday",11);ee("isoWeekday",11);Le("d",Ce);Le("e",Ce);Le("E",Ce);Le("dd",function(e,t){return t.weekdaysMinRegex(e)});Le("ddd",function(e,t){return t.weekdaysShortRegex(e)});Le("dddd",function(e,t){return t.weekdaysRegex(e)});$e(["dd","ddd","dddd"],function(e,t,i,n){var r=i._locale.weekdaysParse(e,n,i._strict);if(r!=null){t.d=r}else{p(i).invalidWeekday=e}});$e(["d","e","E"],function(e,t,i,n){t[n]=E(e)});function It(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function Dt(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}var Ot="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function Lt(e,t){if(!e){return n(this._weekdays)?this._weekdays:this._weekdays["standalone"]}return n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}var Bt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Mt(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}var Pt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Ft(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ht(e,t,i){var n,r,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(n=0;n<7;++n){o=f([2e3,1]).day(n);this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase();this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase();this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase()}}if(i){if(t==="dddd"){r=Je.call(this._weekdaysParse,a);return r!==-1?r:null}else if(t==="ddd"){r=Je.call(this._shortWeekdaysParse,a);return r!==-1?r:null}else{r=Je.call(this._minWeekdaysParse,a);return r!==-1?r:null}}else{if(t==="dddd"){r=Je.call(this._weekdaysParse,a);if(r!==-1){return r}r=Je.call(this._shortWeekdaysParse,a);if(r!==-1){return r}r=Je.call(this._minWeekdaysParse,a);return r!==-1?r:null}else if(t==="ddd"){r=Je.call(this._shortWeekdaysParse,a);if(r!==-1){return r}r=Je.call(this._weekdaysParse,a);if(r!==-1){return r}r=Je.call(this._minWeekdaysParse,a);return r!==-1?r:null}else{r=Je.call(this._minWeekdaysParse,a);if(r!==-1){return r}r=Je.call(this._weekdaysParse,a);if(r!==-1){return r}r=Je.call(this._shortWeekdaysParse,a);return r!==-1?r:null}}}function $t(e,t,i){var n,r,o;if(this._weekdaysParseExact){return Ht.call(this,e,t,i)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(n=0;n<7;n++){r=f([2e3,1]).day(n);if(i&&!this._fullWeekdaysParse[n]){this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i");this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[n]){o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,"");this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")}if(i&&t==="dddd"&&this._fullWeekdaysParse[n].test(e)){return n}else if(i&&t==="ddd"&&this._shortWeekdaysParse[n].test(e)){return n}else if(i&&t==="dd"&&this._minWeekdaysParse[n].test(e)){return n}else if(!i&&this._weekdaysParse[n].test(e)){return n}}}function jt(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=It(e,this.localeData());return this.add(e-t,"d")}else{return t}}function qt(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function zt(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=Dt(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}var Wt=De;function Vt(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Zt.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!c(this,"_weekdaysRegex")){this._weekdaysRegex=Wt}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}var Yt=De;function Xt(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Zt.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!c(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=Yt}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var Gt=De;function Kt(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Zt.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!c(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=Gt}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Zt(){function e(e,t){return t.length-e.length}var t=[],i=[],n=[],r=[],o,a,s,l,d;for(o=0;o<7;o++){a=f([2e3,1]).day(o);s=this.weekdaysMin(a,"");l=this.weekdaysShort(a,"");d=this.weekdays(a,"");t.push(s);i.push(l);n.push(d);r.push(s);r.push(l);r.push(d)}t.sort(e);i.sort(e);n.sort(e);r.sort(e);for(o=0;o<7;o++){i[o]=Pe(i[o]);n[o]=Pe(n[o]);r[o]=Pe(r[o])}this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Qt(){return this.hours()%12||12}function Jt(){return this.hours()||24}fe("H",["HH",2],0,"hour");fe("h",["hh",2],0,Qt);fe("k",["kk",2],0,Jt);fe("hmm",0,0,function(){return""+Qt.apply(this)+se(this.minutes(),2)});fe("hmmss",0,0,function(){return""+Qt.apply(this)+se(this.minutes(),2)+se(this.seconds(),2)});fe("Hmm",0,0,function(){return""+this.hours()+se(this.minutes(),2)});fe("Hmmss",0,0,function(){return""+this.hours()+se(this.minutes(),2)+se(this.seconds(),2)});function ei(e,t){fe(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}ei("a",true);ei("A",false);K("hour","h");ee("hour",13);function ti(e,t){return t._meridiemParse}Le("a",ti);Le("A",ti);Le("H",Ce);Le("h",Ce);Le("k",Ce);Le("HH",Ce,ye);Le("hh",Ce,ye);Le("kk",Ce,ye);Le("hmm",_e);Le("hmmss",Te);Le("Hmm",_e);Le("Hmmss",Te);He(["H","HH"],Ve);He(["k","kk"],function(e,t,i){var n=E(e);t[Ve]=n===24?0:n});He(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e);i._meridiem=e});He(["h","hh"],function(e,t,i){t[Ve]=E(e);p(i).bigHour=true});He("hmm",function(e,t,i){var n=e.length-2;t[Ve]=E(e.substr(0,n));t[Ye]=E(e.substr(n));p(i).bigHour=true});He("hmmss",function(e,t,i){var n=e.length-4;var r=e.length-2;t[Ve]=E(e.substr(0,n));t[Ye]=E(e.substr(n,2));t[Xe]=E(e.substr(r));p(i).bigHour=true});He("Hmm",function(e,t,i){var n=e.length-2;t[Ve]=E(e.substr(0,n));t[Ye]=E(e.substr(n))});He("Hmmss",function(e,t,i){var n=e.length-4;var r=e.length-2;t[Ve]=E(e.substr(0,n));t[Ye]=E(e.substr(n,2));t[Xe]=E(e.substr(r))});function ii(e){return(e+"").toLowerCase().charAt(0)==="p"}var ni=/[ap]\.?m?\.?/i;function ri(e,t,i){if(e>11){return i?"pm":"PM"}else{return i?"am":"AM"}}var oi=ie("Hours",true);var ai={calendar:M,longDateFormat:F,invalidDate:$,ordinal:q,dayOfMonthOrdinalParse:z,relativeTime:V,months:it,monthsShort:rt,week:kt,weekdays:Ot,weekdaysMin:Pt,weekdaysShort:Bt,meridiemParse:ni};var si={};var li={};var di;function ci(e){return e?e.toLowerCase().replace("_","-"):e}function ui(e){var t=0,i,n,r,o;while(t<e.length){o=ci(e[t]).split("-");i=o.length;n=ci(e[t+1]);n=n?n.split("-"):null;while(i>0){r=fi(o.slice(0,i).join("-"));if(r){return r}if(n&&n.length>=i&&S(o,n,true)>=i-1){break}i--}t++}return null}function fi(e){var t=null;if(!si[e]&&typeof module!=="undefined"&&module&&module.exports){try{t=di._abbr;require("./locale/"+e);hi(t)}catch(e){}}return si[e]}function hi(e,t){var i;if(e){if(a(t)){i=gi(e)}else{i=pi(e,t)}if(i){di=i}}return di._abbr}function pi(e,t){if(t!==null){var i=ai;t.abbr=e;if(si[e]!=null){R("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");i=si[e]._config}else if(t.parentLocale!=null){if(si[t.parentLocale]!=null){i=si[t.parentLocale]._config}else{if(!li[t.parentLocale]){li[t.parentLocale]=[]}li[t.parentLocale].push({name:e,config:t});return null}}si[e]=new O(D(i,t));if(li[e]){li[e].forEach(function(e){pi(e.name,e.config)})}hi(e);return si[e]}else{delete si[e];return null}}function mi(e,t){if(t!=null){var i,n=ai;if(si[e]!=null){n=si[e]._config}t=D(n,t);i=new O(t);i.parentLocale=si[e];si[e]=i;hi(e)}else{if(si[e]!=null){if(si[e].parentLocale!=null){si[e]=si[e].parentLocale}else if(si[e]!=null){delete si[e]}}}return si[e]}function gi(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return di}if(!n(e)){t=fi(e);if(t){return t}e=[e]}return ui(e)}function vi(){return B(si)}function yi(e){var t;var i=e._a;if(i&&p(e).overflow===-2){t=i[ze]<0||i[ze]>11?ze:i[We]<1||i[We]>et(i[qe],i[ze])?We:i[Ve]<0||i[Ve]>24||i[Ve]===24&&(i[Ye]!==0||i[Xe]!==0||i[Ge]!==0)?Ve:i[Ye]<0||i[Ye]>59?Ye:i[Xe]<0||i[Xe]>59?Xe:i[Ge]<0||i[Ge]>999?Ge:-1;if(p(e)._overflowDayOfYear&&(t<qe||t>We)){t=We}if(p(e)._overflowWeeks&&t===-1){t=Ke}if(p(e)._overflowWeekday&&t===-1){t=Ze}p(e).overflow=t}return e}var bi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var wi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var xi=/Z|[+-]\d\d(?::?\d\d)?/;var Ci=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var _i=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var Ti=/^\/?Date\((\-?\d+)/i;function Ei(e){var t,i,n=e._i,r=bi.exec(n)||wi.exec(n),o,a,s,l;if(r){p(e).iso=true;for(t=0,i=Ci.length;t<i;t++){if(Ci[t][1].exec(r[1])){a=Ci[t][0];o=Ci[t][2]!==false;break}}if(a==null){e._isValid=false;return}if(r[3]){for(t=0,i=_i.length;t<i;t++){if(_i[t][1].exec(r[3])){s=(r[2]||" ")+_i[t][0];break}}if(s==null){e._isValid=false;return}}if(!o&&s!=null){e._isValid=false;return}if(r[4]){if(xi.exec(r[4])){l="Z"}else{e._isValid=false;return}}e._f=a+(s||"")+(l||"");Di(e)}else{e._isValid=false}}var Si=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;function ki(e){var t,i,n,r,o,a;var s={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"};var l="YXWVUTSRQPONZABCDEFGHIKLM";var d,c;t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,"");i=Si.exec(t);if(i){n=i[1]?"ddd"+(i[1].length===5?", ":" "):"";r="D MMM "+(i[2].length>10?"YYYY ":"YY ");o="HH:mm"+(i[4]?":ss":"");if(i[1]){var u=new Date(i[2]);var f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][u.getDay()];if(i[1].substr(0,3)!==f){p(e).weekdayMismatch=true;e._isValid=false;return}}switch(i[5].length){case 2:if(c===0){d=" +0000"}else{c=l.indexOf(i[5][1].toUpperCase())-12;d=(c<0?" -":" +")+(""+c).replace(/^-?/,"0").match(/..$/)[0]+"00"}break;case 4:d=s[i[5]];break;default:d=s[" GMT"]}i[5]=d;e._i=i.splice(1).join("");a=" ZZ";e._f=n+r+o+a;Di(e);p(e).rfc2822=true}else{e._isValid=false}}function Ni(e){var i=Ti.exec(e._i);if(i!==null){e._d=new Date(+i[1]);return}Ei(e);if(e._isValid===false){delete e._isValid}else{return}ki(e);if(e._isValid===false){delete e._isValid}else{return}t.createFromInputFallback(e)}t.createFromInputFallback=N("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Ui(e,t,i){if(e!=null){return e}if(t!=null){return t}return i}function Ri(e){var i=new Date(t.now());if(e._useUTC){return[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]}return[i.getFullYear(),i.getMonth(),i.getDate()]}function Ai(e){var t,i,n=[],r,o;if(e._d){return}r=Ri(e);if(e._w&&e._a[We]==null&&e._a[ze]==null){Ii(e)}if(e._dayOfYear!=null){o=Ui(e._a[qe],r[qe]);if(e._dayOfYear>gt(o)||e._dayOfYear===0){p(e)._overflowDayOfYear=true}i=xt(o,0,e._dayOfYear);e._a[ze]=i.getUTCMonth();e._a[We]=i.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=n[t]=r[t]}for(;t<7;t++){e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[Ve]===24&&e._a[Ye]===0&&e._a[Xe]===0&&e._a[Ge]===0){e._nextDay=true;e._a[Ve]=0}e._d=(e._useUTC?xt:wt).apply(null,n);if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[Ve]=24}}function Ii(e){var t,i,n,r,o,a,s,l;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){o=1;a=4;i=Ui(t.GG,e._a[qe],Tt($i(),1,4).year);n=Ui(t.W,1);r=Ui(t.E,1);if(r<1||r>7){l=true}}else{o=e._locale._week.dow;a=e._locale._week.doy;var d=Tt($i(),o,a);i=Ui(t.gg,e._a[qe],d.year);n=Ui(t.w,d.week);if(t.d!=null){r=t.d;if(r<0||r>6){l=true}}else if(t.e!=null){r=t.e+o;if(t.e<0||t.e>6){l=true}}else{r=o}}if(n<1||n>Et(i,o,a)){p(e)._overflowWeeks=true}else if(l!=null){p(e)._overflowWeekday=true}else{s=_t(i,n,r,o,a);e._a[qe]=s.year;e._dayOfYear=s.dayOfYear}}t.ISO_8601=function(){};t.RFC_2822=function(){};function Di(e){if(e._f===t.ISO_8601){Ei(e);return}if(e._f===t.RFC_2822){ki(e);return}e._a=[];p(e).empty=true;var i=""+e._i,n,r,o,a,s,l=i.length,d=0;o=ge(e._f,e._locale).match(le)||[];for(n=0;n<o.length;n++){a=o[n];r=(i.match(Be(a,e))||[])[0];if(r){s=i.substr(0,i.indexOf(r));if(s.length>0){p(e).unusedInput.push(s)}i=i.slice(i.indexOf(r)+r.length);d+=r.length}if(ue[a]){if(r){p(e).empty=false}else{p(e).unusedTokens.push(a)}je(a,r,e)}else if(e._strict&&!r){p(e).unusedTokens.push(a)}}p(e).charsLeftOver=l-d;if(i.length>0){p(e).unusedInput.push(i)}if(e._a[Ve]<=12&&p(e).bigHour===true&&e._a[Ve]>0){p(e).bigHour=undefined}p(e).parsedDateParts=e._a.slice(0);p(e).meridiem=e._meridiem;e._a[Ve]=Oi(e._locale,e._a[Ve],e._meridiem);Ai(e);yi(e)}function Oi(e,t,i){var n;if(i==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,i)}else if(e.isPM!=null){n=e.isPM(i);if(n&&t<12){t+=12}if(!n&&t===12){t=0}return t}else{return t}}function Li(e){var t,i,n,r,o;if(e._f.length===0){p(e).invalidFormat=true;e._d=new Date(NaN);return}for(r=0;r<e._f.length;r++){o=0;t=w({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[r];Di(t);if(!v(t)){continue}o+=p(t).charsLeftOver;o+=p(t).unusedTokens.length*10;p(t).score=o;if(n==null||o<n){n=o;i=t}}u(e,i||t)}function Bi(e){if(e._d){return}var t=Q(e._i);e._a=d([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});Ai(e)}function Mi(e){var t=new C(yi(Pi(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function Pi(e){var t=e._i,i=e._f;e._locale=e._locale||gi(e._l);if(t===null||i===undefined&&t===""){return y({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(_(t)){return new C(yi(t))}else if(l(t)){e._d=t}else if(n(i)){Li(e)}else if(i){Di(e)}else{Fi(e)}if(!v(e)){e._d=null}return e}function Fi(e){var i=e._i;if(a(i)){e._d=new Date(t.now())}else if(l(i)){e._d=new Date(i.valueOf())}else if(typeof i==="string"){Ni(e)}else if(n(i)){e._a=d(i.slice(0),function(e){return parseInt(e,10)});Ai(e)}else if(r(i)){Bi(e)}else if(s(i)){e._d=new Date(i)}else{t.createFromInputFallback(e)}}function Hi(e,t,i,a,s){var l={};if(i===true||i===false){a=i;i=undefined}if(r(e)&&o(e)||n(e)&&e.length===0){e=undefined}l._isAMomentObject=true;l._useUTC=l._isUTC=s;l._l=i;l._i=e;l._f=t;l._strict=a;return Mi(l)}function $i(e,t,i,n){return Hi(e,t,i,n,false)}var ji=N("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=$i.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return y()}});var qi=N("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=$i.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return y()}});function zi(e,t){var i,r;if(t.length===1&&n(t[0])){t=t[0]}if(!t.length){return $i()}i=t[0];for(r=1;r<t.length;++r){if(!t[r].isValid()||t[r][e](i)){i=t[r]}}return i}function Wi(){var e=[].slice.call(arguments,0);return zi("isBefore",e)}function Vi(){var e=[].slice.call(arguments,0);return zi("isAfter",e)}var Yi=function(){return Date.now?Date.now():+new Date};var Xi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Gi(e){for(var t in e){if(!(Xi.indexOf(t)!==-1&&(e[t]==null||!isNaN(e[t])))){return false}}var i=false;for(var n=0;n<Xi.length;++n){if(e[Xi[n]]){if(i){return false}if(parseFloat(e[Xi[n]])!==E(e[Xi[n]])){i=true}}}return true}function Ki(){return this._isValid}function Zi(){return wn(NaN)}function Qi(e){var t=Q(e),i=t.year||0,n=t.quarter||0,r=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,l=t.minute||0,d=t.second||0,c=t.millisecond||0;this._isValid=Gi(t);this._milliseconds=+c+d*1e3+l*6e4+s*1e3*60*60;this._days=+a+o*7;this._months=+r+n*3+i*12;this._data={};this._locale=gi();this._bubble()}function Ji(e){return e instanceof Qi}function en(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function tn(e,t){fe(e,0,0,function(){var e=this.utcOffset();var i="+";if(e<0){e=-e;i="-"}return i+se(~~(e/60),2)+t+se(~~e%60,2)})}tn("Z",":");tn("ZZ","");Le("Z",Ae);Le("ZZ",Ae);He(["Z","ZZ"],function(e,t,i){i._useUTC=true;i._tzm=rn(Ae,e)});var nn=/([\+\-]|\d\d)/gi;function rn(e,t){var i=(t||"").match(e);if(i===null){return null}var n=i[i.length-1]||[];var r=(n+"").match(nn)||["-",0,0];var o=+(r[1]*60)+E(r[2]);return o===0?0:r[0]==="+"?o:-o}function on(e,i){var n,r;if(i._isUTC){n=i.clone();r=(_(e)||l(e)?e.valueOf():$i(e).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+r);t.updateOffset(n,false);return n}else{return $i(e).local()}}function an(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}t.updateOffset=function(){};function sn(e,i,n){var r=this._offset||0,o;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=rn(Ae,e);if(e===null){return this}}else if(Math.abs(e)<16&&!n){e=e*60}if(!this._isUTC&&i){o=an(this)}this._offset=e;this._isUTC=true;if(o!=null){this.add(o,"m")}if(r!==e){if(!i||this._changeInProgress){En(this,wn(e-r,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;t.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?r:an(this)}}function ln(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function dn(e){return this.utcOffset(0,e)}function cn(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(an(this),"m")}}return this}function un(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var e=rn(Re,this._i);if(e!=null){this.utcOffset(e)}else{this.utcOffset(0,true)}}return this}function fn(e){if(!this.isValid()){return false}e=e?$i(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function hn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function pn(){if(!a(this._isDSTShifted)){return this._isDSTShifted}var e={};w(e,this);e=Pi(e);if(e._a){var t=e._isUTC?f(e._a):$i(e._a);this._isDSTShifted=this.isValid()&&S(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function mn(){return this.isValid()?!this._isUTC:false}function gn(){return this.isValid()?this._isUTC:false}function vn(){return this.isValid()?this._isUTC&&this._offset===0:false}var yn=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var bn=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function wn(e,t){var i=e,n=null,r,o,a;if(Ji(e)){i={ms:e._milliseconds,d:e._days,M:e._months}}else if(s(e)){i={};if(t){i[t]=e}else{i.milliseconds=e}}else if(!!(n=yn.exec(e))){r=n[1]==="-"?-1:1;i={y:0,d:E(n[We])*r,h:E(n[Ve])*r,m:E(n[Ye])*r,s:E(n[Xe])*r,ms:E(en(n[Ge]*1e3))*r}}else if(!!(n=bn.exec(e))){r=n[1]==="-"?-1:1;i={y:xn(n[2],r),M:xn(n[3],r),w:xn(n[4],r),d:xn(n[5],r),h:xn(n[6],r),m:xn(n[7],r),s:xn(n[8],r)}}else if(i==null){i={}}else if(typeof i==="object"&&("from"in i||"to"in i)){a=_n($i(i.from),$i(i.to));i={};i.ms=a.milliseconds;i.M=a.months}o=new Qi(i);if(Ji(e)&&c(e,"_locale")){o._locale=e._locale}return o}wn.fn=Qi.prototype;wn.invalid=Zi;function xn(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Cn(e,t){var i={milliseconds:0,months:0};i.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(i.months,"M").isAfter(t)){--i.months}i.milliseconds=+t-+e.clone().add(i.months,"M");return i}function _n(e,t){var i;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=on(t,e);if(e.isBefore(t)){i=Cn(e,t)}else{i=Cn(t,e);i.milliseconds=-i.milliseconds;i.months=-i.months}return i}function Tn(e,t){return function(i,n){var r,o;if(n!==null&&!isNaN(+n)){R(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");o=i;i=n;n=o}i=typeof i==="string"?+i:i;r=wn(i,n);En(this,r,e);return this}}function En(e,i,n,r){var o=i._milliseconds,a=en(i._days),s=en(i._months);if(!e.isValid()){return}r=r==null?true:r;if(o){e._d.setTime(e._d.valueOf()+o*n)}if(a){re(e,"Date",ne(e,"Date")+a*n)}if(s){lt(e,ne(e,"Month")+s*n)}if(r){t.updateOffset(e,a||s)}}var Sn=Tn(1,"add");var kn=Tn(-1,"subtract");function Nn(e,t){var i=e.diff(t,"days",true);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function Un(e,i){var n=e||$i(),r=on(n,this).startOf("day"),o=t.calendarFormat(this,r)||"sameElse";var a=i&&(A(i[o])?i[o].call(this,n):i[o]);return this.format(a||this.localeData().calendar(o,this,$i(n)))}function Rn(){return new C(this)}function An(e,t){var i=_(e)?e:$i(e);if(!(this.isValid()&&i.isValid())){return false}t=Z(!a(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()>i.valueOf()}else{return i.valueOf()<this.clone().startOf(t).valueOf()}}function In(e,t){var i=_(e)?e:$i(e);if(!(this.isValid()&&i.isValid())){return false}t=Z(!a(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()<i.valueOf()}else{return this.clone().endOf(t).valueOf()<i.valueOf()}}function Dn(e,t,i,n){n=n||"()";return(n[0]==="("?this.isAfter(e,i):!this.isBefore(e,i))&&(n[1]===")"?this.isBefore(t,i):!this.isAfter(t,i))}function On(e,t){var i=_(e)?e:$i(e),n;if(!(this.isValid()&&i.isValid())){return false}t=Z(t||"millisecond");if(t==="millisecond"){return this.valueOf()===i.valueOf()}else{n=i.valueOf();return this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()}}function Ln(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Bn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Mn(e,t,i){var n,r,o,a;if(!this.isValid()){return NaN}n=on(e,this);if(!n.isValid()){return NaN}r=(n.utcOffset()-this.utcOffset())*6e4;t=Z(t);if(t==="year"||t==="month"||t==="quarter"){a=Pn(this,n);if(t==="quarter"){a=a/3}else if(t==="year"){a=a/12}}else{o=this-n;a=t==="second"?o/1e3:t==="minute"?o/6e4:t==="hour"?o/36e5:t==="day"?(o-r)/864e5:t==="week"?(o-r)/6048e5:o}return i?a:T(a)}function Pn(e,t){var i=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(i,"months"),r,o;if(t-n<0){r=e.clone().add(i-1,"months");o=(t-n)/(n-r)}else{r=e.clone().add(i+1,"months");o=(t-n)/(r-n)}return-(i+o)||0}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Fn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Hn(){if(!this.isValid()){return null}var e=this.clone().utc();if(e.year()<0||e.year()>9999){return me(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}if(A(Date.prototype.toISOString)){return this.toDate().toISOString()}return me(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function $n(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var e="moment";var t="";if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}var i="["+e+'("]';var n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var r="-MM-DD[T]HH:mm:ss.SSS";var o=t+'[")]';return this.format(i+n+r+o)}function jn(e){if(!e){e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat}var i=me(this,e);return this.localeData().postformat(i)}function qn(e,t){if(this.isValid()&&(_(e)&&e.isValid()||$i(e).isValid())){return wn({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function zn(e){return this.from($i(),e)}function Wn(e,t){if(this.isValid()&&(_(e)&&e.isValid()||$i(e).isValid())){return wn({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Vn(e){return this.to($i(),e)}function Yn(e){var t;if(e===undefined){return this._locale._abbr}else{t=gi(e);if(t!=null){this._locale=t}return this}}var Xn=N("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}});function Gn(){return this._locale}function Kn(e){e=Z(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function Zn(e){e=Z(e);if(e===undefined||e==="millisecond"){return this}if(e==="date"){e="day"}return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function Qn(){return this._d.valueOf()-(this._offset||0)*6e4}function Jn(){return Math.floor(this.valueOf()/1e3)}function er(){return new Date(this.valueOf())}function tr(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function ir(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function nr(){return this.isValid()?this.toISOString():null}function rr(){return v(this)}function or(){return u({},p(this))}function ar(){return p(this).overflow}function sr(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}fe(0,["gg",2],0,function(){return this.weekYear()%100});fe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function lr(e,t){fe(0,[e,e.length],0,t)}lr("gggg","weekYear");lr("ggggg","weekYear");lr("GGGG","isoWeekYear");lr("GGGGG","isoWeekYear");K("weekYear","gg");K("isoWeekYear","GG");ee("weekYear",1);ee("isoWeekYear",1);Le("G",Ue);Le("g",Ue);Le("GG",Ce,ye);Le("gg",Ce,ye);Le("GGGG",Se,we);Le("gggg",Se,we);Le("GGGGG",ke,xe);Le("ggggg",ke,xe);$e(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=E(e)});$e(["gg","GG"],function(e,i,n,r){i[r]=t.parseTwoDigitYear(e)});function dr(e){return hr.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function cr(e){return hr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function ur(){return Et(this.year(),1,4)}function fr(){var e=this.localeData()._week;return Et(this.year(),e.dow,e.doy)}function hr(e,t,i,n,r){var o;if(e==null){return Tt(this,n,r).year}else{o=Et(e,n,r);if(t>o){t=o}return pr.call(this,e,t,i,n,r)}}function pr(e,t,i,n,r){var o=_t(e,t,i,n,r),a=xt(o.year,0,o.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}fe("Q",0,"Qo","quarter");K("quarter","Q");ee("quarter",7);Le("Q",ve);He("Q",function(e,t){t[ze]=(E(e)-1)*3});function mr(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}fe("D",["DD",2],"Do","date");K("date","D");ee("date",9);Le("D",Ce);Le("DD",Ce,ye);Le("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});He(["D","DD"],We);He("Do",function(e,t){t[We]=E(e.match(Ce)[0],10)});var gr=ie("Date",true);fe("DDD",["DDDD",3],"DDDo","dayOfYear");K("dayOfYear","DDD");ee("dayOfYear",4);Le("DDD",Ee);Le("DDDD",be);He(["DDD","DDDD"],function(e,t,i){i._dayOfYear=E(e)});function vr(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}fe("m",["mm",2],0,"minute");K("minute","m");ee("minute",14);Le("m",Ce);Le("mm",Ce,ye);He(["m","mm"],Ye);var yr=ie("Minutes",false);fe("s",["ss",2],0,"second");K("second","s");ee("second",15);Le("s",Ce);Le("ss",Ce,ye);He(["s","ss"],Xe);var br=ie("Seconds",false);fe("S",0,0,function(){return~~(this.millisecond()/100)});fe(0,["SS",2],0,function(){return~~(this.millisecond()/10)});fe(0,["SSS",3],0,"millisecond");fe(0,["SSSS",4],0,function(){return this.millisecond()*10});fe(0,["SSSSS",5],0,function(){return this.millisecond()*100});fe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});fe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});fe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});fe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});K("millisecond","ms");ee("millisecond",16);Le("S",Ee,ve);Le("SS",Ee,ye);Le("SSS",Ee,be);var wr;for(wr="SSSS";wr.length<=9;wr+="S"){Le(wr,Ne)}function xr(e,t){t[Ge]=E(("0."+e)*1e3)}for(wr="S";wr.length<=9;wr+="S"){He(wr,xr)}var Cr=ie("Milliseconds",false);fe("z",0,0,"zoneAbbr");fe("zz",0,0,"zoneName");function _r(){return this._isUTC?"UTC":""}function Tr(){return this._isUTC?"Coordinated Universal Time":""}var Er=C.prototype;Er.add=Sn;Er.calendar=Un;Er.clone=Rn;Er.diff=Mn;Er.endOf=Zn;Er.format=jn;Er.from=qn;Er.fromNow=zn;Er.to=Wn;Er.toNow=Vn;Er.get=oe;Er.invalidAt=ar;Er.isAfter=An;Er.isBefore=In;Er.isBetween=Dn;Er.isSame=On;Er.isSameOrAfter=Ln;Er.isSameOrBefore=Bn;Er.isValid=rr;Er.lang=Xn;Er.locale=Yn;Er.localeData=Gn;Er.max=qi;Er.min=ji;Er.parsingFlags=or;Er.set=ae;Er.startOf=Kn;Er.subtract=kn;Er.toArray=tr;Er.toObject=ir;Er.toDate=er;Er.toISOString=Hn;Er.inspect=$n;Er.toJSON=nr;Er.toString=Fn;Er.unix=Jn;Er.valueOf=Qn;Er.creationData=sr;Er.year=yt;Er.isLeapYear=bt;Er.weekYear=dr;Er.isoWeekYear=cr;Er.quarter=Er.quarters=mr;Er.month=dt;Er.daysInMonth=ct;Er.week=Er.weeks=Rt;Er.isoWeek=Er.isoWeeks=At;Er.weeksInYear=fr;Er.isoWeeksInYear=ur;Er.date=gr;Er.day=Er.days=jt;Er.weekday=qt;Er.isoWeekday=zt;Er.dayOfYear=vr;Er.hour=Er.hours=oi;Er.minute=Er.minutes=yr;Er.second=Er.seconds=br;Er.millisecond=Er.milliseconds=Cr;Er.utcOffset=sn;Er.utc=dn;Er.local=cn;Er.parseZone=un;Er.hasAlignedHourOffset=fn;Er.isDST=hn;Er.isLocal=mn;Er.isUtcOffset=gn;Er.isUtc=vn;Er.isUTC=vn;Er.zoneAbbr=_r;Er.zoneName=Tr;Er.dates=N("dates accessor is deprecated. Use date instead.",gr);Er.months=N("months accessor is deprecated. Use month instead",dt);Er.years=N("years accessor is deprecated. Use year instead",yt);Er.zone=N("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ln);Er.isDSTShifted=N("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",pn);function Sr(e){return $i(e*1e3)}function kr(){return $i.apply(null,arguments).parseZone()}function Nr(e){return e}var Ur=O.prototype;Ur.calendar=P;Ur.longDateFormat=H;Ur.invalidDate=j;Ur.ordinal=W;Ur.preparse=Nr;Ur.postformat=Nr;Ur.relativeTime=Y;Ur.pastFuture=X;Ur.set=I;Ur.months=nt;Ur.monthsShort=ot;Ur.monthsParse=st;Ur.monthsRegex=pt;Ur.monthsShortRegex=ft;Ur.week=St;Ur.firstDayOfYear=Ut;Ur.firstDayOfWeek=Nt;Ur.weekdays=Lt;Ur.weekdaysMin=Ft;Ur.weekdaysShort=Mt;Ur.weekdaysParse=$t;Ur.weekdaysRegex=Vt;Ur.weekdaysShortRegex=Xt;Ur.weekdaysMinRegex=Kt;Ur.isPM=ii;Ur.meridiem=ri;function Rr(e,t,i,n){var r=gi();var o=f().set(n,t);return r[i](o,e)}function Ar(e,t,i){if(s(e)){t=e;e=undefined}e=e||"";if(t!=null){return Rr(e,t,i,"month")}var n;var r=[];for(n=0;n<12;n++){r[n]=Rr(e,n,i,"month")}return r}function Ir(e,t,i,n){if(typeof e==="boolean"){if(s(t)){i=t;t=undefined}t=t||""}else{t=e;i=t;e=false;if(s(t)){i=t;t=undefined}t=t||""}var r=gi(),o=e?r._week.dow:0;if(i!=null){return Rr(t,(i+o)%7,n,"day")}var a;var l=[];for(a=0;a<7;a++){l[a]=Rr(t,(a+o)%7,n,"day")}return l}function Dr(e,t){return Ar(e,t,"months")}function Or(e,t){return Ar(e,t,"monthsShort")}function Lr(e,t,i){return Ir(e,t,i,"weekdays")}function Br(e,t,i){return Ir(e,t,i,"weekdaysShort")}function Mr(e,t,i){return Ir(e,t,i,"weekdaysMin")}hi("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=E(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+i}});t.lang=N("moment.lang is deprecated. Use moment.locale instead.",hi);t.langData=N("moment.langData is deprecated. Use moment.localeData instead.",gi);var Pr=Math.abs;function Fr(){var e=this._data;this._milliseconds=Pr(this._milliseconds);this._days=Pr(this._days);this._months=Pr(this._months);e.milliseconds=Pr(e.milliseconds);e.seconds=Pr(e.seconds);e.minutes=Pr(e.minutes);e.hours=Pr(e.hours);e.months=Pr(e.months);e.years=Pr(e.years);return this}function Hr(e,t,i,n){var r=wn(t,i);e._milliseconds+=n*r._milliseconds;e._days+=n*r._days;e._months+=n*r._months;return e._bubble()}function $r(e,t){return Hr(this,e,t,1)}function jr(e,t){return Hr(this,e,t,-1)}function qr(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function zr(){var e=this._milliseconds;var t=this._days;var i=this._months;var n=this._data;var r,o,a,s,l;if(!(e>=0&&t>=0&&i>=0||e<=0&&t<=0&&i<=0)){e+=qr(Vr(i)+t)*864e5;t=0;i=0}n.milliseconds=e%1e3;r=T(e/1e3);n.seconds=r%60;o=T(r/60);n.minutes=o%60;a=T(o/60);n.hours=a%24;t+=T(a/24);l=T(Wr(t));i+=l;t-=qr(Vr(l));s=T(i/12);i%=12;n.days=t;n.months=i;n.years=s;return this}function Wr(e){return e*4800/146097}function Vr(e){return e*146097/4800}function Yr(e){if(!this.isValid()){return NaN}var t;var i;var n=this._milliseconds;e=Z(e);if(e==="month"||e==="year"){t=this._days+n/864e5;i=this._months+Wr(t);return e==="month"?i:i/12}else{t=this._days+Math.round(Vr(this._months));switch(e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}}function Xr(){if(!this.isValid()){return NaN}return this._milliseconds+this._days*864e5+this._months%12*2592e6+E(this._months/12)*31536e6}function Gr(e){return function(){return this.as(e)}}var Kr=Gr("ms");var Zr=Gr("s");var Qr=Gr("m");var Jr=Gr("h");var eo=Gr("d");var to=Gr("w");var io=Gr("M");var no=Gr("y");function ro(e){e=Z(e);return this.isValid()?this[e+"s"]():NaN}function oo(e){return function(){return this.isValid()?this._data[e]:NaN}}var ao=oo("milliseconds");var so=oo("seconds");var lo=oo("minutes");var co=oo("hours");var uo=oo("days");var fo=oo("months");var ho=oo("years");function po(){return T(this.days()/7)}var mo=Math.round;var go={ss:44,s:45,m:45,h:22,d:26,M:11};function vo(e,t,i,n,r){return r.relativeTime(t||1,!!i,e,n)}function yo(e,t,i){var n=wn(e).abs();var r=mo(n.as("s"));var o=mo(n.as("m"));var a=mo(n.as("h"));var s=mo(n.as("d"));var l=mo(n.as("M"));var d=mo(n.as("y"));var c=r<=go.ss&&["s",r]||r<go.s&&["ss",r]||o<=1&&["m"]||o<go.m&&["mm",o]||a<=1&&["h"]||a<go.h&&["hh",a]||s<=1&&["d"]||s<go.d&&["dd",s]||l<=1&&["M"]||l<go.M&&["MM",l]||d<=1&&["y"]||["yy",d];c[2]=t;c[3]=+e>0;c[4]=i;return vo.apply(null,c)}function bo(e){if(e===undefined){return mo}if(typeof e==="function"){mo=e;return true}return false}function wo(e,t){if(go[e]===undefined){return false}if(t===undefined){return go[e]}go[e]=t;if(e==="s"){go.ss=t-1}return true}function xo(e){if(!this.isValid()){return this.localeData().invalidDate()}var t=this.localeData();var i=yo(this,!e,t);if(e){i=t.pastFuture(+this,i)}return t.postformat(i)}var Co=Math.abs;function _o(){if(!this.isValid()){return this.localeData().invalidDate()}var e=Co(this._milliseconds)/1e3;var t=Co(this._days);var i=Co(this._months);var n,r,o;n=T(e/60);r=T(n/60);e%=60;n%=60;o=T(i/12);i%=12;var a=o;var s=i;var l=t;var d=r;var c=n;var u=e;var f=this.asSeconds();if(!f){return"P0D"}return(f<0?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(l?l+"D":"")+(d||c||u?"T":"")+(d?d+"H":"")+(c?c+"M":"")+(u?u+"S":"")}var To=Qi.prototype;To.isValid=Ki;To.abs=Fr;To.add=$r;To.subtract=jr;To.as=Yr;To.asMilliseconds=Kr;To.asSeconds=Zr;To.asMinutes=Qr;To.asHours=Jr;To.asDays=eo;To.asWeeks=to;To.asMonths=io;To.asYears=no;To.valueOf=Xr;To._bubble=zr;To.get=ro;To.milliseconds=ao;To.seconds=so;To.minutes=lo;To.hours=co;To.days=uo;To.weeks=po;To.months=fo;To.years=ho;To.humanize=xo;To.toISOString=_o;To.toString=_o;To.toJSON=_o;To.locale=Yn;To.localeData=Gn;To.toIsoString=N("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",_o);To.lang=Xn;fe("X",0,0,"unix");fe("x",0,0,"valueOf");Le("x",Ue);Le("X",Ie);He("X",function(e,t,i){i._d=new Date(parseFloat(e,10)*1e3)});He("x",function(e,t,i){i._d=new Date(E(e))});t.version="2.18.1";i($i);t.fn=Er;t.min=Wi;t.max=Vi;t.now=Yi;t.utc=f;t.unix=Sr;t.months=Dr;t.isDate=l;t.locale=hi;t.invalid=y;t.duration=wn;t.isMoment=_;t.weekdays=Lr;t.parseZone=kr;t.localeData=gi;t.isDuration=Ji;t.monthsShort=Or;t.weekdaysMin=Mr;t.defineLocale=pi;t.updateLocale=mi;t.locales=vi;t.weekdaysShort=Br;t.normalizeUnits=Z;t.relativeTimeRounding=bo;t.relativeTimeThreshold=wo;t.calendarFormat=Nn;t.prototype=Er;return t});define("moment",["moment/moment"],function(e){return e});define("backend",["fast","moment"],function(e,t){var i={api:{sidebar:function(t){colorArr=["red","green","yellow","blue","teal","orange","purple"];$colorNums=colorArr.length;badgeList={};$.each(t,function(t,i){$url=e.api.fixurl(t);if($.isArray(i)){$nums=typeof i[0]!=="undefined"?i[0]:0;$color=typeof i[1]!=="undefined"?i[1]:colorArr[(!isNaN($nums)?$nums:$nums.length)%$colorNums];$class=typeof i[2]!=="undefined"?i[2]:"label"}else{$nums=i;$color=colorArr[(!isNaN($nums)?$nums:$nums.length)%$colorNums];$class="label"}badgeList[$url]=$nums>0?'<small class="'+$class+" pull-right bg-"+$color+'">'+$nums+"</small>":""});$.each(badgeList,function(e,t){var i=top.window.$("li a[addtabs][url='"+e+"']");if(i){top.window.$(".pull-right-container",i).html(t);top.window.$(".nav-addtabs li a[node-id='"+i.attr("addtabs")+"'] .pull-right-container").html(t)}})},addtabs:function(t,i,n){var r="a[url='{url}']";var o=top.window.$(r.replace(/\{url\}/,t));if(o.size()>0){o.trigger("click")}else{t=e.api.fixurl(t);o=top.window.$(r.replace(/\{url\}/,t));if(o.size()>0){var a=o.parent().hasClass("active")?"dblclick":"click";o.trigger(a)}else{var s=t.substr(0,t.indexOf("?")>-1?t.indexOf("?"):t.length);o=top.window.$(r.replace(/\{url\}/,s));if(o.size()>0){n=typeof n!=="undefined"?n:o.find("i").attr("class");i=typeof i!=="undefined"?i:o.find("span:first").text();o.trigger("fa.event.toggleitem")}var l=$(".nav-tabs ul li a[node-url='"+t+"']");if(l.size()>0){l.trigger("click")}else{var d=Math.floor((new Date).valueOf()*Math.random());n=typeof n!=="undefined"?n:"fa fa-circle-o";i=typeof i!=="undefined"?i:"";top.window.$("<a />").append('<i class="'+n+'"></i> <span>'+i+"</span>").prop("href",t).attr({url:t,addtabs:d}).addClass("hide").appendTo(top.window.document.body).trigger("click")}}}}},init:function(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){$("html").addClass("ios-fix")}Toastr.options.positionClass=Config.controllername==="index"?"toast-top-right-index":"toast-top-right";$(document).on("click",".btn-dialog,.dialogit",function(e){e.preventDefault();var t=$(this).data();t=t?t:{};i.api.open(i.api.fixurl($(this).attr("href")),$(this).attr("title"),t)});$(document).on("click",".btn-addtabs,.addtabsit",function(e){e.preventDefault();i.api.addtabs($(this).attr("href"),$(this).attr("title"))});$(document).on("click",".btn-ajax,.ajaxit",function(e){e.preventDefault();var t=$(this).data();if(typeof t.url==="undefined"&&$(this).attr("href")){t.url=$(this).attr("href")}i.api.ajax(t)});if($(".fixed-footer").size()>0){$(document.body).css("padding-bottom",$(".fixed-footer").height())}}};i.api=$.extend(e.api,i.api);window.Moment=t;window.Backend=i;i.init();return i});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"&&typeof require==="function"?t(require("../moment")):typeof define==="function"&&define.amd?define("moment/locale/zh-cn",["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMD HH:mm",llll:"YYYYMMMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""||t===""||t===""){return e}else if(t===""||t===""){return e+12}else{return e>=11?e:e+12}},meridiem:function(e,t,i){var n=e*100+t;if(n<600){return""}else if(n<900){return""}else if(n<1130){return""}else if(n<1230){return""}else if(n<1800){return""}else{return""}},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}});return t});!function(e){"use strict";var t=null,i=function(e){var t=arguments,i=!0,n=1;return e=e.replace(/%s/g,function(){var e=t[n++];return"undefined"==typeof e?(i=!1,""):e}),i?e:""},n=function(t,i,n,r){var o="";return e.each(t,function(e,t){return t[i]===r?(o=t[n],!1):!0}),o},r=function(t,i){var n=-1;return e.each(t,function(e,t){return t.field===i?(n=e,!1):!0}),n},o=function(t){var i,n,r,o=0,a=[];for(i=0;i<t[0].length;i++)o+=t[0][i].colspan||1;for(i=0;i<t.length;i++)for(a[i]=[],n=0;o>n;n++)a[i][n]=!1;for(i=0;i<t.length;i++)for(n=0;n<t[i].length;n++){var s=t[i][n],l=s.rowspan||1,d=s.colspan||1,c=e.inArray(!1,a[i]);for(1===d&&(s.fieldIndex=c,"undefined"==typeof s.field&&(s.field=c)),r=0;l>r;r++)a[i+r][c]=!0;for(r=0;d>r;r++)a[i][c+r]=!0}},a=function(){if(null===t){var i,n,r=e("<p/>").addClass("fixed-table-scroll-inner"),o=e("<div/>").addClass("fixed-table-scroll-outer");o.append(r),e("body").append(o),i=r[0].offsetWidth,o.css("overflow","scroll"),n=r[0].offsetWidth,i===n&&(n=o[0].clientWidth),o.remove(),t=i-n}return t},s=function(t,n,r,o){var a=n;if("string"==typeof n){var s=n.split(".");s.length>1?(a=window,e.each(s,function(e,t){a=a[t]})):a=window[n]}return"object"==typeof a?a:"function"==typeof a?a.apply(t,r||[]):!a&&"string"==typeof n&&i.apply(this,[n].concat(r))?i.apply(this,[n].concat(r)):o},l=function(t,i,n){var r=Object.getOwnPropertyNames(t),o=Object.getOwnPropertyNames(i),a="";if(n&&r.length!==o.length)return!1;for(var s=0;s<r.length;s++)if(a=r[s],e.inArray(a,o)>-1&&t[a]!==i[a])return!1;return!0},d=function(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#x60;"):e},c=function(e){for(var t in e){var i=t.split(/(?=[A-Z])/).join("-").toLowerCase();i!==t&&(e[i]=e[t],delete e[t])}return e},u=function(e,t,i){var n=e;if("string"!=typeof t||e.hasOwnProperty(t))return i?d(e[t]):e[t];var r=t.split(".");for(var o in r)r.hasOwnProperty(o)&&(n=n&&n[r[o]]);return i?d(n):n},f=function(){return!!(navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))},h=function(){Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(r){if("object"!=typeof r&&("function"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var o,a,s=[];for(o in r)e.call(r,o)&&s.push(o);if(t)for(a=0;n>a;a++)e.call(r,i[a])&&s.push(i[a]);return s}}())},p=function(t,i){this.options=i,this.$el=e(t),this.$el_=this.$el.clone(),this.timeoutId_=0,this.timeoutFooter_=0,this.init()};p.DEFAULTS={classes:"table table-hover",sortClass:void 0,locale:void 0,height:void 0,undefinedText:"-",sortName:void 0,sortOrder:"asc",sortStable:!1,striped:!1,columns:[[]],data:[],totalField:"total",dataField:"rows",method:"get",url:void 0,ajax:void 0,cache:!0,contentType:"application/json",dataType:"json",ajaxOptions:{},queryParams:function(e){return e},queryParamsType:"limit",responseHandler:function(e){return e},pagination:!1,onlyInfoPagination:!1,paginationLoop:!0,sidePagination:"client",totalRows:0,pageNumber:1,pageSize:10,pageList:[10,25,50,100],paginationHAlign:"right",paginationVAlign:"bottom",paginationDetailHAlign:"left",paginationPreText:"&lsaquo;",paginationNextText:"&rsaquo;",search:!1,searchOnEnterKey:!1,strictSearch:!1,searchAlign:"right",selectItemName:"btSelectItem",showHeader:!0,showFooter:!1,showColumns:!1,showPaginationSwitch:!1,showRefresh:!1,showToggle:!1,buttonsAlign:"right",smartDisplay:!0,escape:!1,minimumCountColumns:1,idField:void 0,uniqueId:void 0,cardView:!1,detailView:!1,detailFormatter:function(){return""},trimOnSearch:!0,clickToSelect:!1,singleSelect:!1,toolbar:void 0,toolbarAlign:"left",checkboxHeader:!0,sortable:!0,silentSort:!0,maintainSelected:!1,searchTimeOut:500,searchText:"",iconSize:void 0,buttonsClass:"default",iconsPrefix:"glyphicon",icons:{paginationSwitchDown:"glyphicon-collapse-down icon-chevron-down",paginationSwitchUp:"glyphicon-collapse-up icon-chevron-up",refresh:"glyphicon-refresh icon-refresh",toggle:"glyphicon-list-alt icon-list-alt",columns:"glyphicon-th icon-th",detailOpen:"glyphicon-plus icon-plus",detailClose:"glyphicon-minus icon-minus"},customSearch:e.noop,customSort:e.noop,rowStyle:function(){return{}},rowAttributes:function(){return{}},footerStyle:function(){return{}},onAll:function(){return!1},onClickCell:function(){return!1},onDblClickCell:function(){return!1},onClickRow:function(){return!1},onDblClickRow:function(){return!1},onSort:function(){return!1},onCheck:function(){return!1},onUncheck:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onCheckSome:function(){return!1},onUncheckSome:function(){return!1},onLoadSuccess:function(){return!1},onLoadError:function(){return!1},onColumnSwitch:function(){return!1},onPageChange:function(){return!1},onSearch:function(){return!1},onToggle:function(){return!1},onPreBody:function(){return!1},onPostBody:function(){return!1},onPostHeader:function(){return!1},onExpandRow:function(){return!1},onCollapseRow:function(){return!1},onRefreshOptions:function(){return!1},onRefresh:function(){return!1},onResetView:function(){return!1}},p.LOCALES={},p.LOCALES["en-US"]=p.LOCALES.en={formatLoadingMessage:function(){return"Loading, please wait..."},formatRecordsPerPage:function(e){return i("%s rows per page",e)},formatShowingRows:function(e,t,n){return i("Showing %s to %s of %s rows",e,t,n)},formatDetailPagination:function(e){return i("Showing %s rows",e)},formatSearch:function(){return"Search"},formatNoMatches:function(){return"No matching records found"},formatPaginationSwitch:function(){return"Hide/Show pagination"},formatRefresh:function(){return"Refresh"},formatToggle:function(){return"Toggle"},formatColumns:function(){return"Columns"},formatAllRows:function(){return"All"}},e.extend(p.DEFAULTS,p.LOCALES["en-US"]),p.COLUMN_DEFAULTS={radio:!1,checkbox:!1,checkboxEnabled:!0,field:void 0,title:void 0,titleTooltip:void 0,class:void 0,align:void 0,halign:void 0,falign:void 0,valign:void 0,width:void 0,sortable:!1,order:"asc",visible:!0,switchable:!0,clickToSelect:!0,formatter:void 0,footerFormatter:void 0,events:void 0,sorter:void 0,sortName:void 0,cellStyle:void 0,searchable:!0,searchFormatter:!0,cardVisible:!0,escape:!1},p.EVENTS={"all.bs.table":"onAll","click-cell.bs.table":"onClickCell","dbl-click-cell.bs.table":"onDblClickCell","click-row.bs.table":"onClickRow","dbl-click-row.bs.table":"onDblClickRow","sort.bs.table":"onSort","check.bs.table":"onCheck","uncheck.bs.table":"onUncheck","check-all.bs.table":"onCheckAll","uncheck-all.bs.table":"onUncheckAll","check-some.bs.table":"onCheckSome","uncheck-some.bs.table":"onUncheckSome","load-success.bs.table":"onLoadSuccess","load-error.bs.table":"onLoadError","column-switch.bs.table":"onColumnSwitch","page-change.bs.table":"onPageChange","search.bs.table":"onSearch","toggle.bs.table":"onToggle","pre-body.bs.table":"onPreBody","post-body.bs.table":"onPostBody","post-header.bs.table":"onPostHeader","expand-row.bs.table":"onExpandRow","collapse-row.bs.table":"onCollapseRow","refresh-options.bs.table":"onRefreshOptions","reset-view.bs.table":"onResetView","refresh.bs.table":"onRefresh"},p.prototype.init=function(){this.initLocale(),this.initContainer(),this.initTable(),this.initHeader(),this.initData(),this.initHiddenRows(),this.initFooter(),this.initToolbar(),this.initPagination(),this.initBody(),this.initSearchText(),this.initServer()},p.prototype.initLocale=function(){if(this.options.locale){var t=this.options.locale.split(/-|_/);t[0].toLowerCase(),t[1]&&t[1].toUpperCase(),e.fn.bootstrapTable.locales[this.options.locale]?e.extend(this.options,e.fn.bootstrapTable.locales[this.options.locale]):e.fn.bootstrapTable.locales[t.join("-")]?e.extend(this.options,e.fn.bootstrapTable.locales[t.join("-")]):e.fn.bootstrapTable.locales[t[0]]&&e.extend(this.options,e.fn.bootstrapTable.locales[t[0]])}},p.prototype.initContainer=function(){this.$container=e(['<div class="bootstrap-table">','<div class="fixed-table-toolbar"></div>',"top"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?'<div class="fixed-table-pagination" style="clear: both;"></div>':"",'<div class="fixed-table-container">','<div class="fixed-table-header"><table></table></div>','<div class="fixed-table-body">','<div class="fixed-table-loading">',this.options.formatLoadingMessage(),"</div>","</div>",'<div class="fixed-table-footer"><table><tr></tr></table></div>',"bottom"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?'<div class="fixed-table-pagination"></div>':"","</div>","</div>"].join("")),this.$container.insertAfter(this.$el),this.$tableContainer=this.$container.find(".fixed-table-container"),this.$tableHeader=this.$container.find(".fixed-table-header"),this.$tableBody=this.$container.find(".fixed-table-body"),this.$tableLoading=this.$container.find(".fixed-table-loading"),this.$tableFooter=this.$container.find(".fixed-table-footer"),this.$toolbar=this.$container.find(".fixed-table-toolbar"),this.$pagination=this.$container.find(".fixed-table-pagination"),this.$tableBody.append(this.$el),this.$container.after('<div class="clearfix"></div>'),this.$el.addClass(this.options.classes),this.options.striped&&this.$el.addClass("table-striped"),-1!==e.inArray("table-no-bordered",this.options.classes.split(" "))&&this.$tableContainer.addClass("table-no-bordered")},p.prototype.initTable=function(){var t=this,i=[],n=[];if(this.$header=this.$el.find(">thead"),this.$header.length||(this.$header=e("<thead></thead>").appendTo(this.$el)),this.$header.find("tr").each(function(){var t=[];e(this).find("th").each(function(){"undefined"!=typeof e(this).data("field")&&e(this).data("field",e(this).data("field")+""),t.push(e.extend({},{title:e(this).html(),class:e(this).attr("class"),titleTooltip:e(this).attr("title"),rowspan:e(this).attr("rowspan")?+e(this).attr("rowspan"):void 0,colspan:e(this).attr("colspan")?+e(this).attr("colspan"):void 0},e(this).data()))}),i.push(t)}),e.isArray(this.options.columns[0])||(this.options.columns=[this.options.columns]),this.options.columns=e.extend(!0,[],i,this.options.columns),this.columns=[],o(this.options.columns),e.each(this.options.columns,function(i,n){e.each(n,function(n,r){r=e.extend({},p.COLUMN_DEFAULTS,r),"undefined"!=typeof r.fieldIndex&&(t.columns[r.fieldIndex]=r),t.options.columns[i][n]=r})}),!this.options.data.length){var r=[];this.$el.find(">tbody>tr").each(function(i){var o={};o._id=e(this).attr("id"),o._class=e(this).attr("class"),o._data=c(e(this).data()),e(this).find(">td").each(function(n){for(var a,s,l=e(this),d=+l.attr("colspan")||1,u=+l.attr("rowspan")||1;r[i]&&r[i][n];n++);for(a=n;n+d>a;a++)for(s=i;i+u>s;s++)r[s]||(r[s]=[]),r[s][a]=!0;var f=t.columns[n].field;o[f]=e(this).html(),o["_"+f+"_id"]=e(this).attr("id"),o["_"+f+"_class"]=e(this).attr("class"),o["_"+f+"_rowspan"]=e(this).attr("rowspan"),o["_"+f+"_colspan"]=e(this).attr("colspan"),o["_"+f+"_title"]=e(this).attr("title"),o["_"+f+"_data"]=c(e(this).data())}),n.push(o)}),this.options.data=n,n.length&&(this.fromHtml=!0)}},p.prototype.initHeader=function(){var t=this,n={},r=[];this.header={fields:[],styles:[],classes:[],formatters:[],events:[],sorters:[],sortNames:[],cellStyles:[],searchables:[]},e.each(this.options.columns,function(o,a){r.push("<tr>"),0===o&&!t.options.cardView&&t.options.detailView&&r.push(i('<th class="detail" rowspan="%s"><div class="fht-cell"></div></th>',t.options.columns.length)),e.each(a,function(e,o){var a="",s="",l="",c="",u=i(' class="%s"',o["class"]),f=(t.options.sortOrder||o.order,"px"),h=o.width;if(void 0===o.width||t.options.cardView||"string"==typeof o.width&&-1!==o.width.indexOf("%")&&(f="%"),o.width&&"string"==typeof o.width&&(h=o.width.replace("%","").replace("px","")),s=i("text-align: %s; ",o.halign?o.halign:o.align),l=i("text-align: %s; ",o.align),c=i("vertical-align: %s; ",o.valign),c+=i("width: %s; ",!o.checkbox&&!o.radio||h?h?h+f:void 0:"36px"),"undefined"!=typeof o.fieldIndex){if(t.header.fields[o.fieldIndex]=o.field,t.header.styles[o.fieldIndex]=l+c,t.header.classes[o.fieldIndex]=u,t.header.formatters[o.fieldIndex]=o.formatter,t.header.events[o.fieldIndex]=o.events,t.header.sorters[o.fieldIndex]=o.sorter,t.header.sortNames[o.fieldIndex]=o.sortName,t.header.cellStyles[o.fieldIndex]=o.cellStyle,t.header.searchables[o.fieldIndex]=o.searchable,!o.visible)return;if(t.options.cardView&&!o.cardVisible)return;n[o.field]=o}r.push("<th"+i(' title="%s"',o.titleTooltip),o.checkbox||o.radio?i(' class="bs-checkbox %s"',o["class"]||""):u,i(' style="%s"',s+c),i(' rowspan="%s"',o.rowspan),i(' colspan="%s"',o.colspan),i(' data-field="%s"',o.field),">"),r.push(i('<div class="th-inner %s">',t.options.sortable&&o.sortable?"sortable both":"")),a=t.options.escape?d(o.title):o.title,o.checkbox&&(!t.options.singleSelect&&t.options.checkboxHeader&&(a='<input name="btSelectAll" type="checkbox" />'),t.header.stateField=o.field),o.radio&&(a="",t.header.stateField=o.field,t.options.singleSelect=!0),r.push(a),r.push("</div>"),r.push('<div class="fht-cell"></div>'),r.push("</div>"),r.push("</th>")}),r.push("</tr>")}),this.$header.html(r.join("")),this.$header.find("th[data-field]").each(function(){e(this).data(n[e(this).data("field")])}),this.$container.off("click",".th-inner").on("click",".th-inner",function(i){var n=e(this);return t.options.detailView&&n.closest(".bootstrap-table")[0]!==t.$container[0]?!1:void(t.options.sortable&&n.parent().data().sortable&&t.onSort(i))}),this.$header.children().children().off("keypress").on("keypress",function(i){if(t.options.sortable&&e(this).data().sortable){var n=i.keyCode||i.which;13==n&&t.onSort(i)}}),e(window).off("resize.bootstrap-table"),!this.options.showHeader||this.options.cardView?(this.$header.hide(),this.$tableHeader.hide(),this.$tableLoading.css("top",0)):(this.$header.show(),this.$tableHeader.show(),this.$tableLoading.css("top",this.$header.outerHeight()+1),this.getCaret(),e(window).on("resize.bootstrap-table",e.proxy(this.resetWidth,this))),this.$selectAll=this.$header.find('[name="btSelectAll"]'),this.$selectAll.off("click").on("click",function(){var i=e(this).prop("checked");t[i?"checkAll":"uncheckAll"](),t.updateSelected()})},p.prototype.initFooter=function(){!this.options.showFooter||this.options.cardView?this.$tableFooter.hide():this.$tableFooter.show()},p.prototype.initData=function(e,t){this.data="append"===t?this.data.concat(e):"prepend"===t?[].concat(e).concat(this.data):e||this.options.data,this.options.data="append"===t?this.options.data.concat(e):"prepend"===t?[].concat(e).concat(this.options.data):this.data,"server"!==this.options.sidePagination&&this.initSort()},p.prototype.initSort=function(){var t=this,n=this.options.sortName,r="desc"===this.options.sortOrder?-1:1,o=e.inArray(this.options.sortName,this.header.fields),a=0;return this.options.customSort!==e.noop?void this.options.customSort.apply(this,[this.options.sortName,this.options.sortOrder]):void(-1!==o&&(this.options.sortStable&&e.each(this.data,function(e,t){t.hasOwnProperty("_position")||(t._position=e)}),this.data.sort(function(i,a){t.header.sortNames[o]&&(n=t.header.sortNames[o]);var l=u(i,n,t.options.escape),d=u(a,n,t.options.escape),c=s(t.header,t.header.sorters[o],[l,d]);return void 0!==c?r*c:((void 0===l||null===l)&&(l=""),(void 0===d||null===d)&&(d=""),t.options.sortStable&&l===d&&(l=i._position,d=a._position),e.isNumeric(l)&&e.isNumeric(d)?(l=parseFloat(l),d=parseFloat(d),d>l?-1*r:r):l===d?0:("string"!=typeof l&&(l=l.toString()),-1===l.localeCompare(d)?-1*r:r))}),void 0!==this.options.sortClass&&(clearTimeout(a),a=setTimeout(function(){t.$el.removeClass(t.options.sortClass);var e=t.$header.find(i('[data-field="%s"]',t.options.sortName).index()+1);t.$el.find(i("tr td:nth-child(%s)",e)).addClass(t.options.sortClass)},250))))},p.prototype.onSort=function(t){var i="keypress"===t.type?e(t.currentTarget):e(t.currentTarget).parent(),n=this.$header.find("th").eq(i.index());return this.$header.add(this.$header_).find("span.order").remove(),this.options.sortName===i.data("field")?this.options.sortOrder="asc"===this.options.sortOrder?"desc":"asc":(this.options.sortName=i.data("field"),this.options.sortOrder="asc"===i.data("order")?"desc":"asc"),this.trigger("sort",this.options.sortName,this.options.sortOrder),i.add(n).data("order",this.options.sortOrder),this.getCaret(),"server"===this.options.sidePagination?void this.initServer(this.options.silentSort):(this.initSort(),void this.initBody())},p.prototype.initToolbar=function(){var t,n,r=this,o=[],a=0,l=0;this.$toolbar.find(".bs-bars").children().length&&e("body").append(e(this.options.toolbar)),this.$toolbar.html(""),("string"==typeof this.options.toolbar||"object"==typeof this.options.toolbar)&&e(i('<div class="bs-bars pull-%s"></div>',this.options.toolbarAlign)).appendTo(this.$toolbar).append(e(this.options.toolbar)),o=[i('<div class="columns columns-%s btn-group pull-%s">',this.options.buttonsAlign,this.options.buttonsAlign)],"string"==typeof this.options.icons&&(this.options.icons=s(null,this.options.icons)),this.options.showPaginationSwitch&&o.push(i('<button class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+'" type="button" name="paginationSwitch" aria-label="pagination Switch" title="%s">',this.options.formatPaginationSwitch()),i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.paginationSwitchDown),"</button>"),this.options.showRefresh&&o.push(i('<button class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+'" type="button" name="refresh" aria-label="refresh" title="%s">',this.options.formatRefresh()),i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.refresh),"</button>"),this.options.showToggle&&o.push(i('<button class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+'" type="button" name="toggle" aria-label="toggle" title="%s">',this.options.formatToggle()),i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.toggle),"</button>"),this.options.showColumns&&(o.push(i('<div class="keep-open btn-group" title="%s">',this.options.formatColumns()),'<button type="button" aria-label="columns" class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">',i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.columns),' <span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">'),e.each(this.columns,function(e,t){if(!(t.radio||t.checkbox||r.options.cardView&&!t.cardVisible)){var n=t.visible?' checked="checked"':"";t.switchable&&(o.push(i('<li role="menuitem"><label><input type="checkbox" data-field="%s" value="%s"%s> %s</label></li>',t.field,e,n,t.title)),l++)}}),o.push("</ul>","</div>")),o.push("</div>"),(this.showToolbar||o.length>2)&&this.$toolbar.append(o.join("")),this.options.showPaginationSwitch&&this.$toolbar.find('button[name="paginationSwitch"]').off("click").on("click",e.proxy(this.togglePagination,this)),this.options.showRefresh&&this.$toolbar.find('button[name="refresh"]').off("click").on("click",e.proxy(this.refresh,this)),this.options.showToggle&&this.$toolbar.find('button[name="toggle"]').off("click").on("click",function(){r.toggleView()}),this.options.showColumns&&(t=this.$toolbar.find(".keep-open"),l<=this.options.minimumCountColumns&&t.find("input").prop("disabled",!0),t.find("li").off("click").on("click",function(e){e.stopImmediatePropagation()}),t.find("input").off("click").on("click",function(){var t=e(this);r.toggleColumn(e(this).val(),t.prop("checked"),!1),r.trigger("column-switch",e(this).data("field"),t.prop("checked"))})),this.options.search&&(o=[],o.push('<div class="pull-'+this.options.searchAlign+' search">',i('<input class="form-control'+i(" input-%s",this.options.iconSize)+'" type="text" placeholder="%s">',this.options.formatSearch()),"</div>"),this.$toolbar.append(o.join("")),n=this.$toolbar.find(".search input"),n.off("keyup drop blur").on("keyup drop blur",function(t){r.options.searchOnEnterKey&&13!==t.keyCode||e.inArray(t.keyCode,[37,38,39,40])>-1||(clearTimeout(a),a=setTimeout(function(){r.onSearch(t)},r.options.searchTimeOut))}),f()&&n.off("mouseup").on("mouseup",function(e){clearTimeout(a),a=setTimeout(function(){r.onSearch(e)},r.options.searchTimeOut)}))},p.prototype.onSearch=function(t){var i=e.trim(e(t.currentTarget).val());this.options.trimOnSearch&&e(t.currentTarget).val()!==i&&e(t.currentTarget).val(i),i!==this.searchText&&(this.searchText=i,this.options.searchText=i,this.options.pageNumber=1,this.initSearch(),this.updatePagination(),this.trigger("search",i))},p.prototype.initSearch=function(){var t=this;if("server"!==this.options.sidePagination){if(this.options.customSearch!==e.noop)return void this.options.customSearch.apply(this,[this.searchText]);var i=this.searchText&&(this.options.escape?d(this.searchText):this.searchText).toLowerCase(),n=e.isEmptyObject(this.filterColumns)?null:this.filterColumns;this.data=n?e.grep(this.options.data,function(t){for(var i in n)if(e.isArray(n[i])&&-1===e.inArray(t[i],n[i])||!e.isArray(n[i])&&t[i]!==n[i])return!1;return!0}):this.options.data,this.data=i?e.grep(this.data,function(n,o){for(var a=0;a<t.header.fields.length;a++)if(t.header.searchables[a]){var l,d=e.isNumeric(t.header.fields[a])?parseInt(t.header.fields[a],10):t.header.fields[a],c=t.columns[r(t.columns,d)];if("string"==typeof d){l=n;for(var u=d.split("."),f=0;f<u.length;f++)l=l[u[f]];c&&c.searchFormatter&&(l=s(c,t.header.formatters[a],[l,n,o],l))}else l=n[d];if("string"==typeof l||"number"==typeof l)if(t.options.strictSearch){if((l+"").toLowerCase()===i)return!0}else if(-1!==(l+"").toLowerCase().indexOf(i))return!0}return!1}):this.data}},p.prototype.initPagination=function(){if(!this.options.pagination)return void this.$pagination.hide();this.$pagination.show();var t,n,r,o,a,s,l,d,c,u=this,f=[],h=!1,p=this.getData(),m=this.options.pageList;if("server"!==this.options.sidePagination&&(this.options.totalRows=p.length),this.totalPages=0,this.options.totalRows){if(this.options.pageSize===this.options.formatAllRows())this.options.pageSize=this.options.totalRows,h=!0;else if(this.options.pageSize===this.options.totalRows){var g="string"==typeof this.options.pageList?this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.pageList;e.inArray(this.options.formatAllRows().toLowerCase(),g)>-1&&(h=!0)}this.totalPages=~~((this.options.totalRows-1)/this.options.pageSize)+1,this.options.totalPages=this.totalPages}if(this.totalPages>0&&this.options.pageNumber>this.totalPages&&(this.options.pageNumber=this.totalPages),this.pageFrom=(this.options.pageNumber-1)*this.options.pageSize+1,this.pageTo=this.options.pageNumber*this.options.pageSize,this.pageTo>this.options.totalRows&&(this.pageTo=this.options.totalRows),f.push('<div class="pull-'+this.options.paginationDetailHAlign+' pagination-detail">','<span class="pagination-info">',this.options.onlyInfoPagination?this.options.formatDetailPagination(this.options.totalRows):this.options.formatShowingRows(this.pageFrom,this.pageTo,this.options.totalRows),"</span>"),!this.options.onlyInfoPagination){f.push('<span class="page-list">');var v=[i('<span class="btn-group %s">',"top"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?"dropdown":"dropup"),'<button type="button" class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">','<span class="page-size">',h?this.options.formatAllRows():this.options.pageSize,"</span>",' <span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">'];if("string"==typeof this.options.pageList){var y=this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").split(",");m=[],e.each(y,function(e,t){m.push(t.toUpperCase()===u.options.formatAllRows().toUpperCase()?u.options.formatAllRows():+t)})}for(e.each(m,function(e,t){if(!u.options.smartDisplay||0===e||m[e-1]<u.options.totalRows){var n;n=h?t===u.options.formatAllRows()?' class="active"':"":t===u.options.pageSize?' class="active"':"",v.push(i('<li role="menuitem"%s><a href="#">%s</a></li>',n,t))}}),v.push("</ul></span>"),f.push(this.options.formatRecordsPerPage(v.join(""))),f.push("</span>"),f.push("</div>",'<div class="pull-'+this.options.paginationHAlign+' pagination">','<ul class="pagination'+i(" pagination-%s",this.options.iconSize)+'">','<li class="page-pre"><a href="#">'+this.options.paginationPreText+"</a></li>"),this.totalPages<5?(n=1,r=this.totalPages):(n=this.options.pageNumber-2,r=n+4,1>n&&(n=1,r=5),r>this.totalPages&&(r=this.totalPages,n=r-4)),this.totalPages>=6&&(this.options.pageNumber>=3&&(f.push('<li class="page-first'+(1===this.options.pageNumber?" active":"")+'">','<a href="#">',1,"</a>","</li>"),n++),this.options.pageNumber>=4&&(4==this.options.pageNumber||6==this.totalPages||7==this.totalPages?n--:f.push('<li class="page-first-separator disabled">','<a href="#">...</a>',"</li>"),r--)),this.totalPages>=7&&this.options.pageNumber>=this.totalPages-2&&n--,6==this.totalPages?this.options.pageNumber>=this.totalPages-2&&r++:this.totalPages>=7&&(7==this.totalPages||this.options.pageNumber>=this.totalPages-3)&&r++,t=n;r>=t;t++)f.push('<li class="page-number'+(t===this.options.pageNumber?" active":"")+'">','<a href="#">',t,"</a>","</li>");this.totalPages>=8&&this.options.pageNumber<=this.totalPages-4&&f.push('<li class="page-last-separator disabled">','<a href="#">...</a>',"</li>"),this.totalPages>=6&&this.options.pageNumber<=this.totalPages-3&&f.push('<li class="page-last'+(this.totalPages===this.options.pageNumber?" active":"")+'">','<a href="#">',this.totalPages,"</a>","</li>"),f.push('<li class="page-next"><a href="#">'+this.options.paginationNextText+"</a></li>","</ul>","</div>")}this.$pagination.html(f.join("")),this.options.onlyInfoPagination||(o=this.$pagination.find(".page-list a"),a=this.$pagination.find(".page-first"),s=this.$pagination.find(".page-pre"),l=this.$pagination.find(".page-next"),d=this.$pagination.find(".page-last"),c=this.$pagination.find(".page-number"),this.options.smartDisplay&&(this.totalPages<=1&&this.$pagination.find("div.pagination").hide(),(m.length<2||this.options.totalRows<=m[0])&&this.$pagination.find("span.page-list").hide(),this.$pagination[this.getData().length?"show":"hide"]()),this.options.paginationLoop||(1===this.options.pageNumber&&s.addClass("disabled"),this.options.pageNumber===this.totalPages&&l.addClass("disabled")),h&&(this.options.pageSize=this.options.formatAllRows()),o.off("click").on("click",e.proxy(this.onPageListChange,this)),a.off("click").on("click",e.proxy(this.onPageFirst,this)),s.off("click").on("click",e.proxy(this.onPagePre,this)),l.off("click").on("click",e.proxy(this.onPageNext,this)),d.off("click").on("click",e.proxy(this.onPageLast,this)),c.off("click").on("click",e.proxy(this.onPageNumber,this)))},p.prototype.updatePagination=function(t){t&&e(t.currentTarget).hasClass("disabled")||(this.options.maintainSelected||this.resetRows(),this.initPagination(),"server"===this.options.sidePagination?this.initServer():this.initBody(),this.trigger("page-change",this.options.pageNumber,this.options.pageSize))},p.prototype.onPageListChange=function(t){var i=e(t.currentTarget);return i.parent().addClass("active").siblings().removeClass("active"),this.options.pageSize=i.text().toUpperCase()===this.options.formatAllRows().toUpperCase()?this.options.formatAllRows():+i.text(),this.$toolbar.find(".page-size").text(this.options.pageSize),this.updatePagination(t),!1},p.prototype.onPageFirst=function(e){return this.options.pageNumber=1,this.updatePagination(e),!1},p.prototype.onPagePre=function(e){return this.options.pageNumber-1===0?this.options.pageNumber=this.options.totalPages:this.options.pageNumber--,this.updatePagination(e),!1},p.prototype.onPageNext=function(e){return this.options.pageNumber+1>this.options.totalPages?this.options.pageNumber=1:this.options.pageNumber++,this.updatePagination(e),!1},p.prototype.onPageLast=function(e){return this.options.pageNumber=this.totalPages,this.updatePagination(e),!1},p.prototype.onPageNumber=function(t){return this.options.pageNumber!==+e(t.currentTarget).text()?(this.options.pageNumber=+e(t.currentTarget).text(),this.updatePagination(t),!1):void 0},p.prototype.initRow=function(t,r){var o,a=this,l=[],c={},f=[],h="",p={},m=[];if(!(e.inArray(t,this.hiddenRows)>-1)){if(c=s(this.options,this.options.rowStyle,[t,r],c),c&&c.css)for(o in c.css)f.push(o+": "+c.css[o]);if(p=s(this.options,this.options.rowAttributes,[t,r],p))for(o in p)m.push(i('%s="%s"',o,d(p[o])));return t._data&&!e.isEmptyObject(t._data)&&e.each(t._data,function(e,t){"index"!==e&&(h+=i(' data-%s="%s"',e,t))}),l.push("<tr",i(" %s",m.join(" ")),i(' id="%s"',e.isArray(t)?void 0:t._id),i(' class="%s"',c.classes||(e.isArray(t)?void 0:t._class)),i(' data-index="%s"',r),i(' data-uniqueid="%s"',t[this.options.uniqueId]),i("%s",h),">"),this.options.cardView&&l.push(i('<td colspan="%s"><div class="card-views">',this.header.fields.length)),!this.options.cardView&&this.options.detailView&&l.push("<td>",'<a class="detail-icon" href="#">',i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.detailOpen),"</a>","</td>"),e.each(this.header.fields,function(o,h){var p="",m=u(t,h,a.options.escape),g="",v="",y={},b="",w=a.header.classes[o],x="",C="",_="",T="",E=a.columns[o];if(!(a.fromHtml&&"undefined"==typeof m||!E.visible||a.options.cardView&&!E.cardVisible)){if(E.escape&&(m=d(m)),c=i('style="%s"',f.concat(a.header.styles[o]).join("; ")),t["_"+h+"_id"]&&(b=i(' id="%s"',t["_"+h+"_id"])),t["_"+h+"_class"]&&(w=i(' class="%s"',t["_"+h+"_class"])),t["_"+h+"_rowspan"]&&(C=i(' rowspan="%s"',t["_"+h+"_rowspan"])),t["_"+h+"_colspan"]&&(_=i(' colspan="%s"',t["_"+h+"_colspan"])),t["_"+h+"_title"]&&(T=i(' title="%s"',t["_"+h+"_title"])),y=s(a.header,a.header.cellStyles[o],[m,t,r,h],y),y.classes&&(w=i(' class="%s"',y.classes)),y.css){var S=[];for(var k in y.css)S.push(k+": "+y.css[k]);c=i('style="%s"',S.concat(a.header.styles[o]).join("; "))}g=s(E,a.header.formatters[o],[m,t,r],m),t["_"+h+"_data"]&&!e.isEmptyObject(t["_"+h+"_data"])&&e.each(t["_"+h+"_data"],function(e,t){"index"!==e&&(x+=i(' data-%s="%s"',e,t))}),E.checkbox||E.radio?(v=E.checkbox?"checkbox":v,v=E.radio?"radio":v,p=[i(a.options.cardView?'<div class="card-view %s">':'<td class="bs-checkbox %s">',E["class"]||""),"<input"+i(' data-index="%s"',r)+i(' name="%s"',a.options.selectItemName)+i(' type="%s"',v)+i(' value="%s"',t[a.options.idField])+i(' checked="%s"',g===!0||m||g&&g.checked?"checked":void 0)+i(' disabled="%s"',!E.checkboxEnabled||g&&g.disabled?"disabled":void 0)+" />",a.header.formatters[o]&&"string"==typeof g?g:"",a.options.cardView?"</div>":"</td>"].join(""),t[a.header.stateField]=g===!0||g&&g.checked):(g="undefined"==typeof g||null===g?a.options.undefinedText:g,p=a.options.cardView?['<div class="card-view">',a.options.showHeader?i('<span class="title" %s>%s</span>',c,n(a.columns,"field","title",h)):"",i('<span class="value">%s</span>',g),"</div>"].join(""):[i("<td%s %s %s %s %s %s %s>",b,w,c,x,C,_,T),g,"</td>"].join(""),a.options.cardView&&a.options.smartDisplay&&""===g&&(p='<div class="card-view"></div>')),l.push(p)}}),this.options.cardView&&l.push("</div></td>"),l.push("</tr>"),l.join(" ")}},p.prototype.initBody=function(t){var n=this,o=this.getData();this.trigger("pre-body",o),this.$body=this.$el.find(">tbody"),this.$body.length||(this.$body=e("<tbody></tbody>").appendTo(this.$el)),this.options.pagination&&"server"!==this.options.sidePagination||(this.pageFrom=1,this.pageTo=o.length);for(var a,l=e(document.createDocumentFragment()),d=this.pageFrom-1;d<this.pageTo;d++){var c=o[d],f=this.initRow(c,d,o,l);a=a||!!f,f&&f!==!0&&l.append(f)}a||l.append('<tr class="no-records-found">'+i('<td colspan="%s">%s</td>',this.$header.find("th").length,this.options.formatNoMatches())+"</tr>"),this.$body.html(l),t||this.scrollTo(0),this.$body.find("> tr[data-index] > td").off("click dblclick").on("click dblclick",function(t){var o=e(this),a=o.parent(),s=n.data[a.data("index")],l=o[0].cellIndex,d=n.getVisibleFields(),c=d[n.options.detailView&&!n.options.cardView?l-1:l],f=n.columns[r(n.columns,c)],h=u(s,c,n.options.escape);if(!o.find(".detail-icon").length&&(n.trigger("click"===t.type?"click-cell":"dbl-click-cell",c,h,s,o),n.trigger("click"===t.type?"click-row":"dbl-click-row",s,a,c),"click"===t.type&&n.options.clickToSelect&&f.clickToSelect)){var p=a.find(i('[name="%s"]',n.options.selectItemName));p.length&&p[0].click()}}),this.$body.find("> tr[data-index] > td > .detail-icon").off("click").on("click",function(){var t=e(this),r=t.parent().parent(),a=r.data("index"),l=o[a];if(r.next().is("tr.detail-view"))t.find("i").attr("class",i("%s %s",n.options.iconsPrefix,n.options.icons.detailOpen)),n.trigger("collapse-row",a,l),r.next().remove();else{t.find("i").attr("class",i("%s %s",n.options.iconsPrefix,n.options.icons.detailClose)),r.after(i('<tr class="detail-view"><td colspan="%s"></td></tr>',r.find("td").length));var d=r.next().find("td"),c=s(n.options,n.options.detailFormatter,[a,l,d],"");1===d.length&&d.append(c),n.trigger("expand-row",a,l,d)}return n.resetView(),!1}),this.$selectItem=this.$body.find(i('[name="%s"]',this.options.selectItemName)),this.$selectItem.off("click").on("click",function(t){t.stopImmediatePropagation();var i=e(this),r=i.prop("checked"),o=n.data[i.data("index")];n.options.maintainSelected&&e(this).is(":radio")&&e.each(n.options.data,function(e,t){t[n.header.stateField]=!1}),o[n.header.stateField]=r,n.options.singleSelect&&(n.$selectItem.not(this).each(function(){n.data[e(this).data("index")][n.header.stateField]=!1}),n.$selectItem.filter(":checked").not(this).prop("checked",!1)),n.updateSelected(),n.trigger(r?"check":"uncheck",o,i)}),e.each(this.header.events,function(t,i){if(i){"string"==typeof i&&(i=s(null,i));var r=n.header.fields[t],o=e.inArray(r,n.getVisibleFields());n.options.detailView&&!n.options.cardView&&(o+=1);for(var a in i)n.$body.find(">tr:not(.no-records-found)").each(function(){var t=e(this),s=t.find(n.options.cardView?".card-view":"td").eq(o),l=a.indexOf(" "),d=a.substring(0,l),c=a.substring(l+1),u=i[a];s.find(c).off(d).on(d,function(e){var i=t.data("index"),o=n.data[i],a=o[r];u.apply(this,[e,a,o,i])})})}}),this.updateSelected(),this.resetView(),this.trigger("post-body",o)},p.prototype.initServer=function(t,i,n){var r,o=this,a={},l={searchText:this.searchText,sortName:this.options.sortName,sortOrder:this.options.sortOrder};this.options.pagination&&(l.pageSize=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize,l.pageNumber=this.options.pageNumber),(n||this.options.url||this.options.ajax)&&("limit"===this.options.queryParamsType&&(l={search:l.searchText,sort:l.sortName,order:l.sortOrder},this.options.pagination&&(l.offset=this.options.pageSize===this.options.formatAllRows()?0:this.options.pageSize*(this.options.pageNumber-1),l.limit=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize)),e.isEmptyObject(this.filterColumnsPartial)||(l.filter=JSON.stringify(this.filterColumnsPartial,null)),a=s(this.options,this.options.queryParams,[l],a),e.extend(a,i||{}),a!==!1&&(t||this.$tableLoading.show(),r=e.extend({},s(null,this.options.ajaxOptions),{type:this.options.method,url:n||this.options.url,data:"application/json"===this.options.contentType&&"post"===this.options.method?JSON.stringify(a):a,cache:this.options.cache,contentType:this.options.contentType,dataType:this.options.dataType,success:function(e){e=s(o.options,o.options.responseHandler,[e],e),o.load(e),o.trigger("load-success",e),t||o.$tableLoading.hide()},error:function(e){o.trigger("load-error",e.status,e),t||o.$tableLoading.hide()}}),this.options.ajax?s(this,this.options.ajax,[r],null):(this._xhr&&4!==this._xhr.readyState&&this._xhr.abort(),this._xhr=e.ajax(r))))},p.prototype.initSearchText=function(){if(this.options.search&&""!==this.options.searchText){var e=this.$toolbar.find(".search input");e.val(this.options.searchText),this.onSearch({currentTarget:e})}},p.prototype.getCaret=function(){var t=this;e.each(this.$header.find("th"),function(i,n){e(n).find(".sortable").removeClass("desc asc").addClass(e(n).data("field")===t.options.sortName?t.options.sortOrder:"both")})},p.prototype.updateSelected=function(){var t=this.$selectItem.filter(":enabled").length&&this.$selectItem.filter(":enabled").length===this.$selectItem.filter(":enabled").filter(":checked").length;this.$selectAll.add(this.$selectAll_).prop("checked",t),this.$selectItem.each(function(){e(this).closest("tr")[e(this).prop("checked")?"addClass":"removeClass"]("selected")})},p.prototype.updateRows=function(){var t=this;this.$selectItem.each(function(){t.data[e(this).data("index")][t.header.stateField]=e(this).prop("checked")})},p.prototype.resetRows=function(){var t=this;e.each(this.data,function(e,i){t.$selectAll.prop("checked",!1),t.$selectItem.prop("checked",!1),t.header.stateField&&(i[t.header.stateField]=!1)}),this.initHiddenRows()},p.prototype.trigger=function(t){var i=Array.prototype.slice.call(arguments,1);t+=".bs.table",this.options[p.EVENTS[t]].apply(this.options,i),this.$el.trigger(e.Event(t),i),this.options.onAll(t,i),this.$el.trigger(e.Event("all.bs.table"),[t,i])},p.prototype.resetHeader=function(){clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(e.proxy(this.fitHeader,this),this.$el.is(":hidden")?100:0)},p.prototype.fitHeader=function(){var t,n,r,o,s=this;if(s.$el.is(":hidden"))return void(s.timeoutId_=setTimeout(e.proxy(s.fitHeader,s),100));if(t=this.$tableBody.get(0),n=t.scrollWidth>t.clientWidth&&t.scrollHeight>t.clientHeight+this.$header.outerHeight()?a():0,this.$el.css("margin-top",-this.$header.outerHeight()),r=e(":focus"),r.length>0){var l=r.parents("th");if(l.length>0){var d=l.attr("data-field");if(void 0!==d){var c=this.$header.find("[data-field='"+d+"']");c.length>0&&c.find(":input").addClass("focus-temp")}}}this.$header_=this.$header.clone(!0,!0),this.$selectAll_=this.$header_.find('[name="btSelectAll"]'),this.$tableHeader.css({"margin-right":n}).find("table").css("width",this.$el.outerWidth()).html("").attr("class",this.$el.attr("class")).append(this.$header_),o=e(".focus-temp:visible:eq(0)"),o.length>0&&(o.focus(),this.$header.find(".focus-temp").removeClass("focus-temp")),this.$header.find("th[data-field]").each(function(){s.$header_.find(i('th[data-field="%s"]',e(this).data("field"))).data(e(this).data())});var u=this.getVisibleFields(),f=this.$header_.find("th");this.$body.find(">tr:first-child:not(.no-records-found) > *").each(function(t){var n=e(this),r=t;s.options.detailView&&!s.options.cardView&&(0===t&&s.$header_.find("th.detail").find(".fht-cell").width(n.innerWidth()),r=t-1);var o=s.$header_.find(i('th[data-field="%s"]',u[r]));o.length>1&&(o=e(f[n[0].cellIndex])),o.find(".fht-cell").width(n.innerWidth())}),this.$tableBody.off("scroll").on("scroll",function(){s.$tableHeader.scrollLeft(e(this).scrollLeft()),s.options.showFooter&&!s.options.cardView&&s.$tableFooter.scrollLeft(e(this).scrollLeft())}),s.trigger("post-header")},p.prototype.resetFooter=function(){var t=this,n=t.getData(),r=[];this.options.showFooter&&!this.options.cardView&&(!this.options.cardView&&this.options.detailView&&r.push('<td><div class="th-inner">&nbsp;</div><div class="fht-cell"></div></td>'),e.each(this.columns,function(e,o){var a,l="",d="",c=[],u={},f=i(' class="%s"',o["class"]);if(o.visible&&(!t.options.cardView||o.cardVisible)){if(l=i("text-align: %s; ",o.falign?o.falign:o.align),d=i("vertical-align: %s; ",o.valign),u=s(null,t.options.footerStyle),u&&u.css)for(a in u.css)c.push(a+": "+u.css[a]);r.push("<td",f,i(' style="%s"',l+d+c.concat().join("; ")),">"),r.push('<div class="th-inner">'),r.push(s(o,o.footerFormatter,[n],"&nbsp;")||"&nbsp;"),r.push("</div>"),r.push('<div class="fht-cell"></div>'),r.push("</div>"),r.push("</td>")}}),this.$tableFooter.find("tr").html(r.join("")),this.$tableFooter.show(),clearTimeout(this.timeoutFooter_),this.timeoutFooter_=setTimeout(e.proxy(this.fitFooter,this),this.$el.is(":hidden")?100:0))},p.prototype.fitFooter=function(){var t,i,n;return clearTimeout(this.timeoutFooter_),this.$el.is(":hidden")?void(this.timeoutFooter_=setTimeout(e.proxy(this.fitFooter,this),100)):(i=this.$el.css("width"),n=i>this.$tableBody.width()?a():0,this.$tableFooter.css({"margin-right":n}).find("table").css("width",i).attr("class",this.$el.attr("class")),t=this.$tableFooter.find("td"),void this.$body.find(">tr:first-child:not(.no-records-found) > *").each(function(i){var n=e(this);t.eq(i).find(".fht-cell").width(n.innerWidth())}))},p.prototype.toggleColumn=function(e,t,n){if(-1!==e&&(this.columns[e].visible=t,this.initHeader(),this.initSearch(),this.initPagination(),this.initBody(),this.options.showColumns)){var r=this.$toolbar.find(".keep-open input").prop("disabled",!1);n&&r.filter(i('[value="%s"]',e)).prop("checked",t),r.filter(":checked").length<=this.options.minimumCountColumns&&r.filter(":checked").prop("disabled",!0)}},p.prototype.getVisibleFields=function(){var t=this,i=[];return e.each(this.header.fields,function(e,n){var o=t.columns[r(t.columns,n)];o.visible&&i.push(n)}),i},p.prototype.resetView=function(e){var t=0;if(e&&e.height&&(this.options.height=e.height),this.$selectAll.prop("checked",this.$selectItem.length>0&&this.$selectItem.length===this.$selectItem.filter(":checked").length),this.options.height){var i=this.$toolbar.outerHeight(!0),n=this.$pagination.outerHeight(!0),r=this.options.height-i-n;this.$tableContainer.css("height",r+"px")}return this.options.cardView?(this.$el.css("margin-top","0"),this.$tableContainer.css("padding-bottom","0"),void this.$tableFooter.hide()):(this.options.showHeader&&this.options.height?(this.$tableHeader.show(),this.resetHeader(),t+=this.$header.outerHeight()):(this.$tableHeader.hide(),this.trigger("post-header")),this.options.showFooter&&(this.resetFooter(),this.options.height&&(t+=this.$tableFooter.outerHeight()+1)),this.getCaret(),this.$tableContainer.css("padding-bottom",t+"px"),void this.trigger("reset-view"))},p.prototype.getData=function(t){return!this.searchText&&e.isEmptyObject(this.filterColumns)&&e.isEmptyObject(this.filterColumnsPartial)?t?this.options.data.slice(this.pageFrom-1,this.pageTo):this.options.data:t?this.data.slice(this.pageFrom-1,this.pageTo):this.data},p.prototype.load=function(t){var i=!1;"server"===this.options.sidePagination?(this.options.totalRows=t[this.options.totalField],i=t.fixedScroll,t=t[this.options.dataField]):e.isArray(t)||(i=t.fixedScroll,t=t.data),this.initData(t),this.initSearch(),this.initPagination(),this.initBody(i)},p.prototype.append=function(e){this.initData(e,"append"),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0)},p.prototype.prepend=function(e){this.initData(e,"prepend"),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0)},p.prototype.remove=function(t){var i,n,r=this.options.data.length;if(t.hasOwnProperty("field")&&t.hasOwnProperty("values")){for(i=r-1;i>=0;i--)n=this.options.data[i],n.hasOwnProperty(t.field)&&-1!==e.inArray(n[t.field],t.values)&&(this.options.data.splice(i,1),"server"===this.options.sidePagination&&(this.options.totalRows-=1));r!==this.options.data.length&&(this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0))}},p.prototype.removeAll=function(){this.options.data.length>0&&(this.options.data.splice(0,this.options.data.length),this.initSearch(),this.initPagination(),this.initBody(!0))},p.prototype.getRowByUniqueId=function(e){var t,i,n,r=this.options.uniqueId,o=this.options.data.length,a=null;for(t=o-1;t>=0;t--){if(i=this.options.data[t],i.hasOwnProperty(r))n=i[r];else{if(!i._data.hasOwnProperty(r))continue;n=i._data[r]}if("string"==typeof n?e=e.toString():"number"==typeof n&&(Number(n)===n&&n%1===0?e=parseInt(e):n===Number(n)&&0!==n&&(e=parseFloat(e))),n===e){a=i;break}}return a},p.prototype.removeByUniqueId=function(e){var t=this.options.data.length,i=this.getRowByUniqueId(e);i&&this.options.data.splice(this.options.data.indexOf(i),1),t!==this.options.data.length&&(this.initSearch(),this.initPagination(),this.initBody(!0))},p.prototype.updateByUniqueId=function(t){var i=this,n=e.isArray(t)?t:[t];e.each(n,function(t,n){var r;n.hasOwnProperty("id")&&n.hasOwnProperty("row")&&(r=e.inArray(i.getRowByUniqueId(n.id),i.options.data),-1!==r&&e.extend(i.options.data[r],n.row))}),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0)},p.prototype.insertRow=function(e){e.hasOwnProperty("index")&&e.hasOwnProperty("row")&&(this.data.splice(e.index,0,e.row),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0))},p.prototype.updateRow=function(t){var i=this,n=e.isArray(t)?t:[t];e.each(n,function(t,n){n.hasOwnProperty("index")&&n.hasOwnProperty("row")&&e.extend(i.options.data[n.index],n.row)}),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0)},p.prototype.initHiddenRows=function(){this.hiddenRows=[]},p.prototype.showRow=function(e){this.toggleRow(e,!0)},p.prototype.hideRow=function(e){this.toggleRow(e,!1)},p.prototype.toggleRow=function(t,i){var n,r;t.hasOwnProperty("index")?n=this.getData()[t.index]:t.hasOwnProperty("uniqueId")&&(n=this.getRowByUniqueId(t.uniqueId)),n&&(r=e.inArray(n,this.hiddenRows),i||-1!==r?i&&r>-1&&this.hiddenRows.splice(r,1):this.hiddenRows.push(n),this.initBody(!0))},p.prototype.getHiddenRows=function(){var t=this,i=this.getData(),n=[];return e.each(i,function(i,r){e.inArray(r,t.hiddenRows)>-1&&n.push(r)}),this.hiddenRows=n,n},p.prototype.mergeCells=function(t){var i,n,r,o=t.index,a=e.inArray(t.field,this.getVisibleFields()),s=t.rowspan||1,l=t.colspan||1,d=this.$body.find(">tr");if(this.options.detailView&&!this.options.cardView&&(a+=1),r=d.eq(o).find(">td").eq(a),!(0>o||0>a||o>=this.data.length)){for(i=o;o+s>i;i++)for(n=a;a+l>n;n++)d.eq(i).find(">td").eq(n).hide();r.attr("rowspan",s).attr("colspan",l).show()}},p.prototype.updateCell=function(e){e.hasOwnProperty("index")&&e.hasOwnProperty("field")&&e.hasOwnProperty("value")&&(this.data[e.index][e.field]=e.value,e.reinit!==!1&&(this.initSort(),this.initBody(!0)))},p.prototype.getOptions=function(){return this.options},p.prototype.getSelections=function(){var t=this;return e.grep(this.options.data,function(e){return e[t.header.stateField]===!0})},p.prototype.getAllSelections=function(){var t=this;return e.grep(this.options.data,function(e){return e[t.header.stateField]})},p.prototype.checkAll=function(){this.checkAll_(!0)},p.prototype.uncheckAll=function(){this.checkAll_(!1)},p.prototype.checkInvert=function(){var t=this,i=t.$selectItem.filter(":enabled"),n=i.filter(":checked");i.each(function(){e(this).prop("checked",!e(this).prop("checked"))}),t.updateRows(),t.updateSelected(),t.trigger("uncheck-some",n),n=t.getSelections(),t.trigger("check-some",n)},p.prototype.checkAll_=function(e){var t;e||(t=this.getSelections()),this.$selectAll.add(this.$selectAll_).prop("checked",e),this.$selectItem.filter(":enabled").prop("checked",e),this.updateRows(),e&&(t=this.getSelections()),this.trigger(e?"check-all":"uncheck-all",t)},p.prototype.check=function(e){this.check_(!0,e)},p.prototype.uncheck=function(e){this.check_(!1,e)},p.prototype.check_=function(e,t){var n=this.$selectItem.filter(i('[data-index="%s"]',t)).prop("checked",e);this.data[t][this.header.stateField]=e,this.updateSelected(),this.trigger(e?"check":"uncheck",this.data[t],n)},p.prototype.checkBy=function(e){this.checkBy_(!0,e)},p.prototype.uncheckBy=function(e){this.checkBy_(!1,e)},p.prototype.checkBy_=function(t,n){if(n.hasOwnProperty("field")&&n.hasOwnProperty("values")){var r=this,o=[];e.each(this.options.data,function(a,s){if(!s.hasOwnProperty(n.field))return!1;if(-1!==e.inArray(s[n.field],n.values)){var l=r.$selectItem.filter(":enabled").filter(i('[data-index="%s"]',a)).prop("checked",t);s[r.header.stateField]=t,o.push(s),r.trigger(t?"check":"uncheck",s,l)}}),this.updateSelected(),this.trigger(t?"check-some":"uncheck-some",o)}},p.prototype.destroy=function(){this.$el.insertBefore(this.$container),e(this.options.toolbar).insertBefore(this.$el),this.$container.next().remove(),this.$container.remove(),this.$el.html(this.$el_.html()).css("margin-top","0").attr("class",this.$el_.attr("class")||"")},p.prototype.showLoading=function(){this.$tableLoading.show()},p.prototype.hideLoading=function(){this.$tableLoading.hide()},p.prototype.togglePagination=function(){this.options.pagination=!this.options.pagination;var e=this.$toolbar.find('button[name="paginationSwitch"] i');this.options.pagination?e.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchDown):e.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchUp),this.updatePagination()},p.prototype.refresh=function(e){e&&e.url&&(this.options.url=e.url),e&&e.pageNumber&&(this.options.pageNumber=e.pageNumber),e&&e.pageSize&&(this.options.pageSize=e.pageSize),this.initServer(e&&e.silent,e&&e.query,e&&e.url),this.trigger("refresh",e)},p.prototype.resetWidth=function(){this.options.showHeader&&this.options.height&&this.fitHeader(),this.options.showFooter&&this.fitFooter()},p.prototype.showColumn=function(e){this.toggleColumn(r(this.columns,e),!0,!0)},p.prototype.hideColumn=function(e){this.toggleColumn(r(this.columns,e),!1,!0)},p.prototype.getHiddenColumns=function(){return e.grep(this.columns,function(e){return!e.visible})},p.prototype.getVisibleColumns=function(){return e.grep(this.columns,function(e){return e.visible})},p.prototype.toggleAllColumns=function(t){if(e.each(this.columns,function(e){this.columns[e].visible=t}),this.initHeader(),this.initSearch(),this.initPagination(),this.initBody(),this.options.showColumns){var i=this.$toolbar.find(".keep-open input").prop("disabled",!1);i.filter(":checked").length<=this.options.minimumCountColumns&&i.filter(":checked").prop("disabled",!0)}},p.prototype.showAllColumns=function(){this.toggleAllColumns(!0)},p.prototype.hideAllColumns=function(){this.toggleAllColumns(!1)},p.prototype.filterBy=function(t){this.filterColumns=e.isEmptyObject(t)?{}:t,this.options.pageNumber=1,this.initSearch(),this.updatePagination()},p.prototype.scrollTo=function(e){return"string"==typeof e&&(e="bottom"===e?this.$tableBody[0].scrollHeight:0),"number"==typeof e&&this.$tableBody.scrollTop(e),"undefined"==typeof e?this.$tableBody.scrollTop():void 0},p.prototype.getScrollPosition=function(){return this.scrollTo()},p.prototype.selectPage=function(e){e>0&&e<=this.options.totalPages&&(this.options.pageNumber=e,this.updatePagination())},p.prototype.prevPage=function(){this.options.pageNumber>1&&(this.options.pageNumber--,this.updatePagination())},p.prototype.nextPage=function(){this.options.pageNumber<this.options.totalPages&&(this.options.pageNumber++,this.updatePagination())},p.prototype.toggleView=function(){this.options.cardView=!this.options.cardView,this.initHeader(),this.initBody(),this.trigger("toggle",this.options.cardView)},p.prototype.refreshOptions=function(t){l(this.options,t,!0)||(this.options=e.extend(this.options,t),this.trigger("refresh-options",this.options),this.destroy(),this.init())},p.prototype.resetSearch=function(e){var t=this.$toolbar.find(".search input");t.val(e||""),this.onSearch({currentTarget:t})},p.prototype.expandRow_=function(e,t){var n=this.$body.find(i('> tr[data-index="%s"]',t));n.next().is("tr.detail-view")===(e?!1:!0)&&n.find("> td > .detail-icon").click()},p.prototype.expandRow=function(e){this.expandRow_(!0,e)},p.prototype.collapseRow=function(e){this.expandRow_(!1,e)},p.prototype.expandAllRows=function(t){if(t){var n=this.$body.find(i('> tr[data-index="%s"]',0)),r=this,o=null,a=!1,s=-1;if(n.next().is("tr.detail-view")?n.next().next().is("tr.detail-view")||(n.next().find(".detail-icon").click(),a=!0):(n.find("> td > .detail-icon").click(),a=!0),a)try{s=setInterval(function(){o=r.$body.find("tr.detail-view").last().find(".detail-icon"),o.length>0?o.click():clearInterval(s)},1)}catch(e){clearInterval(s)}}else for(var l=this.$body.children(),d=0;d<l.length;d++)this.expandRow_(!0,e(l[d]).data("index"))},p.prototype.collapseAllRows=function(t){if(t)this.expandRow_(!1,0);else for(var i=this.$body.children(),n=0;n<i.length;n++)this.expandRow_(!1,e(i[n]).data("index"))},p.prototype.updateFormatText=function(e,t){this.options[i("format%s",e)]&&("string"==typeof t?this.options[i("format%s",e)]=function(){return t}:"function"==typeof t&&(this.options[i("format%s",e)]=t)),this.initToolbar(),this.initPagination(),this.initBody()};var m=["getOptions","getSelections","getAllSelections","getData","load","append","prepend","remove","removeAll","insertRow","updateRow","updateCell","updateByUniqueId","removeByUniqueId","getRowByUniqueId","showRow","hideRow","getHiddenRows","mergeCells","checkAll","uncheckAll","checkInvert","check","uncheck","checkBy","uncheckBy","refresh","resetView","resetWidth","destroy","showLoading","hideLoading","showColumn","hideColumn","getHiddenColumns","getVisibleColumns","showAllColumns","hideAllColumns","filterBy","scrollTo","getScrollPosition","selectPage","prevPage","nextPage","togglePagination","toggleView","refreshOptions","resetSearch","expandRow","collapseRow","expandAllRows","collapseAllRows","updateFormatText"];e.fn.bootstrapTable=function(t){var i,n=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=e(this),o=r.data("bootstrap.table"),a=e.extend({},p.DEFAULTS,r.data(),"object"==typeof t&&t);if("string"==typeof t){if(e.inArray(t,m)<0)throw new Error("Unknown method: "+t);if(!o)return;i=o[t].apply(o,n),"destroy"===t&&r.removeData("bootstrap.table")}o||r.data("bootstrap.table",o=new p(this,a))}),"undefined"==typeof i?this:i},e.fn.bootstrapTable.Constructor=p,e.fn.bootstrapTable.defaults=p.DEFAULTS,e.fn.bootstrapTable.columnDefaults=p.COLUMN_DEFAULTS,e.fn.bootstrapTable.locales=p.LOCALES,e.fn.bootstrapTable.methods=m,e.fn.bootstrapTable.utils={sprintf:i,getFieldIndex:r,compareObjects:l,calculateObjectValue:s,getItemField:u,objectKeys:h,isIEBrowser:f},e(function(){e('[data-toggle="table"]').bootstrapTable()})}(jQuery);define("bootstrap-table",["bootstrap"],function(e){return function(){var t,i;return t||e.$.fn.bootstrapTable}}(this));(function(e){"use strict";e.fn.bootstrapTable.locales["zh-CN"]={formatLoadingMessage:function(){return""},formatRecordsPerPage:function(e){return" "+e+" "},formatShowingRows:function(e,t,i){return" "+e+"  "+t+"  "+i+" "},formatSearch:function(){return""},formatNoMatches:function(){return""},formatPaginationSwitch:function(){return"/"},formatRefresh:function(){return""},formatToggle:function(){return""},formatColumns:function(){return""},formatExport:function(){return""},formatClearFilters:function(){return""}};e.extend(e.fn.bootstrapTable.defaults,e.fn.bootstrapTable.locales["zh-CN"])})(jQuery);define("bootstrap-table-lang",["bootstrap-table"],function(e){return function(){var t,i;return t||e.$.fn.bootstrapTable.defaults}}(this));!function(e){"use strict";var t=function(t,i){if(t.options.columnsHidden.length>0){e.each(t.columns,function(n,r){if(t.options.columnsHidden.indexOf(r.field)!==-1){if(r.visible!==i){t.toggleColumn(e.fn.bootstrapTable.utils.getFieldIndex(t.columns,r.field),i,true)}}})}};var i=function(e){if(e.options.height||e.options.showFooter){setTimeout(function(){e.resetView.call(e)},1)}};var n=function(e,t,n){if(e.options.minHeight){if(t<=e.options.minWidth&&n<=e.options.minHeight){r(e)}else if(t>e.options.minWidth&&n>e.options.minHeight){o(e)}}else{if(t<=e.options.minWidth){r(e)}else if(t>e.options.minWidth){o(e)}}i(e)};var r=function(e){a(e,false);t(e,false)};var o=function(e){a(e,true);t(e,true)};var a=function(e,t){e.options.cardView=t;e.toggleView()};var s=function(e,t){var i;return function(){var n=this,r=arguments;var o=function(){i=null;e.apply(n,r)};clearTimeout(i);i=setTimeout(o,t)}};e.extend(e.fn.bootstrapTable.defaults,{mobileResponsive:false,minWidth:562,minHeight:undefined,heightThreshold:100,checkOnInit:true,columnsHidden:[]});var l=e.fn.bootstrapTable.Constructor,d=l.prototype.init;l.prototype.init=function(){d.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.mobileResponsive){return}if(!this.options.minWidth){return}if(this.options.minWidth<100&&this.options.resizable){console.log("The minWidth when the resizable extension is active should be greater or equal than 100");this.options.minWidth=100}var t=this,i={width:e(window).width(),height:e(window).height()};e(window).on("resize orientationchange",s(function(r){var o=e(this).height(),a=e(this).width();if(Math.abs(i.height-o)>t.options.heightThreshold||i.width!=a){n(t,a,o);i={width:a,height:o}}},200));if(this.options.checkOnInit){var r=e(window).height(),o=e(window).width();n(this,o,r);i={width:o,height:r}}}}(jQuery);define("bootstrap-table-mobile",["bootstrap-table"],function(e){return function(){var t,i;return t||e.$.fn.bootstrapTable.defaults}}(this));(function(e){e.fn.extend({tableExport:function(t){function i(t){var i=[];e(t).find("thead").first().find("th").each(function(t,n){void 0!==e(n).attr("data-field")?i[t]=e(n).attr("data-field"):i[t]=t.toString()});return i}function n(t,i,n,r,o){if(-1==e.inArray(n,T.ignoreRow)&&-1==e.inArray(n-r,T.ignoreRow)){var a=e(t).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display")||"always"==e(this).closest("table").data("tableexport-display"))}).find(i),s=0;a.each(function(t){if(("always"==e(this).data("tableexport-display")||"none"!=e(this).css("display")&&"hidden"!=e(this).css("visibility")&&"none"!=e(this).data("tableexport-display"))&&"function"===typeof o){var i,r=1,l=1;var d=a.length;if("undefined"!=typeof R[n]&&0<R[n].length){var c=t;for(i=0;i<=c;i++)"undefined"!=typeof R[n][i]&&(o(null,n,i),delete R[n][i],c++);t+=R[n].length;d+=R[n].length}e(this).is("[colspan]")&&(r=parseInt(e(this).attr("colspan"))||1,s+=0<r?r-1:0);e(this).is("[rowspan]")&&(l=parseInt(e(this).attr("rowspan"))||1);i=d;d=t+s;c=!1;0<T.ignoreColumn.length&&("string"==typeof T.ignoreColumn[0]?I.length>d&&"undefined"!=typeof I[d]&&-1!=e.inArray(I[d],T.ignoreColumn)&&(c=!0):"number"!=typeof T.ignoreColumn[0]||-1==e.inArray(d,T.ignoreColumn)&&-1==e.inArray(d-i,T.ignoreColumn)||(c=!0));if(!1===c)for(o(this,n,t),i=1;i<r;i++)o(null,n,t+i);if(1<l)for(d=1;d<l;d++)for("undefined"==typeof R[n+d]&&(R[n+d]=[]),R[n+d][t+s]="",i=1;i<r;i++)R[n+d][t+s-i]=""}});if("undefined"!=typeof R[n]&&0<R[n].length)for(t=0;t<=R[n].length;t++)"undefined"!=typeof R[n][t]&&(o(null,n,t),delete R[n][t])}}function r(e,t){!0===T.consoleLog&&console.log(e.output());if("string"===T.outputMode)return e.output();if("base64"===T.outputMode)return _(e.output());if("window"===T.outputMode)window.open(URL.createObjectURL(e.output("blob")));else try{var i=e.output("blob");saveAs(i,T.fileName+".pdf")}catch(n){C(T.fileName+".pdf","data:application/pdf"+(t?"":";base64")+",",t?i:e.output())}}function o(e,t,i){var n=0;"undefined"!=typeof i&&(n=i.colspan);if(0<=n){for(var r=e.width,o=e.textPos.x,a=t.table.columns.indexOf(t.column),s=1;s<n;s++)r+=t.table.columns[a+s].width;1<n&&("right"===e.styles.halign?o=e.textPos.x+r-e.width:"center"===e.styles.halign&&(o=e.textPos.x+(r-e.width)/2));e.width=r;e.textPos.x=o;"undefined"!=typeof i&&1<i.rowspan&&(e.height*=i.rowspan);if("middle"===e.styles.valign||"bottom"===e.styles.valign)i=("string"===typeof e.text?e.text.split(/\r\n|\r|\n/g):e.text).length||1,2<i&&(e.textPos.y-=(2-1.15)/2*t.row.styles.fontSize*(i-2)/3);return!0}return!1}function a(t,i,n){"undefined"!=typeof n.images&&i.each(function(){var i=e(this).children();if(e(this).is("img")){var r=x(this.src);n.images[r]={url:this.src,src:this.src}}"undefined"!=typeof i&&0<i.length&&a(t,i,n)})}function s(e,t){function i(e){if(e.url){var i=new Image;r=++o;i.crossOrigin="Anonymous";i.onerror=i.onload=function(){if(i.complete&&(0===i.src.indexOf("data:image/")&&(i.width=e.width||i.width||0,i.height=e.height||i.height||0),i.width+i.height)){var n=document.createElement("canvas"),a=n.getContext("2d");n.width=i.width;n.height=i.height;a.drawImage(i,0,0);e.src=n.toDataURL("image/jpeg")}--o||t(r)};i.src=e.url}}var n,r=0,o=0;if("undefined"!=typeof e.images)for(n in e.images)e.images.hasOwnProperty(n)&&i(e.images[n]);(n=o)||(t(r),n=void 0);return n}function l(t,i,n){i.each(function(){var i=e(this).children();if(e(this).is("div")){var r=p(g(this,"background-color"),[255,255,255]),o=p(g(this,"border-top-color"),[0,0,0]),a=v(this,"border-top-width",T.jspdf.unit),s=this.getBoundingClientRect(),d=this.offsetLeft*n.dw;var c=this.offsetTop*n.dh;var u=s.width*n.dw,s=s.height*n.dh;n.doc.setDrawColor.apply(void 0,o);n.doc.setFillColor.apply(void 0,r);n.doc.setLineWidth(a);n.doc.rect(t.x+d,t.y+c,u,s,a?"FD":"F")}else if(e(this).is("img")&&"undefined"!=typeof n.images&&(c=x(this.src),r=n.images[c],"undefined"!=typeof r)){o=t.width/t.height;a=this.width/this.height;d=t.width;u=t.height;s=19.049976/25.4;c=0;a<=o?(u=Math.min(t.height,this.height),d=this.width*u/this.height):a>o&&(d=Math.min(t.width,this.width),u=this.height*d/this.width);d*=s;u*=s;u<t.height&&(c=(t.height-u)/2);try{n.doc.addImage(r.src,t.textPos.x,t.y+c,d,u)}catch(e){}t.textPos.x+=d}"undefined"!=typeof i&&0<i.length&&l(t,i,n)})}function d(t,i,n){if("function"===typeof n.onAutotableText)n.onAutotableText(n.doc,t,i);else{var r=t.textPos.x,o=t.textPos.y,a={halign:t.styles.halign,valign:t.styles.valign};if(i.length){for(i=i[0];i.previousSibling;)i=i.previousSibling;for(var s=!1,l=!1;i;){var d=i.innerText||i.textContent||"",d=(d.length&&" "==d[0]?" ":"")+e.trim(d)+(1<d.length&&" "==d[d.length-1]?" ":"");e(i).is("br")&&(r=t.textPos.x,o+=n.doc.internal.getFontSize());e(i).is("b")?s=!0:e(i).is("i")&&(l=!0);(s||l)&&n.doc.setFontType(s&&l?"bolditalic":s?"bold":"italic");var c=n.doc.getStringUnitWidth(d)*n.doc.internal.getFontSize();if(c){if("linebreak"===t.styles.overflow&&r>t.textPos.x&&r+c>t.textPos.x+t.width){if(0<=".,!%*;:=-".indexOf(d.charAt(0))){var u=d.charAt(0),c=n.doc.getStringUnitWidth(u)*n.doc.internal.getFontSize();r+c<=t.textPos.x+t.width&&(n.doc.autoTableText(u,r,o,a),d=d.substring(1,d.length));c=n.doc.getStringUnitWidth(d)*n.doc.internal.getFontSize()}r=t.textPos.x;o+=n.doc.internal.getFontSize()}for(;d.length&&r+c>t.textPos.x+t.width;)d=d.substring(0,d.length-1),c=n.doc.getStringUnitWidth(d)*n.doc.internal.getFontSize();n.doc.autoTableText(d,r,o,a);r+=c}if(s||l)e(i).is("b")?s=!1:e(i).is("i")&&(l=!1),n.doc.setFontType(s||l?s?"bold":"italic":"normal");i=i.nextSibling}t.textPos.x=r;t.textPos.y=o}else n.doc.autoTableText(t.text,t.textPos.x,t.textPos.y,a)}}function c(e,t,i){return e.replace(new RegExp(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),i)}function u(e){e=c(e||"0",T.numbers.html.thousandsSeparator,"");e=c(e,T.numbers.html.decimalMark,".");return"number"===typeof e||!1!==jQuery.isNumeric(e)?e:!1}function f(t,i,n){var r="";if(null!==t){var o=e(t);if(o[0].hasAttribute("data-tableexport-value"))var a=o.data("tableexport-value");else if(a=o.html(),"function"===typeof T.onCellHtmlData)a=T.onCellHtmlData(o,i,n,a);else if(""!=a){t=e.parseHTML(a);var s=0,l=0;a="";e.each(t,function(){if(e(this).is("input"))a+=o.find("input").eq(s++).val();else if(e(this).is("select"))a+=o.find("select option:selected").eq(l++).text();else if("undefined"===typeof e(this).html())a+=e(this).text();else if(void 0===jQuery().bootstrapTable||!0!==e(this).hasClass("filterControl"))a+=e(this).html()})}if(!0===T.htmlContent)r=e.trim(a);else if(""!=a){var d=a.replace(/\n/g,"\u2028").replace(/<br\s*[\/]?>/gi,"");t=e("<div/>").html(d).contents();d="";e.each(t.text().split("\u2028"),function(t,i){0<t&&(d+=" ");d+=e.trim(i)});e.each(d.split(""),function(t,i){0<t&&(r+="\n");r+=e.trim(i).replace(/\u00AD/g,"")});if("json"==T.type||"excel"===T.type&&"xmlss"===T.excelFileFormat||!1===T.numbers.output)t=u(r),!1!==t&&(r=Number(t));else if(T.numbers.html.decimalMark!=T.numbers.output.decimalMark||T.numbers.html.thousandsSeparator!=T.numbers.output.thousandsSeparator)if(t=u(r),!1!==t){var c=(""+t).split(".");1==c.length&&(c[1]="");var f=3<c[0].length?c[0].length%3:0,r=(0>t?"-":"")+(T.numbers.output.thousandsSeparator?(f?c[0].substr(0,f)+T.numbers.output.thousandsSeparator:"")+c[0].substr(f).replace(/(\d{3})(?=\d)/g,"$1"+T.numbers.output.thousandsSeparator):c[0])+(c[1].length?T.numbers.output.decimalMark+c[1]:"")}}!0===T.escape&&(r=escape(r));"function"===typeof T.onCellData&&(r=T.onCellData(o,i,n,r))}return r}function h(e,t,i){return t+"-"+i.toLowerCase()}function p(e,t){var i=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/.exec(e),n=t;i&&(n=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])]);return n}function m(t){var i=g(t,"text-align"),n=g(t,"font-weight"),r=g(t,"font-style"),o="";"start"==i&&(i="rtl"==g(t,"direction")?"right":"left");700<=n&&(o="bold");"italic"==r&&(o+=r);""===o&&(o="normal");i={style:{align:i,bcolor:p(g(t,"background-color"),[255,255,255]),color:p(g(t,"color"),[0,0,0]),fstyle:o},colspan:parseInt(e(t).attr("colspan"))||0,rowspan:parseInt(e(t).attr("rowspan"))||0};null!==t&&(t=t.getBoundingClientRect(),i.rect={width:t.width,height:t.height});return i}function g(e,t){try{return window.getComputedStyle?(t=t.replace(/([a-z])([A-Z])/,h),window.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle?e.currentStyle[t]:e.style[t]}catch(e){}return""}function v(e,t,i){t=g(e,t).match(/\d+/);if(null!==t){t=t[0];e=e.parentElement;var n=document.createElement("div");n.style.overflow="hidden";n.style.visibility="hidden";e.appendChild(n);n.style.width=100+i;i=100/n.offsetWidth;e.removeChild(n);return t*i}return 0}function y(){if(!(this instanceof y))return new y;this.SheetNames=[];this.Sheets={}}function b(e){for(var t=new ArrayBuffer(e.length),i=new Uint8Array(t),n=0;n!=e.length;++n)i[n]=e.charCodeAt(n)&255;return t}function w(e){for(var t={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}},n=0;n!=e.length;++n)for(var r=0;r!=e[n].length;++r){i.s.r>n&&(i.s.r=n);i.s.c>r&&(i.s.c=r);i.e.r<n&&(i.e.r=n);i.e.c<r&&(i.e.c=r);var o={v:e[n][r]};if(null!==o.v){var a=XLSX.utils.encode_cell({c:r,r:n});if("number"===typeof o.v)o.t="n";else if("boolean"===typeof o.v)o.t="b";else if(o.v instanceof Date){o.t="n";o.z=XLSX.SSF._table[14];var s=o;var l=(Date.parse(o.v)-new Date(Date.UTC(1899,11,30)))/864e5;s.v=l}else o.t="s";t[a]=o}}1e7>i.s.c&&(t["!ref"]=XLSX.utils.encode_range(i));return t}function x(e){var t=0,i;if(0===e.length)return t;var n=0;for(i=e.length;n<i;n++){var r=e.charCodeAt(n);t=(t<<5)-t+r;t|=0}return t}function C(e,t,i){var n=window.navigator.userAgent;if(!1!==e&&(0<n.indexOf("MSIE ")||n.match(/Trident.*rv\:11\./)))if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(new Blob([i]),e);else{if(t=document.createElement("iframe"))document.body.appendChild(t),t.setAttribute("style","display:none"),t.contentDocument.open("txt/html","replace"),t.contentDocument.write(i),t.contentDocument.close(),t.focus(),t.contentDocument.execCommand("SaveAs",!0,e),document.body.removeChild(t)}else if(n=document.createElement("a")){var r=null;n.style.display="none";!1!==e?n.download=e:n.target="_blank";"object"==typeof i?(r=window.URL.createObjectURL(i),n.href=r):0<=t.toLowerCase().indexOf("base64,")?n.href=t+_(i):n.href=t+encodeURIComponent(i);document.body.appendChild(n);if(document.createEvent)null===S&&(S=document.createEvent("MouseEvents")),S.initEvent("click",!0,!1),n.dispatchEvent(S);else if(document.createEventObject)n.fireEvent("onclick");else if("function"==typeof n.onclick)n.onclick();r&&window.URL.revokeObjectURL(r);document.body.removeChild(n)}}function _(e){var t="",i,n=0;e=e.replace(/\x0d\x0a/g,"\n");var r="";for(i=0;i<e.length;i++){var o=e.charCodeAt(i);128>o?r+=String.fromCharCode(o):(127<o&&2048>o?r+=String.fromCharCode(o>>6|192):(r+=String.fromCharCode(o>>12|224),r+=String.fromCharCode(o>>6&63|128)),r+=String.fromCharCode(o&63|128))}for(e=r;n<e.length;){var a=e.charCodeAt(n++);r=e.charCodeAt(n++);i=e.charCodeAt(n++);o=a>>2;a=(a&3)<<4|r>>4;var s=(r&15)<<2|i>>6;var l=i&63;isNaN(r)?s=l=64:isNaN(i)&&(l=64);t=t+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(s)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l)}return t}var T={consoleLog:!1,csvEnclosure:'"',csvSeparator:",",csvUseBOM:!0,displayTableName:!1,escape:!1,excelFileFormat:"xlshtml",excelstyles:[],fileName:"tableExport",htmlContent:!1,ignoreColumn:[],ignoreRow:[],jsonScope:"all",jspdf:{orientation:"p",unit:"pt",format:"a4",margins:{left:20,right:10,top:10,bottom:10},autotable:{styles:{cellPadding:2,rowHeight:12,fontSize:8,fillColor:255,textColor:50,fontStyle:"normal",overflow:"ellipsize",halign:"left",valign:"middle"},headerStyles:{fillColor:[52,73,94],textColor:255,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:245},tableExport:{onAfterAutotable:null,onBeforeAutotable:null,onAutotableText:null,onTable:null,outputImages:!0}}},numbers:{html:{decimalMark:".",thousandsSeparator:","},output:{decimalMark:".",thousandsSeparator:","}},onCellData:null,onCellHtmlData:null,onMsoNumberFormat:null,outputMode:"file",pdfmake:{enabled:!1,docDefinition:{pageOrientation:"portrait",defaultStyle:{font:"Roboto"}},fonts:{}},tbodySelector:"tr",tfootSelector:"tr",theadSelector:"tr",tableName:"myTableName",type:"csv",worksheetName:"Worksheet"},E=this,S=null,k=[],N=[],U=0,R=[],A="",I=[];e.extend(!0,T,t);I=i(E);if("csv"==T.type||"tsv"==T.type||"txt"==T.type){var D="",O=0,U=0,L=function(t,i,r){t.each(function(){A="";n(this,i,U,r+t.length,function(e,t,i){var n=A,r="";if(null!==e)if(e=f(e,t,i),t=null===e||""===e?"":e.toString(),"tsv"==T.type)e instanceof Date&&e.toLocaleString(),r=c(t,"\t"," ");else if(e instanceof Date)r=T.csvEnclosure+e.toLocaleString()+T.csvEnclosure;else if(r=c(t,T.csvEnclosure,T.csvEnclosure+T.csvEnclosure),0<=r.indexOf(T.csvSeparator)||/[\r\n ]/g.test(r))r=T.csvEnclosure+r+T.csvEnclosure;A=n+(r+("tsv"==T.type?"\t":T.csvSeparator))});A=e.trim(A).substring(0,A.length-1);0<A.length&&(0<D.length&&(D+="\n"),D+=A);U++});return t.length},O=O+L(e(E).find("thead").first().find(T.theadSelector),"th,td",O);e(E).find("tbody").each(function(){O+=L(e(this).find(T.tbodySelector),"td,th",O)});T.tfootSelector.length&&L(e(E).find("tfoot").first().find(T.tfootSelector),"td,th",O);D+="\n";!0===T.consoleLog&&console.log(D);if("string"===T.outputMode)return D;if("base64"===T.outputMode)return _(D);if("window"===T.outputMode){C(!1,"data:text/"+("csv"==T.type?"csv":"plain")+";charset=utf-8,",D);return}try{var B=new Blob([D],{type:"text/"+("csv"==T.type?"csv":"plain")+";charset=utf-8"});saveAs(B,T.fileName+"."+T.type,"csv"!=T.type||!1===T.csvUseBOM)}catch(e){C(T.fileName+"."+T.type,"data:text/"+("csv"==T.type?"csv":"plain")+";charset=utf-8,"+("csv"==T.type&&T.csvUseBOM?"\ufeff":""),D)}}else if("sql"==T.type){var U=0,M="INSERT INTO `"+T.tableName+"` (",k=e(E).find("thead").first().find(T.theadSelector);k.each(function(){n(this,"th,td",U,k.length,function(e,t,i){M+="'"+f(e,t,i)+"',"});U++;M=e.trim(M);M=e.trim(M).substring(0,M.length-1)});M+=") VALUES ";e(E).find("tbody").each(function(){N.push.apply(N,e(this).find(T.tbodySelector))});T.tfootSelector.length&&N.push.apply(N,e(E).find("tfoot").find(T.tfootSelector));e(N).each(function(){A="";n(this,"td,th",U,k.length+N.length,function(e,t,i){A+="'"+f(e,t,i)+"',"});3<A.length&&(M+="("+A,M=e.trim(M).substring(0,M.length-1),M+="),");U++});M=e.trim(M).substring(0,M.length-1);M+=";";!0===T.consoleLog&&console.log(M);if("string"===T.outputMode)return M;if("base64"===T.outputMode)return _(M);try{B=new Blob([M],{type:"text/plain;charset=utf-8"}),saveAs(B,T.fileName+".sql")}catch(e){C(T.fileName+".sql","data:application/sql;charset=utf-8,",M)}}else if("json"==T.type){var P=[],k=e(E).find("thead").first().find(T.theadSelector);k.each(function(){var e=[];n(this,"th,td",U,k.length,function(t,i,n){e.push(f(t,i,n))});P.push(e)});var F=[];e(E).find("tbody").each(function(){N.push.apply(N,e(this).find(T.tbodySelector))});T.tfootSelector.length&&N.push.apply(N,e(E).find("tfoot").find(T.tfootSelector));e(N).each(function(){var t={},i=0;n(this,"td,th",U,k.length+N.length,function(e,n,r){P.length?t[P[P.length-1][i]]=f(e,n,r):t[i]=f(e,n,r);i++});!1===e.isEmptyObject(t)&&F.push(t);U++});t="";t="head"==T.jsonScope?JSON.stringify(P):"data"==T.jsonScope?JSON.stringify(F):JSON.stringify({header:P,data:F});!0===T.consoleLog&&console.log(t);if("string"===T.outputMode)return t;if("base64"===T.outputMode)return _(t);try{B=new Blob([t],{type:"application/json;charset=utf-8"}),saveAs(B,T.fileName+".json")}catch(e){C(T.fileName+".json","data:application/json;charset=utf-8;base64,",t)}}else if("xml"===T.type){U=0;var H='<?xml version="1.0" encoding="utf-8"?>';H+="<tabledata><fields>";k=e(E).find("thead").first().find(T.theadSelector);k.each(function(){n(this,"th,td",U,k.length,function(e,t,i){H+="<field>"+f(e,t,i)+"</field>"});U++});H+="</fields><data>";var $=1;e(E).find("tbody").each(function(){N.push.apply(N,e(this).find(T.tbodySelector))});T.tfootSelector.length&&N.push.apply(N,e(E).find("tfoot").find(T.tfootSelector));e(N).each(function(){var e=1;A="";n(this,"td,th",U,k.length+N.length,function(t,i,n){A+="<column-"+e+">"+f(t,i,n)+"</column-"+e+">";e++});0<A.length&&"<column-1></column-1>"!=A&&(H+='<row id="'+$+'">'+A+"</row>",$++);U++});H+="</data></tabledata>";!0===T.consoleLog&&console.log(H);if("string"===T.outputMode)return H;if("base64"===T.outputMode)return _(H);try{B=new Blob([H],{type:"application/xml;charset=utf-8"}),saveAs(B,T.fileName+".xml")}catch(e){C(T.fileName+".xml","data:application/xml;charset=utf-8;base64,",H)}}else if("excel"===T.type&&"xmlss"===T.excelFileFormat){var j=e(E).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display"))});var q=[];j.each(function(){var t=e(this),r="";U=0;I=i(this);k=t.find("thead").first().find(T.theadSelector);var r=r+"<Table>",o=0;k.each(function(){A="";n(this,"th,td",U,k.length,function(e,t,i){null!==e&&(A+='<Cell><Data ss:Type="String">'+f(e,t,i)+"</Data></Cell>",o++)});0<A.length&&(r+="<Row>"+A+"</Row>");U++});N=[];t.find("tbody").each(function(){N.push.apply(N,e(this).find(T.tbodySelector))});e(N).each(function(){e(this);A="";n(this,"td,th",U,k.length+N.length,function(e,t,i){if(null!==e){var n="String",r="";e=f(e,t,i);!1!==jQuery.isNumeric(e)?n="Number":(t=e,-1<t.indexOf("%")?(t=u(t.replace(/%/g,"")),!1!==t&&(t/=100)):t=!1,number=t,!1!==number&&(e=number,n="Number",r=' ss:StyleID="pct1"'));"Number"!==n&&(e=e.replace(/\n/g,"<br>"));A+="<Cell"+r+'><Data ss:Type="'+n+'">'+e+"</Data></Cell>"}});0<A.length&&(r+="<Row>"+A+"</Row>");U++});r+="</Table>";q.push(r);!0===T.consoleLog&&console.log(r)});j='<?xml version="1.0" encoding="UTF-8"?><?mso-application progid="Excel.Sheet"?> <Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40"> <DocumentProperties xmlns="urn:schemas-microsoft-com:office:office"> <Created>'+(new Date).toISOString()+'</Created> </DocumentProperties> <OfficeDocumentSettings xmlns="urn:schemas-microsoft-com:office:office"> <AllowPNG/> </OfficeDocumentSettings> <ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"> <WindowHeight>9000</WindowHeight> <WindowWidth>13860</WindowWidth> <WindowTopX>0</WindowTopX> <WindowTopY>0</WindowTopY> <ProtectStructure>False</ProtectStructure> <ProtectWindows>False</ProtectWindows> </ExcelWorkbook> <Styles> <Style ss:ID="Default" ss:Name="Default"> <Alignment ss:Vertical="Center"/> <Borders/> <Font/> <Interior/> <NumberFormat/> <Protection/> </Style> <Style ss:ID="Normal" ss:Name="Normal"/> <Style ss:ID="pct1">   <NumberFormat ss:Format="Percent"/> </Style> </Styles>';for(t=0;t<q.length;t++)j+='<Worksheet ss:Name="'+("string"===typeof T.worksheetName?T.worksheetName+" "+(t+1):"undefined"!==typeof T.worksheetName[t]?T.worksheetName[t]:"Table "+(t+1))+'">'+q[t]+"<WorksheetOptions/> </Worksheet>";j+="</Workbook>";!0===T.consoleLog&&console.log(j);if("string"===T.outputMode)return j;if("base64"===T.outputMode)return _(j);try{B=new Blob([j],{type:"application/xml;charset=utf-8"}),saveAs(B,T.fileName+".xml")}catch(e){C(T.fileName+".xml","data:application/xml;charset=utf-8;base64,",H)}}else if("excel"==T.type||"xls"==T.type||"word"==T.type||"doc"==T.type){t="excel"==T.type||"xls"==T.type?"excel":"word";var z="excel"==t?"xls":"doc",W='xmlns:x="urn:schemas-microsoft-com:office:'+t+'"';j=e(E).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display"))});var V="";j.each(function(){var t=e(this);U=0;I=i(this);V+="<table><thead>";k=t.find("thead").first().find(T.theadSelector);k.each(function(){A="";n(this,"th,td",U,k.length,function(t,i,n){if(null!==t){var r="";A+="<th";for(var o in T.excelstyles)if(T.excelstyles.hasOwnProperty(o)){var a=e(t).css(T.excelstyles[o]);""!==a&&"0px none rgb(0, 0, 0)"!=a&&"rgba(0, 0, 0, 0)"!=a&&(r+=""===r?'style="':";",r+=T.excelstyles[o]+":"+a)}""!==r&&(A+=" "+r+'"');e(t).is("[colspan]")&&(A+=' colspan="'+e(t).attr("colspan")+'"');e(t).is("[rowspan]")&&(A+=' rowspan="'+e(t).attr("rowspan")+'"');A+=">"+f(t,i,n)+"</th>"}});0<A.length&&(V+="<tr>"+A+"</tr>");U++});V+="</thead><tbody>";t.find("tbody").each(function(){N.push.apply(N,e(this).find(T.tbodySelector))});T.tfootSelector.length&&N.push.apply(N,t.find("tfoot").find(T.tfootSelector));e(N).each(function(){var t=e(this);A="";n(this,"td,th",U,k.length+N.length,function(i,n,r){if(null!==i){var o="",a=e(i).data("tableexport-msonumberformat");"undefined"==typeof a&&"function"===typeof T.onMsoNumberFormat&&(a=T.onMsoNumberFormat(i,n,r));"undefined"!=typeof a&&""!==a&&(o="style=\"mso-number-format:'"+a+"'");for(var s in T.excelstyles)T.excelstyles.hasOwnProperty(s)&&(a=e(i).css(T.excelstyles[s]),""===a&&(a=t.css(T.excelstyles[s])),""!==a&&"0px none rgb(0, 0, 0)"!=a&&"rgba(0, 0, 0, 0)"!=a&&(o+=""===o?'style="':";",o+=T.excelstyles[s]+":"+a));A+="<td";""!==o&&(A+=" "+o+'"');e(i).is("[colspan]")&&(A+=' colspan="'+e(i).attr("colspan")+'"');e(i).is("[rowspan]")&&(A+=' rowspan="'+e(i).attr("rowspan")+'"');A+=">"+f(i,n,r).replace(/\n/g,"<br>")+"</td>"}});0<A.length&&(V+="<tr>"+A+"</tr>");U++});T.displayTableName&&(V+="<tr><td></td></tr><tr><td></td></tr><tr><td>"+f(e("<p>"+T.tableName+"</p>"))+"</td></tr>");V+="</tbody></table>";!0===T.consoleLog&&console.log(V)});j='<html xmlns:o="urn:schemas-microsoft-com:office:office" '+W+' xmlns="http://www.w3.org/TR/REC-html40">'+('<meta http-equiv="content-type" content="application/vnd.ms-'+t+'; charset=UTF-8">')+"<head>";"excel"===t&&(j+="\x3c!--[if gte mso 9]>",j+="<xml>",j+="<x:ExcelWorkbook>",j+="<x:ExcelWorksheets>",j+="<x:ExcelWorksheet>",j+="<x:Name>",j+=T.worksheetName,j+="</x:Name>",j+="<x:WorksheetOptions>",j+="<x:DisplayGridlines/>",j+="</x:WorksheetOptions>",j+="</x:ExcelWorksheet>",j+="</x:ExcelWorksheets>",j+="</x:ExcelWorkbook>",j+="</xml>",j+="<![endif]--\x3e");j+="<style>br {mso-data-placement:same-cell;}</style>";j+="</head>";j+="<body>";j+=V;j+="</body>";j+="</html>";!0===T.consoleLog&&console.log(j);if("string"===T.outputMode)return j;if("base64"===T.outputMode)return _(j);try{B=new Blob([j],{type:"application/vnd.ms-"+T.type}),saveAs(B,T.fileName+"."+z)}catch(e){C(T.fileName+"."+z,"data:application/vnd.ms-"+t+";base64,",j)}}else if("xlsx"==T.type){var Y=[],X=[],U=0,N=e(E).find("thead").first().find(T.theadSelector);e(E).find("tbody").each(function(){N.push.apply(N,e(this).find(T.tbodySelector))});T.tfootSelector.length&&N.push.apply(N,e(E).find("tfoot").find(T.tfootSelector));e(N).each(function(){var e=[];n(this,"th,td",U,N.length,function(t,i,n){if("undefined"!==typeof t&&null!==t){var r=parseInt(t.getAttribute("colspan")),o=parseInt(t.getAttribute("rowspan"));t=f(t,i,n);""!==t&&t==+t&&(t=+t);X.forEach(function(t){if(U>=t.s.r&&U<=t.e.r&&e.length>=t.s.c&&e.length<=t.e.c)for(var i=0;i<=t.e.c-t.s.c;++i)e.push(null)});if(o||r)r=r||1,X.push({s:{r:U,c:e.length},e:{r:U+(o||1)-1,c:e.length+r-1}});e.push(""!==t?t:null);if(r)for(o=0;o<r-1;++o)e.push(null)}});Y.push(e);U++});t=new y;z=w(Y);z["!merges"]=X;t.SheetNames.push(T.worksheetName);t.Sheets[T.worksheetName]=z;t=XLSX.write(t,{bookType:T.type,bookSST:!1,type:"binary"});try{B=new Blob([b(t)],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),saveAs(B,T.fileName+"."+T.type)}catch(e){C(T.fileName+"."+T.type,"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8,",B)}}else if("png"==T.type)html2canvas(e(E)[0]).then(function(e){e=e.toDataURL();for(var t=atob(e.substring(22)),i=new ArrayBuffer(t.length),n=new Uint8Array(i),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);!0===T.consoleLog&&console.log(t);if("string"===T.outputMode)return t;if("base64"===T.outputMode)return _(e);if("window"===T.outputMode)window.open(e);else try{B=new Blob([i],{type:"image/png"}),saveAs(B,T.fileName+".png")}catch(e){C(T.fileName+".png","data:image/png,",B)}});else if("pdf"==T.type)if(!0===T.pdfmake.enabled){t=[];var G=[],U=0,z=function(t,i,r){var o=0;e(t).each(function(){var e=[];n(this,i,U,r,function(t,i,n){if("undefined"!==typeof t&&null!==t){var r=parseInt(t.getAttribute("colspan")),o=parseInt(t.getAttribute("rowspan"));t=f(t,i,n)||" ";1<r||1<o?e.push({colSpan:r||1,rowSpan:o||1,text:t}):e.push(t)}else e.push(" ")});e.length&&G.push(e);o<e.length&&(o=e.length);U++});return o},k=e(this).find("thead").first().find(T.theadSelector);j=z(k,"th,td",k.length);for(W=t.length;W<j;W++)t.push("*");e(this).find("tbody").each(function(){N.push.apply(N,e(this).find(T.tbodySelector))});T.tfootSelector.length&&N.push.apply(N,e(this).find("tfoot").find(T.tfootSelector));z(N,"th,td",k.length+N.length);t={content:[{table:{headerRows:k.length,widths:t,body:G}}]};e.extend(!0,t,T.pdfmake.docDefinition);pdfMake.fonts={Roboto:{normal:"Roboto-Regular.ttf",bold:"Roboto-Medium.ttf",italics:"Roboto-Italic.ttf",bolditalics:"Roboto-MediumItalic.ttf"}};e.extend(!0,pdfMake.fonts,T.pdfmake.fonts);pdfMake.createPdf(t).getBuffer(function(e){try{var t=new Blob([e],{type:"application/pdf"});saveAs(t,T.fileName+".pdf")}catch(t){C(T.fileName+".pdf","data:application/pdf;base64,",e)}})}else if(!1===T.jspdf.autotable){t={dim:{w:v(e(E).first().get(0),"width","mm"),h:v(e(E).first().get(0),"height","mm")},pagesplit:!1};var K=new jsPDF(T.jspdf.orientation,T.jspdf.unit,T.jspdf.format);K.addHTML(e(E).first(),T.jspdf.margins.left,T.jspdf.margins.top,t,function(){r(K,!1)})}else{var Z=T.jspdf.autotable.tableExport;if("string"===typeof T.jspdf.format&&"bestfit"===T.jspdf.format.toLowerCase()){var Q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89]},J="",ee="",te=0;e(E).filter(":visible").each(function(){if("none"!=e(this).css("display")){var t=v(e(this).get(0),"width","pt");if(t>te){t>Q.a0[0]&&(J="a0",ee="l");for(var i in Q)Q.hasOwnProperty(i)&&Q[i][1]>t&&(J=i,ee="l",Q[i][0]>t&&(ee="p"));te=t}}});T.jspdf.format=""===J?"a4":J;T.jspdf.orientation=""===ee?"w":ee}Z.doc=new jsPDF(T.jspdf.orientation,T.jspdf.unit,T.jspdf.format);!0===Z.outputImages&&(Z.images={});"undefined"!=typeof Z.images&&(e(E).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display"))}).each(function(){var t=0;k=e(this).find("thead").find(T.theadSelector);e(this).find("tbody").each(function(){N.push.apply(N,e(this).find(T.tbodySelector))});T.tfootSelector.length&&N.push.apply(N,e(this).find("tfoot").find(T.tfootSelector));e(N).each(function(){n(this,"td,th",k.length+t,k.length+N.length,function(t,i,n){"undefined"!==typeof t&&null!==t&&(i=e(t).children(),"undefined"!=typeof i&&0<i.length&&a(t,i,Z))});t++})}),k=[],N=[]);s(Z,function(t){e(E).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display"))}).each(function(){var t,r=0;I=i(this);Z.columns=[];Z.rows=[];Z.rowoptions={};if("function"===typeof Z.onTable&&!1===Z.onTable(e(this),T))return!0;T.jspdf.autotable.tableExport=null;var a=e.extend(!0,{},T.jspdf.autotable);T.jspdf.autotable.tableExport=Z;a.margin={};e.extend(!0,a.margin,T.jspdf.margins);a.tableExport=Z;"function"!==typeof a.beforePageContent&&(a.beforePageContent=function(e){1==e.pageCount&&e.table.rows.concat(e.table.headerRow).forEach(function(t){0<t.height&&(t.height+=(2-1.15)/2*t.styles.fontSize,e.table.height+=(2-1.15)/2*t.styles.fontSize)})});"function"!==typeof a.createdHeaderCell&&(a.createdHeaderCell=function(t,i){t.styles=e.extend({},i.row.styles);if("undefined"!=typeof Z.columns[i.column.dataKey]){var n=Z.columns[i.column.dataKey];if("undefined"!=typeof n.rect){t.contentWidth=n.rect.width;if("undefined"==typeof Z.heightRatio||0===Z.heightRatio){var r=i.row.raw[i.column.dataKey].rowspan?i.row.raw[i.column.dataKey].rect.height/i.row.raw[i.column.dataKey].rowspan:i.row.raw[i.column.dataKey].rect.height;Z.heightRatio=t.styles.rowHeight/r}r=i.row.raw[i.column.dataKey].rect.height*Z.heightRatio;r>t.styles.rowHeight&&(t.styles.rowHeight=r)}"undefined"!=typeof n.style&&!0!==n.style.hidden&&(t.styles.halign=n.style.align,"inherit"===a.styles.fillColor&&(t.styles.fillColor=n.style.bcolor),"inherit"===a.styles.textColor&&(t.styles.textColor=n.style.color),"inherit"===a.styles.fontStyle&&(t.styles.fontStyle=n.style.fstyle))}});"function"!==typeof a.createdCell&&(a.createdCell=function(e,t){var i=Z.rowoptions[t.row.index+":"+t.column.dataKey];"undefined"!=typeof i&&"undefined"!=typeof i.style&&!0!==i.style.hidden&&(e.styles.halign=i.style.align,"inherit"===a.styles.fillColor&&(e.styles.fillColor=i.style.bcolor),"inherit"===a.styles.textColor&&(e.styles.textColor=i.style.color),"inherit"===a.styles.fontStyle&&(e.styles.fontStyle=i.style.fstyle))});"function"!==typeof a.drawHeaderCell&&(a.drawHeaderCell=function(e,t){var i=Z.columns[t.column.dataKey];return(!0!==i.style.hasOwnProperty("hidden")||!0!==i.style.hidden)&&0<=i.rowIndex?o(e,t,i):!1});"function"!==typeof a.drawCell&&(a.drawCell=function(e,t){var i=Z.rowoptions[t.row.index+":"+t.column.dataKey];if(o(e,t,i))if(Z.doc.rect(e.x,e.y,e.width,e.height,e.styles.fillStyle),"undefined"!=typeof i&&"undefined"!=typeof i.kids&&0<i.kids.length){var n=e.height/i.rect.height;if(n>Z.dh||"undefined"==typeof Z.dh)Z.dh=n;Z.dw=e.width/i.rect.width;n=e.textPos.y;l(e,i.kids,Z);e.textPos.y=n;d(e,i.kids,Z)}else d(e,{},Z);return!1});Z.headerrows=[];k=e(this).find("thead").find(T.theadSelector);k.each(function(){t=0;Z.headerrows[r]=[];n(this,"th,td",r,k.length,function(e,i,n){var o=m(e);o.title=f(e,i,n);o.key=t++;o.rowIndex=r;Z.headerrows[r].push(o)});r++});if(0<r)for(var s=r-1;0<=s;)e.each(Z.headerrows[s],function(){var e=this;0<s&&null===this.rect&&(e=Z.headerrows[s-1][this.key]);null!==e&&0<=e.rowIndex&&(!0!==e.style.hasOwnProperty("hidden")||!0!==e.style.hidden)&&Z.columns.push(e)}),s=0<Z.columns.length?-1:s-1;var c=0;N=[];e(this).find("tbody").each(function(){N.push.apply(N,e(this).find(T.tbodySelector))});T.tfootSelector.length&&N.push.apply(N,e(this).find("tfoot").find(T.tfootSelector));e(N).each(function(){var i=[];t=0;n(this,"td,th",r,k.length+N.length,function(n,r,o){if("undefined"===typeof Z.columns[t]){var a={title:"",key:t,style:{hidden:!0}};Z.columns.push(a)}"undefined"!==typeof n&&null!==n?(a=m(n),a.kids=e(n).children()):(a=e.extend(!0,{},Z.rowoptions[c+":"+(t-1)]),a.colspan=-1);Z.rowoptions[c+":"+t++]=a;i.push(f(n,r,o))});i.length&&(Z.rows.push(i),c++);r++});if("function"===typeof Z.onBeforeAutotable)Z.onBeforeAutotable(e(this),Z.columns,Z.rows,a);Z.doc.autoTable(Z.columns,Z.rows,a);if("function"===typeof Z.onAfterAutotable)Z.onAfterAutotable(e(this),a);T.jspdf.autotable.startY=Z.doc.autoTableEndPosY()+a.margin.top});r(Z.doc,"undefined"!=typeof Z.images&&!1===jQuery.isEmptyObject(Z.images));"undefined"!=typeof Z.headerrows&&(Z.headerrows.length=0);"undefined"!=typeof Z.columns&&(Z.columns.length=0);"undefined"!=typeof Z.rows&&(Z.rows.length=0);delete Z.doc;Z.doc=null})}return this}})})(jQuery);define("tableexport",["jquery"],function(e){return function(){var t,i;return t||e.$.fn.extend}}(this));!function(e){"use strict";var t=e.fn.bootstrapTable.utils.sprintf,i={json:"JSON",xml:"XML",png:"PNG",csv:"CSV",txt:"TXT",sql:"SQL",doc:"MS-Word",excel:"MS-Excel",xlsx:"MS-Excel (OpenXML)",powerpoint:"MS-Powerpoint",pdf:"PDF"};e.extend(e.fn.bootstrapTable.defaults,{showExport:!1,exportDataType:"basic",exportTypes:["json","xml","csv","txt","sql","excel"],exportOptions:{}}),e.extend(e.fn.bootstrapTable.defaults.icons,{export:"glyphicon-export icon-share"}),e.extend(e.fn.bootstrapTable.locales,{formatExport:function(){return"Export data"}}),e.extend(e.fn.bootstrapTable.defaults,e.fn.bootstrapTable.locales);var n=e.fn.bootstrapTable.Constructor,r=n.prototype.initToolbar;n.prototype.initToolbar=function(){if(this.showToolbar=this.options.showExport,r.apply(this,Array.prototype.slice.apply(arguments)),this.options.showExport){var n=this,o=this.$toolbar.find(">.btn-group"),a=o.find("div.export");if(!a.length){a=e(['<div class="export btn-group">','<button class="btn'+t(" btn-%s",this.options.buttonsClass)+t(" btn-%s",this.options.iconSize)+' dropdown-toggle" aria-label="export type" title="'+this.options.formatExport()+'" data-toggle="dropdown" type="button">',t('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons["export"]),'<span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">',"</ul>","</div>"].join("")).appendTo(o);var s=a.find(".dropdown-menu"),l=this.options.exportTypes;if("string"==typeof this.options.exportTypes){var d=this.options.exportTypes.slice(1,-1).replace(/ /g,"").split(",");l=[],e.each(d,function(e,t){l.push(t.slice(1,-1))})}e.each(l,function(e,t){i.hasOwnProperty(t)&&s.append(['<li role="menuitem" data-type="'+t+'">','<a href="javascript:void(0)">',i[t],"</a>","</li>"].join(""))}),s.find("li").click(function(){var t=e(this).data("type"),i=function(){n.$el.tableExport(e.extend({},n.options.exportOptions,{type:t,escape:!1}))};if("all"===n.options.exportDataType&&n.options.pagination)n.$el.one("server"===n.options.sidePagination?"post-body.bs.table":"page-change.bs.table",function(){i(),n.togglePagination()}),n.togglePagination();else if("selected"===n.options.exportDataType){var r=n.getData(),o=n.getAllSelections();"server"===n.options.sidePagination&&(r={total:n.options.totalRows},r[n.options.dataField]=n.getData(),o={total:n.options.totalRows},o[n.options.dataField]=n.getAllSelections()),n.load(o),i(),n.load(r)}else i()})}}}}(jQuery);define("bootstrap-table-export",["bootstrap-table","tableexport"],function(e){return function(){var t,i;return t||e.$.fn.bootstrapTable.defaults}}(this));!function(e){"use strict";if("function"==typeof define&&define.amd)define("bootstrap-datetimepicker",["jquery","moment"],e);else if("object"==typeof exports)module.exports=e(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";e(jQuery,moment)}}(function(e,t){"use strict";if(!t)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var i=function(i,n){var r,o,a,s,l,d,c,u={},f=!0,h=!1,p=!1,m=0,g=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],v=["days","months","years","decades"],y=["top","bottom","auto"],b=["left","right","auto"],w=["default","top","bottom"],x={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t",delete:46,46:"delete"},C={},_=function(){return void 0!==t.tz&&void 0!==n.timeZone&&null!==n.timeZone&&""!==n.timeZone},T=function(e){var i;return i=void 0===e||null===e?t():t.isDate(e)||t.isMoment(e)?t(e):_()?t.tz(e,d,n.useStrict,n.timeZone):t(e,d,n.useStrict),_()&&i.tz(n.timeZone),i},E=function(e){if("string"!=typeof e||e.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(e){case"y":return l.indexOf("Y")!==-1;case"M":return l.indexOf("M")!==-1;case"d":return l.toLowerCase().indexOf("d")!==-1;case"h":case"H":return l.toLowerCase().indexOf("h")!==-1;case"m":return l.indexOf("m")!==-1;case"s":return l.indexOf("s")!==-1;default:return!1}},S=function(){return E("h")||E("m")||E("s")},k=function(){return E("y")||E("M")||E("d")},N=function(){var t=e("<thead>").append(e("<tr>").append(e("<th>").addClass("prev").attr("data-action","previous").append(e("<span>").addClass(n.icons.previous))).append(e("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",n.calendarWeeks?"6":"5")).append(e("<th>").addClass("next").attr("data-action","next").append(e("<span>").addClass(n.icons.next)))),i=e("<tbody>").append(e("<tr>").append(e("<td>").attr("colspan",n.calendarWeeks?"8":"7")));return[e("<div>").addClass("datepicker-days").append(e("<table>").addClass("table-condensed").append(t).append(e("<tbody>"))),e("<div>").addClass("datepicker-months").append(e("<table>").addClass("table-condensed").append(t.clone()).append(i.clone())),e("<div>").addClass("datepicker-years").append(e("<table>").addClass("table-condensed").append(t.clone()).append(i.clone())),e("<div>").addClass("datepicker-decades").append(e("<table>").addClass("table-condensed").append(t.clone()).append(i.clone()))]},U=function(){var t=e("<tr>"),i=e("<tr>"),r=e("<tr>");return E("h")&&(t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(e("<span>").addClass(n.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:n.tooltips.pickHour}).attr("data-action","showHours"))),r.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(e("<span>").addClass(n.icons.down))))),E("m")&&(E("h")&&(t.append(e("<td>").addClass("separator")),i.append(e("<td>").addClass("separator").html(":")),r.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(e("<span>").addClass(n.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:n.tooltips.pickMinute}).attr("data-action","showMinutes"))),r.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(e("<span>").addClass(n.icons.down))))),E("s")&&(E("m")&&(t.append(e("<td>").addClass("separator")),i.append(e("<td>").addClass("separator").html(":")),r.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(e("<span>").addClass(n.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:n.tooltips.pickSecond}).attr("data-action","showSeconds"))),r.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(e("<span>").addClass(n.icons.down))))),s||(t.append(e("<td>").addClass("separator")),i.append(e("<td>").append(e("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:n.tooltips.togglePeriod}))),r.append(e("<td>").addClass("separator"))),e("<div>").addClass("timepicker-picker").append(e("<table>").addClass("table-condensed").append([t,i,r]))},R=function(){var t=e("<div>").addClass("timepicker-hours").append(e("<table>").addClass("table-condensed")),i=e("<div>").addClass("timepicker-minutes").append(e("<table>").addClass("table-condensed")),n=e("<div>").addClass("timepicker-seconds").append(e("<table>").addClass("table-condensed")),r=[U()];return E("h")&&r.push(t),E("m")&&r.push(i),E("s")&&r.push(n),r},A=function(){var t=[];return n.showTodayButton&&t.push(e("<td>").append(e("<a>").attr({"data-action":"today",title:n.tooltips.today}).append(e("<span>").addClass(n.icons.today)))),!n.sideBySide&&k()&&S()&&t.push(e("<td>").append(e("<a>").attr({"data-action":"togglePicker",title:n.tooltips.selectTime}).append(e("<span>").addClass(n.icons.time)))),n.showClear&&t.push(e("<td>").append(e("<a>").attr({"data-action":"clear",title:n.tooltips.clear}).append(e("<span>").addClass(n.icons.clear)))),n.showClose&&t.push(e("<td>").append(e("<a>").attr({"data-action":"close",title:n.tooltips.close}).append(e("<span>").addClass(n.icons.close)))),e("<table>").addClass("table-condensed").append(e("<tbody>").append(e("<tr>").append(t)))},I=function(){var t=e("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),i=e("<div>").addClass("datepicker").append(N()),r=e("<div>").addClass("timepicker").append(R()),o=e("<ul>").addClass("list-unstyled"),a=e("<li>").addClass("picker-switch"+(n.collapse?" accordion-toggle":"")).append(A());return n.inline&&t.removeClass("dropdown-menu"),s&&t.addClass("usetwentyfour"),E("s")&&!s&&t.addClass("wider"),n.sideBySide&&k()&&S()?(t.addClass("timepicker-sbs"),"top"===n.toolbarPlacement&&t.append(a),t.append(e("<div>").addClass("row").append(i.addClass("col-md-6")).append(r.addClass("col-md-6"))),"bottom"===n.toolbarPlacement&&t.append(a),t):("top"===n.toolbarPlacement&&o.append(a),k()&&o.append(e("<li>").addClass(n.collapse&&S()?"collapse in":"").append(i)),"default"===n.toolbarPlacement&&o.append(a),S()&&o.append(e("<li>").addClass(n.collapse&&k()?"collapse":"").append(r)),"bottom"===n.toolbarPlacement&&o.append(a),t.append(o))},D=function(){var t,r={};return t=i.is("input")||n.inline?i.data():i.find("input").data(),t.dateOptions&&t.dateOptions instanceof Object&&(r=e.extend(!0,r,t.dateOptions)),e.each(n,function(e){var i="date"+e.charAt(0).toUpperCase()+e.slice(1);void 0!==t[i]&&(r[e]=t[i])}),r},O=function(){var t,r=(h||i).position(),o=(h||i).offset(),a=n.widgetPositioning.vertical,s=n.widgetPositioning.horizontal;if(n.widgetParent)t=n.widgetParent.append(p);else if(i.is("input"))t=i.after(p).parent();else{if(n.inline)return void(t=i.append(p));t=i,i.children().first().after(p)}if("auto"===a&&(a=o.top+1.5*p.height()>=e(window).height()+e(window).scrollTop()&&p.height()+i.outerHeight()<o.top?"top":"bottom"),"auto"===s&&(s=t.width()<o.left+p.outerWidth()/2&&o.left+p.outerWidth()>e(window).width()?"right":"left"),"top"===a?p.addClass("top").removeClass("bottom"):p.addClass("bottom").removeClass("top"),"right"===s?p.addClass("pull-right"):p.removeClass("pull-right"),"static"===t.css("position")&&(t=t.parents().filter(function(){return"static"!==e(this).css("position")}).first()),0===t.length)throw new Error("datetimepicker component should be placed within a non-static positioned container");p.css({top:"top"===a?"auto":r.top+i.outerHeight(),bottom:"top"===a?t.outerHeight()-(t===i?0:r.top):"auto",left:"left"===s?t===i?0:r.left:"auto",right:"left"===s?"auto":t.outerWidth()-i.outerWidth()-(t===i?0:r.left)})},L=function(e){"dp.change"===e.type&&(e.date&&e.date.isSame(e.oldDate)||!e.date&&!e.oldDate)||i.trigger(e)},B=function(e){"y"===e&&(e="YYYY"),L({type:"dp.update",change:e,viewDate:o.clone()})},M=function(e){p&&(e&&(c=Math.max(m,Math.min(3,c+e))),p.find(".datepicker > div").hide().filter(".datepicker-"+g[c].clsName).show())},P=function(){var t=e("<tr>"),i=o.clone().startOf("w").startOf("d");for(n.calendarWeeks===!0&&t.append(e("<th>").addClass("cw").text("#"));i.isBefore(o.clone().endOf("w"));)t.append(e("<th>").addClass("dow").text(i.format("dd"))),i.add(1,"d");p.find(".datepicker-days thead").append(t)},F=function(e){return n.disabledDates[e.format("YYYY-MM-DD")]===!0},H=function(e){return n.enabledDates[e.format("YYYY-MM-DD")]===!0},$=function(e){return n.disabledHours[e.format("H")]===!0},j=function(e){return n.enabledHours[e.format("H")]===!0},q=function(t,i){if(!t.isValid())return!1;if(n.disabledDates&&"d"===i&&F(t))return!1;if(n.enabledDates&&"d"===i&&!H(t))return!1;if(n.minDate&&t.isBefore(n.minDate,i))return!1;if(n.maxDate&&t.isAfter(n.maxDate,i))return!1;if(n.daysOfWeekDisabled&&"d"===i&&n.daysOfWeekDisabled.indexOf(t.day())!==-1)return!1;if(n.disabledHours&&("h"===i||"m"===i||"s"===i)&&$(t))return!1;if(n.enabledHours&&("h"===i||"m"===i||"s"===i)&&!j(t))return!1;if(n.disabledTimeIntervals&&("h"===i||"m"===i||"s"===i)){var r=!1;if(e.each(n.disabledTimeIntervals,function(){if(t.isBetween(this[0],this[1]))return r=!0,!1}),r)return!1}return!0},z=function(){for(var t=[],i=o.clone().startOf("y").startOf("d");i.isSame(o,"y");)t.push(e("<span>").attr("data-action","selectMonth").addClass("month").text(i.format("MMM"))),i.add(1,"M");p.find(".datepicker-months td").empty().append(t)},W=function(){var t=p.find(".datepicker-months"),i=t.find("th"),a=t.find("tbody").find("span");i.eq(0).find("span").attr("title",n.tooltips.prevYear),i.eq(1).attr("title",n.tooltips.selectYear),i.eq(2).find("span").attr("title",n.tooltips.nextYear),t.find(".disabled").removeClass("disabled"),q(o.clone().subtract(1,"y"),"y")||i.eq(0).addClass("disabled"),i.eq(1).text(o.year()),q(o.clone().add(1,"y"),"y")||i.eq(2).addClass("disabled"),a.removeClass("active"),r.isSame(o,"y")&&!f&&a.eq(r.month()).addClass("active"),a.each(function(t){q(o.clone().month(t),"M")||e(this).addClass("disabled")})},V=function(){var e=p.find(".datepicker-years"),t=e.find("th"),i=o.clone().subtract(5,"y"),a=o.clone().add(6,"y"),s="";for(t.eq(0).find("span").attr("title",n.tooltips.prevDecade),t.eq(1).attr("title",n.tooltips.selectDecade),t.eq(2).find("span").attr("title",n.tooltips.nextDecade),e.find(".disabled").removeClass("disabled"),n.minDate&&n.minDate.isAfter(i,"y")&&t.eq(0).addClass("disabled"),t.eq(1).text(i.year()+"-"+a.year()),n.maxDate&&n.maxDate.isBefore(a,"y")&&t.eq(2).addClass("disabled");!i.isAfter(a,"y");)s+='<span data-action="selectYear" class="year'+(i.isSame(r,"y")&&!f?" active":"")+(q(i,"y")?"":" disabled")+'">'+i.year()+"</span>",i.add(1,"y");e.find("td").html(s)},Y=function(){var e,i=p.find(".datepicker-decades"),a=i.find("th"),s=t({y:o.year()-o.year()%100-1}),l=s.clone().add(100,"y"),d=s.clone(),c=!1,u=!1,f="";for(a.eq(0).find("span").attr("title",n.tooltips.prevCentury),a.eq(2).find("span").attr("title",n.tooltips.nextCentury),i.find(".disabled").removeClass("disabled"),(s.isSame(t({y:1900}))||n.minDate&&n.minDate.isAfter(s,"y"))&&a.eq(0).addClass("disabled"),a.eq(1).text(s.year()+"-"+l.year()),(s.isSame(t({y:2e3}))||n.maxDate&&n.maxDate.isBefore(l,"y"))&&a.eq(2).addClass("disabled");!s.isAfter(l,"y");)e=s.year()+12,c=n.minDate&&n.minDate.isAfter(s,"y")&&n.minDate.year()<=e,u=n.maxDate&&n.maxDate.isAfter(s,"y")&&n.maxDate.year()<=e,f+='<span data-action="selectDecade" class="decade'+(r.isAfter(s)&&r.year()<=e?" active":"")+(q(s,"y")||c||u?"":" disabled")+'" data-selection="'+(s.year()+6)+'">'+(s.year()+1)+" - "+(s.year()+12)+"</span>",s.add(12,"y");f+="<span></span><span></span><span></span>",i.find("td").html(f),a.eq(1).text(d.year()+1+"-"+s.year())},X=function(){var t,i,a,s=p.find(".datepicker-days"),l=s.find("th"),d=[],c=[];if(k()){for(l.eq(0).find("span").attr("title",n.tooltips.prevMonth),l.eq(1).attr("title",n.tooltips.selectMonth),l.eq(2).find("span").attr("title",n.tooltips.nextMonth),s.find(".disabled").removeClass("disabled"),l.eq(1).text(o.format(n.dayViewHeaderFormat)),q(o.clone().subtract(1,"M"),"M")||l.eq(0).addClass("disabled"),q(o.clone().add(1,"M"),"M")||l.eq(2).addClass("disabled"),t=o.clone().startOf("M").startOf("w").startOf("d"),a=0;a<42;a++)0===t.weekday()&&(i=e("<tr>"),n.calendarWeeks&&i.append('<td class="cw">'+t.week()+"</td>"),d.push(i)),c=["day"],t.isBefore(o,"M")&&c.push("old"),t.isAfter(o,"M")&&c.push("new"),t.isSame(r,"d")&&!f&&c.push("active"),q(t,"d")||c.push("disabled"),t.isSame(T(),"d")&&c.push("today"),0!==t.day()&&6!==t.day()||c.push("weekend"),L({type:"dp.classify",date:t,classNames:c}),i.append('<td data-action="selectDay" data-day="'+t.format("L")+'" class="'+c.join(" ")+'">'+t.date()+"</td>"),t.add(1,"d");s.find("tbody").empty().append(d),W(),V(),Y()}},G=function(){var t=p.find(".timepicker-hours table"),i=o.clone().startOf("d"),n=[],r=e("<tr>");for(o.hour()>11&&!s&&i.hour(12);i.isSame(o,"d")&&(s||o.hour()<12&&i.hour()<12||o.hour()>11);)i.hour()%4===0&&(r=e("<tr>"),n.push(r)),r.append('<td data-action="selectHour" class="hour'+(q(i,"h")?"":" disabled")+'">'+i.format(s?"HH":"hh")+"</td>"),i.add(1,"h");t.empty().append(n)},K=function(){for(var t=p.find(".timepicker-minutes table"),i=o.clone().startOf("h"),r=[],a=e("<tr>"),s=1===n.stepping?5:n.stepping;o.isSame(i,"h");)i.minute()%(4*s)===0&&(a=e("<tr>"),r.push(a)),a.append('<td data-action="selectMinute" class="minute'+(q(i,"m")?"":" disabled")+'">'+i.format("mm")+"</td>"),i.add(s,"m");t.empty().append(r)},Z=function(){for(var t=p.find(".timepicker-seconds table"),i=o.clone().startOf("m"),n=[],r=e("<tr>");o.isSame(i,"m");)i.second()%20===0&&(r=e("<tr>"),n.push(r)),r.append('<td data-action="selectSecond" class="second'+(q(i,"s")?"":" disabled")+'">'+i.format("ss")+"</td>"),i.add(5,"s");t.empty().append(n)},Q=function(){var e,t,i=p.find(".timepicker span[data-time-component]");s||(e=p.find(".timepicker [data-action=togglePeriod]"),t=r.clone().add(r.hours()>=12?-12:12,"h"),e.text(r.format("A")),q(t,"h")?e.removeClass("disabled"):e.addClass("disabled")),i.filter("[data-time-component=hours]").text(r.format(s?"HH":"hh")),i.filter("[data-time-component=minutes]").text(r.format("mm")),i.filter("[data-time-component=seconds]").text(r.format("ss")),G(),K(),Z()},J=function(){p&&(X(),Q())},ee=function(e){var t=f?null:r;if(!e)return f=!0,a.val(""),i.data("date",""),L({type:"dp.change",date:!1,oldDate:t}),void J();if(e=e.clone().locale(n.locale),_()&&e.tz(n.timeZone),1!==n.stepping)for(e.minutes(Math.round(e.minutes()/n.stepping)*n.stepping).seconds(0);n.minDate&&e.isBefore(n.minDate);)e.add(n.stepping,"minutes");q(e)?(r=e,o=r.clone(),a.val(r.format(l)),i.data("date",r.format(l)),f=!1,J(),L({type:"dp.change",date:r.clone(),oldDate:t})):(n.keepInvalid?L({type:"dp.change",date:e,oldDate:t}):a.val(f?"":r.format(l)),L({type:"dp.error",date:e,oldDate:t}))},te=function(){var t=!1;return p?(p.find(".collapse").each(function(){var i=e(this).data("collapse");return!i||!i.transitioning||(t=!0,!1)}),t?u:(h&&h.hasClass("btn")&&h.toggleClass("active"),p.hide(),e(window).off("resize",O),p.off("click","[data-action]"),p.off("mousedown",!1),p.remove(),p=!1,L({type:"dp.hide",date:r.clone()}),a.blur(),o=r.clone(),u)):u},ie=function(){ee(null)},ne=function(e){return void 0===n.parseInputDate?(!t.isMoment(e)||e instanceof Date)&&(e=T(e)):e=n.parseInputDate(e),e},re={next:function(){var e=g[c].navFnc;o.add(g[c].navStep,e),X(),B(e)},previous:function(){var e=g[c].navFnc;o.subtract(g[c].navStep,e),X(),B(e)},pickerSwitch:function(){M(1)},selectMonth:function(t){var i=e(t.target).closest("tbody").find("span").index(e(t.target));o.month(i),c===m?(ee(r.clone().year(o.year()).month(o.month())),n.inline||te()):(M(-1),X()),B("M")},selectYear:function(t){var i=parseInt(e(t.target).text(),10)||0;o.year(i),c===m?(ee(r.clone().year(o.year())),n.inline||te()):(M(-1),X()),B("YYYY")},selectDecade:function(t){var i=parseInt(e(t.target).data("selection"),10)||0;o.year(i),c===m?(ee(r.clone().year(o.year())),n.inline||te()):(M(-1),X()),B("YYYY")},selectDay:function(t){var i=o.clone();e(t.target).is(".old")&&i.subtract(1,"M"),e(t.target).is(".new")&&i.add(1,"M"),ee(i.date(parseInt(e(t.target).text(),10))),S()||n.keepOpen||n.inline||te()},incrementHours:function(){var e=r.clone().add(1,"h");q(e,"h")&&ee(e)},incrementMinutes:function(){var e=r.clone().add(n.stepping,"m");q(e,"m")&&ee(e)},incrementSeconds:function(){var e=r.clone().add(1,"s");q(e,"s")&&ee(e)},decrementHours:function(){var e=r.clone().subtract(1,"h");q(e,"h")&&ee(e)},decrementMinutes:function(){var e=r.clone().subtract(n.stepping,"m");q(e,"m")&&ee(e)},decrementSeconds:function(){var e=r.clone().subtract(1,"s");q(e,"s")&&ee(e)},togglePeriod:function(){ee(r.clone().add(r.hours()>=12?-12:12,"h"))},togglePicker:function(t){var i,r=e(t.target),o=r.closest("ul"),a=o.find(".in"),s=o.find(".collapse:not(.in)");if(a&&a.length){if(i=a.data("collapse"),i&&i.transitioning)return;a.collapse?(a.collapse("hide"),s.collapse("show")):(a.removeClass("in"),s.addClass("in")),r.is("span")?r.toggleClass(n.icons.time+" "+n.icons.date):r.find("span").toggleClass(n.icons.time+" "+n.icons.date)}},showPicker:function(){p.find(".timepicker > div:not(.timepicker-picker)").hide(),p.find(".timepicker .timepicker-picker").show()},showHours:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-hours").show()},showMinutes:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var i=parseInt(e(t.target).text(),10);s||(r.hours()>=12?12!==i&&(i+=12):12===i&&(i=0)),ee(r.clone().hours(i)),re.showPicker.call(u)},selectMinute:function(t){ee(r.clone().minutes(parseInt(e(t.target).text(),10))),re.showPicker.call(u)},selectSecond:function(t){ee(r.clone().seconds(parseInt(e(t.target).text(),10))),re.showPicker.call(u)},clear:ie,today:function(){var e=T();q(e,"d")&&ee(e)},close:te},oe=function(t){return!e(t.currentTarget).is(".disabled")&&(re[e(t.currentTarget).data("action")].apply(u,arguments),!1)},ae=function(){var t,i={year:function(e){return e.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(e){return e.date(1).hours(0).seconds(0).minutes(0)},day:function(e){return e.hours(0).seconds(0).minutes(0)},hour:function(e){return e.seconds(0).minutes(0)},minute:function(e){return e.seconds(0)}};return a.prop("disabled")||!n.ignoreReadonly&&a.prop("readonly")||p?u:(void 0!==a.val()&&0!==a.val().trim().length?ee(ne(a.val().trim())):f&&n.useCurrent&&(n.inline||a.is("input")&&0===a.val().trim().length)&&(t=T(),"string"==typeof n.useCurrent&&(t=i[n.useCurrent](t)),ee(t)),p=I(),P(),z(),p.find(".timepicker-hours").hide(),p.find(".timepicker-minutes").hide(),p.find(".timepicker-seconds").hide(),J(),M(),e(window).on("resize",O),p.on("click","[data-action]",oe),p.on("mousedown",!1),h&&h.hasClass("btn")&&h.toggleClass("active"),O(),p.show(),n.focusOnShow&&!a.is(":focus")&&a.focus(),L({type:"dp.show"}),u)},se=function(){return p?te():ae()},le=function(e){var t,i,r,o,a=null,s=[],l={},d=e.which,c="p";C[d]=c;for(t in C)C.hasOwnProperty(t)&&C[t]===c&&(s.push(t),parseInt(t,10)!==d&&(l[t]=!0));for(t in n.keyBinds)if(n.keyBinds.hasOwnProperty(t)&&"function"==typeof n.keyBinds[t]&&(r=t.split(" "),r.length===s.length&&x[d]===r[r.length-1])){for(o=!0,i=r.length-2;i>=0;i--)if(!(x[r[i]]in l)){o=!1;break}if(o){a=n.keyBinds[t];break}}a&&(a.call(u,p),e.stopPropagation(),e.preventDefault())},de=function(e){C[e.which]="r",e.stopPropagation(),e.preventDefault()},ce=function(t){var i=e(t.target).val().trim(),n=i?ne(i):null;return ee(n),t.stopImmediatePropagation(),!1},ue=function(){a.on({change:ce,blur:n.debug?"":te,keydown:le,keyup:de,focus:n.allowInputToggle?ae:""}),i.is("input")?a.on({focus:ae}):h&&(h.on("click",se),h.on("mousedown",!1))},fe=function(){a.off({change:ce,blur:blur,keydown:le,keyup:de,focus:n.allowInputToggle?te:""}),i.is("input")?a.off({focus:ae}):h&&(h.off("click",se),h.off("mousedown",!1))},he=function(t){var i={};return e.each(t,function(){var e=ne(this);e.isValid()&&(i[e.format("YYYY-MM-DD")]=!0)}),!!Object.keys(i).length&&i},pe=function(t){var i={};return e.each(t,function(){i[this]=!0}),!!Object.keys(i).length&&i},me=function(){var e=n.format||"L LT";l=e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){var t=r.localeData().longDateFormat(e)||e;return t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){return r.localeData().longDateFormat(e)||e})}),d=n.extraFormats?n.extraFormats.slice():[],d.indexOf(e)<0&&d.indexOf(l)<0&&d.push(l),s=l.toLowerCase().indexOf("a")<1&&l.replace(/\[.*?\]/g,"").indexOf("h")<1,E("y")&&(m=2),E("M")&&(m=1),E("d")&&(m=0),c=Math.max(m,c),f||ee(r)};if(u.destroy=function(){te(),fe(),i.removeData("DateTimePicker"),i.removeData("date")},u.toggle=se,u.show=ae,u.hide=te,u.disable=function(){return te(),h&&h.hasClass("btn")&&h.addClass("disabled"),a.prop("disabled",!0),u},u.enable=function(){return h&&h.hasClass("btn")&&h.removeClass("disabled"),a.prop("disabled",!1),u},u.ignoreReadonly=function(e){if(0===arguments.length)return n.ignoreReadonly;if("boolean"!=typeof e)throw new TypeError("ignoreReadonly () expects a boolean parameter");return n.ignoreReadonly=e,u},u.options=function(t){if(0===arguments.length)return e.extend(!0,{},n);if(!(t instanceof Object))throw new TypeError("options() options parameter should be an object");return e.extend(!0,n,t),e.each(n,function(e,t){if(void 0===u[e])throw new TypeError("option "+e+" is not recognized!");u[e](t)}),u},u.date=function(e){if(0===arguments.length)return f?null:r.clone();if(!(null===e||"string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return ee(null===e?null:ne(e)),u},u.format=function(e){if(0===arguments.length)return n.format;if("string"!=typeof e&&("boolean"!=typeof e||e!==!1))throw new TypeError("format() expects a string or boolean:false parameter "+e);return n.format=e,l&&me(),u},u.timeZone=function(e){if(0===arguments.length)return n.timeZone;if("string"!=typeof e)throw new TypeError("newZone() expects a string parameter");return n.timeZone=e,u},u.dayViewHeaderFormat=function(e){if(0===arguments.length)return n.dayViewHeaderFormat;if("string"!=typeof e)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return n.dayViewHeaderFormat=e,u},u.extraFormats=function(e){if(0===arguments.length)return n.extraFormats;if(e!==!1&&!(e instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return n.extraFormats=e,d&&me(),u},u.disabledDates=function(t){if(0===arguments.length)return n.disabledDates?e.extend({},n.disabledDates):n.disabledDates;if(!t)return n.disabledDates=!1,J(),u;if(!(t instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return n.disabledDates=he(t),n.enabledDates=!1,J(),u},u.enabledDates=function(t){if(0===arguments.length)return n.enabledDates?e.extend({},n.enabledDates):n.enabledDates;if(!t)return n.enabledDates=!1,J(),u;if(!(t instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return n.enabledDates=he(t),n.disabledDates=!1,J(),u},u.daysOfWeekDisabled=function(e){if(0===arguments.length)return n.daysOfWeekDisabled.splice(0);if("boolean"==typeof e&&!e)return n.daysOfWeekDisabled=!1,J(),u;if(!(e instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(n.daysOfWeekDisabled=e.reduce(function(e,t){return t=parseInt(t,10),t>6||t<0||isNaN(t)?e:(e.indexOf(t)===-1&&e.push(t),e)},[]).sort(),n.useCurrent&&!n.keepInvalid){for(var t=0;!q(r,"d");){if(r.add(1,"d"),31===t)throw"Tried 31 times to find a valid date";t++}ee(r)}return J(),u},u.maxDate=function(e){if(0===arguments.length)return n.maxDate?n.maxDate.clone():n.maxDate;if("boolean"==typeof e&&e===!1)return n.maxDate=!1,J(),u;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=T()));var t=ne(e);if(!t.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+e);if(n.minDate&&t.isBefore(n.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+t.format(l));return n.maxDate=t,n.useCurrent&&!n.keepInvalid&&r.isAfter(e)&&ee(n.maxDate),o.isAfter(t)&&(o=t.clone().subtract(n.stepping,"m")),J(),u},u.minDate=function(e){if(0===arguments.length)return n.minDate?n.minDate.clone():n.minDate;if("boolean"==typeof e&&e===!1)return n.minDate=!1,J(),u;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=T()));var t=ne(e);if(!t.isValid())throw new TypeError("minDate() Could not parse date parameter: "+e);if(n.maxDate&&t.isAfter(n.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+t.format(l));return n.minDate=t,n.useCurrent&&!n.keepInvalid&&r.isBefore(e)&&ee(n.minDate),o.isBefore(t)&&(o=t.clone().add(n.stepping,"m")),J(),u},u.defaultDate=function(e){if(0===arguments.length)return n.defaultDate?n.defaultDate.clone():n.defaultDate;if(!e)return n.defaultDate=!1,u;"string"==typeof e&&(e="now"===e||"moment"===e?T():T(e));var t=ne(e);if(!t.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+e);if(!q(t))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return n.defaultDate=t,(n.defaultDate&&n.inline||""===a.val().trim())&&ee(n.defaultDate),u},u.locale=function(e){if(0===arguments.length)return n.locale;if(!t.localeData(e))throw new TypeError("locale() locale "+e+" is not loaded from moment locales!");return n.locale=e,r.locale(n.locale),o.locale(n.locale),l&&me(),p&&(te(),ae()),u},u.stepping=function(e){return 0===arguments.length?n.stepping:(e=parseInt(e,10),(isNaN(e)||e<1)&&(e=1),n.stepping=e,u)},u.useCurrent=function(e){var t=["year","month","day","hour","minute"];if(0===arguments.length)return n.useCurrent;if("boolean"!=typeof e&&"string"!=typeof e)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof e&&t.indexOf(e.toLowerCase())===-1)throw new TypeError("useCurrent() expects a string parameter of "+t.join(", "));return n.useCurrent=e,u},u.collapse=function(e){if(0===arguments.length)return n.collapse;if("boolean"!=typeof e)throw new TypeError("collapse() expects a boolean parameter");return n.collapse===e?u:(n.collapse=e,p&&(te(),ae()),u)},u.icons=function(t){if(0===arguments.length)return e.extend({},n.icons);if(!(t instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return e.extend(n.icons,t),p&&(te(),ae()),u},u.tooltips=function(t){if(0===arguments.length)return e.extend({},n.tooltips);if(!(t instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return e.extend(n.tooltips,t),p&&(te(),ae()),u},u.useStrict=function(e){if(0===arguments.length)return n.useStrict;if("boolean"!=typeof e)throw new TypeError("useStrict() expects a boolean parameter");return n.useStrict=e,u},u.sideBySide=function(e){if(0===arguments.length)return n.sideBySide;if("boolean"!=typeof e)throw new TypeError("sideBySide() expects a boolean parameter");return n.sideBySide=e,p&&(te(),ae()),u},u.viewMode=function(e){if(0===arguments.length)return n.viewMode;if("string"!=typeof e)throw new TypeError("viewMode() expects a string parameter");if(v.indexOf(e)===-1)throw new TypeError("viewMode() parameter must be one of ("+v.join(", ")+") value");return n.viewMode=e,c=Math.max(v.indexOf(e),m),M(),u},u.toolbarPlacement=function(e){if(0===arguments.length)return n.toolbarPlacement;if("string"!=typeof e)throw new TypeError("toolbarPlacement() expects a string parameter");if(w.indexOf(e)===-1)throw new TypeError("toolbarPlacement() parameter must be one of ("+w.join(", ")+") value");return n.toolbarPlacement=e,p&&(te(),ae()),u},u.widgetPositioning=function(t){if(0===arguments.length)return e.extend({},n.widgetPositioning);if("[object Object]"!=={}.toString.call(t))throw new TypeError("widgetPositioning() expects an object variable");if(t.horizontal){if("string"!=typeof t.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(t.horizontal=t.horizontal.toLowerCase(),b.indexOf(t.horizontal)===-1)throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+b.join(", ")+")");n.widgetPositioning.horizontal=t.horizontal}if(t.vertical){if("string"!=typeof t.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(t.vertical=t.vertical.toLowerCase(),y.indexOf(t.vertical)===-1)throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+y.join(", ")+")");n.widgetPositioning.vertical=t.vertical}return J(),u},u.calendarWeeks=function(e){if(0===arguments.length)return n.calendarWeeks;if("boolean"!=typeof e)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return n.calendarWeeks=e,J(),u},u.showTodayButton=function(e){if(0===arguments.length)return n.showTodayButton;if("boolean"!=typeof e)throw new TypeError("showTodayButton() expects a boolean parameter");return n.showTodayButton=e,p&&(te(),ae()),u},u.showClear=function(e){if(0===arguments.length)return n.showClear;if("boolean"!=typeof e)throw new TypeError("showClear() expects a boolean parameter");return n.showClear=e,p&&(te(),ae()),u},u.widgetParent=function(t){if(0===arguments.length)return n.widgetParent;if("string"==typeof t&&(t=e(t)),null!==t&&"string"!=typeof t&&!(t instanceof e))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return n.widgetParent=t,p&&(te(),ae()),u},u.keepOpen=function(e){if(0===arguments.length)return n.keepOpen;if("boolean"!=typeof e)throw new TypeError("keepOpen() expects a boolean parameter");return n.keepOpen=e,u},u.focusOnShow=function(e){if(0===arguments.length)return n.focusOnShow;if("boolean"!=typeof e)throw new TypeError("focusOnShow() expects a boolean parameter");return n.focusOnShow=e,u},u.inline=function(e){if(0===arguments.length)return n.inline;if("boolean"!=typeof e)throw new TypeError("inline() expects a boolean parameter");return n.inline=e,u},u.clear=function(){return ie(),u},u.keyBinds=function(e){return 0===arguments.length?n.keyBinds:(n.keyBinds=e,u)},u.getMoment=function(e){return T(e)},u.debug=function(e){if("boolean"!=typeof e)throw new TypeError("debug() expects a boolean parameter");return n.debug=e,u},u.allowInputToggle=function(e){if(0===arguments.length)return n.allowInputToggle;if("boolean"!=typeof e)throw new TypeError("allowInputToggle() expects a boolean parameter");return n.allowInputToggle=e,u},u.showClose=function(e){if(0===arguments.length)return n.showClose;if("boolean"!=typeof e)throw new TypeError("showClose() expects a boolean parameter");return n.showClose=e,u},u.keepInvalid=function(e){if(0===arguments.length)return n.keepInvalid;if("boolean"!=typeof e)throw new TypeError("keepInvalid() expects a boolean parameter");return n.keepInvalid=e,u},u.datepickerInput=function(e){if(0===arguments.length)return n.datepickerInput;if("string"!=typeof e)throw new TypeError("datepickerInput() expects a string parameter");return n.datepickerInput=e,u},u.parseInputDate=function(e){if(0===arguments.length)return n.parseInputDate;if("function"!=typeof e)throw new TypeError("parseInputDate() sholud be as function");return n.parseInputDate=e,u},u.disabledTimeIntervals=function(t){if(0===arguments.length)return n.disabledTimeIntervals?e.extend({},n.disabledTimeIntervals):n.disabledTimeIntervals;if(!t)return n.disabledTimeIntervals=!1,J(),u;if(!(t instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return n.disabledTimeIntervals=t,J(),u},u.disabledHours=function(t){if(0===arguments.length)return n.disabledHours?e.extend({},n.disabledHours):n.disabledHours;if(!t)return n.disabledHours=!1,J(),u;if(!(t instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(n.disabledHours=pe(t),n.enabledHours=!1,n.useCurrent&&!n.keepInvalid){for(var i=0;!q(r,"h");){if(r.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}ee(r)}return J(),u},u.enabledHours=function(t){if(0===arguments.length)return n.enabledHours?e.extend({},n.enabledHours):n.enabledHours;if(!t)return n.enabledHours=!1,J(),u;if(!(t instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(n.enabledHours=pe(t),n.disabledHours=!1,n.useCurrent&&!n.keepInvalid){for(var i=0;!q(r,"h");){if(r.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}ee(r)}return J(),u},u.viewDate=function(e){if(0===arguments.length)return o.clone();if(!e)return o=r.clone(),u;if(!("string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return o=ne(e),B(),u},i.is("input"))a=i;else if(a=i.find(n.datepickerInput),0===a.length)a=i.find("input");else if(!a.is("input"))throw new Error('CSS class "'+n.datepickerInput+'" cannot be applied to non input element');if(i.hasClass("input-group")&&(h=0===i.find(".datepickerbutton").length?i.find(".input-group-addon"):i.find(".datepickerbutton")),!n.inline&&!a.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return r=T(),o=r.clone(),e.extend(!0,n,D()),u.options(n),me(),ue(),a.prop("disabled")&&u.disable(),a.is("input")&&0!==a.val().trim().length?ee(ne(a.val().trim())):n.defaultDate&&void 0===a.attr("placeholder")&&ee(n.defaultDate),n.inline&&ae(),u};return e.fn.datetimepicker=function(t){t=t||{};var n,r=Array.prototype.slice.call(arguments,1),o=!0,a=["destroy","hide","show","toggle"];if("object"==typeof t)return this.each(function(){var n,r=e(this);r.data("DateTimePicker")||(n=e.extend(!0,{},e.fn.datetimepicker.defaults,t),r.data("DateTimePicker",i(r,n)))});if("string"==typeof t)return this.each(function(){var i=e(this),a=i.data("DateTimePicker");if(!a)throw new Error('bootstrap-datetimepicker("'+t+'") method was called on an element that is not using DateTimePicker');n=a[t].apply(a,r),o=n===a}),o||e.inArray(t,a)>-1?this:n;throw new TypeError("Invalid arguments for DateTimePicker: "+t)},e.fn.datetimepicker.defaults={timeZone:"",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:t.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().subtract(7,"d")):this.date(t.clone().add(this.stepping(),"m"))}},down:function(e){if(!e)return void this.show();var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().add(7,"d")):this.date(t.clone().subtract(this.stepping(),"m"))},"control up":function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().subtract(1,"y")):this.date(t.clone().add(1,"h"))}},"control down":function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().add(1,"y")):this.date(t.clone().subtract(1,"h"))}},left:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().subtract(1,"d"))}},right:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().add(1,"d"))}},pageUp:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().subtract(1,"M"))}},pageDown:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(e){e&&e.find(".timepicker").is(":visible")&&e.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},delete:function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1},e.fn.datetimepicker});!function(e){"use strict";var t=[];var i=e.fn.bootstrapTable.utils.sprintf;var n=function(t,n){var o=r(t,n);var a=i('<div class="commonsearch-table %s">',n.options.searchFormVisible?"":"hidden");a+=o.join("");a+="</div>";n.$container.prepend(e(a));var s=e("form.form-commonsearch",n.$container);if(e(".datetimepicker",s).size()>0){require(["bootstrap-datetimepicker"],function(){e(".datetimepicker",s).parent().css("position","relative");e(".datetimepicker",s).datetimepicker({icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"fa fa-chevron-left",next:"fa fa-chevron-right",today:"fa fa-history",clear:"fa fa-trash",close:"fa fa-remove"},showTodayButton:true,showClose:true})})}s.on("submit",function(e){e.preventDefault();n.onColumnCommonSearch();return false});s.on("click","button[type=reset]",function(e){s[0].reset();n.onColumnCommonSearch()})};var r=function(n,r){var a=[];var s=["=",">",">=","<","<=","!=","LIKE","LIKE %...%","NOT LIKE","IN(...)","NOT IN(...)","BETWEEN","NOT BETWEEN","IS NULL","IS NOT NULL"];a.push(i('<form class="form-inline form-commonsearch" action="%s" >',r.options.actionForm));a.push("<fieldset>");if(r.options.titleForm.length>0)a.push(i("<legend>%s</legend>",r.options.titleForm));for(var l in n){var d=n[l];if(!d.checkbox&&d.field!=="operate"&&d.searchable&&d.operate!==false){var c=Backend.api.query(d.field);c=c?c:"";d.defaultValue=r.options.renderDefault&&c!=""?c:typeof d.defaultValue==="undefined"?"":d.defaultValue;t.push(d);a.push('<div class="form-group" style="margin:5px">');a.push(i('<label for="%s" class="control-label" style="padding:0 10px">%s</label>',d.field,d.title));d.operate=typeof d.operate==="undefined"||e.inArray(d.operate,s)===-1?"=":d.operate;a.push(i('<input type="hidden" class="form-control operate" name="field-%s" data-name="%s" value="%s" readonly>',d.field,d.field,d.operate));var u=typeof d.style==="undefined"?"":i('style="%s"',d.style);if(d.searchList){if(typeof d.searchList==="object"&&typeof d.searchList.then==="function"){a.push(i('<select class="form-control" name="%s" %s>%s</select>',d.field,u,i('<option value="">%s</option>',r.options.formatCommonChoose())));(function(t,n){e.when(t.searchList).done(function(r){var o=false;if(r.data&&r.data.searchlist&&e.isArray(r.data.searchlist)){var a={};e.each(r.data.searchlist,function(e,t){a[t.id]=t.name})}else if(r.constructor===Array||r.constructor===Object){var a=r;o=r.constructor===Array?true:o}var s=[];e.each(a,function(e,n){var r=(o?n:e)==t.defaultValue?"selected":"";s.push(i("<option value='"+(o?n:e)+"' %s>"+n+"</option>",r))});e("form.form-commonsearch select[name='"+t.field+"']",n.$container).append(s.join(""))})})(d,r)}else if(typeof d.searchList=="function"){a.push(d.searchList.call(this,d))}else{var f=d.searchList.constructor===Array;var h=[];h.push(i('<option value="">%s</option>',r.options.formatCommonChoose()));e.each(d.searchList,function(e,t){var n=(f?t:e)==d.defaultValue?"selected":"";h.push(i("<option value='"+(f?t:e)+"' %s>"+t+"</option>",n))});a.push(i('<select class="form-control" name="%s" %s>%s</select>',d.field,u,h.join("")))}}else{var p=typeof d.placeholder==="undefined"?d.title:d.placeholder;var m=typeof d.type==="undefined"?"text":d.type;var g=typeof d.addclass==="undefined"?"form-control":"form-control "+d.addclass;var v=typeof d.data==="undefined"?"":d.data;var y=typeof d.defaultValue==="undefined"?"":d.defaultValue;if(/BETWEEN$/.test(d.operate)){var b=/^.+|.+$/.test(y)?y.split("|"):["",""];a.push(i('<input type="%s" class="%s" name="%s" value="%s" placeholder="%s" id="%s" %s %s>',m,g,d.field,b[0],p,d.field,u,v));a.push(i('&nbsp;-&nbsp;<input type="%s" class="%s" name="%s" value="%s" placeholder="%s" id="%s" %s %s>',m,g,d.field,b[1],p,d.field,u,v))}else{a.push(i('<input type="%s" class="%s" name="%s" value="%s" placeholder="%s" id="%s" %s %s>',m,g,d.field,y,p,d.field,u,v))}}a.push("</div>")}}a.push(o(r).join(""));a.push("</fieldset>");a.push("</form>");return a};var o=function(e){var t=[];var n=e.options.formatCommonSubmitButton();var r=e.options.formatCommonResetButton();t.push('<div class="form-group" style="margin:5px">');t.push('<div class="col-sm-12 text-center">');t.push(i('<button type="submit" class="btn btn-success" >%s</button> ',n));t.push(i('<button type="reset" class="btn btn-default" >%s</button> ',r));t.push("</div>");t.push("</div>");return t};var a=function(e){if(!e.options.commonSearch||e.options.sidePagination!="server"||!e.options.url){return false}return true};var s=function(i){var n={};var r={};e("form.form-commonsearch input.operate",i.$container).each(function(i){var o=e(this).data("name");var a=e(this).val();var s=e("[name='"+o+"']");if(s.size()==0)return true;var l=t[i];if(s.size()>1){if(/BETWEEN$/.test(a)){var d=e.trim(e("[name='"+o+"']:first").val()),c=e.trim(e("[name='"+o+"']:last").val());if(!d.length||!c.length){return true}if(typeof l.process==="function"){d=l.process(d,"begin");c=l.process(c,"end")}else if(e("[name='"+o+"']:first").attr("type")==="datetime"){var u=Moment(d).format("HH:mm:ss");d=parseInt(Moment(d)/1e3);c=parseInt(Moment(c)/1e3);if(d===c&&"00:00:00"===u){c+=86399}}var f=d+","+c}else{var f=e("[name='"+o+"']:checked").val()}}else{var f=typeof l.process==="function"?l.process(s.val()):a=="LIKE %...%"?s.val().replace(/\*/g,"%"):s.val()}if(f==""&&a.indexOf("NULL")==-1){return true}n[o]=a;r[o]=f});return{op:n,filter:r}};e.extend(e.fn.bootstrapTable.defaults,{commonSearch:false,titleForm:"Common search",actionForm:"",searchFormVisible:true,searchClass:"searchit",renderDefault:true,onColumnCommonSearch:function(e,t){return false}});e.extend(e.fn.bootstrapTable.defaults.icons,{commonSearchIcon:"glyphicon-search"});e.extend(e.fn.bootstrapTable.Constructor.EVENTS,{"column-common-search.bs.table":"onColumnCommonSearch"});e.extend(e.fn.bootstrapTable.locales[e.fn.bootstrapTable.defaults.locale],{formatCommonSearch:function(){return"Common search"},formatCommonSubmitButton:function(){return"Submit"},formatCommonResetButton:function(){return"Reset"},formatCommonCloseButton:function(){return"Close"},formatCommonChoose:function(){return"Choose"}});e.extend(e.fn.bootstrapTable.defaults,e.fn.bootstrapTable.locales);var l=e.fn.bootstrapTable.Constructor,d=l.prototype.initToolbar,c=l.prototype.load,u=l.prototype.initSearch;l.prototype.initToolbar=function(){d.apply(this,Array.prototype.slice.apply(arguments));if(!a(this)){return}var t=this,r=[];r.push(i('<div class="columns-%s pull-%s" style="margin-top:10px;">',this.options.buttonsAlign,this.options.buttonsAlign));r.push(i('<button class="btn btn-default%s'+'" type="button" name="commonSearch" title="%s">',t.options.iconSize===undefined?"":" btn-"+t.options.iconSize,t.options.formatCommonSearch()));r.push(i('<i class="%s %s"></i>',t.options.iconsPrefix,t.options.icons.commonSearchIcon));r.push("</button></div>");t.$toolbar.prepend(r.join(""));n(t.columns,t);var o=e(".commonsearch-table",t.$container);t.$toolbar.find('button[name="commonSearch"]').off("click").on("click",function(){o.toggleClass("hidden");return});t.$container.on("click","."+t.options.searchClass,function(){var t=e("form [name='"+e(this).data("field")+"']",o);if(t.size()>0){t.val(e(this).data("value"));e("form",o).trigger("submit")}});var l=s(this);var c=this.options.queryParams;this.options.queryParams=function(){var t=c.apply(this,arguments);t.filter=JSON.stringify(e.extend(t.filter||{},l.filter));t.op=JSON.stringify(e.extend(t.op||{},l.op));return t}};l.prototype.load=function(e){c.apply(this,Array.prototype.slice.apply(arguments));if(!a(this)){return}};l.prototype.initSearch=function(){u.apply(this,Array.prototype.slice.apply(arguments));if(!a(this)){return}var t=this;var i=e.isEmptyObject(this.filterColumnsPartial)?null:this.filterColumnsPartial;this.data=i?e.grep(this.data,function(n,r){for(var o in i){var a=i[o].toLowerCase();var s=n[o];s=e.fn.bootstrapTable.utils.calculateObjectValue(t.header,t.header.formatters[e.inArray(o,t.header.fields)],[s,n,r],s);if(!(e.inArray(o,t.header.fields)!==-1&&(typeof s==="string"||typeof s==="number")&&(s+"").toLowerCase().indexOf(a)!==-1)){return false}}return true}):this.data};l.prototype.onColumnCommonSearch=function(t){if(typeof t==="undefined"){var i=s(this);this.options.pageNumber=1;this.options.queryParams=function(e){return{search:e.search,sort:e.sort,order:e.order,filter:JSON.stringify(i.filter),op:JSON.stringify(i.op),offset:e.offset,limit:e.limit}};this.refresh({query:{filter:JSON.stringify(i.filter),op:JSON.stringify(i.op)}})}else{var n=e.trim(e(t.currentTarget).val());var r=e(t.currentTarget)[0].id;if(e.isEmptyObject(this.filterColumnsPartial)){this.filterColumnsPartial={}}if(n){this.filterColumnsPartial[r]=n}else{delete this.filterColumnsPartial[r]}this.options.pageNumber=1;this.onSearch(t);this.trigger("column-common-search",r,n)}}}(jQuery);define("bootstrap-table-commonsearch",["bootstrap-table"],function(e){return function(){var t,i;return t||e.$.fn.bootstrapTable.defaults}}(this));!function(){function e(e){return e.replace(b,"").replace(w,",").replace(x,"").replace(C,"").replace(_,"").split(T)}function t(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function i(i,n){function r(e){return f+=e.split(/\n/).length-1,c&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=y[1]+t(e)+y[2]+"\n"),e}function o(t){var i=f;if(d?t=d(t,n):a&&(t=t.replace(/\n/g,function(){return f++,"$line="+f+";"})),0===t.indexOf("=")){var r=u&&!/^=[=#]/.test(t);if(t=t.replace(/^=[=#]?|[\s;]*$/g,""),r){var o=t.replace(/\s*\([^\)]+\)/,"");h[o]||/^(include|print)$/.test(o)||(t="$escape("+t+")")}else t="$string("+t+")";t=y[1]+t+y[2]}return a&&(t="$line="+i+";"+t),v(e(t),function(e){if(e&&!m[e]){var t;t="print"===e?w:"include"===e?x:h[e]?"$utils."+e:p[e]?"$helpers."+e:"$data."+e,C+=e+"="+t+",",m[e]=!0}}),t+"\n"}var a=n.debug,s=n.openTag,l=n.closeTag,d=n.parser,c=n.compress,u=n.escape,f=1,m={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},g="".trim,y=g?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],b=g?"$out+=text;return $out;":"$out.push(text);",w="function(){var text=''.concat.apply('',arguments);"+b+"}",x="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+b+"}",C="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(a?"$line=0,":""),_=y[0],T="return new String("+y[3]+");";v(i.split(s),function(e){e=e.split(l);var t=e[0],i=e[1];1===e.length?_+=r(t):(_+=o(t),i&&(_+=r(i)))});var E=C+_+T;a&&(E="try{"+E+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+t(i)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var S=new Function("$data","$filename",E);return S.prototype=h,S}catch(e){throw e.temp="function anonymous($data,$filename) {"+E+"}",e}}var n=function(e,t){return"string"==typeof t?g(t,{filename:e}):a(e,t)};n.version="3.0.0",n.config=function(e,t){r[e]=t};var r=n.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},o=n.cache={};n.render=function(e,t){return g(e)(t)};var a=n.renderFile=function(e,t){var i=n.get(e)||m({filename:e,name:"Render Error",message:"Template not found"});return t?i(t):i};n.get=function(e){var t;if(o[e])t=o[e];else if("object"==typeof document){var i=document.getElementById(e);if(i){var n=(i.value||i.innerHTML).replace(/^\s*|\s*$/g,"");t=g(n,{filename:e})}}return t};var s=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?s(e.call(e)):""),e},l={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},d=function(e){return l[e]},c=function(e){return s(e).replace(/&(?![\w#]+;)|[<>"']/g,d)},u=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},f=function(e,t){var i,n;if(u(e))for(i=0,n=e.length;i<n;i++)t.call(e,e[i],i,e);else for(i in e)t.call(e,e[i],i)},h=n.utils={$helpers:{},$include:a,$string:s,$escape:c,$each:f};n.helper=function(e,t){p[e]=t};var p=n.helpers=h.$helpers;n.onerror=function(e){var t="Template Error\n\n";for(var i in e)t+="<"+i+">\n"+e[i]+"\n\n";"object"==typeof console&&console.error(t)};var m=function(e){return n.onerror(e),function(){return"{Template Error}"}},g=n.compile=function(e,t){function n(i){try{return new l(i,s)+""}catch(n){return t.debug?m(n)():(t.debug=!0,g(e,t)(i))}}t=t||{};for(var a in r)void 0===t[a]&&(t[a]=r[a]);var s=t.filename;try{var l=i(e,t)}catch(e){return e.filename=s||"anonymous",e.name="Syntax Error",m(e)}return n.prototype=l.prototype,n.toString=function(){return l.toString()},s&&t.cache&&(o[s]=n),n},v=h.$each,y="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",b=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,w=/[^\w$]+/g,x=new RegExp(["\\b"+y.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),C=/^\d[^,]*|,\d[^,]*/g,_=/^,+|,+$/g,T=/^$|,+/;"object"==typeof exports&&"undefined"!=typeof module?module.exports=n:"function"==typeof define?define("template",[],function(){return n}):this.template=n}();!function(e){"use strict";e.extend(e.fn.bootstrapTable.defaults,{templateView:false,templateFormatter:"itemtpl",templateParentClass:"row row-flex",templateTableClass:"table-template"});var t=e.fn.bootstrapTable.Constructor,i=t.prototype.initContainer,n=t.prototype.initBody,r=t.prototype.initRow;t.prototype.initContainer=function(){i.apply(this,Array.prototype.slice.apply(arguments));var e=this;if(!e.options.templateView){return}};t.prototype.initBody=function(){var t=this;e.extend(t.options,{showHeader:!t.options.templateView?e.fn.bootstrapTable.defaults.showHeader:false,showFooter:!t.options.templateView?e.fn.bootstrapTable.defaults.showFooter:false});e(t.$el).toggleClass(t.options.templateTableClass,t.options.templateView);n.apply(this,Array.prototype.slice.apply(arguments));if(!t.options.templateView){return}else{e("> *:not(.no-records-found)",t.$body).wrapAll(e("<div />").addClass(t.options.templateParentClass))}};t.prototype.initRow=function(e,t,i,n){var o=this;if(!o.options.templateView){return r.apply(o,Array.prototype.slice.apply(arguments))}var a="";if(typeof o.options.templateFormatter==="function"){a=o.options.templateFormatter.call(o,e,t,i)}else{var s=require("template");a=s(o.options.templateFormatter,{item:e,i:t,data:i})}return a}}(jQuery);define("bootstrap-table-template",["bootstrap-table","template"],function(e){return function(){var t,i;return t||e.$.fn.bootstrapTable.defaults}}(this));define("table",["jquery","bootstrap","moment","moment/locale/zh-cn","bootstrap-table","bootstrap-table-lang","bootstrap-table-mobile","bootstrap-table-export","bootstrap-table-commonsearch","bootstrap-table-template"],function(e,t,i){var n={list:{},defaults:{url:"",sidePagination:"server",method:"get",toolbar:"#toolbar",search:true,cache:false,commonSearch:true,searchFormVisible:false,titleForm:"",idTable:"commonTable",showExport:true,exportDataType:"all",exportTypes:["json","xml","csv","txt","doc","excel"],pageSize:10,pageList:[10,25,50,"All"],pagination:true,clickToSelect:true,showRefresh:false,locale:"zh-CN",showToggle:true,showColumns:true,pk:"id",sortName:"id",sortOrder:"desc",paginationFirstText:__("First"),paginationPreText:__("Previous"),paginationNextText:__("Next"),paginationLastText:__("Last"),mobileResponsive:true,cardView:true,checkOnInit:true,escape:true,extend:{index_url:"",add_url:"",edit_url:"",del_url:"",multi_url:"",dragsort_url:"ajax/weigh"}},columnDefaults:{align:"center",valign:"middle"},config:{firsttd:"tbody tr td:first-child:not(:has(div.card-views))",toolbar:".toolbar",refreshbtn:".btn-refresh",addbtn:".btn-add",editbtn:".btn-edit",delbtn:".btn-del",multibtn:".btn-multi",disabledbtn:".btn-disabled",editonebtn:".btn-editone",dragsortfield:"weigh"},api:{init:function(t,i,r){t=t?t:{};i=i?i:{};r=r?r:{};e.extend(true,e.fn.bootstrapTable.defaults,n.defaults,t);e.extend(e.fn.bootstrapTable.columnDefaults,n.columnDefaults,i);e.extend(e.fn.bootstrapTable.locales[n.defaults.locale],{formatCommonSearch:function(){return __("Common search")},formatCommonSubmitButton:function(){return __("Submit")},formatCommonResetButton:function(){return __("Reset")},formatCommonCloseButton:function(){return __("Close")},formatCommonChoose:function(){return __("Choose")}},r)},bindevent:function(t){var i=t.closest(".bootstrap-table");var r=t.bootstrapTable("getOptions");var o=e(r.toolbar,i);t.on("load-error.bs.table",function(e,t){Toastr.error(__("Unknown data format"))});t.on("refresh.bs.table",function(t,i,r){e(n.config.refreshbtn,o).find(".fa").addClass("fa-spin")});t.on("dbl-click-row.bs.table",function(t,i,r,o){e(n.config.editonebtn,r).trigger("click")});t.on("post-body.bs.table",function(i,r,a,s){e(n.config.refreshbtn,o).find(".fa").removeClass("fa-spin");e(n.config.disabledbtn,o).toggleClass("disabled",true);if(e(n.config.firsttd,t).find("input[type='checkbox'][data-index]").size()>0){require(["drag","drop"],function(){e(n.config.firsttd,t).drag("start",function(t,i){return e('<div class="selection" />').css("opacity",.65).appendTo(document.body)}).drag(function(t,i){e(i.proxy).css({top:Math.min(t.pageY,i.startY),left:Math.min(t.pageX,i.startX),height:Math.abs(t.pageY-i.startY),width:Math.abs(t.pageX-i.startX)})}).drag("end",function(t,i){e(i.proxy).remove()});e(n.config.firsttd,t).drop("start",function(){n.api.toggleattr(this)}).drop(function(){n.api.toggleattr(this)}).drop("end",function(){n.api.toggleattr(this)});e.drop({multi:true})})}});t.on("check.bs.table uncheck.bs.table check-all.bs.table uncheck-all.bs.table fa.event.check",function(){var i=n.api.selectedids(t);e(n.config.disabledbtn,o).toggleClass("disabled",!i.length)});e(o).on("click",n.config.refreshbtn,function(){t.bootstrapTable("refresh")});e(o).on("click",n.config.addbtn,function(){var e=n.api.selectedids(t);Fast.api.open(r.extend.add_url+(e.length>0?(r.extend.add_url.match(/(\?|&)+/)?"&ids=":"/ids/")+e.join(","):""),__("Add"))});e(o).on("click",n.config.editbtn,function(){var i=n.api.selectedids(t);e.each(i,function(e,t){Fast.api.open(r.extend.edit_url+(r.extend.edit_url.match(/(\?|&)+/)?"&ids=":"/ids/")+t,__("Edit"))})});e(o).on("click",n.config.multibtn,function(){var i=n.api.selectedids(t);n.api.multi(e(this).data("action"),i,t,this)});e(o).on("click",n.config.delbtn,function(){var e=this;var i=n.api.selectedids(t);var r=Layer.confirm(__("Are you sure you want to delete the %s selected item?",i.length),{icon:3,title:__("Warning"),offset:0,shadeClose:true},function(){n.api.multi("del",i,t,e);Layer.close(r)})});require(["dragsort"],function(){e("tbody",t).dragsort({itemSelector:"tr",dragSelector:"a.btn-dragsort",dragEnd:function(){var i=t.bootstrapTable("getData");var r=i[parseInt(e(this).data("index"))];var o=t.bootstrapTable("getOptions");var a=e.map(e("tbody tr:visible",t),function(t){return i[parseInt(e(t).data("index"))][o.pk]});var s=r[o.pk];var l=typeof r.pid!="undefined"?r.pid:"";var d={url:t.bootstrapTable("getOptions").extend.dragsort_url,data:{ids:a.join(","),changeid:s,pid:l,field:n.config.dragsortfield,orderway:o.sortOrder,table:o.extend.table}};Fast.api.ajax(d,function(e){t.bootstrapTable("refresh")})},placeHolderTemplate:""})});e(t).on("click","input[data-id][name='checkbox']",function(e){t.trigger("fa.event.check")});e(t).on("click","[data-id].btn-change",function(i){i.preventDefault();n.api.multi(e(this).data("action")?e(this).data("action"):"",[e(this).data("id")],t,this)});e(t).on("click","[data-id].btn-edit",function(t){t.preventDefault();Fast.api.open(r.extend.edit_url+(r.extend.edit_url.match(/(\?|&)+/)?"&ids=":"/ids/")+e(this).data("id"),__("Edit"))});e(t).on("click","[data-id].btn-del",function(i){i.preventDefault();var r=e(this).data("id");var o=this;var a=Layer.confirm(__("Are you sure you want to delete this item?"),{icon:3,title:__("Warning"),shadeClose:true},function(){n.api.multi("del",r,t,o);Layer.close(a)})});var a=t.attr("id");n.list[a]=t;return t},multi:function(t,i,n,r){var o=n.bootstrapTable("getOptions");var a=r?e(r).data():{};var s=typeof a.url!=="undefined"?a.url:t=="del"?o.extend.del_url:o.extend.multi_url;s=s+(s.match(/(\?|&)+/)?"&ids=":"/ids/")+(e.isArray(i)?i.join(","):i);var l=typeof a.params!=="undefined"?typeof a.params=="object"?e.param(a.params):a.params:"";var o={url:s,data:{action:t,ids:i,params:l}};Fast.api.ajax(o,function(e){n.bootstrapTable("refresh")})},events:{operate:{"click .btn-detailone":function(t,i,n,r){t.stopPropagation();var o=e(this).closest("table").bootstrapTable("getOptions");Fast.api.open(o.extend.detail_url+(o.extend.detail_url.match(/(\?|&)+/)?"&ids=":"/ids/")+n[o.pk],__("Detail"))},"click .btn-editone":function(t,i,n,r){t.stopPropagation();var o=e(this).closest("table").bootstrapTable("getOptions");Fast.api.open(o.extend.edit_url+(o.extend.edit_url.match(/(\?|&)+/)?"&ids=":"/ids/")+n[o.pk],__("Edit"))},"click .btn-delone":function(i,r,o,a){i.stopPropagation();var s=this;var l=e(s).offset().top-e(window).scrollTop();var d=e(s).offset().left-e(window).scrollLeft()-260;if(l+154>e(window).height()){l=l-154}if(e(window).width()<480){l=d=t}var a=Layer.confirm(__("Are you sure you want to delete this item?"),{icon:3,title:__("Warning"),offset:[l,d],shadeClose:true},function(){var t=e(s).closest("table");var i=t.bootstrapTable("getOptions");n.api.multi("del",o[i.pk],t,s);Layer.close(a)})},"click .btn-tipsone":function(i,r,o,a){i.stopPropagation();var s=this;var l=e(s).offset().top-e(window).scrollTop();var d=e(s).offset().left-e(window).scrollLeft()-260;if(l+154>e(window).height()){l=l-154}if(e(window).width()<480){l=d=t}var a=Layer.confirm(__("Are you sure you want to operate this item?"),{icon:3,title:__("Warning"),offset:[l,d],shadeClose:true},function(){var i=e(s).closest("table");var r=i.bootstrapTable("getOptions");n.api.multi(t,o[r.pk],i,s);Layer.close(a)})}}},auth:{check:function(e){}},formatter:{icon:function(e,t,i){if(!e)return"";e=e.indexOf(" ")>-1?e:"fa fa-"+e;return'<i class="'+e+'"></i> '+e},image:function(e,t,i,n){var r=typeof n!=="undefined"?n:"img-sm img-center";return'<img class="'+r+'" src="'+Fast.api.cdnurl(e)+'" />'},images:function(t,i,n,r){var o=typeof r!=="undefined"?r:"img-sm img-center";var a=t.split(",");var s=[];e.each(a,function(e,t){s.push('<img class="'+o+'" src="'+Fast.api.cdnurl(t)+'" />')});return s.join(" ")},status:function(t,i,n,r){var o={normal:"success",hidden:"grey",deleted:"danger",locked:"info"};if(typeof r!=="undefined"){o=e.extend(o,r)}t=t.toString();var a=t&&typeof o[t]!=="undefined"?o[t]:"primary";t=t.charAt(0).toUpperCase()+t.slice(1);var s='<span class="text-'+a+'"><i class="fa fa-circle"></i> '+__(t)+"</span>";return s},url:function(e,t,i){return'<div class="input-group input-group-sm" style="width:250px;"><input type="text" class="form-control input-sm" value="'+e+'"><span class="input-group-btn input-group-sm"><a href="'+e+'" target="_blank" class="btn btn-default btn-sm"><i class="fa fa-link"></i></a></span></div>'},search:function(e,t,i){return'<a href="javascript:;" class="searchit" data-field="'+this.field+'" data-value="'+e+'">'+e+"</a>"},addtabs:function(e,t,i,n){return'<a href="'+n+'" class="addtabsit" title="'+__("Search %s",e)+'">'+e+"</a>"},flag:function(t,i,n,r){var o={index:"success",hot:"warning",recommend:"danger",new:"info"};if(typeof r!=="undefined"){o=e.extend(o,r)}var a=[];var s=t.split(",");e.each(s,function(e,t){t=t.toString();if(t=="")return true;var i=t&&typeof o[t]!=="undefined"?o[t]:"primary";t=t.charAt(0).toUpperCase()+t.slice(1);a.push('<span class="label label-'+i+'">'+__(t)+"</span>")});return a.join(" ")},label:function(t,i,n,r){var o=["success","warning","danger","info"];var a=[];var s=t.split(",");e.each(s,function(e,t){t=t.toString();var i=o[e%o.length];a.push('<span class="label label-'+i+'">'+__(t)+"</span>")});return a.join(" ")},datetime:function(e,t,n){return e?i(parseInt(e)*1e3).format("YYYY-MM-DD HH:mm:ss"):"-"},operate:function(t,i,r){var o=this.table;var a=o?o.bootstrapTable("getOptions"):{};var s=e.extend([],this.buttons||[]);s.unshift({name:"del",icon:"fa fa-trash",classname:"btn btn-xs btn-danger btn-delone",title:__("Delete"),text:__("Delete")});s.unshift({name:"edit",icon:"fa fa-pencil",classname:"btn btn-xs btn-success btn-editone",title:__("Edit"),text:__("Edit")});s.unshift({name:"detail",icon:"fa fa-list",classname:"btn btn-xs btn-info btn-detailone",title:__("Detail"),text:__("Detail")});s.unshift({name:"dragsort",icon:"fa fa-arrows",classname:"btn btn-xs btn-primary btn-dragsort",title:__("Dragsort"),text:__("Dragsort")});var l=[];e.each(s,function(e,t){var r=o.data("operate-"+t.name);if(typeof r==="undefined"||r||t.name==="dragsort"&&typeof i[n.config.dragsortfield]=="undefined"){if(["add","edit","del","multi","detail","dragsort"].indexOf(t.name)>-1&&!a.extend[t.name+"_url"]){return true}url=t.url?t.url+(t.url.match(/(\?|&)+/)?"&ids=":"/ids/")+i[a.pk]:"";url=url?Fast.api.fixurl(url):"javascript:;";classname=t.classname?t.classname:"btn-primary btn-"+name+"one";icon=t.icon?t.icon:"";text=t.text?t.text:"";title=t.title?t.title:text;l.push('<a href="'+url+'" class="'+classname+'" title="'+title+'"><i class="'+icon+'"></i>'+(text?" "+text:"")+"</a>")}});return l.join(" ")}},selectedids:function(t){var i=t.bootstrapTable("getOptions");if(i.templateView){return e.map(e("input[data-id][name='checkbox']:checked"),function(t){return e(t).data("id")})}else{return e.map(t.bootstrapTable("getSelections"),function(e){return e[i.pk]})}},toggleattr:function(t){e("input[type='checkbox']",t).trigger("click")}}};return n});!function(e,t){var i=function(){var e={};return t.apply(e,arguments),e.moxie};"function"==typeof define&&define.amd?define("moxie",[],i):"object"==typeof module&&module.exports?module.exports=i():e.moxie=i()}(this||window,function(){!function(e,t){"use strict";function i(e,t){for(var i,n=[],r=0;r<e.length;++r){if(i=s[e[r]]||o(e[r]),!i)throw"module definition dependecy not found: "+e[r];n.push(i)}t.apply(null,n)}function n(e,n,r){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(n===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";i(n,function(){s[e]=r.apply(null,arguments)})}function r(e){return!!s[e]}function o(t){for(var i=e,n=t.split(/[.\/]/),r=0;r<n.length;++r){if(!i[n[r]])return;i=i[n[r]]}return i}function a(i){for(var n=0;n<i.length;n++){for(var r=e,o=i[n],a=o.split(/[.\/]/),l=0;l<a.length-1;++l)r[a[l]]===t&&(r[a[l]]={}),r=r[a[l]];r[a[a.length-1]]=s[o]}}var s={};n("moxie/core/utils/Basic",[],function(){function e(e){var t;return e===t?"undefined":null===e?"null":e.nodeType?"node":{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}function t(){return a(!1,!1,arguments)}function i(){return a(!0,!1,arguments)}function n(){return a(!1,!0,arguments)}function r(){return a(!0,!0,arguments)}function o(i){switch(e(i)){case"array":return Array.prototype.slice.call(i);case"object":return t({},i)}return i}function a(t,i,n){var r,s=n[0];return l(n,function(n,d){d>0&&l(n,function(n,l){var d=-1!==f(e(n),["array","object"]);return n===r||t&&s[l]===r?!0:(d&&i&&(n=o(n)),e(s[l])===e(n)&&d?a(t,i,[s[l],n]):s[l]=n,void 0)})}),s}function s(e,t){function i(){this.constructor=e}for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__parent__=t.prototype,e}function l(e,t){var i,n,r,o;if(e){try{i=e.length}catch(e){i=o}if(i===o||"number"!=typeof i){for(n in e)if(e.hasOwnProperty(n)&&t(e[n],n)===!1)return}else for(r=0;i>r;r++)if(t(e[r],r)===!1)return}}function d(t){var i;if(!t||"object"!==e(t))return!0;for(i in t)return!1;return!0}function c(t,i){function n(r){"function"===e(t[r])&&t[r](function(e){++r<o&&!e?n(r):i(e)})}var r=0,o=t.length;"function"!==e(i)&&(i=function(){}),t&&t.length||i(),n(r)}function u(e,t){var i=0,n=e.length,r=new Array(n);l(e,function(e,o){e(function(e){if(e)return t(e);var a=[].slice.call(arguments);a.shift(),r[o]=a,i++,i===n&&(r.unshift(null),t.apply(this,r))})})}function f(e,t){if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i}return-1}function h(t,i){var n=[];"array"!==e(t)&&(t=[t]),"array"!==e(i)&&(i=[i]);for(var r in t)-1===f(t[r],i)&&n.push(t[r]);return n.length?n:!1}function p(e,t){var i=[];return l(e,function(e){-1!==f(e,t)&&i.push(e)}),i.length?i:null}function m(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i}function g(e){return e?String.prototype.trim?String.prototype.trim.call(e):e.toString().replace(/^\s*/,"").replace(/\s*$/,""):e}function v(e){if("string"!=typeof e)return e;var t,i={t:1099511627776,g:1073741824,m:1048576,k:1024};return e=/^([0-9\.]+)([tmgk]?)$/.exec(e.toLowerCase().replace(/[^0-9\.tmkg]/g,"")),t=e[2],e=+e[1],i.hasOwnProperty(t)&&(e*=i[t]),Math.floor(e)}function y(t){var i=[].slice.call(arguments,1);return t.replace(/%[a-z]/g,function(){var t=i.shift();return"undefined"!==e(t)?t:""})}function b(e,t){var i=this;setTimeout(function(){e.call(i)},t||1)}var w=function(){var e=0;return function(t){var i,n=(new Date).getTime().toString(32);for(i=0;5>i;i++)n+=Math.floor(65535*Math.random()).toString(32);return(t||"o_")+n+(e++).toString(32)}}();return{guid:w,typeOf:e,extend:t,extendIf:i,extendImmutable:n,extendImmutableIf:r,inherit:s,each:l,isEmptyObj:d,inSeries:c,inParallel:u,inArray:f,arrayDiff:h,arrayIntersect:p,toArray:m,trim:g,sprintf:y,parseSizeStr:v,delay:b}}),n("moxie/core/utils/Encode",[],function(){var e=function(e){return unescape(encodeURIComponent(e))},t=function(e){return decodeURIComponent(escape(e))},i=function(e,i){if("function"==typeof window.atob)return i?t(window.atob(e)):window.atob(e);var n,r,o,a,s,l,d,c,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,h=0,p="",m=[];if(!e)return e;e+="";do{a=u.indexOf(e.charAt(f++)),s=u.indexOf(e.charAt(f++)),l=u.indexOf(e.charAt(f++)),d=u.indexOf(e.charAt(f++)),c=a<<18|s<<12|l<<6|d,n=255&c>>16,r=255&c>>8,o=255&c,m[h++]=64==l?String.fromCharCode(n):64==d?String.fromCharCode(n,r):String.fromCharCode(n,r,o)}while(f<e.length);return p=m.join(""),i?t(p):p},n=function(t,i){if(i&&(t=e(t)),"function"==typeof window.btoa)return window.btoa(t);var n,r,o,a,s,l,d,c,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,h=0,p="",m=[];if(!t)return t;do{n=t.charCodeAt(f++),r=t.charCodeAt(f++),o=t.charCodeAt(f++),c=n<<16|r<<8|o,a=63&c>>18,s=63&c>>12,l=63&c>>6,d=63&c,m[h++]=u.charAt(a)+u.charAt(s)+u.charAt(l)+u.charAt(d)}while(f<t.length);p=m.join("");var g=t.length%3;return(g?p.slice(0,g-3):p)+"===".slice(g||3)};return{utf8_encode:e,utf8_decode:t,atob:i,btoa:n}}),n("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(e){function t(e,t,i){var n=0,r=0,o=0,a={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},s=function(e){return e=(""+e).replace(/[_\-+]/g,"."),e=e.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),e.length?e.split("."):[-8]},l=function(e){return e?isNaN(e)?a[e]||-7:parseInt(e,10):0};for(e=s(e),t=s(t),r=Math.max(e.length,t.length),n=0;r>n;n++)if(e[n]!=t[n]){if(e[n]=l(e[n]),t[n]=l(t[n]),e[n]<t[n]){o=-1;break}if(e[n]>t[n]){o=1;break}}if(!i)return o;switch(i){case">":case"gt":return o>0;case">=":case"ge":return o>=0;case"<=":case"le":return 0>=o;case"==":case"=":case"eq":return 0===o;case"<>":case"!=":case"ne":return 0!==o;case"":case"<":case"lt":return 0>o;default:return null}}var i=function(e){var t="",i="?",n="function",r="undefined",o="object",a="name",s="version",l={has:function(e,t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()}},d={rgx:function(){for(var t,i,a,s,l,d,c,u=0,f=arguments;u<f.length;u+=2){var h=f[u],p=f[u+1];if(typeof t===r){t={};for(s in p)l=p[s],typeof l===o?t[l[0]]=e:t[l]=e}for(i=a=0;i<h.length;i++)if(d=h[i].exec(this.getUA())){for(s=0;s<p.length;s++)c=d[++a],l=p[s],typeof l===o&&l.length>0?2==l.length?t[l[0]]=typeof l[1]==n?l[1].call(this,c):l[1]:3==l.length?t[l[0]]=typeof l[1]!==n||l[1].exec&&l[1].test?c?c.replace(l[1],l[2]):e:c?l[1].call(this,c,l[2]):e:4==l.length&&(t[l[0]]=c?l[3].call(this,c.replace(l[1],l[2])):e):t[l]=c?c:e;break}if(d)break}return t},str:function(t,n){for(var r in n)if(typeof n[r]===o&&n[r].length>0){for(var a=0;a<n[r].length;a++)if(l.has(n[r][a],t))return r===i?e:r}else if(l.has(n[r],t))return r===i?e:r;return t}},c={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},u={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[a,s],[/\s(opr)\/([\w\.]+)/i],[[a,"Opera"],s],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],[a,s],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[a,"IE"],s],[/(edge)\/((\d+)?[\w\.]+)/i],[a,s],[/(yabrowser)\/([\w\.]+)/i],[[a,"Yandex"],s],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],s],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[a,s],[/(dolfin)\/([\w\.]+)/i],[[a,"Dolphin"],s],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[a,"Chrome"],s],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[s,[a,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[s,[a,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[s,[a,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[s,[a,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[s,a],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[s,d.str,c.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[a,s],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],s],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,s]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[s,[a,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,s],[/rv\:([\w\.]+).*(gecko)/i],[s,a]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[a,s],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[s,d.str,c.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[s,d.str,c.os.windows.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],s],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[a,s],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[a,"Symbian"],s],[/\((series40);/i],[a],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],s],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[a,s],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],s],[/(sunos)\s?([\w\.]+\d)*/i],[[a,"Solaris"],s],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[a,s],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[a,"iOS"],[s,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[a,"Mac OS"],[s,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[a,s]]},f=function(e){var i=e||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:t);this.getBrowser=function(){return d.rgx.apply(this,u.browser)},this.getEngine=function(){return d.rgx.apply(this,u.engine)},this.getOS=function(){return d.rgx.apply(this,u.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this.setUA(i)};return f}(),n=function(){var t={define_property:function(){return!1}(),create_canvas:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),return_response_type:function(t){try{if(-1!==e.inArray(t,["","text","document"]))return!0;if(window.XMLHttpRequest){var i=new XMLHttpRequest;if(i.open("get","/"),"responseType"in i)return i.responseType=t,i.responseType!==t?!1:!0}}catch(e){}return!1},use_data_uri:function(){var e=new Image;return e.onload=function(){t.use_data_uri=1===e.width&&1===e.height},setTimeout(function(){e.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return t.use_data_uri&&("IE"!==o.browser||o.version>=9)},use_data_uri_of:function(e){return t.use_data_uri&&33e3>e||t.use_data_uri_over32kb()},use_fileinput:function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var e=document.createElement("input");return e.setAttribute("type","file"),!e.disabled}};return function(i){var n=[].slice.call(arguments);return n.shift(),"function"===e.typeOf(t[i])?t[i].apply(this,n):!!t[i]}}(),r=(new i).getResult(),o={can:n,uaParser:i,browser:r.browser.name,version:r.browser.version,os:r.os.name,osVersion:r.os.version,verComp:t,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return o.OS=o.os,o}),n("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(e){function t(e,t){var i;for(i in e)if(e[i]===t)return i;return null}return{RuntimeError:function(){function i(e,i){this.code=e,this.name=t(n,e),this.message=this.name+(i||": RuntimeError "+this.code)}var n={NOT_INIT_ERR:1,EXCEPTION_ERR:3,NOT_SUPPORTED_ERR:9,JS_ERR:4};return e.extend(i,n),i.prototype=Error.prototype,i}(),OperationNotAllowedException:function(){function t(e){this.code=e,this.name="OperationNotAllowedException"}return e.extend(t,{NOT_ALLOWED_ERR:1}),t.prototype=Error.prototype,t}(),ImageError:function(){function i(e){this.code=e,this.name=t(n,e),this.message=this.name+": ImageError "+this.code}var n={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2,INVALID_META_ERR:3};return e.extend(i,n),i.prototype=Error.prototype,i}(),FileException:function(){function i(e){this.code=e,this.name=t(n,e),this.message=this.name+": FileException "+this.code}var n={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return e.extend(i,n),i.prototype=Error.prototype,i}(),DOMException:function(){function i(e){this.code=e,this.name=t(n,e),this.message=this.name+": DOMException "+this.code}var n={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return e.extend(i,n),i.prototype=Error.prototype,i}(),EventException:function(){function t(e){this.code=e,this.name="EventException"}return e.extend(t,{UNSPECIFIED_EVENT_TYPE_ERR:0}),t.prototype=Error.prototype,t}()}}),n("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(e){var t=function(e){return"string"!=typeof e?e:document.getElementById(e)},i=function(e,t){if(!e.className)return!1;var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");return i.test(e.className)},n=function(e,t){i(e,t)||(e.className=e.className?e.className.replace(/\s+$/,"")+" "+t:t)},r=function(e,t){if(e.className){var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(i,function(e,t,i){return" "===t&&" "===i?" ":""})}},o=function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null)[t]:void 0},a=function(t,i){function n(e){var t,i,n=0,r=0;return e&&(i=e.getBoundingClientRect(),t="CSS1Compat"===d.compatMode?d.documentElement:d.body,n=i.left+t.scrollLeft,r=i.top+t.scrollTop),{x:n,y:r}}var r,o,a,s=0,l=0,d=document;if(t=t,i=i||d.body,t&&t.getBoundingClientRect&&"IE"===e.browser&&(!d.documentMode||d.documentMode<8))return o=n(t),a=n(i),{x:o.x-a.x,y:o.y-a.y};for(r=t;r&&r!=i&&r.nodeType;)s+=r.offsetLeft||0,l+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!=i&&r.nodeType;)s-=r.scrollLeft||0,l-=r.scrollTop||0,r=r.parentNode;return{x:s,y:l}},s=function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}};return{get:t,hasClass:i,addClass:n,removeClass:r,getStyle:o,getPos:a,getSize:s}}),n("moxie/core/EventTarget",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic"],function(e,t,i){function n(){this.uid=i.guid()}var r={};return i.extend(n.prototype,{init:function(){this.uid||(this.uid=i.guid("uid_"))},addEventListener:function(e,t,n,o){var a,s=this;return this.hasOwnProperty("uid")||(this.uid=i.guid("uid_")),e=i.trim(e),/\s/.test(e)?(i.each(e.split(/\s+/),function(e){s.addEventListener(e,t,n,o)}),void 0):(e=e.toLowerCase(),n=parseInt(n,10)||0,a=r[this.uid]&&r[this.uid][e]||[],a.push({fn:t,priority:n,scope:o||this}),r[this.uid]||(r[this.uid]={}),r[this.uid][e]=a,void 0)},hasEventListener:function(e){var t;return e?(e=e.toLowerCase(),t=r[this.uid]&&r[this.uid][e]):t=r[this.uid],t?t:!1},removeEventListener:function(e,t){var n,o,a=this;if(e=e.toLowerCase(),/\s/.test(e))return i.each(e.split(/\s+/),function(e){a.removeEventListener(e,t)}),void 0;if(n=r[this.uid]&&r[this.uid][e]){if(t){for(o=n.length-1;o>=0;o--)if(n[o].fn===t){n.splice(o,1);break}}else n=[];n.length||(delete r[this.uid][e],i.isEmptyObj(r[this.uid])&&delete r[this.uid])}},removeAllEventListeners:function(){r[this.uid]&&delete r[this.uid]},dispatchEvent:function(e){var n,o,a,s,l,d={},c=!0;if("string"!==i.typeOf(e)){if(s=e,"string"!==i.typeOf(s.type))throw new t.EventException(t.EventException.UNSPECIFIED_EVENT_TYPE_ERR);e=s.type,s.total!==l&&s.loaded!==l&&(d.total=s.total,d.loaded=s.loaded),d.async=s.async||!1}if(-1!==e.indexOf("::")?function(t){n=t[0],e=t[1]}(e.split("::")):n=this.uid,e=e.toLowerCase(),o=r[n]&&r[n][e]){o.sort(function(e,t){return t.priority-e.priority}),a=[].slice.call(arguments),a.shift(),d.type=e,a.unshift(d);var u=[];i.each(o,function(e){a[0].target=e.scope,d.async?u.push(function(t){setTimeout(function(){t(e.fn.apply(e.scope,a)===!1)},1)}):u.push(function(t){t(e.fn.apply(e.scope,a)===!1)})}),u.length&&i.inSeries(u,function(e){c=!e})}return c},bindOnce:function(e,t,i,n){var r=this;r.bind.call(this,e,function i(){return r.unbind(e,i),t.apply(this,arguments)},i,n)},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},handleEventProps:function(e){var t=this;this.bind(e.join(" "),function(e){var t="on"+e.type.toLowerCase();"function"===i.typeOf(this[t])&&this[t].apply(this,arguments)}),i.each(e,function(e){e="on"+e.toLowerCase(e),"undefined"===i.typeOf(t[e])&&(t[e]=null)})}}),n.instance=new n,n}),n("moxie/runtime/Runtime",["moxie/core/utils/Env","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(e,t,i,n){function r(e,n,o,s,l){var d,c=this,u=t.guid(n+"_"),f=l||"browser";e=e||{},a[u]=this,o=t.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},o),e.preferred_caps&&(f=r.getMode(s,e.preferred_caps,f)),d=function(){var e={};return{exec:function(t,i,n,r){return d[i]&&(e[t]||(e[t]={context:this,instance:new d[i]}),e[t].instance[n])?e[t].instance[n].apply(this,r):void 0},removeInstance:function(t){delete e[t]},removeAllInstances:function(){var i=this;t.each(e,function(e,n){"function"===t.typeOf(e.instance.destroy)&&e.instance.destroy.call(e.context),i.removeInstance(n)})}}}(),t.extend(this,{initialized:!1,uid:u,type:n,mode:r.getMode(s,e.required_caps,f),shimid:u+"_container",clients:0,options:e,can:function(e,i){var n=arguments[2]||o;if("string"===t.typeOf(e)&&"undefined"===t.typeOf(i)&&(e=r.parseCaps(e)),"object"===t.typeOf(e)){for(var a in e)if(!this.can(a,e[a],n))return!1;return!0}return"function"===t.typeOf(n[e])?n[e].call(this,i):i===n[e]},getShimContainer:function(){var e,n=i.get(this.shimid);return n||(e=i.get(this.options.container)||document.body,n=document.createElement("div"),n.id=this.shimid,n.className="moxie-shim moxie-shim-"+this.type,t.extend(n.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),e.appendChild(n),e=null),n},getShim:function(){return d},shimExec:function(e,t){var i=[].slice.call(arguments,2);return c.getShim().exec.call(this,this.uid,e,t,i)},exec:function(e,t){var i=[].slice.call(arguments,2);return c[e]&&c[e][t]?c[e][t].apply(this,i):c.shimExec.apply(this,arguments)},destroy:function(){if(c){var e=i.get(this.shimid);e&&e.parentNode.removeChild(e),d&&d.removeAllInstances(),this.unbindAll(),delete a[this.uid],this.uid=null,u=c=d=e=null}}}),this.mode&&e.required_caps&&!this.can(e.required_caps)&&(this.mode=!1)}var o={},a={};return r.order="html5,flash,silverlight,html4",r.getRuntime=function(e){return a[e]?a[e]:!1},r.addConstructor=function(e,t){t.prototype=n.instance,o[e]=t},r.getConstructor=function(e){return o[e]||null},r.getInfo=function(e){var t=r.getRuntime(e);return t?{uid:t.uid,type:t.type,mode:t.mode,can:function(){return t.can.apply(t,arguments)}}:null},r.parseCaps=function(e){var i={};return"string"!==t.typeOf(e)?e||{}:(t.each(e.split(","),function(e){i[e]=!0}),i)},r.can=function(e,t){var i,n,o=r.getConstructor(e);return o?(i=new o({required_caps:t}),n=i.mode,i.destroy(),!!n):!1},r.thatCan=function(e,t){var i=(t||r.order).split(/\s*,\s*/);for(var n in i)if(r.can(i[n],e))return i[n];return null},r.getMode=function(e,i,n){var r=null;if("undefined"===t.typeOf(n)&&(n="browser"),i&&!t.isEmptyObj(e)){if(t.each(i,function(i,n){if(e.hasOwnProperty(n)){var o=e[n](i);if("string"==typeof o&&(o=[o]),r){if(!(r=t.arrayIntersect(r,o)))return r=!1}else r=o}}),r)return-1!==t.inArray(n,r)?n:r[0];if(r===!1)return!1}return n},r.capTrue=function(){return!0},r.capFalse=function(){return!1},r.capTest=function(e){return function(){return!!e}},r}),n("moxie/runtime/RuntimeClient",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/Runtime"],function(e,t,i,n){return function(){var e;i.extend(this,{connectRuntime:function(r){function o(i){var a,l;return i.length?(a=i.shift().toLowerCase(),(l=n.getConstructor(a))?(e=new l(r),e.bind("Init",function(){e.initialized=!0,setTimeout(function(){e.clients++,s.ruid=e.uid,s.trigger("RuntimeInit",e)},1)}),e.bind("Error",function(){e.destroy(),o(i)}),e.bind("Exception",function(e,i){var n=i.name+"(#"+i.code+")"+(i.message?", from: "+i.message:"");s.trigger("RuntimeError",new t.RuntimeError(t.RuntimeError.EXCEPTION_ERR,n))}),e.mode?(e.init(),void 0):(e.trigger("Error"),void 0)):(o(i),void 0)):(s.trigger("RuntimeError",new t.RuntimeError(t.RuntimeError.NOT_INIT_ERR)),e=null,void 0)}var a,s=this;if("string"===i.typeOf(r)?a=r:"string"===i.typeOf(r.ruid)&&(a=r.ruid),a){if(e=n.getRuntime(a))return s.ruid=a,e.clients++,e;throw new t.RuntimeError(t.RuntimeError.NOT_INIT_ERR)}o((r.runtime_order||n.order).split(/\s*,\s*/))},disconnectRuntime:function(){e&&--e.clients<=0&&e.destroy(),e=null},getRuntime:function(){return e&&e.uid?e:e=null},exec:function(){return e?e.exec.apply(this,arguments):null},can:function(t){return e?e.can(t):!1}})}}),n("moxie/file/Blob",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient"],function(e,t,i){function n(o,a){function s(t,i,o){var a,s=r[this.uid];return"string"===e.typeOf(s)&&s.length?(a=new n(null,{type:o,size:i-t}),a.detach(s.substr(t,a.size)),a):null}i.call(this),o&&this.connectRuntime(o),a?"string"===e.typeOf(a)&&(a={data:a}):a={},e.extend(this,{uid:a.uid||e.guid("uid_"),ruid:o,size:a.size||0,type:a.type||"",slice:function(e,t,i){return this.isDetached()?s.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),e,t,i)},getSource:function(){return r[this.uid]?r[this.uid]:null},detach:function(e){if(this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),e=e||"","data:"==e.substr(0,5)){var i=e.indexOf(";base64,");this.type=e.substring(5,i),e=t.atob(e.substring(i+8))}this.size=e.length,r[this.uid]=e},isDetached:function(){return!this.ruid&&"string"===e.typeOf(r[this.uid])},destroy:function(){this.detach(),delete r[this.uid]}}),a.data?this.detach(a.data):r[this.uid]=a}var r={};return n}),n("moxie/core/I18n",["moxie/core/utils/Basic"],function(e){var t={};return{addI18n:function(i){return e.extend(t,i)},translate:function(e){return t[e]||e},_:function(e){return this.translate(e)},sprintf:function(t){var i=[].slice.call(arguments,1);return t.replace(/%[a-z]/g,function(){var t=i.shift();return"undefined"!==e.typeOf(t)?t:""})}}}),n("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(e,t){var i="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",n={mimes:{},extensions:{},addMimeType:function(e){var t,i,n,r=e.split(/,/);for(t=0;t<r.length;t+=2){for(n=r[t+1].split(/ /),i=0;i<n.length;i++)this.mimes[n[i]]=r[t];this.extensions[r[t]]=n}},extList2mimes:function(t,i){var n,r,o,a,s=this,l=[];for(r=0;r<t.length;r++)for(n=t[r].extensions.toLowerCase().split(/\s*,\s*/),o=0;o<n.length;o++){if("*"===n[o])return[];if(a=s.mimes[n[o]],i&&/^\w+$/.test(n[o]))l.push("."+n[o]);else if(a&&-1===e.inArray(a,l))l.push(a);else if(!a)return[]}return l},mimes2exts:function(t){var i=this,n=[];return e.each(t,function(t){if(t=t.toLowerCase(),"*"===t)return n=[],!1;var r=t.match(/^(\w+)\/(\*|\w+)$/);r&&("*"===r[2]?e.each(i.extensions,function(e,t){new RegExp("^"+r[1]+"/").test(t)&&[].push.apply(n,i.extensions[t])}):i.extensions[t]&&[].push.apply(n,i.extensions[t]))}),n},mimes2extList:function(i){var n=[],r=[];return"string"===e.typeOf(i)&&(i=e.trim(i).split(/\s*,\s*/)),r=this.mimes2exts(i),n.push({title:t.translate("Files"),extensions:r.length?r.join(","):"*"}),n.mimes=i,n},getFileExtension:function(e){var t=e&&e.match(/\.([^.]+)$/);return t?t[1].toLowerCase():""},getFileMime:function(e){return this.mimes[this.getFileExtension(e)]||""}};return n.addMimeType(i),n}),n("moxie/file/FileInput",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Mime","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/I18n","moxie/runtime/Runtime","moxie/runtime/RuntimeClient"],function(e,t,i,n,r,o,a,s,l){function d(t){var o,d,u;if(-1!==e.inArray(e.typeOf(t),["string","node"])&&(t={browse_button:t}),d=n.get(t.browse_button),!d)throw new r.DOMException(r.DOMException.NOT_FOUND_ERR);u={accept:[{title:a.translate("All Files"),extensions:"*"}],multiple:!1,required_caps:!1,container:d.parentNode||document.body},t=e.extend({},u,t),"string"==typeof t.required_caps&&(t.required_caps=s.parseCaps(t.required_caps)),"string"==typeof t.accept&&(t.accept=i.mimes2extList(t.accept)),o=n.get(t.container),o||(o=document.body),"static"===n.getStyle(o,"position")&&(o.style.position="relative"),o=d=null,l.call(this),e.extend(this,{uid:e.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){var i=this;i.bind("RuntimeInit",function(r,o){i.ruid=o.uid,i.shimid=o.shimid,i.bind("Ready",function(){i.trigger("Refresh")},999),i.bind("Refresh",function(){var i,r,a,s,l;a=n.get(t.browse_button),s=n.get(o.shimid),a&&(i=n.getPos(a,n.get(t.container)),r=n.getSize(a),l=parseInt(n.getStyle(a,"z-index"),10)||0,s&&e.extend(s.style,{top:i.y+"px",left:i.x+"px",width:r.w+"px",height:r.h+"px",zIndex:l+1})),s=a=null}),o.exec.call(i,"FileInput","init",t)}),i.connectRuntime(e.extend({},t,{required_caps:{select_file:!0}}))},getOption:function(e){return t[e]},setOption:function(e,n){if(t.hasOwnProperty(e)){var o=t[e];switch(e){case"accept":"string"==typeof n&&(n=i.mimes2extList(n));break;case"container":case"required_caps":throw new r.FileException(r.FileException.NO_MODIFICATION_ALLOWED_ERR)}t[e]=n,this.exec("FileInput","setOption",e,n),this.trigger("OptionChanged",e,n,o)}},disable:function(t){var i=this.getRuntime();i&&this.exec("FileInput","disable","undefined"===e.typeOf(t)?!0:t)},refresh:function(){this.trigger("Refresh")},destroy:function(){var t=this.getRuntime();t&&(t.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===e.typeOf(this.files)&&e.each(this.files,function(e){e.destroy()}),this.files=null,this.unbindAll()}}),this.handleEventProps(c)}var c=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return d.prototype=o.instance,d}),n("moxie/file/File",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/Blob"],function(e,t,i){function n(n,r){r||(r={}),i.apply(this,arguments),this.type||(this.type=t.getFileMime(r.name));var o;if(r.name)o=r.name.replace(/\\/g,"/"),o=o.substr(o.lastIndexOf("/")+1);else if(this.type){var a=this.type.split("/")[0];o=e.guid((""!==a?a:"file")+"_"),t.extensions[this.type]&&(o+="."+t.extensions[this.type][0])}e.extend(this,{name:o||e.guid("file_"),relativePath:"",lastModifiedDate:r.lastModifiedDate||(new Date).toLocaleString()})}return n.prototype=i.prototype,n}),n("moxie/file/FileDrop",["moxie/core/I18n","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/core/utils/Env","moxie/file/File","moxie/runtime/RuntimeClient","moxie/core/EventTarget","moxie/core/utils/Mime"],function(e,t,i,n,r,o,a,s,l){function d(i){var r,o=this;"string"==typeof i&&(i={drop_zone:i}),r={accept:[{title:e.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},i="object"==typeof i?n.extend({},r,i):r,i.container=t.get(i.drop_zone)||document.body,"static"===t.getStyle(i.container,"position")&&(i.container.style.position="relative"),"string"==typeof i.accept&&(i.accept=l.mimes2extList(i.accept)),a.call(o),n.extend(o,{uid:n.guid("uid_"),ruid:null,files:null,init:function(){o.bind("RuntimeInit",function(e,t){o.ruid=t.uid,t.exec.call(o,"FileDrop","init",i),o.dispatchEvent("ready")}),o.connectRuntime(i)},destroy:function(){var e=this.getRuntime();e&&(e.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null,this.unbindAll()}}),this.handleEventProps(c)}var c=["ready","dragenter","dragleave","drop","error"];return d.prototype=s.instance,d}),n("moxie/file/FileReader",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/Exceptions","moxie/core/EventTarget","moxie/file/Blob","moxie/runtime/RuntimeClient"],function(e,t,i,n,r,o){function a(){function n(e,n){if(this.trigger("loadstart"),this.readyState===a.LOADING)return this.trigger("error",new i.DOMException(i.DOMException.INVALID_STATE_ERR)),this.trigger("loadend"),void 0;if(!(n instanceof r))return this.trigger("error",new i.DOMException(i.DOMException.NOT_FOUND_ERR)),this.trigger("loadend"),void 0;if(this.result=null,this.readyState=a.LOADING,n.isDetached()){var o=n.getSource();switch(e){case"readAsText":case"readAsBinaryString":this.result=o;break;case"readAsDataURL":this.result="data:"+n.type+";base64,"+t.btoa(o)}this.readyState=a.DONE,this.trigger("load"),this.trigger("loadend")}else this.connectRuntime(n.ruid),this.exec("FileReader","read",e,n)}o.call(this),e.extend(this,{uid:e.guid("uid_"),readyState:a.EMPTY,result:null,error:null,readAsBinaryString:function(e){n.call(this,"readAsBinaryString",e)},readAsDataURL:function(e){n.call(this,"readAsDataURL",e)},readAsText:function(e){n.call(this,"readAsText",e)},abort:function(){this.result=null,-1===e.inArray(this.readyState,[a.EMPTY,a.DONE])&&(this.readyState===a.LOADING&&(this.readyState=a.DONE),this.exec("FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),this.exec("FileReader","destroy"),this.disconnectRuntime(),this.unbindAll()}}),this.handleEventProps(s),this.bind("Error",function(e,t){this.readyState=a.DONE,this.error=t},999),this.bind("Load",function(){this.readyState=a.DONE},999)}var s=["loadstart","progress","load","abort","error","loadend"];return a.EMPTY=0,a.LOADING=1,a.DONE=2,a.prototype=n.instance,a}),n("moxie/core/utils/Url",["moxie/core/utils/Basic"],function(e){var t=function(i,n){var r,o=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],a=o.length,s={http:80,https:443},l={},d=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@\/]*):?([^:@\/]*))?@)?(\[[\da-fA-F:]+\]|[^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,c=d.exec(i||""),u=/^\/\/\w/.test(i);switch(e.typeOf(n)){case"undefined":n=t(document.location.href,!1);break;case"string":n=t(n,!1)}for(;a--;)c[a]&&(l[o[a]]=c[a]);if(r=!u&&!l.scheme,(u||r)&&(l.scheme=n.scheme),r){l.host=n.host,l.port=n.port;var f="";/^[^\/]/.test(l.path)&&(f=n.path,f=/\/[^\/]*\.[^\/]*$/.test(f)?f.replace(/\/[^\/]+$/,"/"):f.replace(/\/?$/,"/")),l.path=f+(l.path||"")}return l.port||(l.port=s[l.scheme]||80),l.port=parseInt(l.port,10),l.path||(l.path="/"),delete l.source,l},i=function(e){var i={http:80,https:443},n="object"==typeof e?e:t(e);return n.scheme+"://"+n.host+(n.port!==i[n.scheme]?":"+n.port:"")+n.path+(n.query?n.query:"")},n=function(e){function i(e){return[e.scheme,e.host,e.port].join("/")}return"string"==typeof e&&(e=t(e)),i(t())===i(e)};return{parseUrl:t,resolveUrl:i,hasSameOrigin:n}}),n("moxie/runtime/RuntimeTarget",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(e,t,i){function n(){this.uid=e.guid("uid_"),t.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return n.prototype=i.instance,n}),n("moxie/file/FileReaderSync",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/utils/Encode"],function(e,t,i){return function(){function n(e,t){if(!t.isDetached()){var n=this.connectRuntime(t.ruid).exec.call(this,"FileReaderSync","read",e,t);return this.disconnectRuntime(),n}var r=t.getSource();switch(e){case"readAsBinaryString":return r;case"readAsDataURL":return"data:"+t.type+";base64,"+i.btoa(r);case"readAsText":for(var o="",a=0,s=r.length;s>a;a++)o+=String.fromCharCode(r[a]);return o}}t.call(this),e.extend(this,{uid:e.guid("uid_"),readAsBinaryString:function(e){return n.call(this,"readAsBinaryString",e)},readAsDataURL:function(e){return n.call(this,"readAsDataURL",e)},readAsText:function(e){return n.call(this,"readAsText",e)}})}}),n("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(e,t,i){function n(){var e,n=[];t.extend(this,{append:function(r,o){var a=this,s=t.typeOf(o);o instanceof i?e={name:r,value:o}:"array"===s?(r+="[]",t.each(o,function(e){a.append(r,e)})):"object"===s?t.each(o,function(e,t){a.append(r+"["+t+"]",e)}):"null"===s||"undefined"===s||"number"===s&&isNaN(o)?a.append(r,"false"):n.push({name:r,value:o.toString()})},hasBlob:function(){return!!this.getBlob()},getBlob:function(){return e&&e.value||null},getBlobName:function(){return e&&e.name||null},each:function(i){t.each(n,function(e){i(e.value,e.name)}),e&&i(e.value,e.name)},destroy:function(){e=null,n=[]}})}return n}),n("moxie/xhr/XMLHttpRequest",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/core/utils/Url","moxie/runtime/Runtime","moxie/runtime/RuntimeTarget","moxie/file/Blob","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/core/utils/Env","moxie/core/utils/Mime"],function(e,t,i,n,r,o,a,s,l,d,c,u){function f(){this.uid=e.guid("uid_")}function h(){function i(e,t){return S.hasOwnProperty(e)?1===arguments.length?c.can("define_property")?S[e]:E[e]:(c.can("define_property")?S[e]=t:E[e]=t,void 0):void 0}function l(t){function n(){_&&(_.destroy(),_=null),s.dispatchEvent("loadend"),s=null}function r(r){_.bind("LoadStart",function(e){i("readyState",h.LOADING),s.dispatchEvent("readystatechange"),s.dispatchEvent(e),D&&s.upload.dispatchEvent(e)}),_.bind("Progress",function(e){i("readyState")!==h.LOADING&&(i("readyState",h.LOADING),s.dispatchEvent("readystatechange")),s.dispatchEvent(e)}),_.bind("UploadProgress",function(e){D&&s.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:e.total,loaded:e.loaded})}),_.bind("Load",function(t){i("readyState",h.DONE),i("status",Number(r.exec.call(_,"XMLHttpRequest","getStatus")||0)),i("statusText",p[i("status")]||""),i("response",r.exec.call(_,"XMLHttpRequest","getResponse",i("responseType"))),~e.inArray(i("responseType"),["text",""])?i("responseText",i("response")):"document"===i("responseType")&&i("responseXML",i("response")),H=r.exec.call(_,"XMLHttpRequest","getAllResponseHeaders"),s.dispatchEvent("readystatechange"),i("status")>0?(D&&s.upload.dispatchEvent(t),s.dispatchEvent(t)):(L=!0,s.dispatchEvent("error")),n()}),_.bind("Abort",function(e){s.dispatchEvent(e),n()}),_.bind("Error",function(e){L=!0,i("readyState",h.DONE),s.dispatchEvent("readystatechange"),O=!0,s.dispatchEvent(e),n()}),r.exec.call(_,"XMLHttpRequest","send",{url:v,method:y,async:k,user:b,password:w,headers:N,mimeType:R,encoding:U,responseType:s.responseType,withCredentials:s.withCredentials,options:F},t)}var s=this;x=(new Date).getTime(),_=new a,"string"==typeof F.required_caps&&(F.required_caps=o.parseCaps(F.required_caps)),F.required_caps=e.extend({},F.required_caps,{return_response_type:s.responseType}),t instanceof d&&(F.required_caps.send_multipart=!0),e.isEmptyObj(N)||(F.required_caps.send_custom_headers=!0),B||(F.required_caps.do_cors=!0),F.ruid?r(_.connectRuntime(F)):(_.bind("RuntimeInit",function(e,t){r(t)}),_.bind("RuntimeError",function(e,t){s.dispatchEvent("RuntimeError",t)}),_.connectRuntime(F))}function g(){i("responseText",""),i("responseXML",null),i("response",null),i("status",0),i("statusText",""),x=C=null}var v,y,b,w,x,C,_,T,E=this,S={timeout:0,readyState:h.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},k=!0,N={},U=null,R=null,A=!1,I=!1,D=!1,O=!1,L=!1,B=!1,M=null,P=null,F={},H="";e.extend(this,S,{uid:e.guid("uid_"),upload:new f,open:function(o,a,s,l,d){var c;if(!o||!a)throw new t.DOMException(t.DOMException.SYNTAX_ERR);if(/[\u0100-\uffff]/.test(o)||n.utf8_encode(o)!==o)throw new t.DOMException(t.DOMException.SYNTAX_ERR);if(~e.inArray(o.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(y=o.toUpperCase()),~e.inArray(y,["CONNECT","TRACE","TRACK"]))throw new t.DOMException(t.DOMException.SECURITY_ERR);if(a=n.utf8_encode(a),c=r.parseUrl(a),B=r.hasSameOrigin(c),v=r.resolveUrl(a),(l||d)&&!B)throw new t.DOMException(t.DOMException.INVALID_ACCESS_ERR);if(b=l||c.user,w=d||c.pass,k=s||!0,k===!1&&(i("timeout")||i("withCredentials")||""!==i("responseType")))throw new t.DOMException(t.DOMException.INVALID_ACCESS_ERR);A=!k,I=!1,N={},g.call(this),i("readyState",h.OPENED),this.dispatchEvent("readystatechange")},setRequestHeader:function(r,o){var a=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(i("readyState")!==h.OPENED||I)throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(r)||n.utf8_encode(r)!==r)throw new t.DOMException(t.DOMException.SYNTAX_ERR);return r=e.trim(r).toLowerCase(),~e.inArray(r,a)||/^(proxy\-|sec\-)/.test(r)?!1:(N[r]?N[r]+=", "+o:N[r]=o,!0)},hasRequestHeader:function(e){return e&&N[e.toLowerCase()]||!1},getAllResponseHeaders:function(){return H||""},getResponseHeader:function(t){return t=t.toLowerCase(),L||~e.inArray(t,["set-cookie","set-cookie2"])?null:H&&""!==H&&(T||(T={},e.each(H.split(/\r\n/),function(t){var i=t.split(/:\s+/);2===i.length&&(i[0]=e.trim(i[0]),T[i[0].toLowerCase()]={header:i[0],value:e.trim(i[1])})})),T.hasOwnProperty(t))?T[t].header+": "+T[t].value:null},overrideMimeType:function(n){var r,o;if(~e.inArray(i("readyState"),[h.LOADING,h.DONE]))throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);if(n=e.trim(n.toLowerCase()),/;/.test(n)&&(r=n.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(n=r[1],r[2]&&(o=r[2])),!u.mimes[n])throw new t.DOMException(t.DOMException.SYNTAX_ERR);M=n,P=o},send:function(i,r){if(F="string"===e.typeOf(r)?{ruid:r}:r?r:{},this.readyState!==h.OPENED||I)throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);if(i instanceof s)F.ruid=i.ruid,R=i.type||"application/octet-stream";else if(i instanceof d){if(i.hasBlob()){var o=i.getBlob();F.ruid=o.ruid,R=o.type||"application/octet-stream"}}else"string"==typeof i&&(U="UTF-8",R="text/plain;charset=UTF-8",i=n.utf8_encode(i));this.withCredentials||(this.withCredentials=F.required_caps&&F.required_caps.send_browser_cookies&&!B),D=!A&&this.upload.hasEventListener(),L=!1,O=!i,A||(I=!0),l.call(this,i)},abort:function(){if(L=!0,A=!1,~e.inArray(i("readyState"),[h.UNSENT,h.OPENED,h.DONE]))i("readyState",h.UNSENT);else{if(i("readyState",h.DONE),I=!1,!_)throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);_.getRuntime().exec.call(_,"XMLHttpRequest","abort",O),O=!0}},destroy:function(){_&&("function"===e.typeOf(_.destroy)&&_.destroy(),_=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}}),this.handleEventProps(m.concat(["readystatechange"])),this.upload.handleEventProps(m)}var p={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};f.prototype=i.instance;var m=["loadstart","progress","abort","error","load","timeout","loadend"];return h.UNSENT=0,h.OPENED=1,h.HEADERS_RECEIVED=2,h.LOADING=3,h.DONE=4,h.prototype=i.instance,h}),n("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(e,t,i,n){function r(){function n(){c=u=0,d=this.result=null}function o(t,i){var n=this;l=i,n.bind("TransportingProgress",function(t){u=t.loaded,c>u&&-1===e.inArray(n.state,[r.IDLE,r.DONE])&&a.call(n)},999),n.bind("TransportingComplete",function(){u=c,n.state=r.DONE,d=null,n.result=l.exec.call(n,"Transporter","getAsBlob",t||"")},999),n.state=r.BUSY,n.trigger("TransportingStarted"),a.call(n)}function a(){var e,i=this,n=c-u;f>n&&(f=n),e=t.btoa(d.substr(u,f)),l.exec.call(i,"Transporter","receive",e,c)}var s,l,d,c,u,f;i.call(this),e.extend(this,{uid:e.guid("uid_"),state:r.IDLE,result:null,transport:function(t,i,r){var a=this;if(r=e.extend({chunk_size:204798},r),(s=r.chunk_size%3)&&(r.chunk_size+=3-s),f=r.chunk_size,n.call(this),d=t,c=t.length,"string"===e.typeOf(r)||r.ruid)o.call(a,i,this.connectRuntime(r));else{var l=function(e,t){a.unbind("RuntimeInit",l),o.call(a,i,t)};this.bind("RuntimeInit",l),this.connectRuntime(r)}},abort:function(){var e=this;e.state=r.IDLE,l&&(l.exec.call(e,"Transporter","clear"),e.trigger("TransportingAborted")),n.call(e)},destroy:function(){this.unbindAll(),l=null,this.disconnectRuntime(),n.call(this)}})}return r.IDLE=0,r.BUSY=1,r.DONE=2,r.prototype=n.instance,r}),n("moxie/image/Image",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/file/FileReaderSync","moxie/xhr/XMLHttpRequest","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/runtime/Transporter","moxie/core/utils/Env","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/core/utils/Encode"],function(e,t,i,n,r,o,a,s,l,d,c,u,f){function h(){function n(e){try{return e||(e=this.exec("Image","getInfo")),this.size=e.size,this.width=e.width,this.height=e.height,this.type=e.type,this.meta=e.meta,""===this.name&&(this.name=e.name),!0}catch(e){return this.trigger("error",e.code),!1}}function d(t){var n=e.typeOf(t);try{if(t instanceof h){if(!t.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);m.apply(this,arguments)}else if(t instanceof c){if(!~e.inArray(t.type,["image/jpeg","image/png"]))throw new i.ImageError(i.ImageError.WRONG_FORMAT);g.apply(this,arguments)}else if(-1!==e.inArray(n,["blob","file"]))d.call(this,new u(null,t),arguments[1]);else if("string"===n)"data:"===t.substr(0,5)?d.call(this,new c(null,{data:t}),arguments[1]):v.apply(this,arguments);else{if("node"!==n||"img"!==t.nodeName.toLowerCase())throw new i.DOMException(i.DOMException.TYPE_MISMATCH_ERR);d.call(this,t.src,arguments[1])}}catch(e){this.trigger("error",e.code)}}function m(t,i){var n=this.connectRuntime(t.ruid);this.ruid=n.uid,n.exec.call(this,"Image","loadFromImage",t,"undefined"===e.typeOf(i)?!0:i)}function g(t,i){function n(e){r.ruid=e.uid,e.exec.call(r,"Image","loadFromBlob",t)}var r=this;r.name=t.name||"",t.isDetached()?(this.bind("RuntimeInit",function(e,t){n(t)}),i&&"string"==typeof i.required_caps&&(i.required_caps=o.parseCaps(i.required_caps)),this.connectRuntime(e.extend({required_caps:{access_image_binary:!0,resize_image:!0}},i))):n(this.connectRuntime(t.ruid))}function v(e,t){var i,n=this;i=new r,i.open("get",e),i.responseType="blob",i.onprogress=function(e){n.trigger(e)},i.onload=function(){g.call(n,i.response,!0)},i.onerror=function(e){n.trigger(e)},i.onloadend=function(){i.destroy()},i.bind("RuntimeError",function(e,t){n.trigger("RuntimeError",t)}),i.send(null,t)}a.call(this),e.extend(this,{uid:e.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){d.apply(this,arguments)},resize:function(t){var n,r,o=this,a={x:0,y:0,width:o.width,height:o.height},s=e.extendIf({width:o.width,height:o.height,type:o.type||"image/jpeg",quality:90,crop:!1,fit:!0,preserveHeaders:!0,resample:"default",multipass:!0},t);try{if(!o.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);if(o.width>h.MAX_RESIZE_WIDTH||o.height>h.MAX_RESIZE_HEIGHT)throw new i.ImageError(i.ImageError.MAX_RESOLUTION_ERR);if(n=o.meta&&o.meta.tiff&&o.meta.tiff.Orientation||1,-1!==e.inArray(n,[5,6,7,8])){var l=s.width;s.width=s.height,s.height=l}if(s.crop){switch(r=Math.max(s.width/o.width,s.height/o.height),t.fit?(a.width=Math.min(Math.ceil(s.width/r),o.width),a.height=Math.min(Math.ceil(s.height/r),o.height),r=s.width/a.width):(a.width=Math.min(s.width,o.width),a.height=Math.min(s.height,o.height),r=1),"boolean"==typeof s.crop&&(s.crop="cc"),s.crop.toLowerCase().replace(/_/,"-")){case"rb":case"right-bottom":a.x=o.width-a.width,a.y=o.height-a.height;break;case"cb":case"center-bottom":a.x=Math.floor((o.width-a.width)/2),a.y=o.height-a.height;break;case"lb":case"left-bottom":a.x=0,a.y=o.height-a.height;break;case"lt":case"left-top":a.x=0,a.y=0;break;case"ct":case"center-top":a.x=Math.floor((o.width-a.width)/2),a.y=0;break;case"rt":case"right-top":a.x=o.width-a.width,a.y=0;break;case"rc":case"right-center":case"right-middle":a.x=o.width-a.width,a.y=Math.floor((o.height-a.height)/2);break;case"lc":case"left-center":case"left-middle":a.x=0,a.y=Math.floor((o.height-a.height)/2);break;case"cc":case"center-center":case"center-middle":default:a.x=Math.floor((o.width-a.width)/2),a.y=Math.floor((o.height-a.height)/2)}a.x=Math.max(a.x,0),a.y=Math.max(a.y,0)}else r=Math.min(s.width/o.width,s.height/o.height);this.exec("Image","resize",a,r,s)}catch(e){o.trigger("error",e.code)}},downsize:function(t){var i,n={width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,crop:!1,preserveHeaders:!0,resample:"default"};i="object"==typeof t?e.extend(n,t):e.extend(n,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]}),this.resize(i)},crop:function(e,t,i){this.downsize(e,t,!0,i)},getAsCanvas:function(){if(!l.can("create_canvas"))throw new i.RuntimeError(i.RuntimeError.NOT_SUPPORTED_ERR);return this.exec("Image","getAsCanvas")},getAsBlob:function(e,t){if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsBlob",e||"image/jpeg",t||90)},getAsDataURL:function(e,t){if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsDataURL",e||"image/jpeg",t||90)},getAsBinaryString:function(e,t){var i=this.getAsDataURL(e,t);return f.atob(i.substring(i.indexOf("base64,")+7))},embed:function(n,r){function o(t,r){var o=this;if(l.can("create_canvas")){var c=o.getAsCanvas();if(c)return n.appendChild(c),c=null,o.destroy(),d.trigger("embedded"),void 0}var u=o.getAsDataURL(t,r);if(!u)throw new i.ImageError(i.ImageError.WRONG_FORMAT);if(l.can("use_data_uri_of",u.length))n.innerHTML='<img src="'+u+'" width="'+o.width+'" height="'+o.height+'" />',o.destroy(),d.trigger("embedded");else{var h=new s;h.bind("TransportingComplete",function(){a=d.connectRuntime(this.result.ruid),d.bind("Embedded",function(){e.extend(a.getShimContainer().style,{top:"0px",left:"0px",width:o.width+"px",height:o.height+"px"}),a=null},999),a.exec.call(d,"ImageView","display",this.result.uid,width,height),o.destroy()}),h.transport(f.atob(u.substring(u.indexOf("base64,")+7)),t,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:n})}}var a,d=this,c=e.extend({width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90},r);try{if(!(n=t.get(n)))throw new i.DOMException(i.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);this.width>h.MAX_RESIZE_WIDTH||this.height>h.MAX_RESIZE_HEIGHT;var u=new h;return u.bind("Resize",function(){o.call(this,c.type,c.quality)}),u.bind("Load",function(){this.downsize(c)}),this.meta.thumb&&this.meta.thumb.width>=c.width&&this.meta.thumb.height>=c.height?u.load(this.meta.thumb.data):u.clone(this,!1),u}catch(e){this.trigger("error",e.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.meta&&this.meta.thumb&&this.meta.thumb.data.destroy(),this.unbindAll()}}),this.handleEventProps(p),this.bind("Load Resize",function(){return n.call(this)},999)}var p=["progress","load","error","resize","embedded"];return h.MAX_RESIZE_WIDTH=8192,h.MAX_RESIZE_HEIGHT=8192,h.prototype=d.instance,h}),n("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(e,t,i,n){function o(t){var o=this,l=i.capTest,d=i.capTrue,c=e.extend({access_binary:l(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return o.can("access_binary")&&!!s.Image},display_media:l((n.can("create_canvas")||n.can("use_data_uri_over32kb"))&&r("moxie/image/Image")),do_cors:l(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:l(function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&("IE"!==n.browser||n.verComp(n.version,9,">"))}()),filter_by_extension:l(function(){return!("Chrome"===n.browser&&n.verComp(n.version,28,"<")||"IE"===n.browser&&n.verComp(n.version,10,"<")||"Safari"===n.browser&&n.verComp(n.version,7,"<")||"Firefox"===n.browser&&n.verComp(n.version,37,"<"))}()),return_response_headers:d,return_response_type:function(e){return"json"===e&&window.JSON?!0:n.can("return_response_type",e)},return_status_code:d,report_upload_progress:l(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return o.can("access_binary")&&n.can("create_canvas")},select_file:function(){return n.can("use_fileinput")&&window.File},select_folder:function(){return o.can("select_file")&&("Chrome"===n.browser&&n.verComp(n.version,21,">=")||"Firefox"===n.browser&&n.verComp(n.version,42,">="))},select_multiple:function(){return!(!o.can("select_file")||"Safari"===n.browser&&"Windows"===n.os||"iOS"===n.os&&n.verComp(n.osVersion,"7.0.0",">")&&n.verComp(n.osVersion,"8.0.0","<"))},send_binary_string:l(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:l(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||o.can("send_binary_string")},slice_blob:l(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return o.can("slice_blob")&&o.can("send_multipart")},summon_file_dialog:function(){return o.can("select_file")&&("Firefox"===n.browser&&n.verComp(n.version,4,">=")||"Opera"===n.browser&&n.verComp(n.version,12,">=")||"IE"===n.browser&&n.verComp(n.version,10,">=")||!!~e.inArray(n.browser,["Chrome","Safari","Edge"]))},upload_filesize:d,use_http_method:d},arguments[2]);i.call(this,t,arguments[1]||a,c),e.extend(this,{init:function(){this.trigger("Init")},destroy:function(e){return function(){e.call(o),e=o=null}}(this.destroy)}),e.extend(this.getShim(),s)}var a="html5",s={};return i.addConstructor(a,o),s}),n("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime","moxie/file/Blob"],function(e,t){function i(){function e(e,t,i){var n;if(!window.File.prototype.slice)return(n=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?n.call(e,t,i):null;try{return e.slice(),e.slice(t,i)}catch(n){return e.slice(t,i-t)}}this.slice=function(){return new t(this.getRuntime().uid,e.apply(this,arguments))}}return e.Blob=i}),n("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(e){function t(){this.returnValue=!1}function i(){this.cancelBubble=!0}var n={},r="moxie_"+e.guid(),o=function(o,a,s,l){var d,c;a=a.toLowerCase(),o.addEventListener?(d=s,o.addEventListener(a,d,!1)):o.attachEvent&&(d=function(){var e=window.event;e.target||(e.target=e.srcElement),e.preventDefault=t,e.stopPropagation=i,s(e)},o.attachEvent("on"+a,d)),o[r]||(o[r]=e.guid()),n.hasOwnProperty(o[r])||(n[o[r]]={}),c=n[o[r]],c.hasOwnProperty(a)||(c[a]=[]),c[a].push({func:d,orig:s,key:l})},a=function(t,i,o){var a,s;if(i=i.toLowerCase(),t[r]&&n[t[r]]&&n[t[r]][i]){a=n[t[r]][i];for(var l=a.length-1;l>=0&&(a[l].orig!==o&&a[l].key!==o||(t.removeEventListener?t.removeEventListener(i,a[l].func,!1):t.detachEvent&&t.detachEvent("on"+i,a[l].func),a[l].orig=null,a[l].func=null,a.splice(l,1),o===s));l--);if(a.length||delete n[t[r]][i],e.isEmptyObj(n[t[r]])){delete n[t[r]];try{delete t[r]}catch(e){t[r]=s}}}},s=function(t,i){t&&t[r]&&e.each(n[t[r]],function(e,n){a(t,n,i)})};return{addEvent:o,removeEvent:a,removeAllEvents:s}}),n("moxie/runtime/html5/file/FileInput",["moxie/runtime/html5/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(e,t,i,n,r,o,a){function s(){var e,s;i.extend(this,{init:function(l){var d,c,u,f,h,p,m=this,g=m.getRuntime();e=l,u=e.accept.mimes||o.extList2mimes(e.accept,g.can("filter_by_extension")),c=g.getShimContainer(),c.innerHTML='<input id="'+g.uid+'" type="file" style="font-size:999px;opacity:0;"'+(e.multiple&&g.can("select_multiple")?"multiple":"")+(e.directory&&g.can("select_folder")?"webkitdirectory directory":"")+(u?' accept="'+u.join(",")+'"':"")+" />",d=n.get(g.uid),i.extend(d.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),f=n.get(e.browse_button),s=n.getStyle(f,"z-index")||"auto",g.can("summon_file_dialog")&&("static"===n.getStyle(f,"position")&&(f.style.position="relative"),r.addEvent(f,"click",function(e){var t=n.get(g.uid);t&&!t.disabled&&t.click(),e.preventDefault()},m.uid),m.bind("Refresh",function(){h=parseInt(s,10)||1,n.get(e.browse_button).style.zIndex=h,this.getRuntime().getShimContainer().style.zIndex=h-1})),p=g.can("summon_file_dialog")?f:c,r.addEvent(p,"mouseover",function(){m.trigger("mouseenter")},m.uid),r.addEvent(p,"mouseout",function(){m.trigger("mouseleave")},m.uid),r.addEvent(p,"mousedown",function(){m.trigger("mousedown")},m.uid),r.addEvent(n.get(e.container),"mouseup",function(){m.trigger("mouseup")},m.uid),d.onchange=function n(){if(m.files=[],i.each(this.files,function(i){var n="";return e.directory&&"."==i.name?!0:(i.webkitRelativePath&&(n="/"+i.webkitRelativePath.replace(/^\//,"")),i=new t(g.uid,i),i.relativePath=n,m.files.push(i),void 0)}),"IE"!==a.browser&&"IEMobile"!==a.browser)this.value="";else{var r=this.cloneNode(!0);this.parentNode.replaceChild(r,this),r.onchange=n}m.files.length&&m.trigger("change")},m.trigger({type:"ready",async:!0}),c=null},setOption:function(e,t){var i=this.getRuntime(),r=n.get(i.uid);switch(e){case"accept":if(t){var a=t.mimes||o.extList2mimes(t,i.can("filter_by_extension"));r.setAttribute("accept",a.join(","))}else r.removeAttribute("accept");break;case"directory":t&&i.can("select_folder")?(r.setAttribute("directory",""),r.setAttribute("webkitdirectory","")):(r.removeAttribute("directory"),r.removeAttribute("webkitdirectory"));break;case"multiple":t&&i.can("select_multiple")?r.setAttribute("multiple",""):r.removeAttribute("multiple")}},disable:function(e){var t,i=this.getRuntime();(t=n.get(i.uid))&&(t.disabled=!!e)},destroy:function(){var t=this.getRuntime(),i=t.getShim(),o=t.getShimContainer(),a=e&&n.get(e.container),l=e&&n.get(e.browse_button);a&&r.removeAllEvents(a,this.uid),l&&(r.removeAllEvents(l,this.uid),l.style.zIndex=s),o&&(r.removeAllEvents(o,this.uid),o.innerHTML=""),i.removeInstance(this.uid),e=o=a=l=i=null}})}return e.FileInput=s}),n("moxie/runtime/html5/file/FileDrop",["moxie/runtime/html5/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime"],function(e,t,i,n,r,o){function a(){function e(e){if(!e.dataTransfer||!e.dataTransfer.types)return!1;var t=i.toArray(e.dataTransfer.types||[]);return-1!==i.inArray("Files",t)||-1!==i.inArray("public.file-url",t)||-1!==i.inArray("application/x-moz-file",t)}function a(e,i){if(l(e)){var n=new t(p,e);n.relativePath=i||"",m.push(n)}}function s(e){for(var t=[],n=0;n<e.length;n++)[].push.apply(t,e[n].extensions.split(/\s*,\s*/));return-1===i.inArray("*",t)?t:[]}function l(e){if(!g.length)return!0;var t=o.getFileExtension(e.name);return!t||-1!==i.inArray(t,g)}function d(e,t){var n=[];i.each(e,function(e){var t=e.webkitGetAsEntry();t&&(t.isFile?a(e.getAsFile(),t.fullPath):n.push(t))}),n.length?c(n,t):t()}function c(e,t){var n=[];i.each(e,function(e){n.push(function(t){u(e,t)})}),i.inSeries(n,function(){t()})}function u(e,t){e.isFile?e.file(function(i){a(i,e.fullPath),t()},function(){t()}):e.isDirectory?f(e,t):t()}function f(e,t){function i(e){r.readEntries(function(t){t.length?([].push.apply(n,t),i(e)):e()},e)}var n=[],r=e.createReader();i(function(){c(n,t)})}var h,p,m=[],g=[];i.extend(this,{init:function(t){var n,o=this;h=t,p=o.ruid,g=s(h.accept),n=h.container,r.addEvent(n,"dragover",function(t){e(t)&&(t.preventDefault(),t.dataTransfer.dropEffect="copy")},o.uid),r.addEvent(n,"drop",function(t){e(t)&&(t.preventDefault(),m=[],t.dataTransfer.items&&t.dataTransfer.items[0].webkitGetAsEntry?d(t.dataTransfer.items,function(){o.files=m,o.trigger("drop")}):(i.each(t.dataTransfer.files,function(e){a(e)}),o.files=m,o.trigger("drop")))},o.uid),r.addEvent(n,"dragenter",function(){o.trigger("dragenter")},o.uid),r.addEvent(n,"dragleave",function(){o.trigger("dragleave")},o.uid)},destroy:function(){r.removeAllEvents(h&&n.get(h.container),this.uid),p=m=g=h=null}})}return e.FileDrop=a}),n("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(e,t,i){function n(){function e(e){return t.atob(e.substring(e.indexOf("base64,")+7))}var n,r=!1;i.extend(this,{read:function(t,o){var a=this;a.result="",n=new window.FileReader,n.addEventListener("progress",function(e){a.trigger(e)}),n.addEventListener("load",function(t){a.result=r?e(n.result):n.result,a.trigger(t)}),n.addEventListener("error",function(e){a.trigger(e,n.error)}),n.addEventListener("loadend",function(e){n=null,a.trigger(e)}),"function"===i.typeOf(n[t])?(r=!1,n[t](o.getSource())):"readAsBinaryString"===t&&(r=!0,n.readAsDataURL(o.getSource()))},abort:function(){n&&n.abort()},destroy:function(){n=null}})}return e.FileReader=n}),n("moxie/runtime/html5/xhr/XMLHttpRequest",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Url","moxie/file/File","moxie/file/Blob","moxie/xhr/FormData","moxie/core/Exceptions","moxie/core/utils/Env"],function(e,t,i,n,r,o,a,s,l){function d(){function e(e,t){var i,n,r=this;i=t.getBlob().getSource(),n=new window.FileReader,n.onload=function(){t.append(t.getBlobName(),new o(null,{type:i.type,data:n.result})),p.send.call(r,e,t)},n.readAsBinaryString(i)}function d(){return!window.XMLHttpRequest||"IE"===l.browser&&l.verComp(l.version,8,"<")?function(){for(var e=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{return new ActiveXObject(e[t])}catch(e){}}():new window.XMLHttpRequest}function c(e){var t=e.responseXML,i=e.responseText;return"IE"===l.browser&&i&&t&&!t.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(e.getResponseHeader("Content-Type"))&&(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.validateOnParse=!1,t.loadXML(i)),t&&("IE"===l.browser&&0!==t.parseError||!t.documentElement||"parsererror"===t.documentElement.tagName)?null:t}function u(e){var t="----moxieboundary"+(new Date).getTime(),i="--",n="\r\n",r="",a=this.getRuntime();if(!a.can("send_binary_string"))throw new s.RuntimeError(s.RuntimeError.NOT_SUPPORTED_ERR);return f.setRequestHeader("Content-Type","multipart/form-data; boundary="+t),e.each(function(e,a){r+=e instanceof o?i+t+n+'Content-Disposition: form-data; name="'+a+'"; filename="'+unescape(encodeURIComponent(e.name||"blob"))+'"'+n+"Content-Type: "+(e.type||"application/octet-stream")+n+n+e.getSource()+n:i+t+n+'Content-Disposition: form-data; name="'+a+'"'+n+n+unescape(encodeURIComponent(e))+n}),r+=i+t+i+n}var f,h,p=this;t.extend(this,{send:function(i,r){var s=this,c="Mozilla"===l.browser&&l.verComp(l.version,4,">=")&&l.verComp(l.version,7,"<"),p="Android Browser"===l.browser,m=!1;if(h=i.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),f=d(),f.open(i.method,i.url,i.async,i.user,i.password),r instanceof o)r.isDetached()&&(m=!0),r=r.getSource();else if(r instanceof a){if(r.hasBlob())if(r.getBlob().isDetached())r=u.call(s,r),m=!0;else if((c||p)&&"blob"===t.typeOf(r.getBlob().getSource())&&window.FileReader)return e.call(s,i,r),void 0;if(r instanceof a){var g=new window.FormData;r.each(function(e,t){e instanceof o?g.append(t,e.getSource()):g.append(t,e)}),r=g}}f.upload?(i.withCredentials&&(f.withCredentials=!0),f.addEventListener("load",function(e){s.trigger(e)}),f.addEventListener("error",function(e){s.trigger(e)}),f.addEventListener("progress",function(e){s.trigger(e)}),f.upload.addEventListener("progress",function(e){s.trigger({type:"UploadProgress",loaded:e.loaded,total:e.total})})):f.onreadystatechange=function(){switch(f.readyState){case 1:break;case 2:break;case 3:var e,t;try{n.hasSameOrigin(i.url)&&(e=f.getResponseHeader("Content-Length")||0),f.responseText&&(t=f.responseText.length)}catch(i){e=t=0}s.trigger({type:"progress",lengthComputable:!!e,total:parseInt(e,10),loaded:t});break;case 4:f.onreadystatechange=function(){},0===f.status?s.trigger("error"):s.trigger("load")}},t.isEmptyObj(i.headers)||t.each(i.headers,function(e,t){f.setRequestHeader(t,e)}),""!==i.responseType&&"responseType"in f&&(f.responseType="json"!==i.responseType||l.can("return_response_type","json")?i.responseType:"text"),m?f.sendAsBinary?f.sendAsBinary(r):function(){for(var e=new Uint8Array(r.length),t=0;t<r.length;t++)e[t]=255&r.charCodeAt(t);f.send(e.buffer)}():f.send(r),s.trigger("loadstart")},getStatus:function(){try{if(f)return f.status}catch(e){}return 0},getResponse:function(e){var t=this.getRuntime();try{switch(e){case"blob":var n=new r(t.uid,f.response),o=f.getResponseHeader("Content-Disposition");if(o){var a=o.match(/filename=([\'\"'])([^\1]+)\1/);a&&(h=a[2])}return n.name=h,n.type||(n.type=i.getFileMime(h)),n;case"json":return l.can("return_response_type","json")?f.response:200===f.status&&window.JSON?JSON.parse(f.responseText):null;case"document":return c(f);default:return""!==f.responseText?f.responseText:null}}catch(e){return null}},getAllResponseHeaders:function(){try{return f.getAllResponseHeaders()}catch(e){}return""},abort:function(){f&&f.abort()},destroy:function(){p=h=null}})}return e.XMLHttpRequest=d}),n("moxie/runtime/html5/utils/BinaryReader",["moxie/core/utils/Basic"],function(e){function t(e){e instanceof ArrayBuffer?i.apply(this,arguments):n.apply(this,arguments)}function i(t){var i=new DataView(t);e.extend(this,{readByteAt:function(e){return i.getUint8(e)},writeByteAt:function(e,t){i.setUint8(e,t)},SEGMENT:function(e,n,r){switch(arguments.length){case 2:return t.slice(e,e+n);case 1:return t.slice(e);case 3:if(null===r&&(r=new ArrayBuffer),r instanceof ArrayBuffer){var o=new Uint8Array(this.length()-n+r.byteLength);e>0&&o.set(new Uint8Array(t.slice(0,e)),0),o.set(new Uint8Array(r),e),o.set(new Uint8Array(t.slice(e+n)),e+r.byteLength),this.clear(),t=o.buffer,i=new DataView(t);break}default:return t}},length:function(){return t?t.byteLength:0},clear:function(){i=t=null}})}function n(t){function i(e,i,n){n=3===arguments.length?n:t.length-i-1,t=t.substr(0,i)+e+t.substr(n+i)}e.extend(this,{readByteAt:function(e){return t.charCodeAt(e)},writeByteAt:function(e,t){i(String.fromCharCode(t),e,1)},SEGMENT:function(e,n,r){switch(arguments.length){case 1:return t.substr(e);case 2:return t.substr(e,n);case 3:i(null!==r?r:"",e,n);break;default:return t}},length:function(){return t?t.length:0},clear:function(){t=null}})}return e.extend(t.prototype,{littleEndian:!1,read:function(e,t){var i,n,r;if(e+t>this.length())throw new Error("You are trying to read outside the source boundaries.");for(n=this.littleEndian?0:-8*(t-1),r=0,i=0;t>r;r++)i|=this.readByteAt(e+r)<<Math.abs(n+8*r);return i},write:function(e,t,i){var n,r;if(e>this.length())throw new Error("You are trying to write outside the source boundaries.");for(n=this.littleEndian?0:-8*(i-1),r=0;i>r;r++)this.writeByteAt(e+r,255&t>>Math.abs(n+8*r))},BYTE:function(e){return this.read(e,1)},SHORT:function(e){return this.read(e,2)},LONG:function(e){return this.read(e,4)},SLONG:function(e){var t=this.read(e,4);return t>2147483647?t-4294967296:t},CHAR:function(e){return String.fromCharCode(this.read(e,1))},STRING:function(e,t){return this.asArray("CHAR",e,t).join("")},asArray:function(e,t,i){for(var n=[],r=0;i>r;r++)n[r]=this[e](t+r);return n}}),t}),n("moxie/runtime/html5/image/JPEGHeaders",["moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(e,t){return function i(n){var r,o,a,s=[],l=0;if(r=new e(n),65496!==r.SHORT(0))throw r.clear(),new t.ImageError(t.ImageError.WRONG_FORMAT);for(o=2;o<=r.length();)if(a=r.SHORT(o),a>=65488&&65495>=a)o+=2;else{if(65498===a||65497===a)break;l=r.SHORT(o+2)+2,a>=65505&&65519>=a&&s.push({hex:a,name:"APP"+(15&a),start:o,length:l,segment:r.SEGMENT(o,l)}),o+=l}return r.clear(),{headers:s,restore:function(t){var i,n,r;for(r=new e(t),o=65504==r.SHORT(2)?4+r.SHORT(4):2,n=0,i=s.length;i>n;n++)r.SEGMENT(o,0,s[n].segment),o+=s[n].length;return t=r.SEGMENT(),r.clear(),t},strip:function(t){var n,r,o,a;for(o=new i(t),r=o.headers,o.purge(),n=new e(t),a=r.length;a--;)n.SEGMENT(r[a].start,r[a].length,"");return t=n.SEGMENT(),n.clear(),t},get:function(e){for(var t=[],i=0,n=s.length;n>i;i++)s[i].name===e.toUpperCase()&&t.push(s[i].segment);return t},set:function(e,t){var i,n,r,o=[];for("string"==typeof t?o.push(t):o=t,i=n=0,r=s.length;r>i&&(s[i].name===e.toUpperCase()&&(s[i].segment=o[n],s[i].length=o[n].length,n++),!(n>=o.length));i++);},purge:function(){this.headers=s=[]}}}}),n("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(e,i,n){function r(o){function a(i,r){var o,a,s,l,d,f,h,p,m=this,g=[],v={},y={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},b={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(o=m.SHORT(i),a=0;o>a;a++)if(g=[],h=i+2+12*a,s=r[m.SHORT(h)],s!==t){if(l=y[m.SHORT(h+=2)],d=m.LONG(h+=2),f=b[l],!f)throw new n.ImageError(n.ImageError.INVALID_META_ERR);if(h+=4,f*d>4&&(h=m.LONG(h)+u.tiffHeader),h+f*d>=this.length())throw new n.ImageError(n.ImageError.INVALID_META_ERR);"ASCII"!==l?(g=m.asArray(l,h,d),p=1==d?g[0]:g,v[s]=c.hasOwnProperty(s)&&"object"!=typeof p?c[s][p]:p):v[s]=e.trim(m.STRING(h,d).replace(/\0$/,""))}return v}function s(e,t,i){var n,r,o,a=0;if("string"==typeof t){var s=d[e.toLowerCase()];for(var l in s)if(s[l]===t){t=l;break}}n=u[e.toLowerCase()+"IFD"],r=this.SHORT(n);for(var c=0;r>c;c++)if(o=n+12*c+2,this.SHORT(o)==t){a=o+8;break}if(!a)return!1;try{this.write(a,i,4)}catch(e){return!1}return!0}var l,d,c,u,f,h;if(i.call(this,o),d={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},c={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},u={tiffHeader:10},f=u.tiffHeader,l={clear:this.clear},e.extend(this,{read:function(){try{return r.prototype.read.apply(this,arguments)}catch(e){throw new n.ImageError(n.ImageError.INVALID_META_ERR)}},write:function(){try{return r.prototype.write.apply(this,arguments)}catch(e){throw new n.ImageError(n.ImageError.INVALID_META_ERR)}},UNDEFINED:function(){return this.BYTE.apply(this,arguments)},RATIONAL:function(e){return this.LONG(e)/this.LONG(e+4)},SRATIONAL:function(e){return this.SLONG(e)/this.SLONG(e+4)},ASCII:function(e){return this.CHAR(e)},TIFF:function(){return h||null},EXIF:function(){var t=null;if(u.exifIFD){try{t=a.call(this,u.exifIFD,d.exif)}catch(e){return null}if(t.ExifVersion&&"array"===e.typeOf(t.ExifVersion)){for(var i=0,n="";i<t.ExifVersion.length;i++)n+=String.fromCharCode(t.ExifVersion[i]);t.ExifVersion=n}}return t},GPS:function(){var t=null;if(u.gpsIFD){try{t=a.call(this,u.gpsIFD,d.gps)}catch(e){return null}t.GPSVersionID&&"array"===e.typeOf(t.GPSVersionID)&&(t.GPSVersionID=t.GPSVersionID.join("."))}return t},thumb:function(){if(u.IFD1)try{var e=a.call(this,u.IFD1,d.thumb);if("JPEGInterchangeFormat"in e)return this.SEGMENT(u.tiffHeader+e.JPEGInterchangeFormat,e.JPEGInterchangeFormatLength)}catch(e){}return null},setExif:function(e,t){return"PixelXDimension"!==e&&"PixelYDimension"!==e?!1:s.call(this,"exif",e,t)},clear:function(){l.clear(),o=d=c=h=u=l=null}}),65505!==this.SHORT(0)||"EXIF\0"!==this.STRING(4,5).toUpperCase())throw new n.ImageError(n.ImageError.INVALID_META_ERR);if(this.littleEndian=18761==this.SHORT(f),42!==this.SHORT(f+=2))throw new n.ImageError(n.ImageError.INVALID_META_ERR);u.IFD0=u.tiffHeader+this.LONG(f+=2),h=a.call(this,u.IFD0,d.tiff),"ExifIFDPointer"in h&&(u.exifIFD=u.tiffHeader+h.ExifIFDPointer,delete h.ExifIFDPointer),"GPSInfoIFDPointer"in h&&(u.gpsIFD=u.tiffHeader+h.GPSInfoIFDPointer,delete h.GPSInfoIFDPointer),e.isEmptyObj(h)&&(h=null);var p=this.LONG(u.IFD0+12*this.SHORT(u.IFD0)+2);p&&(u.IFD1=u.tiffHeader+p)}return r.prototype=i.prototype,r}),n("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(e,t,i,n,r){function o(o){function a(e){var t,i,n=0;for(e||(e=d);n<=e.length();){if(t=e.SHORT(n+=2),t>=65472&&65475>=t)return n+=5,{height:e.SHORT(n),width:e.SHORT(n+=2)};i=e.SHORT(n+=2),n+=i-2}return null}function s(){var e,t,i=u.thumb();return i&&(e=new n(i),t=a(e),e.clear(),t)?(t.data=i,t):null}function l(){u&&c&&d&&(u.clear(),c.purge(),d.clear(),f=c=u=d=null)}var d,c,u,f;if(d=new n(o),65496!==d.SHORT(0))throw new t.ImageError(t.ImageError.WRONG_FORMAT);c=new i(o);try{u=new r(c.get("app1")[0])}catch(e){}f=a.call(this),e.extend(this,{type:"image/jpeg",size:d.length(),width:f&&f.width||0,height:f&&f.height||0,setExif:function(t,i){return u?("object"===e.typeOf(t)?e.each(t,function(e,t){u.setExif(t,e)}):u.setExif(t,i),c.set("app1",u.SEGMENT()),void 0):!1},writeHeaders:function(){return arguments.length?c.restore(arguments[0]):c.restore(o)},stripHeaders:function(e){return c.strip(e)},purge:function(){l.call(this)}}),u&&(this.meta={tiff:u.TIFF(),exif:u.EXIF(),gps:u.GPS(),thumb:s()})}return o}),n("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(e,t,i){function n(n){function r(){var e,t;return e=a.call(this,8),"IHDR"==e.type?(t=e.start,{width:s.LONG(t),height:s.LONG(t+=4)}):null}function o(){s&&(s.clear(),n=c=l=d=s=null)}function a(e){var t,i,n,r;return t=s.LONG(e),i=s.STRING(e+=4,4),n=e+=4,r=s.LONG(e+t),{length:t,type:i,start:n,CRC:r}}var s,l,d,c;s=new i(n),function(){var t=0,i=0,n=[35152,20039,3338,6666];for(i=0;i<n.length;i++,t+=2)if(n[i]!=s.SHORT(t))throw new e.ImageError(e.ImageError.WRONG_FORMAT)}(),c=r.call(this),t.extend(this,{type:"image/png",size:s.length(),width:c.width,height:c.height,purge:function(){o.call(this)}}),o.call(this)}return n}),n("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],function(e,t,i,n){return function(r){var o,a=[i,n];o=function(){for(var e=0;e<a.length;e++)try{return new a[e](r)}catch(e){}throw new t.ImageError(t.ImageError.WRONG_FORMAT)}(),e.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(e){return e},stripHeaders:function(e){return e},purge:function(){r=null}}),e.extend(this,o),this.purge=function(){o.purge(),o=null}}}),n("moxie/runtime/html5/image/ResizerCanvas",[],function(){function e(i,n){var r=i.width,o=Math.floor(r*n),a=!1;(.5>n||n>2)&&(n=.5>n?.5:2,a=!0);var s=t(i,n);return a?e(s,o/s.width):s}function t(e,t){var i=e.width,n=e.height,r=Math.floor(i*t),o=Math.floor(n*t),a=document.createElement("canvas");return a.width=r,a.height=o,a.getContext("2d").drawImage(e,0,0,i,n,0,0,r,o),e=null,a}return{scale:e}}),n("moxie/runtime/html5/image/Image",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/utils/Encode","moxie/file/Blob","moxie/file/File","moxie/runtime/html5/image/ImageInfo","moxie/runtime/html5/image/ResizerCanvas","moxie/core/utils/Mime","moxie/core/utils/Env"],function(e,t,i,n,r,o,a,s,l){function d(){function e(){if(!y&&!g)throw new i.ImageError(i.DOMException.INVALID_STATE_ERR);return y||g}function d(){var t=e();return"canvas"==t.nodeName.toLowerCase()?t:(y=document.createElement("canvas"),y.width=t.width,y.height=t.height,y.getContext("2d").drawImage(t,0,0),y)}function c(e){return n.atob(e.substring(e.indexOf("base64,")+7))}function u(e,t){return"data:"+(t||"")+";base64,"+n.btoa(e)}function f(e){var t=this;g=new Image,g.onerror=function(){m.call(this),t.trigger("error",i.ImageError.WRONG_FORMAT)},g.onload=function(){t.trigger("load")},g.src="data:"==e.substr(0,5)?e:u(e,w.type)}function h(e,t){var n,r=this;return window.FileReader?(n=new FileReader,n.onload=function(){t.call(r,this.result)},n.onerror=function(){r.trigger("error",i.ImageError.WRONG_FORMAT)},n.readAsDataURL(e),void 0):t.call(this,e.getAsDataURL())}function p(e,i){var n=Math.PI/180,r=document.createElement("canvas"),o=r.getContext("2d"),a=e.width,s=e.height;switch(t.inArray(i,[5,6,7,8])>-1?(r.width=s,r.height=a):(r.width=a,r.height=s),i){case 2:o.translate(a,0),o.scale(-1,1);break;case 3:o.translate(a,s),o.rotate(180*n);break;case 4:o.translate(0,s),o.scale(1,-1);break;case 5:o.rotate(90*n),o.scale(1,-1);break;case 6:o.rotate(90*n),o.translate(0,-s);break;case 7:o.rotate(90*n),o.translate(a,-s),o.scale(-1,1);break;case 8:o.rotate(-90*n),o.translate(-a,0)}return o.drawImage(e,0,0,a,s),r}function m(){v&&(v.purge(),v=null),b=g=y=w=null,C=!1}var g,v,y,b,w,x=this,C=!1,_=!0;t.extend(this,{loadFromBlob:function(e){var t=this.getRuntime(),n=arguments.length>1?arguments[1]:!0;if(!t.can("access_binary"))throw new i.RuntimeError(i.RuntimeError.NOT_SUPPORTED_ERR);return w=e,e.isDetached()?(b=e.getSource(),f.call(this,b),void 0):(h.call(this,e.getSource(),function(e){n&&(b=c(e)),f.call(this,e)}),void 0)},loadFromImage:function(e,t){this.meta=e.meta,w=new o(null,{name:e.name,size:e.size,type:e.type}),f.call(this,t?b=e.getAsBinaryString():e.getAsDataURL())},getInfo:function(){var t,i=this.getRuntime();return!v&&b&&i.can("access_image_binary")&&(v=new a(b)),t={width:e().width||0,height:e().height||0,type:w.type||l.getFileMime(w.name),size:b&&b.length||w.size||0,name:w.name||"",meta:null},_&&(t.meta=v&&v.meta||this.meta||{},!t.meta||!t.meta.thumb||t.meta.thumb.data instanceof r||(t.meta.thumb.data=new r(null,{type:"image/jpeg",data:t.meta.thumb.data}))),t},resize:function(t,i,n){var r=document.createElement("canvas");if(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(e(),t.x,t.y,t.width,t.height,0,0,r.width,r.height),y=s.scale(r,i),_=n.preserveHeaders,!_){var o=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1;y=p(y,o)}this.width=y.width,this.height=y.height,C=!0,this.trigger("Resize")},getAsCanvas:function(){return y||(y=d()),y.id=this.uid+"_canvas",y},getAsBlob:function(e,t){return e!==this.type?(C=!0,new o(null,{name:w.name||"",type:e,data:x.getAsDataURL(e,t)})):new o(null,{name:w.name||"",type:e,data:x.getAsBinaryString(e,t)})},getAsDataURL:function(e){var t=arguments[1]||90;if(!C)return g.src;if(d(),"image/jpeg"!==e)return y.toDataURL("image/png");try{return y.toDataURL("image/jpeg",t/100)}catch(e){return y.toDataURL("image/jpeg")}},getAsBinaryString:function(e,t){if(!C)return b||(b=c(x.getAsDataURL(e,t))),b;if("image/jpeg"!==e)b=c(x.getAsDataURL(e,t));else{var i;t||(t=90),d();try{i=y.toDataURL("image/jpeg",t/100)}catch(e){i=y.toDataURL("image/jpeg")}b=c(i),v&&(b=v.stripHeaders(b),_&&(v.meta&&v.meta.exif&&v.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),b=v.writeHeaders(b)),v.purge(),v=null)}return C=!1,b},destroy:function(){x=null,m.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return e.Image=d}),n("moxie/runtime/flash/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(e,t,i,n,o){function a(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(t){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1])}function s(e){var n=i.get(e);n&&"OBJECT"==n.nodeName&&("IE"===t.browser?(n.style.display="none",function t(){4==n.readyState?l(e):setTimeout(t,10)}()):n.parentNode.removeChild(n))}function l(e){var t=i.get(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function d(l){var d,f=this;l=e.extend({swf_url:t.swf_url},l),o.call(this,l,c,{access_binary:function(e){return e&&"browser"===f.mode},access_image_binary:function(e){return e&&"browser"===f.mode},display_media:o.capTest(r("moxie/image/Image")),do_cors:o.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===f.mode},resize_image:o.capTrue,return_response_headers:!1,return_response_type:function(t){return"json"===t&&window.JSON?!0:!e.arrayDiff(t,["","text","document"])||"browser"===f.mode},return_status_code:function(t){return"browser"===f.mode||!e.arrayDiff(t,[200,404])},select_file:o.capTrue,select_multiple:o.capTrue,send_binary_string:function(e){return e&&"browser"===f.mode},send_browser_cookies:function(e){return e&&"browser"===f.mode},send_custom_headers:function(e){return e&&"browser"===f.mode},send_multipart:o.capTrue,slice_blob:function(e){return e&&"browser"===f.mode},stream_upload:function(e){return e&&"browser"===f.mode},summon_file_dialog:!1,upload_filesize:function(t){return e.parseSizeStr(t)<=2097152||"client"===f.mode},use_http_method:function(t){return!e.arrayDiff(t,["GET","POST"])}},{access_binary:function(e){return e?"browser":"client"},access_image_binary:function(e){return e?"browser":"client"},report_upload_progress:function(e){return e?"browser":"client"},return_response_type:function(t){return e.arrayDiff(t,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(t){return e.arrayDiff(t,[200,404])?"browser":["client","browser"]},send_binary_string:function(e){return e?"browser":"client"},send_browser_cookies:function(e){return e?"browser":"client"},send_custom_headers:function(e){return e?"browser":"client"},slice_blob:function(e){return e?"browser":"client"},stream_upload:function(e){return e?"client":"browser"},upload_filesize:function(t){return e.parseSizeStr(t)>=2097152?"client":"browser"}},"client"),a()<11.3&&(this.mode=!1),e.extend(this,{getShim:function(){return i.get(this.uid)},shimExec:function(e,t){var i=[].slice.call(arguments,2);return f.getShim().exec(this.uid,e,t,i)},init:function(){var i,r,o;o=this.getShimContainer(),e.extend(o.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),i='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+l.swf_url+'" ',"IE"===t.browser&&(i+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),i+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+l.swf_url+'" />'+'<param name="flashvars" value="uid='+escape(this.uid)+"&target="+t.global_event_dispatcher+'" />'+'<param name="wmode" value="transparent" />'+'<param name="allowscriptaccess" value="always" />'+"</object>","IE"===t.browser?(r=document.createElement("div"),o.appendChild(r),r.outerHTML=i,r=o=null):o.innerHTML=i,d=setTimeout(function(){f&&!f.initialized&&f.trigger("Error",new n.RuntimeError(n.RuntimeError.NOT_INIT_ERR))},5e3)},destroy:function(e){return function(){s(f.uid),e.call(f),clearTimeout(d),l=d=e=f=null}}(this.destroy)},u)}var c="flash",u={};return o.addConstructor(c,d),u}),n("moxie/runtime/flash/file/Blob",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(e,t){var i={slice:function(e,i,n,r){var o=this.getRuntime();return 0>i?i=Math.max(e.size+i,0):i>0&&(i=Math.min(i,e.size)),0>n?n=Math.max(e.size+n,0):n>0&&(n=Math.min(n,e.size)),e=o.shimExec.call(this,"Blob","slice",i,n,r||""),e&&(e=new t(o.uid,e)),e}};return e.Blob=i}),n("moxie/runtime/flash/file/FileInput",["moxie/runtime/flash/Runtime","moxie/file/File","moxie/core/utils/Basic"],function(e,t,i){var n={init:function(e){var n=this,r=this.getRuntime();this.bind("Change",function(){var e=r.shimExec.call(n,"FileInput","getFiles");n.files=[],i.each(e,function(e){n.files.push(new t(r.uid,e))})},999),this.getRuntime().shimExec.call(this,"FileInput","init",{accept:e.accept,multiple:e.multiple}),this.trigger("ready")}};return e.FileInput=n}),n("moxie/runtime/flash/file/FileReader",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(e,t){function i(e,i){switch(i){case"readAsText":return t.atob(e,"utf8");case"readAsBinaryString":return t.atob(e);case"readAsDataURL":return e}return null}var n={read:function(e,t){var n=this;return n.result="","readAsDataURL"===e&&(n.result="data:"+(t.type||"")+";base64,"),n.bind("Progress",function(t,r){r&&(n.result+=i(r,e))},999),n.getRuntime().shimExec.call(this,"FileReader","readAsBase64",t.uid)}};return e.FileReader=n}),n("moxie/runtime/flash/file/FileReaderSync",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(e,t){function i(e,i){switch(i){case"readAsText":return t.atob(e,"utf8");case"readAsBinaryString":return t.atob(e);case"readAsDataURL":return e}return null}var n={read:function(e,t){var n,r=this.getRuntime();return(n=r.shimExec.call(this,"FileReaderSync","readAsBase64",t.uid))?("readAsDataURL"===e&&(n="data:"+(t.type||"")+";base64,"+n),i(n,e,t.type)):null}};return e.FileReaderSync=n}),n("moxie/runtime/flash/runtime/Transporter",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(e,t){var i={getAsBlob:function(e){var i=this.getRuntime(),n=i.shimExec.call(this,"Transporter","getAsBlob",e);return n?new t(i.uid,n):null}};return e.Transporter=i}),n("moxie/runtime/flash/xhr/XMLHttpRequest",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/file/File","moxie/file/FileReaderSync","moxie/runtime/flash/file/FileReaderSync","moxie/xhr/FormData","moxie/runtime/Transporter","moxie/runtime/flash/runtime/Transporter"],function(e,t,i,n,r,o,a,s){var l={send:function(e,n){function r(){e.transport=c.mode,c.shimExec.call(d,"XMLHttpRequest","send",e,n)}function o(e,t){c.shimExec.call(d,"XMLHttpRequest","appendBlob",e,t.uid),n=null,r()}function l(e,t){var i=new s;i.bind("TransportingComplete",function(){t(this.result)}),i.transport(e.getSource(),e.type,{ruid:c.uid})}var d=this,c=d.getRuntime();if(t.isEmptyObj(e.headers)||t.each(e.headers,function(e,t){c.shimExec.call(d,"XMLHttpRequest","setRequestHeader",t,e.toString())}),n instanceof a){var u;if(n.each(function(e,t){e instanceof i?u=t:c.shimExec.call(d,"XMLHttpRequest","append",t,e)}),n.hasBlob()){var f=n.getBlob();f.isDetached()?l(f,function(e){f.destroy(),o(u,e)}):o(u,f)}else n=null,r()}else n instanceof i?n.isDetached()?l(n,function(e){n.destroy(),n=e.uid,r()}):(n=n.uid,r()):r()},getResponse:function(e){var i,o,a=this.getRuntime();if(o=a.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(o=new n(a.uid,o),"blob"===e)return o;try{if(i=new r,~t.inArray(e,["","text"]))return i.readAsText(o);if("json"===e&&window.JSON)return JSON.parse(i.readAsText(o))}finally{o.destroy()}}return null},abort:function(){var e=this.getRuntime();e.shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return e.XMLHttpRequest=l}),n("moxie/runtime/flash/image/Image",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/runtime/Transporter","moxie/file/Blob","moxie/file/FileReaderSync"],function(e,t,i,n,r){var o={loadFromBlob:function(e){function t(e){r.shimExec.call(n,"Image","loadFromBlob",e.uid),n=r=null}var n=this,r=n.getRuntime();if(e.isDetached()){var o=new i;o.bind("TransportingComplete",function(){t(o.result.getSource())}),o.transport(e.getSource(),e.type,{ruid:r.uid})}else t(e.getSource())},loadFromImage:function(e){var t=this.getRuntime();return t.shimExec.call(this,"Image","loadFromImage",e.uid)},getInfo:function(){var e=this.getRuntime(),t=e.shimExec.call(this,"Image","getInfo");return t.meta&&t.meta.thumb&&t.meta.thumb.data&&!(e.meta.thumb.data instanceof n)&&(t.meta.thumb.data=new n(e.uid,t.meta.thumb.data)),t},getAsBlob:function(e,t){var i=this.getRuntime(),r=i.shimExec.call(this,"Image","getAsBlob",e,t);return r?new n(i.uid,r):null},getAsDataURL:function(){var e,t=this.getRuntime(),i=t.Image.getAsBlob.apply(this,arguments);return i?(e=new r,e.readAsDataURL(i)):null}};return e.Image=o}),n("moxie/runtime/silverlight/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(e,t,i,n,o){function a(e){var t,i,n,r,o,a=!1,s=null,l=0;try{try{s=new ActiveXObject("AgControl.AgControl"),s.IsVersionSupported(e)&&(a=!0),s=null}catch(s){var d=navigator.plugins["Silverlight Plug-In"];if(d){for(t=d.description,"1.0.30226.2"===t&&(t="2.0.30226.2"),i=t.split(".");i.length>3;)i.pop();for(;i.length<4;)i.push(0);for(n=e.split(".");n.length>4;)n.pop();do{r=parseInt(n[l],10),o=parseInt(i[l],10),l++}while(l<n.length&&r===o);o>=r&&!isNaN(r)&&(a=!0)}}}catch(e){a=!1}return a}function s(s){var c,u=this;s=e.extend({xap_url:t.xap_url},s),o.call(this,s,l,{access_binary:o.capTrue,access_image_binary:o.capTrue,display_media:o.capTest(r("moxie/image/Image")),do_cors:o.capTrue,drag_and_drop:!1,report_upload_progress:o.capTrue,resize_image:o.capTrue,return_response_headers:function(e){return e&&"client"===u.mode},return_response_type:function(e){return"json"!==e?!0:!!window.JSON},return_status_code:function(t){return"client"===u.mode||!e.arrayDiff(t,[200,404])},select_file:o.capTrue,select_multiple:o.capTrue,send_binary_string:o.capTrue,send_browser_cookies:function(e){return e&&"browser"===u.mode},send_custom_headers:function(e){return e&&"client"===u.mode},send_multipart:o.capTrue,slice_blob:o.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:o.capTrue,use_http_method:function(t){return"client"===u.mode||!e.arrayDiff(t,["GET","POST"])}},{return_response_headers:function(e){return e?"client":"browser"},return_status_code:function(t){return e.arrayDiff(t,[200,404])?"client":["client","browser"]},send_browser_cookies:function(e){return e?"browser":"client"},send_custom_headers:function(e){return e?"client":"browser"},use_http_method:function(t){return e.arrayDiff(t,["GET","POST"])?"client":["client","browser"]}}),a("2.0.31005.0")&&"Opera"!==t.browser||(this.mode=!1),e.extend(this,{getShim:function(){return i.get(this.uid).content.Moxie},shimExec:function(e,t){var i=[].slice.call(arguments,2);return u.getShim().exec(this.uid,e,t,i)},init:function(){var e;e=this.getShimContainer(),e.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;">'+'<param name="source" value="'+s.xap_url+'"/>'+'<param name="background" value="Transparent"/>'+'<param name="windowless" value="true"/>'+'<param name="enablehtmlaccess" value="true"/>'+'<param name="initParams" value="uid='+this.uid+",target="+t.global_event_dispatcher+'"/>'+"</object>",c=setTimeout(function(){u&&!u.initialized&&u.trigger("Error",new n.RuntimeError(n.RuntimeError.NOT_INIT_ERR))},"Windows"!==t.OS?1e4:5e3)},destroy:function(e){return function(){e.call(u),clearTimeout(c),s=c=e=u=null}}(this.destroy)},d)}var l="silverlight",d={};return o.addConstructor(l,s),d}),n("moxie/runtime/silverlight/file/Blob",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/Blob"],function(e,t,i){return e.Blob=t.extend({},i)}),n("moxie/runtime/silverlight/file/FileInput",["moxie/runtime/silverlight/Runtime","moxie/file/File","moxie/core/utils/Basic"],function(e,t,i){function n(e){for(var t="",i=0;i<e.length;i++)t+=(""!==t?"|":"")+e[i].title+" | *."+e[i].extensions.replace(/,/g,";*.");return t}var r={init:function(e){var r=this,o=this.getRuntime();this.bind("Change",function(){var e=o.shimExec.call(r,"FileInput","getFiles");r.files=[],i.each(e,function(e){r.files.push(new t(o.uid,e))})},999),o.shimExec.call(this,"FileInput","init",n(e.accept),e.multiple),this.trigger("ready")},setOption:function(e,t){"accept"==e&&(t=n(t)),this.getRuntime().shimExec.call(this,"FileInput","setOption",e,t)}};return e.FileInput=r}),n("moxie/runtime/silverlight/file/FileDrop",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Dom","moxie/core/utils/Events"],function(e,t,i){var n={init:function(){var e,n=this,r=n.getRuntime();return e=r.getShimContainer(),i.addEvent(e,"dragover",function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"},n.uid),i.addEvent(e,"dragenter",function(e){e.preventDefault();var i=t.get(r.uid).dragEnter(e);i&&e.stopPropagation()},n.uid),i.addEvent(e,"drop",function(e){e.preventDefault();var i=t.get(r.uid).dragDrop(e);i&&e.stopPropagation()},n.uid),r.shimExec.call(this,"FileDrop","init")}};return e.FileDrop=n}),n("moxie/runtime/silverlight/file/FileReader",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReader"],function(e,t,i){return e.FileReader=t.extend({},i)}),n("moxie/runtime/silverlight/file/FileReaderSync",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReaderSync"],function(e,t,i){return e.FileReaderSync=t.extend({},i)}),n("moxie/runtime/silverlight/runtime/Transporter",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/runtime/Transporter"],function(e,t,i){return e.Transporter=t.extend({},i)}),n("moxie/runtime/silverlight/xhr/XMLHttpRequest",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/xhr/XMLHttpRequest","moxie/runtime/silverlight/file/FileReaderSync","moxie/runtime/silverlight/runtime/Transporter"],function(e,t,i){return e.XMLHttpRequest=t.extend({},i)}),n("moxie/runtime/silverlight/image/Image",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/runtime/flash/image/Image"],function(e,t,i,n){return e.Image=t.extend({},n,{getInfo:function(){var e=this.getRuntime(),n=["tiff","exif","gps","thumb"],r={meta:{}},o=e.shimExec.call(this,"Image","getInfo");return o.meta&&(t.each(n,function(e){var t,i,n,a,s=o.meta[e];if(s&&s.keys)for(r.meta[e]={},i=0,n=s.keys.length;n>i;i++)t=s.keys[i],a=s[t],a&&(/^(\d|[1-9]\d+)$/.test(a)?a=parseInt(a,10):/^\d*\.\d+$/.test(a)&&(a=parseFloat(a)),r.meta[e][t]=a)}),r.meta&&r.meta.thumb&&r.meta.thumb.data&&!(e.meta.thumb.data instanceof i)&&(r.meta.thumb.data=new i(e.uid,r.meta.thumb.data))),r.width=parseInt(o.width,10),r.height=parseInt(o.height,10),r.size=parseInt(o.size,10),r.type=o.type,r.name=o.name,r},resize:function(e,t,i){this.getRuntime().shimExec.call(this,"Image","resize",e.x,e.y,e.width,e.height,t,i.preserveHeaders,i.resample)}})}),n("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(e,t,i,n){function o(t){var o=this,l=i.capTest,d=i.capTrue;i.call(this,t,a,{access_binary:l(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:l((n.can("create_canvas")||n.can("use_data_uri_over32kb"))&&r("moxie/image/Image")),do_cors:!1,drag_and_drop:!1,filter_by_extension:l(function(){return!("Chrome"===n.browser&&n.verComp(n.version,28,"<")||"IE"===n.browser&&n.verComp(n.version,10,"<")||"Safari"===n.browser&&n.verComp(n.version,7,"<")||"Firefox"===n.browser&&n.verComp(n.version,37,"<"))}()),resize_image:function(){return s.Image&&o.can("access_binary")&&n.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(t){return"json"===t&&window.JSON?!0:!!~e.inArray(t,["text","document",""])},return_status_code:function(t){return!e.arrayDiff(t,[200,404])},select_file:function(){return n.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return o.can("select_file")},summon_file_dialog:function(){return o.can("select_file")&&("Firefox"===n.browser&&n.verComp(n.version,4,">=")||"Opera"===n.browser&&n.verComp(n.version,12,">=")||"IE"===n.browser&&n.verComp(n.version,10,">=")||!!~e.inArray(n.browser,["Chrome","Safari"]))},upload_filesize:d,use_http_method:function(t){return!e.arrayDiff(t,["GET","POST"])}}),e.extend(this,{init:function(){this.trigger("Init")},destroy:function(e){return function(){e.call(o),e=o=null}}(this.destroy)}),e.extend(this.getShim(),s)}var a="html4",s={};return i.addConstructor(a,o),s}),n("moxie/runtime/html4/file/FileInput",["moxie/runtime/html4/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(e,t,i,n,r,o,a){function s(){function e(){var o,d,u,f,h,p,m=this,g=m.getRuntime();p=i.guid("uid_"),o=g.getShimContainer(),s&&(u=n.get(s+"_form"),u&&i.extend(u.style,{top:"100%"})),f=document.createElement("form"),f.setAttribute("id",p+"_form"),f.setAttribute("method","post"),f.setAttribute("enctype","multipart/form-data"),f.setAttribute("encoding","multipart/form-data"),i.extend(f.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),h=document.createElement("input"),h.setAttribute("id",p),h.setAttribute("type","file"),h.setAttribute("accept",c.join(",")),i.extend(h.style,{fontSize:"999px",opacity:0}),f.appendChild(h),o.appendChild(f),i.extend(h.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===a.browser&&a.verComp(a.version,10,"<")&&i.extend(h.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),h.onchange=function(){var i;if(this.value){if(this.files){if(i=this.files[0],0===i.size)return f.parentNode.removeChild(f),void 0}else i={name:this.value};i=new t(g.uid,i),this.onchange=function(){},e.call(m),m.files=[i],h.setAttribute("id",i.uid),f.setAttribute("id",i.uid+"_form"),m.trigger("change"),h=f=null}},g.can("summon_file_dialog")&&(d=n.get(l.browse_button),r.removeEvent(d,"click",m.uid),r.addEvent(d,"click",function(e){h&&!h.disabled&&h.click(),e.preventDefault()},m.uid)),s=p,o=u=d=null}var s,l,d,c=[];i.extend(this,{init:function(t){var i,a=this,s=a.getRuntime();l=t,c=t.accept.mimes||o.extList2mimes(t.accept,s.can("filter_by_extension")),i=s.getShimContainer(),function(){var e,o,c;e=n.get(t.browse_button),d=n.getStyle(e,"z-index")||"auto",s.can("summon_file_dialog")&&("static"===n.getStyle(e,"position")&&(e.style.position="relative"),a.bind("Refresh",function(){o=parseInt(d,10)||1,n.get(l.browse_button).style.zIndex=o,this.getRuntime().getShimContainer().style.zIndex=o-1})),c=s.can("summon_file_dialog")?e:i,r.addEvent(c,"mouseover",function(){a.trigger("mouseenter")},a.uid),r.addEvent(c,"mouseout",function(){a.trigger("mouseleave")},a.uid),r.addEvent(c,"mousedown",function(){a.trigger("mousedown")},a.uid),r.addEvent(n.get(t.container),"mouseup",function(){a.trigger("mouseup")},a.uid),e=null}(),e.call(this),i=null,a.trigger({type:"ready",async:!0})},setOption:function(e,t){var i,r=this.getRuntime();"accept"==e&&(c=t.mimes||o.extList2mimes(t,r.can("filter_by_extension"))),i=n.get(s),i&&i.setAttribute("accept",c.join(","))},disable:function(e){var t;(t=n.get(s))&&(t.disabled=!!e)},destroy:function(){var e=this.getRuntime(),t=e.getShim(),i=e.getShimContainer(),o=l&&n.get(l.container),a=l&&n.get(l.browse_button);o&&r.removeAllEvents(o,this.uid),a&&(r.removeAllEvents(a,this.uid),a.style.zIndex=d),i&&(r.removeAllEvents(i,this.uid),i.innerHTML=""),t.removeInstance(this.uid),s=c=l=i=o=a=t=null}})}return e.FileInput=s}),n("moxie/runtime/html4/file/FileReader",["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(e,t){return e.FileReader=t}),n("moxie/runtime/html4/xhr/XMLHttpRequest",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Url","moxie/core/Exceptions","moxie/core/utils/Events","moxie/file/Blob","moxie/xhr/FormData"],function(e,t,i,n,r,o,a,s){function l(){function e(e){var t,n,r,a,s=this,l=!1;if(c){if(t=c.id.replace(/_iframe$/,""),n=i.get(t+"_form")){for(r=n.getElementsByTagName("input"),a=r.length;a--;)switch(r[a].getAttribute("type")){case"hidden":r[a].parentNode.removeChild(r[a]);break;case"file":l=!0}r=[],l||n.parentNode.removeChild(n),n=null}setTimeout(function(){o.removeEvent(c,"load",s.uid),c.parentNode&&c.parentNode.removeChild(c);var t=s.getRuntime().getShimContainer();t.children.length||t.parentNode.removeChild(t),t=c=null,e()},1)}}var l,d,c;t.extend(this,{send:function(u,f){function h(){var i=b.getShimContainer()||document.body,r=document.createElement("div");r.innerHTML='<iframe id="'+p+'_iframe" name="'+p+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',c=r.firstChild,i.appendChild(c),o.addEvent(c,"load",function(){var i;try{i=c.contentWindow.document||c.contentDocument||window.frames[c.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(i.title)?l=i.title.replace(/^(\d+).*$/,"$1"):(l=200,d=t.trim(i.body.innerHTML),y.trigger({type:"progress",loaded:d.length,total:d.length}),v&&y.trigger({type:"uploadprogress",loaded:v.size||1025,total:v.size||1025}))}catch(t){if(!n.hasSameOrigin(u.url))return e.call(y,function(){y.trigger("error")}),void 0;l=404}e.call(y,function(){y.trigger("load")})},y.uid)}var p,m,g,v,y=this,b=y.getRuntime();if(l=d=null,f instanceof s&&f.hasBlob()){if(v=f.getBlob(),p=v.uid,g=i.get(p),m=i.get(p+"_form"),!m)throw new r.DOMException(r.DOMException.NOT_FOUND_ERR)}else p=t.guid("uid_"),m=document.createElement("form"),m.setAttribute("id",p+"_form"),m.setAttribute("method",u.method),m.setAttribute("enctype","multipart/form-data"),m.setAttribute("encoding","multipart/form-data"),b.getShimContainer().appendChild(m);m.setAttribute("target",p+"_iframe"),f instanceof s&&f.each(function(e,i){if(e instanceof a)g&&g.setAttribute("name",i);else{var n=document.createElement("input");t.extend(n,{type:"hidden",name:i,value:e}),g?m.insertBefore(n,g):m.appendChild(n)}}),m.setAttribute("action",u.url),h(),m.submit(),y.trigger("loadstart")},getStatus:function(){return l},getResponse:function(e){if("json"===e&&"string"===t.typeOf(d)&&window.JSON)try{return JSON.parse(d.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(e){return null}return d},abort:function(){var t=this;c&&c.contentWindow&&(c.contentWindow.stop?c.contentWindow.stop():c.contentWindow.document.execCommand?c.contentWindow.document.execCommand("Stop"):c.src="about:blank"),e.call(this,function(){t.dispatchEvent("abort")})}})}return e.XMLHttpRequest=l}),n("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(e,t){return e.Image=t}),a(["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Dom","moxie/core/EventTarget","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/file/Blob","moxie/core/I18n","moxie/core/utils/Mime","moxie/file/FileInput","moxie/file/File","moxie/file/FileDrop","moxie/file/FileReader","moxie/core/utils/Url","moxie/runtime/RuntimeTarget","moxie/xhr/FormData","moxie/xhr/XMLHttpRequest","moxie/runtime/Transporter","moxie/image/Image","moxie/core/utils/Events","moxie/runtime/html5/image/ResizerCanvas"])}(this)});define("../libs/plupload/js/moxie.min",function(){});!function(e,t){var i=function(){var e={};return t.apply(e,arguments),e.plupload};"function"==typeof define&&define.amd?define("plupload",["./moxie"],i):"object"==typeof module&&module.exports?module.exports=i(require("./moxie")):e.plupload=i(e.moxie)}(this||window,function(e){!function(e,t,i){function n(e){function t(e,t,i){var r={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};r[e]?n[r[e]]=t:i||(n[e]=t)}var i=e.required_features,n={};return"string"==typeof i?l.each(i.split(/\s*,\s*/),function(e){t(e,!0)}):"object"==typeof i?l.each(i,function(e,i){t(i,e)}):i===!0&&(e.chunk_size&&e.chunk_size>0&&(n.slice_blob=!0),l.isEmptyObj(e.resize)&&e.multipart!==!1||(n.send_binary_string=!0),e.http_method&&(n.use_http_method=e.http_method),l.each(e,function(e,i){t(i,!!e,!0)})),n}var r=window.setTimeout,o={},a=t.core.utils,s=t.runtime.Runtime,l={VERSION:"2.3.1",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:a.Mime.mimes,ua:a.Env,typeOf:a.Basic.typeOf,extend:a.Basic.extend,guid:a.Basic.guid,getAll:function(e){var t,i=[];"array"!==l.typeOf(e)&&(e=[e]);for(var n=e.length;n--;)t=l.get(e[n]),t&&i.push(t);return i.length?i:null},get:a.Dom.get,each:a.Basic.each,getPos:a.Dom.getPos,getSize:a.Dom.getSize,xmlEncode:function(e){var t={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},i=/[<>&\"\']/g;return e?(""+e).replace(i,function(e){return t[e]?"&"+t[e]+";":e}):e},toArray:a.Basic.toArray,inArray:a.Basic.inArray,inSeries:a.Basic.inSeries,addI18n:t.core.I18n.addI18n,translate:t.core.I18n.translate,sprintf:a.Basic.sprintf,isEmptyObj:a.Basic.isEmptyObj,hasClass:a.Dom.hasClass,addClass:a.Dom.addClass,removeClass:a.Dom.removeClass,getStyle:a.Dom.getStyle,addEvent:a.Events.addEvent,removeEvent:a.Events.removeEvent,removeAllEvents:a.Events.removeAllEvents,cleanName:function(e){var t,i;for(i=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],t=0;t<i.length;t+=2)e=e.replace(i[t],i[t+1]);return e=e.replace(/\s+/g,"_"),e=e.replace(/[^a-z0-9_\-\.]+/gi,"")},buildUrl:function(e,t){var i="";return l.each(t,function(e,t){i+=(i?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),i&&(e+=(e.indexOf("?")>0?"&":"?")+i),e},formatSize:function(e){function t(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}if(e===i||/\D/.test(e))return l.translate("N/A");var n=Math.pow(1024,4);return e>n?t(e/n,1)+" "+l.translate("tb"):e>(n/=1024)?t(e/n,1)+" "+l.translate("gb"):e>(n/=1024)?t(e/n,1)+" "+l.translate("mb"):e>1024?Math.round(e/1024)+" "+l.translate("kb"):e+" "+l.translate("b")},parseSize:a.Basic.parseSizeStr,predictRuntime:function(e,t){var i,n;return i=new l.Uploader(e),n=s.thatCan(i.getOption().required_features,t||e.runtimes),i.destroy(),n},addFileFilter:function(e,t){o[e]=t}};l.addFileFilter("mime_types",function(e,t,i){e.length&&!e.regexp.test(t.name)?(this.trigger("Error",{code:l.FILE_EXTENSION_ERROR,message:l.translate("File extension error."),file:t}),i(!1)):i(!0)}),l.addFileFilter("max_file_size",function(e,t,i){var n;e=l.parseSize(e),t.size!==n&&e&&t.size>e?(this.trigger("Error",{code:l.FILE_SIZE_ERROR,message:l.translate("File size error."),file:t}),i(!1)):i(!0)}),l.addFileFilter("prevent_duplicates",function(e,t,i){if(e)for(var n=this.files.length;n--;)if(t.name===this.files[n].name&&t.size===this.files[n].size)return this.trigger("Error",{code:l.FILE_DUPLICATE_ERROR,message:l.translate("Duplicate file error."),file:t}),i(!1),void 0;i(!0)}),l.Uploader=function(e){function a(){var e,t,i=0;if(this.state==l.STARTED){for(t=0;t<R.length;t++)e||R[t].status!=l.QUEUED?i++:(e=R[t],this.trigger("BeforeUpload",e)&&(e.status=l.UPLOADING,this.trigger("UploadFile",e)));i==R.length&&(this.state!==l.STOPPED&&(this.state=l.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",R))}}function d(e){e.percent=e.size>0?Math.ceil(100*(e.loaded/e.size)):100,c()}function c(){var e,t,n,r=0;for(k.reset(),e=0;e<R.length;e++)t=R[e],t.size!==i?(k.size+=t.origSize,n=t.loaded*t.origSize/t.size,(!t.completeTimestamp||t.completeTimestamp>S)&&(r+=n),k.loaded+=n):k.size=i,t.status==l.DONE?k.uploaded++:t.status==l.FAILED?k.failed++:k.queued++;k.size===i?k.percent=R.length>0?Math.ceil(100*(k.uploaded/R.length)):0:(k.bytesPerSec=Math.ceil(r/((+new Date-S||1)/1e3)),k.percent=k.size>0?Math.ceil(100*(k.loaded/k.size)):0)}function u(){var e=I[0]||D[0];return e?e.getRuntime().uid:!1}function f(e,t){if(e.ruid){var i=s.getInfo(e.ruid);if(i)return i.can(t)}return!1}function h(){this.bind("FilesAdded FilesRemoved",function(e){e.trigger("QueueChanged"),e.refresh()}),this.bind("CancelUpload",x),this.bind("BeforeUpload",v),this.bind("UploadFile",y),this.bind("UploadProgress",b),this.bind("StateChanged",w),this.bind("QueueChanged",c),this.bind("Error",_),this.bind("FileUploaded",C),this.bind("Destroy",T)}function p(e,i){var n=this,r=0,o=[],a={runtime_order:e.runtimes,required_caps:e.required_features,preferred_caps:A,swf_url:e.flash_swf_url,xap_url:e.silverlight_xap_url};l.each(e.runtimes.split(/\s*,\s*/),function(t){e[t]&&(a[t]=e[t])}),e.browse_button&&l.each(e.browse_button,function(i){o.push(function(o){var d=new t.file.FileInput(l.extend({},a,{accept:e.filters.mime_types,name:e.file_data_name,multiple:e.multi_selection,container:e.container,browse_button:i}));d.onready=function(){var e=s.getInfo(this.ruid);l.extend(n.features,{chunks:e.can("slice_blob"),multipart:e.can("send_multipart"),multi_selection:e.can("select_multiple")}),r++,I.push(this),o()},d.onchange=function(){n.addFile(this.files)},d.bind("mouseenter mouseleave mousedown mouseup",function(t){O||(e.browse_button_hover&&("mouseenter"===t.type?l.addClass(i,e.browse_button_hover):"mouseleave"===t.type&&l.removeClass(i,e.browse_button_hover)),e.browse_button_active&&("mousedown"===t.type?l.addClass(i,e.browse_button_active):"mouseup"===t.type&&l.removeClass(i,e.browse_button_active)))}),d.bind("mousedown",function(){n.trigger("Browse")}),d.bind("error runtimeerror",function(){d=null,o()}),d.init()})}),e.drop_element&&l.each(e.drop_element,function(e){o.push(function(i){var o=new t.file.FileDrop(l.extend({},a,{drop_zone:e}));o.onready=function(){var e=s.getInfo(this.ruid);l.extend(n.features,{chunks:e.can("slice_blob"),multipart:e.can("send_multipart"),dragdrop:e.can("drag_and_drop")}),r++,D.push(this),i()},o.ondrop=function(){n.addFile(this.files)},o.bind("error runtimeerror",function(){o=null,i()}),o.init()})}),l.inSeries(o,function(){"function"==typeof i&&i(r)})}function m(e,n,r){var o=new t.image.Image;try{o.onload=function(){return n.width>this.width&&n.height>this.height&&n.quality===i&&n.preserve_headers&&!n.crop?(this.destroy(),r(e)):(o.downsize(n.width,n.height,n.crop,n.preserve_headers),void 0)},o.onresize=function(){r(this.getAsBlob(e.type,n.quality)),this.destroy()},o.onerror=function(){r(e)},o.load(e)}catch(t){r(e)}}function g(e,i,r){function o(e,i,n){var r=E[e];switch(e){case"max_file_size":"max_file_size"===e&&(E.max_file_size=E.filters.max_file_size=i);break;case"chunk_size":(i=l.parseSize(i))&&(E[e]=i,E.send_file_name=!0);break;case"multipart":E[e]=i,i||(E.send_file_name=!0);break;case"http_method":E[e]="PUT"===i.toUpperCase()?"PUT":"POST";break;case"unique_names":E[e]=i,i&&(E.send_file_name=!0);break;case"filters":"array"===l.typeOf(i)&&(i={mime_types:i}),n?l.extend(E.filters,i):E.filters=i,i.mime_types&&("string"===l.typeOf(i.mime_types)&&(i.mime_types=t.core.utils.Mime.mimes2extList(i.mime_types)),i.mime_types.regexp=function(e){var t=[];return l.each(e,function(e){l.each(e.extensions.split(/,/),function(e){/^\s*\*\s*$/.test(e)?t.push("\\.*"):t.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+t.join("|")+")$","i")}(i.mime_types),E.filters.mime_types=i.mime_types);break;case"resize":E.resize=i?l.extend({preserve_headers:!0,crop:!1},i):!1;break;case"prevent_duplicates":E.prevent_duplicates=E.filters.prevent_duplicates=!!i;break;case"container":case"browse_button":case"drop_element":i="container"===e?l.get(i):l.getAll(i);case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":E[e]=i,n||(d=!0);break;default:E[e]=i}n||a.trigger("OptionChanged",e,i,r)}var a=this,d=!1;"object"==typeof e?l.each(e,function(e,t){o(t,e,r)}):o(e,i,r),r?(E.required_features=n(l.extend({},E)),A=n(l.extend({},E,{required_features:!0}))):d&&(a.trigger("Destroy"),p.call(a,E,function(e){e?(a.runtime=s.getInfo(u()).type,a.trigger("Init",{runtime:a.runtime}),a.trigger("PostInit")):a.trigger("Error",{code:l.INIT_ERROR,message:l.translate("Init error.")})}))}function v(e,t){if(e.settings.unique_names){var i=t.name.match(/\.([^.]+)$/),n="part";i&&(n=i[1]),t.target_name=t.id+"."+n}}function y(e,i){function n(){u-- >0?r(o,1e3):(i.loaded=p,e.trigger("Error",{code:l.HTTP_ERROR,message:l.translate("HTTP Error."),file:i,response:N.responseText,status:N.status,responseHeaders:N.getAllResponseHeaders()}))}function o(){var t,n,r={};i.status===l.UPLOADING&&e.state!==l.STOPPED&&(e.settings.send_file_name&&(r.name=i.target_name||i.name),c&&h.chunks&&s.size>c?(n=Math.min(c,s.size-p),t=s.slice(p,p+n)):(n=s.size,t=s),c&&h.chunks&&(e.settings.send_chunk_number?(r.chunk=Math.ceil(p/c),r.chunks=Math.ceil(s.size/c)):(r.offset=p,r.total=s.size)),e.trigger("BeforeChunkUpload",i,r,t,p)&&a(r,t,n))}function a(a,c,f){var m;N=new t.xhr.XMLHttpRequest,N.upload&&(N.upload.onprogress=function(t){i.loaded=Math.min(i.size,p+t.loaded),e.trigger("UploadProgress",i)}),N.onload=function(){return N.status>=400?(n(),void 0):(u=e.settings.max_retries,f<s.size?(c.destroy(),p+=f,i.loaded=Math.min(p,s.size),e.trigger("ChunkUploaded",i,{offset:i.loaded,total:s.size,response:N.responseText,status:N.status,responseHeaders:N.getAllResponseHeaders()}),"Android Browser"===l.ua.browser&&e.trigger("UploadProgress",i)):i.loaded=i.size,c=m=null,!p||p>=s.size?(i.size!=i.origSize&&(s.destroy(),s=null),e.trigger("UploadProgress",i),i.status=l.DONE,i.completeTimestamp=+new Date,e.trigger("FileUploaded",i,{response:N.responseText,status:N.status,responseHeaders:N.getAllResponseHeaders()})):r(o,1),void 0)},N.onerror=function(){n()},N.onloadend=function(){this.destroy(),N=null},e.settings.multipart&&h.multipart?(N.open(e.settings.http_method,d,!0),l.each(e.settings.headers,function(e,t){N.setRequestHeader(t,e)}),m=new t.xhr.FormData,l.each(l.extend(a,e.settings.multipart_params),function(e,t){m.append(t,e)}),m.append(e.settings.file_data_name,c),N.send(m,{runtime_order:e.settings.runtimes,required_caps:e.settings.required_features,preferred_caps:A,swf_url:e.settings.flash_swf_url,xap_url:e.settings.silverlight_xap_url})):(d=l.buildUrl(e.settings.url,l.extend(a,e.settings.multipart_params)),N.open(e.settings.http_method,d,!0),l.each(e.settings.headers,function(e,t){N.setRequestHeader(t,e)}),N.hasRequestHeader("Content-Type")||N.setRequestHeader("Content-Type","application/octet-stream"),N.send(c,{runtime_order:e.settings.runtimes,required_caps:e.settings.required_features,preferred_caps:A,swf_url:e.settings.flash_swf_url,xap_url:e.settings.silverlight_xap_url}))}var s,d=e.settings.url,c=e.settings.chunk_size,u=e.settings.max_retries,h=e.features,p=0;i.loaded&&(p=i.loaded=c?c*Math.floor(i.loaded/c):0),s=i.getSource(),!l.isEmptyObj(e.settings.resize)&&f(s,"send_binary_string")&&-1!==l.inArray(s.type,["image/jpeg","image/png"])?m.call(this,s,e.settings.resize,function(e){s=e,i.size=e.size,o()}):o()}function b(e,t){d(t)}function w(e){if(e.state==l.STARTED)S=+new Date;else if(e.state==l.STOPPED)for(var t=e.files.length-1;t>=0;t--)e.files[t].status==l.UPLOADING&&(e.files[t].status=l.QUEUED,c())}function x(){N&&N.abort()}function C(e){c(),r(function(){a.call(e)},1)}function _(e,t){t.code===l.INIT_ERROR?e.destroy():t.code===l.HTTP_ERROR&&(t.file.status=l.FAILED,t.file.completeTimestamp=+new Date,d(t.file),e.state==l.STARTED&&(e.trigger("CancelUpload"),r(function(){a.call(e)},1)))}function T(e){e.stop(),l.each(R,function(e){e.destroy()}),R=[],I.length&&(l.each(I,function(e){e.destroy()}),I=[]),D.length&&(l.each(D,function(e){e.destroy()}),D=[]),A={},O=!1,S=N=null,k.reset()}var E,S,k,N,U=l.guid(),R=[],A={},I=[],D=[],O=!1;E={chunk_size:0,file_data_name:"file",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},flash_swf_url:"js/Moxie.swf",http_method:"POST",max_retries:0,multipart:!0,multi_selection:!0,resize:!1,runtimes:s.order,send_file_name:!0,send_chunk_number:!0,silverlight_xap_url:"js/Moxie.xap"},g.call(this,e,null,!0),k=new l.QueueProgress,l.extend(this,{id:U,uid:U,state:l.STOPPED,features:{},runtime:null,files:R,settings:E,total:k,init:function(){var e,t,i=this;return e=i.getOption("preinit"),"function"==typeof e?e(i):l.each(e,function(e,t){i.bind(t,e)}),h.call(i),l.each(["container","browse_button","drop_element"],function(e){return null===i.getOption(e)?(t={code:l.INIT_ERROR,message:l.sprintf(l.translate("%s specified, but cannot be found."),e)},!1):void 0}),t?i.trigger("Error",t):E.browse_button||E.drop_element?(p.call(i,E,function(e){var t=i.getOption("init");"function"==typeof t?t(i):l.each(t,function(e,t){i.bind(t,e)}),e?(i.runtime=s.getInfo(u()).type,i.trigger("Init",{runtime:i.runtime}),i.trigger("PostInit")):i.trigger("Error",{code:l.INIT_ERROR,message:l.translate("Init error.")})}),void 0):i.trigger("Error",{code:l.INIT_ERROR,message:l.translate("You must specify either browse_button or drop_element.")})},setOption:function(e,t){g.call(this,e,t,!this.runtime)},getOption:function(e){return e?E[e]:E},refresh:function(){I.length&&l.each(I,function(e){e.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=l.STARTED&&(this.state=l.STARTED,this.trigger("StateChanged"),a.call(this))},stop:function(){this.state!=l.STOPPED&&(this.state=l.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){O=arguments[0]!==i?arguments[0]:!0,I.length&&l.each(I,function(e){e.disable(O)}),this.trigger("DisableBrowse",O)},getFile:function(e){var t;for(t=R.length-1;t>=0;t--)if(R[t].id===e)return R[t]},addFile:function(e,i){function n(e,t){var i=[];l.each(d.settings.filters,function(t,n){o[n]&&i.push(function(i){o[n].call(d,t,e,function(e){i(!e)})})}),l.inSeries(i,t)}function a(e){var o=l.typeOf(e);if(e instanceof t.file.File){if(!e.ruid&&!e.isDetached()){if(!s)return!1;e.ruid=s,e.connectRuntime(s)}a(new l.File(e))}else e instanceof t.file.Blob?(a(e.getSource()),e.destroy()):e instanceof l.File?(i&&(e.name=i),c.push(function(t){n(e,function(i){i||(R.push(e),f.push(e),d.trigger("FileFiltered",e)),r(t,1)})})):-1!==l.inArray(o,["file","blob"])?a(new t.file.File(null,e)):"node"===o&&"filelist"===l.typeOf(e.files)?l.each(e.files,a):"array"===o&&(i=null,l.each(e,a))}var s,d=this,c=[],f=[];s=u(),a(e),c.length&&l.inSeries(c,function(){f.length&&d.trigger("FilesAdded",f)})},removeFile:function(e){for(var t="string"==typeof e?e:e.id,i=R.length-1;i>=0;i--)if(R[i].id===t)return this.splice(i,1)[0]},splice:function(e,t){var n=R.splice(e===i?0:e,t===i?R.length:t),r=!1;return this.state==l.STARTED&&(l.each(n,function(e){return e.status===l.UPLOADING?(r=!0,!1):void 0}),r&&this.stop()),this.trigger("FilesRemoved",n),l.each(n,function(e){e.destroy()}),r&&this.start(),n},dispatchEvent:function(e){var t,i;if(e=e.toLowerCase(),t=this.hasEventListener(e)){t.sort(function(e,t){return t.priority-e.priority}),i=[].slice.call(arguments),i.shift(),i.unshift(this);for(var n=0;n<t.length;n++)if(t[n].fn.apply(t[n].scope,i)===!1)return!1}return!0},bind:function(e,t,i,n){l.Uploader.prototype.bind.call(this,e,t,n,i)},destroy:function(){this.trigger("Destroy"),E=k=null,this.unbindAll()}})},l.Uploader.prototype=t.core.EventTarget.instance,l.File=function(){function e(e){l.extend(this,{id:l.guid(),name:e.name||e.fileName,type:e.type||"",size:e.size||e.fileSize,origSize:e.size||e.fileSize,loaded:0,percent:0,status:l.QUEUED,lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString(),completeTimestamp:0,getNative:function(){var e=this.getSource().getSource();return-1!==l.inArray(l.typeOf(e),["blob","file"])?e:null},getSource:function(){return t[this.id]?t[this.id]:null},destroy:function(){var e=this.getSource();e&&(e.destroy(),delete t[this.id])}}),t[this.id]=e}var t={};return e}(),l.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},e.plupload=l}(this,e)});define("upload",["jquery","bootstrap","plupload","template"],function(e,t,i,n){var r={list:{},config:{container:document.body,classname:".plupload:not([initialized])",previewtpl:'<li class="col-xs-3"><a href="<%=fullurl%>" data-url="<%=url%>" target="_blank" class="thumbnail"><img src="<%=fullurl%>" class="img-responsive"></a><a href="javascript:;" class="btn btn-danger btn-xs btn-trash"><i class="fa fa-trash"></i></a></li>'},events:{onUploadSuccess:function(t,i,n){var o=typeof t.data!=="undefined"?t.data:null;if(n){var a=e(n).data("input-id")?e(n).data("input-id"):"";if(a){var s=[];var l=e("#"+a);if(e(n).data("multiple")&&l.val()!==""){s.push(l.val())}s.push(o.url);l.val(s.join(",")).trigger("change")}var d=e(n).data("upload-success");if(d){if(typeof d!=="function"&&typeof r.api.custom[d]==="function"){d=r.api.custom[d]}if(typeof d==="function"){var c=d.call(n,o,t);if(c===false)return}}}if(typeof i==="function"){var c=i.call(n,o,t);if(c===false)return}},onUploadError:function(t,i,n){var o=typeof t.data!=="undefined"?t.data:null;if(n){var a=e(n).data("upload-error");if(a){if(typeof a!=="function"&&typeof r.api.custom[a]==="function"){a=r.api.custom[a]}if(typeof a==="function"){var s=a.call(n,o,t);if(s===false)return}}}if(typeof i==="function"){var s=i.call(n,o,t);if(s===false){return}}Toastr.error(t.msg+"(code:"+t.code+")")},onUploadResponse:function(t){try{var i=typeof t==="object"?t:JSON.parse(t);if(!i.hasOwnProperty("code")){e.extend(i,{code:-2,msg:t,data:null})}}catch(e){var i={code:-1,msg:e.message,data:null}}return i}},api:{plupload:function(t,o,a){t=typeof t==="undefined"?r.config.classname:t;e(t,r.config.container).each(function(){e(this).attr("initialized",true);var t=this;var s=e(this).prop("id");var l=e(this).data("url");var d=e(this).data("maxsize");var c=e(this).data("mimetype");var u=e(this).data("multipart");var f=e(this).data("multiple");var h=e(t).data("input-id")?e(t).data("input-id"):"";var p=e(t).data("preview-id")?e(t).data("preview-id"):"";l=l?l:Config.upload.uploadurl;l=Fast.api.fixurl(l);d=typeof d!=="undefined"?d:Config.upload.maxsize;c=typeof c!=="undefined"?c:Config.upload.mimetype;u=typeof u!=="undefined"?u:Config.upload.multipart;f=typeof f!=="undefined"?f:Config.upload.multiple;r.list[s]=new i.Uploader({runtimes:"html5,flash,silverlight,html4",multi_selection:f,browse_button:s,container:e(this).parent().get(0),flash_swf_url:"/assets/libs/plupload/js/Moxie.swf",silverlight_xap_url:"/assets/libs/plupload/js/Moxie.xap",filters:{max_file_size:d,mime_types:c},url:l,multipart_params:u,init:{PostInit:function(){},FilesAdded:function(t,i){var n=t.settings.button;e(n).data("bakup-html",e(n).html());setTimeout(function(){t.start()},1)},UploadProgress:function(t,i){var n=t.settings.button;e(n).prop("disabled",true).html("<i class='fa fa-upload'></i> "+__("Upload")+i.percent+"%")},FileUploaded:function(t,i,n){var s=t.settings.button;e(s).prop("disabled",false).html(e(s).data("bakup-html"));var l=r.events.onUploadResponse(n.response);if(l.code===1){r.events.onUploadSuccess(l,o,s)}else{r.events.onUploadError(l,a,s)}},Error:function(t,i){var n=t.settings.button;e(n).prop("disabled",false).html(e(n).data("bakup-html"));var o={code:i.code,msg:i.message,data:null};r.events.onUploadError(o,a,n)}},onUploadSuccess:o,onUploadError:a,button:t});if(p&&f){require(["dragsort"],function(){e("#"+p).dragsort({dragSelector:"li",dragEnd:function(){e("#"+p).trigger("fa.preview.change")},placeHolderTemplate:'<li class="col-xs-3"></li>'})})}if(p&&h){e(document.body).on("keyup change","#"+h,function(){var i=e("#"+h).val();var o=i.split(/\,/);e("#"+p).empty();var a=e("#"+p).data("template")?e("#"+p).data("template"):"";e.each(o,function(i,o){if(!o){return true}var s={url:o,fullurl:Fast.api.cdnurl(o),data:e(t).data()};var l=a?n(a,s):n.render(r.config.previewtpl,s);e("#"+p).append(l)})});e("#"+h).trigger("keyup")}if(p){e(document.body).on("fa.preview.change","#"+p,function(){var t=new Array;e("#"+p+" [data-url]").each(function(i,n){t.push(e(this).data("url"))});if(h){e("#"+h).val(t.join(","))}});e(document.body).on("click","#"+p+" .btn-trash",function(){e(this).closest("li").remove();e("#"+p).trigger("fa.preview.change")})}r.list[s].init()})},send:function(t,i,n){var o=new FormData;o.append("file",t);e.each(Config.upload.multipart,function(e,t){o.append(e,t)});e.ajax({url:Config.upload.uploadurl,data:o,cache:false,contentType:false,processData:false,type:"POST",success:function(e){e=r.events.onUploadResponse(e);if(e.code===1){r.events.onUploadSuccess(e,i)}else{r.events.onUploadError(e,n)}},error:function(e){var t={code:500,msg:e.message,data:null};r.events.onUploadError(t,n)}})},custom:{afteruploadcallback:function(e){console.log(this,e);alert("Custom Callback,Response URL:"+e.url)}}}};return r});(function(e){typeof module==="object"&&module.exports?module.exports=e(require("jquery")):typeof define==="function"&&define.amd?define("validator-core",["jquery"],e):e(jQuery)})(function(e,t){"use strict";var i="validator",n="."+i,r=".rule",o=".field",a=".form",s="nice-"+i,l="msg-box",d="aria-invalid",c="data-rule",u="data-msg",f="data-tip",h="data-ok",p="data-timely",m="data-target",g="data-display",v="data-must",y="novalidate",b=":verifiable",w=/(&)?(!)?\b(\w+)(?:\[\s*(.*?\]?)\s*\]|\(\s*(.*?\)?)\s*\))?\s*(;|\|)?/g,x=/(\w+)(?:\[\s*(.*?\]?)\s*\]|\(\s*(.*?\)?)\s*\))?/,C=/(?:([^:;\(\[]*):)?(.*)/,_=/[^\x00-\xff]/g,T=/top|right|bottom|left/,E=/(?:(cors|jsonp):)?(?:(post|get):)?(.+)/i,S=/[<>'"`\\]|&#x?\d+[A-F]?;?|%3[A-F]/gim,k=e.noop,N=e.proxy,U=e.trim,R=e.isFunction,A=function(e){return typeof e==="string"},I=function(e){return e&&Object.prototype.toString.call(e)==="[object Object]"},D=document.documentMode||+(navigator.userAgent.match(/MSIE (\d+)/)&&RegExp.$1),O=function(e,i,n){if(!e||!e.tagName)return null;if(n!==t){if(n===null)e.removeAttribute(i);else e.setAttribute(i,""+n)}else{return e.getAttribute(i)}},L,B={},M={debug:0,theme:"default",ignore:"",focusInvalid:true,focusCleanup:false,stopOnError:false,beforeSubmit:null,valid:null,invalid:null,validation:null,formClass:"n-default",validClass:"n-valid",invalidClass:"n-invalid",bindClassTo:null},P={timely:1,display:null,target:null,ignoreBlank:false,showOk:true,dataFilter:function(e){if(A(e)||I(e)&&("error"in e||"ok"in e)){return e}},msgMaker:function(t){var i;i='<span role="alert" class="msg-wrap n-'+t.type+'">'+t.arrow;if(t.result){e.each(t.result,function(e,n){i+='<span class="n-'+n.type+'">'+t.icon+'<span class="n-msg">'+n.msg+"</span></span>"})}else{i+=t.icon+'<span class="n-msg">'+t.msg+"</span>"}i+="</span>";return i},msgWrapper:"span",msgArrow:"",msgIcon:'<span class="n-icon"></span>',msgClass:"n-right",msgStyle:"",msgShow:null,msgHide:null},F={};e.fn.validator=function(t){var n=this,r=arguments;if(n.is(b))return n;if(!n.is("form"))n=this.find("form");if(!n.length)n=this;n.each(function(){var n=e(this).data(i);if(n){if(A(t)){if(t.charAt(0)==="_")return;n[t].apply(n,[].slice.call(r,1))}else if(t){n._reset(true);n._init(this,t)}}else{new H(this,t)}});return this};e.fn.isValid=function(e,i){var n=W(this[0]),r=R(e),o,a;if(!n)return true;if(!r&&i===t)i=e;n.checkOnly=!!i;a=n.options;o=n._multiValidate(this.is(b)?this:this.find(b),function(t){if(!t&&a.focusInvalid&&!n.checkOnly){n.$el.find("["+d+"]:first").focus()}if(r){if(e.length){e(t)}else if(t){e()}}n.checkOnly=false});return r?this:o};e.extend(e.expr.pseudos||e.expr[":"],{verifiable:function(e){var t=e.nodeName.toLowerCase();return(t==="input"&&!{submit:1,button:1,reset:1,image:1}[e.type]||t==="select"||t==="textarea"||e.contentEditable==="true")&&!e.disabled},filled:function(t){return!!U(e(t).val())}});function H(t,i){var n=this;if(!(n instanceof H)){return new H(t,i)}if(H.pending){e(window).on("validatorready",r)}else{r()}function r(){n.$el=e(t);if(n.$el.length){n._init(n.$el[0],i)}else if(A(t)){B[t]=i}}}H.prototype={_init:function(t,r){var o=this,a,l,d;if(R(r)){r={valid:r}}r=o._opt=r||{};d=O(t,"data-"+i+"-option");d=o._dataOpt=d&&d.charAt(0)==="{"?new Function("return "+d)():{};l=o._themeOpt=F[r.theme||d.theme||M.theme];a=o.options=e.extend({},M,P,l,o.options,r,d);o.rules=new j(a.rules,true);o.messages=new q(a.messages,true);o.Field=$(o);o.elements=o.elements||{};o.deferred={};o.errors={};o.fields={};o._initFields(a.fields);if(!o.$el.data(i)){o.$el.data(i,o).addClass(s+" "+a.formClass).on("form-submit-validate",function(e,t,i,n,r){o.vetoed=r.veto=!o.isValid;o.ajaxFormOptions=n}).on("submit"+n+" validate"+n,N(o,"_submit")).on("reset"+n,N(o,"_reset")).on("showmsg"+n,N(o,"_showmsg")).on("hidemsg"+n,N(o,"_hidemsg")).on("focusin"+n+" click"+n,b,N(o,"_focusin")).on("focusout"+n+" validate"+n,b,N(o,"_focusout")).on("keyup"+n+" input"+n+" compositionstart compositionend",b,N(o,"_focusout")).on("click"+n,":radio,:checkbox","click",N(o,"_focusout")).on("change"+n,'select,input[type="file"]',"change",N(o,"_focusout"));o._NOVALIDATE=O(t,y);O(t,y,y)}if(A(a.target)){o.$el.find(a.target).addClass("msg-container")}},_guessAjax:function(t){var i=this;if(!(i.isAjaxSubmit=!!i.options.valid)){var n=(e._data||e.data)(t,"events");i.isAjaxSubmit=r(n,"valid","form")||r(n,"submit","form-plugin")}function r(t,i,n){if(t&&t[i]&&e.map(t[i],function(e){return~e.namespace.indexOf(n)?1:null}).length){return true}return false}},_initFields:function(e){var t=this,i,n,r,o=e===null;if(o)e=t.fields;if(I(e)){for(i in e){if(~i.indexOf(",")){n=i.split(",");r=n.length;while(r--){a(U(n[r]),e[i])}}else{a(i,e[i])}}}t.$el.find(b).each(function(){t._parse(this)});function a(e,i){if(i===null||o){var n=t.elements[e];if(n)t._resetElement(n,true);delete t.fields[e]}else{t.fields[e]=new t.Field(e,A(i)?{rule:i}:i,t.fields[e])}}},_parse:function(e){var t=this,i,n=e.name,r,o,a=O(e,c);a&&O(e,c,null);if(e.id&&("#"+e.id in t.fields||!n||a!==null&&(i=t.fields[n])&&a!==i.rule&&e.id!==i.key)){n="#"+e.id}if(!n){n="#"+(e.id="N"+String(Math.random()).slice(-12))}i=t.getField(n,true);i.rule=a||i.rule;if(r=O(e,g)){i.display=r}if(i.rule){if(O(e,v)!==null||/\b(?:match|checked)\b/.test(i.rule)){i.must=true}if(/\brequired\b/.test(i.rule)){i.required=true}if(o=O(e,p)){i.timely=+o}else if(i.timely>3){O(e,p,i.timely)}t._parseRule(i);i.old={}}if(A(i.target)){O(e,m,i.target)}if(A(i.tip)){O(e,f,i.tip)}return t.fields[n]=i},_parseRule:function(i){var n=C.exec(i.rule);if(!n)return;i._i=0;if(n[1]){i.display=n[1]}if(n[2]){i._rules=[];n[2].replace(w,function(){var n=arguments;n[4]=n[4]||n[5];i._rules.push({and:n[1]==="&",not:n[2]==="!",or:n[6]==="|",method:n[3],params:n[4]?e.map(n[4].split(", "),U):t})})}},_multiValidate:function(i,n){var r=this,o=r.options;r.hasError=false;if(o.ignore){i=i.not(o.ignore)}i.each(function(){r._validate(this);if(r.hasError&&o.stopOnError){return false}});if(n){r.validating=true;e.when.apply(null,e.map(r.deferred,function(e){return e})).done(function(){n.call(r,!r.hasError);r.validating=false})}return!e.isEmptyObject(r.deferred)?t:!r.hasError},_submit:function(i){var n=this,r=n.options,o=i.target,s=i.type==="submit"&&!i.isDefaultPrevented();i.preventDefault();if(L&&~(L=false)||n.submiting||i.type==="validate"&&n.$el[0]!==o||R(r.beforeSubmit)&&r.beforeSubmit.call(n,o)===false){return}if(n.isAjaxSubmit===t){n._guessAjax(o)}n._debug("log","\n<<< event: "+i.type);n._reset();n.submiting=true;n._multiValidate(n.$el.find(b),function(t){var i=t||r.debug===2?"valid":"invalid",l;if(!t){if(r.focusInvalid){n.$el.find("["+d+"]:first").focus()}l=e.map(n.errors,function(e){return e})}n.submiting=false;n.isValid=t;R(r[i])&&r[i].call(n,o,l);n.$el.trigger(i+a,[o,l]);n._debug("log",">>> "+i);if(!t)return;if(n.vetoed){e(o).ajaxSubmit(n.ajaxFormOptions)}else if(s&&!n.isAjaxSubmit){document.createElement("form").submit.call(o)}})},_reset:function(e){var t=this;t.errors={};if(e){t.reseting=true;t.$el.find(b).each(function(){t._resetElement(this)});delete t.reseting}},_resetElement:function(e,t){this._setClass(e,null);this.hideMsg(e)},_focusin:function(e){var t=this,i=t.options,n=e.target,r,o;if(t.validating||e.type==="click"&&document.activeElement===n){return}if(i.focusCleanup){if(O(n,d)==="true"){t._setClass(n,null);t.hideMsg(n)}}o=O(n,f);if(o){t.showMsg(n,{type:"tip",msg:o})}else{if(O(n,c)){t._parse(n)}if(r=O(n,p)){if(r===8||r===9){t._focusout(e)}}}},_focusout:function(t){var i=this,n=i.options,r=t.target,o=t.type,a,s=o==="focusin",l=o==="validate",d,c,u,f,h,p,m,g,v=0;if(o==="compositionstart"){i.pauseValidate=true}if(o==="compositionend"){i.pauseValidate=false}if(i.pauseValidate){return}d=r.name&&G(r)?i.$el.find('input[name="'+r.name+'"]').get(0):r;if(!(c=i.getField(d))||!c.rule){return}a=c._e;c._e=o;g=c.timely;if(!l){if(!g||G(r)&&o!=="click"){return}f=c.getValue();if(c.ignoreBlank&&!f&&!s){i.hideMsg(r);return}if(o==="focusout"){if(a==="change"){return}if(g===2||g===8){u=c.old;if(f&&u){if(c.isValid&&!u.showOk){i.hideMsg(r)}else{i._makeMsg(r,c,u)}}else{return}}}else{if(g<2&&!t.data){return}h=+new Date;if(h-(r._ts||0)<100){return}r._ts=h;if(o==="keyup"){if(a==="input"){return}p=t.keyCode;m={8:1,9:1,16:1,32:1,46:1};if(p===9&&!f){return}if(p<48&&!m[p]){return}}if(!s){v=g<100?o==="click"||r.tagName==="SELECT"?0:400:g}}}if(n.ignore&&e(r).is(n.ignore)){return}clearTimeout(c._t);if(v){c._t=setTimeout(function(){i._validate(r,c)},v)}else{if(l)c.old={};i._validate(r,c)}},_setClass:function(t,i){var n=e(t),r=this.options;if(r.bindClassTo){n=n.closest(r.bindClassTo)}n.removeClass(r.invalidClass+" "+r.validClass);if(i!==null){n.addClass(i?r.validClass:r.invalidClass)}},_showmsg:function(e,t,i){var n=this,r=e.target;if(n.$el.is(r)){if(I(t)){n.showMsg(t)}else if(t==="tip"){n.$el.find(b+"["+f+"]",r).each(function(){n.showMsg(this,{type:t,msg:i})})}}else{n.showMsg(r,{type:t,msg:i})}},_hidemsg:function(t){var i=e(t.target);if(i.is(b)){this.hideMsg(i)}},_validatedField:function(t,i,n){var r=this,a=r.options,s=i.isValid=n.isValid=!!n.isValid,l=s?"valid":"invalid";n.key=i.key;n.ruleName=i._r;n.id=t.id;n.value=i.value;r.elements[i.key]=n.element=t;r.isValid=r.$el[0].isValid=s?r.isFormValid():s;if(s){n.type="ok"}else{if(r.submiting){r.errors[i.key]=n.msg}r.hasError=true}i.old=n;R(i[l])&&i[l].call(r,t,n);R(a.validation)&&a.validation.call(r,t,n);e(t).attr(d,s?null:true).trigger(l+o,[n,r]);r.$el.triggerHandler("validation",[n,r]);if(r.checkOnly)return;r._setClass(t,n.skip||n.type==="tip"?null:s);r._makeMsg.apply(r,arguments)},_makeMsg:function(t,i,n){if(i.msgMaker){n=e.extend({},n);if(i._e==="focusin"){n.type="tip"}this[n.showOk||n.msg||n.type==="tip"?"showMsg":"hideMsg"](t,n,i)}},_validatedRule:function(i,n,o,a){n=n||s.getField(i);a=a||{};var s=this,l,d,c=n._r,u=n.timely,f=u===9||u===8,p,m,g=false;if(o===null){s._validatedField(i,n,{isValid:true,skip:true});n._i=0;return}else if(o===t){p=true}else if(o===true||o===""){g=true}else if(A(o)){l=o}else if(I(o)){if(o.error){l=o.error}else{l=o.ok;g=true}}d=n._rules[n._i];if(d.not){l=t;g=c==="required"||!g}if(d.or){if(g){while(n._i<n._rules.length&&n._rules[n._i].or){n._i++}}else{p=true}}else if(d.and){if(!n.isValid)p=true}if(p){g=true}else{if(g){if(n.showOk!==false){m=O(i,h);l=m===null?A(n.ok)?n.ok:l:m;if(!A(l)&&A(n.showOk)){l=n.showOk}if(A(l)){a.showOk=g}}}if(!g||f){l=(Y(i,n,l||d.msg||s.messages[c])||s.messages.fallback).replace(/\{0\|?([^\}]*)\}/,function(e,t){return s._getDisplay(i,n.display)||t||s.messages[0]})}if(!g)n.isValid=g;a.msg=l;e(i).trigger((g?"valid":"invalid")+r,[c,l])}if(f&&(!p||d.and)){if(!g&&!n._m)n._m=l;n._v=n._v||[];n._v.push({type:g?!p?"ok":"tip":"error",msg:l||d.msg})}s._debug("log","   "+n._i+": "+c+" => "+(g||l));if((g||f)&&n._i<n._rules.length-1){n._i++;s._checkRule(i,n)}else{n._i=0;if(f){a.isValid=n.isValid;a.result=n._v;a.msg=n._m||"";if(!n.value&&n._e==="focusin"){a.type="tip"}}else{a.isValid=g}s._validatedField(i,n,a);delete n._m;delete n._v}},_checkRule:function(i,n){var r=this,o,a,s,l=n.key,d=n._rules[n._i],c=d.method,u=d.params;if(r.submiting&&r.deferred[l]){return}s=n.old;n._r=c;if(s&&!n.must&&!d.must&&d.result!==t&&s.ruleName===c&&s.id===i.id&&n.value&&s.value===n.value){o=d.result}else{a=V(i,c)||r.rules[c]||k;o=a.call(n,i,u,n);if(a.msg)d.msg=a.msg}if(I(o)&&R(o.then)){r.deferred[l]=o;n.isValid=t;!r.checkOnly&&r.showMsg(i,{type:"loading",msg:r.messages.loading},n);o.then(function(o,a,s){var l=U(s.responseText),c,u=n.dataFilter;if(/jsonp?/.test(this.dataType)){l=o}else if(l.charAt(0)==="{"){l=e.parseJSON(l)}c=u.call(this,l,n);if(c===t)c=u.call(this,l.data,n);d.data=this.data;d.result=n.old?c:t;r._validatedRule(i,n,c)},function(e,t){r._validatedRule(i,n,r.messages[t]||t)}).always(function(){delete r.deferred[l]})}else{r._validatedRule(i,n,o)}},_validate:function(e,t){var i=this;if(e.disabled||O(e,y)!==null){return}t=t||i.getField(e);if(!t)return;if(!t._rules)i._parse(e);if(!t._rules)return;i._debug("info",t.key);t.isValid=true;t.element=e;t.value=t.getValue();if(!t.required&&!t.must&&!t.value){if(!G(e)){i._validatedField(e,t,{isValid:true});return true}}i._checkRule(e,t);return t.isValid},_debug:function(e,t){if(window.console&&this.options.debug){console[e](t)}},test:function(e,i){var n=this,r,o=x.exec(i),a,s,l;if(o){s=o[1];if(s in n.rules){l=o[2]||o[3];l=l?l.split(", "):t;a=n.getField(e,true);a._r=s;a.value=a.getValue();r=n.rules[s].call(a,e,l)}}return r===true||r===t||r===null},_getDisplay:function(e,t){return!A(t)?R(t)?t.call(this,e):"":t},_getMsgOpt:function(t,i){var n=i?i:this.options;return e.extend({type:"error",pos:X(n.msgClass),target:n.target,wrapper:n.msgWrapper,style:n.msgStyle,cls:n.msgClass,arrow:n.msgArrow,icon:n.msgIcon},A(t)?{msg:t}:t)},_getMsgDOM:function(i,n){var r=e(i),o,a,s,d;if(r.is(b)){s=n.target||O(i,m);if(s){s=!R(s)?s.charAt(0)==="#"?e(s):this.$el.find(s):s.call(this,i);if(s.length){if(s.is(b)){r=s;i=s.get(0)}else if(s.hasClass(l)){o=s}else{d=s}}}if(!o){a=(!G(i)||!i.name)&&i.id?i.id:i.name;o=(d||this.$el).find(n.wrapper+"."+l+'[for="'+a+'"]')}}else{o=r}if(!n.hide&&!o.length){o=e("<"+n.wrapper+">").attr({class:l+(n.cls?" "+n.cls:""),style:n.style||t,for:a});if(G(i)){var c=r.parent();o.appendTo(c.is("label")?c.parent():c)}else{if(d){o.appendTo(d)}else{o[!n.pos||n.pos==="right"?"insertAfter":"insertBefore"](r)}}}return o},showMsg:function(t,i,n){if(!t)return;var r=this,o=r.options,a,s,l,d;if(I(t)&&!t.jquery&&!i){e.each(t,function(e,t){var i=r.elements[e]||r.$el.find(Q(e))[0];r.showMsg(i,t)});return}if(e(t).is(b)){n=n||r.getField(t)}if(!(s=(n||o).msgMaker)){return}i=r._getMsgOpt(i,n);t=(t.name&&G(t)?r.$el.find('input[name="'+t.name+'"]'):e(t)).get(0);if(!i.msg&&i.type!=="error"){l=O(t,"data-"+i.type);if(l!==null)i.msg=l}if(!A(i.msg)){return}d=r._getMsgDOM(t,i);!T.test(d[0].className)&&d.addClass(i.cls);if(D===6&&i.pos==="bottom"){d[0].style.marginTop=e(t).outerHeight()+"px"}d.html(s.call(r,i))[0].style.display="";if(R(a=n&&n.msgShow||o.msgShow)){a.call(r,d,i.type)}},hideMsg:function(t,i,n){var r=this,o=r.options,a,s;t=e(t).get(0);if(e(t).is(b)){n=n||r.getField(t);if(n){if(n.isValid||r.reseting)O(t,d,null)}}i=r._getMsgOpt(i,n);i.hide=true;s=r._getMsgDOM(t,i);if(!s.length)return;if(R(a=n&&n.msgHide||o.msgHide)){a.call(r,s,i.type)}else{s[0].style.display="none";s[0].innerHTML=null}},getField:function(e,i){var n=this,r,o;if(A(e)){r=e;e=t}else{if(O(e,c)){return n._parse(e)}if(e.id&&"#"+e.id in n.fields||!e.name){r="#"+e.id}else{r=e.name}}if((o=n.fields[r])||i&&(o=new n.Field(r))){o.element=e}return o},setField:function(e,t){var i={};if(!e)return;if(A(e)){i[e]=t}else{i=e}this._initFields(i)},isFormValid:function(){var e=this.fields,t,i;for(t in e){i=e[t];if(!i._rules||!i.required&&!i.must&&!i.value)continue;if(!i.isValid)return false}return true},holdSubmit:function(e){this.submiting=e===t||e},cleanUp:function(){this._reset(1)},destroy:function(){this._reset(1);this.$el.off(n).removeData(i);O(this.$el[0],y,this._NOVALIDATE)}};function $(t){function i(){var t=this.options;for(var i in t){if(i in P)this[i]=t[i]}e.extend(this,{_valHook:function(){return this.element.contentEditable==="true"?"text":"val"},getValue:function(){var t=this.element;if(t.type==="number"&&t.validity&&t.validity.badInput){return"NaN"}return e(t)[this._valHook()]()},setValue:function(t){e(this.element)[this._valHook()](this.value=t)},getRangeMsg:function(e,t,i){if(!t)return;var n=this,r=n.messages[n._r]||"",o,a=t[0].split("~"),s=t[1]==="false",l=a[0],d=a[1],c="rg",u=[""],f=U(e)&&+e===+e;function h(e,t){return!s?e>=t:e>t}if(a.length===2){if(l&&d){if(f&&h(e,+l)&&h(+d,e)){o=true}u=u.concat(a);c=s?"gtlt":"rg"}else if(l&&!d){if(f&&h(e,+l)){o=true}u.push(l);c=s?"gt":"gte"}else if(!l&&d){if(f&&h(+d,e)){o=true}u.push(d);c=s?"lt":"lte"}}else{if(e===+l){o=true}u.push(l);c="eq"}if(r){if(i&&r[c+i]){c+=i}u[0]=r[c]}return o||n._rules&&(n._rules[n._i].msg=n.renderMsg.apply(null,u))},renderMsg:function(){var e=arguments,t=e[0],i=e.length;if(!t)return;while(--i){t=t.replace("{"+i+"}",e[i])}return t}})}function n(i,n,r){this.key=i;this.validator=t;e.extend(this,r,n)}i.prototype=t;n.prototype=new i;return n}function j(e,t){if(!I(e))return;var i,n=t?t===true?this:t:j.prototype;for(i in e){if(Z(i))n[i]=z(e[i])}}function q(e,t){if(!I(e))return;var i,n=t?t===true?this:t:q.prototype;for(i in e){n[i]=e[i]}}function z(t){switch(e.type(t)){case"function":return t;case"array":var i=function(){return t[0].test(this.value)||t[1]||false};i.msg=t[1];return i;case"regexp":return function(){return t.test(this.value)}}}function W(t){var n,r,o;if(!t||!t.tagName)return;switch(t.tagName){case"INPUT":case"SELECT":case"TEXTAREA":case"BUTTON":case"FIELDSET":n=t.form||e(t).closest("."+s);break;case"FORM":n=t;break;default:n=e(t).closest("."+s)}for(r in B){if(e(n).is(r)){o=B[r];break}}return e(n).data(i)||e(n)[i](o).data(i)}function V(e,t){var i=U(O(e,c+"-"+t));if(i&&(i=new Function("return "+i)())){return z(i)}}function Y(e,t,i){var n=t.msg,r=t._r;if(I(n))n=n[r];if(!A(n)){n=O(e,u+"-"+r)||O(e,u)||(i?A(i)?i:i[r]:"")}return n}function X(e){var t;if(e)t=T.exec(e);return t&&t[0]}function G(e){return e.tagName==="INPUT"&&e.type==="checkbox"||e.type==="radio"}function K(e){return Date.parse(e.replace(/\.|\-/g,"/"))}function Z(e){return/^\w+$/.test(e)}function Q(e){var t=e.charAt(0)==="#";e=e.replace(/([:.{(|)}/\[\]])/g,"\\$1");return t?e:'[name="'+e+'"]:first'}e(window).on("beforeunload",function(){this.focus()});e(document).on("click",":submit",function(){var e=this,t;if(!e.form)return;t=e.getAttributeNode("formnovalidate");if(t&&t.nodeValue!==null||O(e,y)!==null){L=true}}).on("focusin submit validate","form,."+s,function(t){if(O(this,y)!==null)return;var r=e(this),o;if(!r.data(i)&&(o=W(this))){if(!e.isEmptyObject(o.fields)){if(t.type==="focusin"){o._focusin(t)}else{o._submit(t)}}else{O(this,y,y);r.off(n).removeData(i)}}});new q({fallback:"This field is not valid.",loading:"Validating..."});new j({required:function(t,i){var n=this,r=U(n.value),o=true;if(i){if(i.length===1){if(!Z(i[0])){if(!r&&!e(i[0],n.$el).length){return null}}else if(n.rules[i[0]]){if(!r&&!n.test(t,i[0])){return null}}}else if(i[0]==="not"){e.each(i.slice(1),function(){return o=r!==U(this)})}else if(i[0]==="from"){var a=n.$el.find(i[1]),s="_validated_",l;o=a.filter(function(){var e=n.getField(this);return e&&!!U(e.getValue())}).length>=(i[2]||1);if(o){if(!r)l=null}else{l=Y(a[0],n)||false}if(!e(t).data(s)){a.data(s,1).each(function(){if(t!==this){n._validate(this)}}).removeData(s)}return l}}return o&&!!r},integer:function(e,t){var i,n="0|",r="[1-9]\\d*",o=t?t[0]:"*";switch(o){case"+":i=r;break;case"-":i="-"+r;break;case"+0":i=n+r;break;case"-0":i=n+"-"+r;break;default:i=n+"-?"+r}i="^(?:"+i+")$";return new RegExp(i).test(this.value)||this.messages.integer[o]},match:function(t,i){if(!i)return;var r=this,a,s,l,d,c="eq",u,f,h,p;if(i.length===1){l=i[0]}else{c=i[0];l=i[1]}f=Q(l);h=r.$el.find(f)[0];if(!h)return;p=r.getField(h);a=r.value;s=p.getValue();if(!r._match){r.$el.on("valid"+o+n,f,function(){e(t).trigger("validate")});r._match=p._match=1}if(!r.required&&a===""&&s===""){return null}u=i[2];if(u){if(/^date(time)?$/i.test(u)){a=K(a);s=K(s)}else if(u==="time"){a=+a.replace(/:/g,"");s=+s.replace(/:/g,"")}}if(c!=="eq"&&!isNaN(+a)&&isNaN(+s)){return true}d=r.messages.match[c].replace("{1}",r._getDisplay(t,p.display||l));switch(c){case"lt":return+a<+s||d;case"lte":return+a<=+s||d;case"gte":return+a>=+s||d;case"gt":return+a>+s||d;case"neq":return a!==s||d;default:return a===s||d}},range:function(e,t){return this.getRangeMsg(this.value,t)},checked:function(e,t){if(!G(e))return;var i=this,n,r;if(e.name){r=i.$el.find('input[name="'+e.name+'"]').filter(function(){var e=this;if(!n&&G(e))n=e;return!e.disabled&&e.checked}).length}else{n=e;r=n.checked}if(t){return i.getRangeMsg(r,t)}else{return!!r||Y(n,i,"")||i.messages.required}},length:function(e,t){var i=this.value,n=(t[1]==="true"?i.replace(_,"xx"):i).length;return this.getRangeMsg(n,t,t[1]?"_2":"")},remote:function(t,i){if(!i)return;var n=this,r=E.exec(i[0]),o=n._rules[n._i],a={},s="",l=r[3],d=r[2]||"POST",c=(r[1]||"").toLowerCase(),u;o.must=true;a[t.name]=n.value;if(i[1]){e.map(i.slice(1),function(e){var t,i;if(~e.indexOf("=")){s+="&"+e}else{t=e.split(":");e=U(t[0]);i=U(t[1])||e;a[e]=n.$el.find(Q(i)).val()}})}a=e.param(a)+s;if(!n.must&&o.data&&o.data===a){return o.result}if(c!=="cors"&&/^https?:/.test(l)&&!~l.indexOf(location.host)){u="jsonp"}return e.ajax({url:l,type:d,data:a,dataType:u})},filter:function(e,t){var i=this.value,n=i.replace(t?new RegExp("["+t[0]+"]","gm"):S,"");if(n!==i)this.setValue(n)}});H.config=function(t,i){if(I(t)){e.each(t,n)}else if(A(t)){n(t,i)}function n(e,t){if(e==="rules"){new j(t)}else if(e==="messages"){new q(t)}else if(e in P){P[e]=t}else{M[e]=t}}};H.setTheme=function(t,i){if(I(t)){e.extend(true,F,t)}else if(A(t)&&I(i)){F[t]=e.extend(F[t],i)}};H.load=function(t){if(!t)return;var i=document,n={},r=i.scripts[0],o,a,s;t.replace(/([^?=&]+)=([^&#]*)/g,function(e,t,i){n[t]=i});o=n.dir||H.dir;if(!H.css&&n.css!==""){a=i.createElement("link");a.rel="stylesheet";a.href=H.css=o+"jquery.validator.css";r.parentNode.insertBefore(a,r)}if(!H.local&&~t.indexOf("local")&&n.local!==""){H.local=(n.local||i.documentElement.lang||"en").replace("_","-");H.pending=1;a=i.createElement("script");a.src=o+"local/"+H.local+".js";s="onload"in a?"onload":"onreadystatechange";a[s]=function(){if(!a.readyState||/loaded|complete/.test(a.readyState)){a=a[s]=null;delete H.pending;e(window).triggerHandler("validatorready")}};r.parentNode.insertBefore(a,r)}};(function(){var e=document.scripts,t=e.length,i,n,r=/(.*validator(?:\.min)?.js)(\?.*(?:local|css|dir)(?:=[\w\-]*)?)?/;while(t--&&!n){i=e[t];n=(i.hasAttribute?i.src:i.getAttribute("src",4)||"").match(r)}if(!n)return;H.dir=n[1].split("/").slice(0,-1).join("/")+"/";H.load(n[2])})();return e[i]=H});(function(e){typeof module==="object"&&module.exports?module.exports=e(require("jquery")):typeof define==="function"&&define.amd?define("validator-lang",["jquery"],e):e(jQuery)})(function(e){e.validator.config({rules:{digits:[/^\d+$/,""],letters:[/^[a-z]+$/i,""],date:[/^\d{4}-\d{2}-\d{2}$/,":yyyy-mm-dd"],time:[/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/,"00:0023:59"],email:[/^[\w\+\-]+(\.[\w\+\-]+)*@[a-z\d\-]+(\.[a-z\d\-]+)*\.([a-z]{2,4})$/i,""],url:[/^(https?|s?ftp):\/\/\S+$/i,""],qq:[/^[1-9]\d{4,}$/,"QQ"],IDcard:[/^\d{6}(19|2\d)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)?$/,""],tel:[/^(?:(?:0\d{2,3}[\- ]?[1-9]\d{6,7})|(?:[48]00[\- ]?[1-9]\d{6}))$/,""],mobile:[/^1[3-9]\d{9}$/,""],zipcode:[/^\d{6}$/,""],chinese:[/^[\u0391-\uFFE5]+$/,""],username:[/^\w{3,12}$/,"3-12"],password:[/^[\S]{6,16}$/,"6-16"],accept:function(t,i){if(!i)return true;var n=i[0],r=e(t).val();return n==="*"||new RegExp(".(?:"+n+")$","i").test(r)||this.renderMsg("{1}",n.replace(/\|/g,","))}},messages:{0:"",fallback:"{0}",loading:"...",error:"",timeout:"",required:"{0}",remote:"{0}",integer:{"*":"","+":"","+0":"0","-":"","-0":"0"},match:{eq:"{0}{1}",neq:"{0}{1}",lt:"{0}{1}",gt:"{0}{1}",lte:"{0}{1}",gte:"{0}{1}"},range:{rg:"{1}{2}",gte:"{1}",lte:"{1}",gtlt:"{1}{2}",gt:"{1}",lt:"{1}"},checked:{eq:"{1}",rg:"{1}{2}",gte:"{1}",lte:"{1}"},length:{eq:"{1}",rg:"{1}{2}",gte:"{1}",lte:"{1}",eq_2:"",rg_2:"",gte_2:"",lte_2:""}}});var t='<span class="n-arrow"><b></b><i></i></span>';e.validator.setTheme({simple_right:{formClass:"n-simple",msgClass:"n-right"},simple_bottom:{formClass:"n-simple",msgClass:"n-bottom"},yellow_top:{formClass:"n-yellow",msgClass:"n-top",msgArrow:t},yellow_right:{formClass:"n-yellow",msgClass:"n-right",msgArrow:t},yellow_right_effect:{formClass:"n-yellow",msgClass:"n-right",msgArrow:t,msgShow:function(e,t){var i=e.children();if(i.is(":animated"))return;if(t==="error"){i.css({left:"20px",opacity:0}).delay(100).show().stop().animate({left:"-4px",opacity:1},150).animate({left:"3px"},80).animate({left:0},80)}else{i.css({left:0,opacity:1}).fadeIn(200)}},msgHide:function(e,t){var i=e.children();i.stop().delay(100).show().animate({left:"20px",opacity:0},300,function(){e.hide()})}}})});define("validator",["validator-core","validator-lang"],function(e,t){return e});define("form",["jquery","bootstrap","upload","validator"],function(e,t,i,n){var r={config:{},events:{validator:function(t,i,n,o){t.validator(e.extend({validClass:"has-success",invalidClass:"has-error",bindClassTo:".form-group",formClass:"n-default n-bootstrap",msgClass:"n-right",stopOnError:true,display:function(t){return e(t).closest(".form-group").find(".control-label").text().replace(/\:/,"")},target:function(t){var i=e(t).closest(".form-group"),n=i.find("span.msg-box");if(!n.length){return[]}return n},valid:function(t){r.api.submit(e(t),function(t,n){if(typeof i==="function"){if(!i.call(e(this),t,n)){return false}}var r=n.hasOwnProperty("msg")&&n.msg!==""?n.msg:__("Operation completed");parent.Toastr.success(r);parent.$(".btn-refresh").trigger("click");var o=parent.Layer.getFrameIndex(window.name);parent.Layer.close(o)},n,o);return false}},t.data("validator-options")||{}));e(".layer-footer .btn.disabled",t).removeClass("disabled")},selectpicker:function(t){if(e(".selectpicker",t).size()>0){require(["bootstrap-select","bootstrap-select-lang"],function(){e(".selectpicker",t).selectpicker()})}},selectpage:function(t){if(e(".selectpage",t).size()>0){require(["selectpage"],function(){e(".selectpage",t).selectPage({source:"ajax/selectpage"})});e(t).on("change",".selectpage-input-hidden",function(){e(this).trigger("validate")})}},cxselect:function(t){if(e("[data-toggle='cxselect']",t).size()>0){require(["cxselect"],function(){e.cxSelect.defaults.jsonName="name";e.cxSelect.defaults.jsonValue="value";e.cxSelect.defaults.jsonSpace="data";e("[data-toggle='cxselect']",t).cxSelect()})}},citypicker:function(t){if(e("[data-toggle='city-picker']",t).size()>0){require(["citypicker"],function(){})}},datetimepicker:function(t){if(e(".datetimepicker",t).size()>0){require(["bootstrap-datetimepicker"],function(){var i={format:"YYYY-MM-DD HH:mm:ss",icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"fa fa-chevron-left",next:"fa fa-chevron-right",today:"fa fa-history",clear:"fa fa-trash",close:"fa fa-remove"},showTodayButton:true,showClose:true};e(".datetimepicker",t).parent().css("position","relative");e(".datetimepicker",t).datetimepicker(i)})}},plupload:function(t){if(e(".plupload",t).size()>0){i.api.plupload()}},faselect:function(t){if(e(".fachoose",t).size()>0){e(document).on("click",".fachoose",function(){var t=this;var i=e(this).data("multiple")?e(this).data("multiple"):false;var n=e(this).data("mimetype")?e(this).data("mimetype"):"";parent.Fast.api.open("general/attachment/select?element_id="+e(this).attr("id")+"&multiple="+i+"&mimetype="+n,__("Choose"),{callback:function(i){var n=e("#"+e(t).attr("id")).data("input-id");if(i.multiple){var r=[];var o=e("#"+n);if(o.val()!==""){r.push(o.val())}r.push(i.url);o.val(r.join(",")).trigger("change")}else{e("#"+n).val(i.url).trigger("change")}}});return false})}},bindevent:function(e){}},api:{submit:function(t,i,n,r){if(t.size()===0)return Toastr.error(",");if(typeof r==="function"){if(!r.call(t)){return false}}var o=t.attr("method").toUpperCase();o=o&&(o==="GET"||o==="POST")?o:"GET";url=t.attr("action");url=url?url:location.href;Fast.api.ajax({type:o,url:url,data:t.serialize(),dataType:"json"},function(n,r){e(".form-group",t).removeClass("has-feedback has-success has-error");if(n&&typeof n==="object"&&typeof n.token!=="undefined"){e("input[name='__token__']",t).val(n.token)}if(typeof i==="function"){if(!i.call(t,n,r)){return false}}},function(i,r){if(i&&typeof i==="object"&&typeof i.token!=="undefined"){e("input[name='__token__']",t).val(i.token)}if(typeof n==="function"){if(!n.call(t,i,r)){return false}}});return false},bindevent:function(t,i,n,o){t=typeof t==="object"?t:e(t);var a=r.events;a.bindevent(t);a.validator(t,i,n,o);a.selectpicker(t);a.selectpage(t);a.cxselect(t);a.citypicker(t);a.datetimepicker(t);a.plupload(t);a.faselect(t)},custom:{}}};return r});(function(e){e.fn.dragsort=function(t){if(t=="destroy"){e(this.selector).trigger("dragsort-uninit");return}var i=e.extend({},e.fn.dragsort.defaults,t);var n=[];var r=null,o=null;this.each(function(t,a){if(e(a).is("table")&&e(a).children().size()==1&&e(a).children().is("tbody"))a=e(a).children().get(0);var s={draggedItem:null,placeHolderItem:null,pos:null,offset:null,offsetLimit:null,scroll:null,container:a,init:function(){i.tagName=i.tagName==""?e(this.container).children().size()==0?"li":e(this.container).children().get(0).tagName.toLowerCase():i.tagName;if(i.itemSelector=="")i.itemSelector=i.tagName;if(i.dragSelector=="")i.dragSelector=i.tagName;if(i.placeHolderTemplate=="")i.placeHolderTemplate="<"+i.tagName+">&nbsp;</"+i.tagName+">";e(this.container).attr("data-listidx",t).mousedown(this.grabItem).bind("dragsort-uninit",this.uninit);this.styleDragHandlers(true)},uninit:function(){var t=n[e(this).attr("data-listidx")];e(t.container).unbind("mousedown",t.grabItem).unbind("dragsort-uninit");t.styleDragHandlers(false)},getItems:function(){return e(this.container).children(i.itemSelector)},styleDragHandlers:function(t){this.getItems().map(function(){return e(this).is(i.dragSelector)?this:e(this).find(i.dragSelector).get()}).css("cursor",t?"pointer":"")},grabItem:function(t){var r=n[e(this).attr("data-listidx")];var o=e(t.target).closest("[data-listidx] > "+i.tagName).get(0);var a=r.getItems().filter(function(){return this==o}).size()>0;if(t.which!=1||e(t.target).is(i.dragSelectorExclude)||e(t.target).closest(i.dragSelectorExclude).size()>0||!a)return;var s=t.target;while(!e(s).is(i.dragSelector)){if(s==this)return;s=s.parentNode}e(s).attr("data-cursor",e(s).css("cursor"));e(s).css("cursor","move");var l=this;var d=function(){r.dragStart.call(l,t);e(r.container).unbind("mousemove",d)};e(r.container).mousemove(d).mouseup(function(){e(r.container).unbind("mousemove",d);e(s).css("cursor",e(s).attr("data-cursor"))})},dragStart:function(t){if(r!=null&&r.draggedItem!=null)r.dropItem();r=n[e(this).attr("data-listidx")];r.draggedItem=e(t.target).closest("[data-listidx] > "+i.tagName);r.draggedItem.attr("data-origpos",e(this).attr("data-listidx")+"-"+e(r.container).children().index(r.draggedItem));var o=parseInt(r.draggedItem.css("marginTop"));var a=parseInt(r.draggedItem.css("marginLeft"));r.offset=r.draggedItem.offset();r.offset.top=t.pageY-r.offset.top+(isNaN(o)?0:o)-1;r.offset.left=t.pageX-r.offset.left+(isNaN(a)?0:a)-1;if(!i.dragBetween){var s=e(r.container).outerHeight()==0?Math.max(1,Math.round(.5+r.getItems().size()*r.draggedItem.outerWidth()/e(r.container).outerWidth()))*r.draggedItem.outerHeight():e(r.container).outerHeight();r.offsetLimit=e(r.container).offset();r.offsetLimit.right=r.offsetLimit.left+e(r.container).outerWidth()-r.draggedItem.outerWidth();r.offsetLimit.bottom=r.offsetLimit.top+s-r.draggedItem.outerHeight()}var l=r.draggedItem.height();var d=r.draggedItem.width();if(i.tagName=="tr"){r.draggedItem.children().each(function(){e(this).width(e(this).width())});r.placeHolderItem=r.draggedItem.clone().attr("data-placeholder",true);r.draggedItem.after(r.placeHolderItem);r.placeHolderItem.children().each(function(){e(this).html("&nbsp;")})}else{r.draggedItem.after(i.placeHolderTemplate);r.placeHolderItem=r.draggedItem.next().css({height:l,width:d}).attr("data-placeholder",true)}if(i.tagName=="td"){var c=r.draggedItem.closest("table").get(0);e("<table id='"+c.id+"' style='border-width: 0px;' class='dragSortItem "+c.className+"'><tr></tr></table>").appendTo("body").children().append(r.draggedItem)}var u=r.draggedItem.attr("style");r.draggedItem.attr("data-origstyle",u?u:"");r.draggedItem.css({position:"absolute",opacity:.8,"z-index":999,height:l,width:d});r.scroll={moveX:0,moveY:0,maxX:e(document).width()-e(window).width(),maxY:e(document).height()-e(window).height()};r.scroll.scrollY=window.setInterval(function(){if(i.scrollContainer!=window){e(i.scrollContainer).scrollTop(e(i.scrollContainer).scrollTop()+r.scroll.moveY);return}var t=e(i.scrollContainer).scrollTop();if(r.scroll.moveY>0&&t<r.scroll.maxY||r.scroll.moveY<0&&t>0){e(i.scrollContainer).scrollTop(t+r.scroll.moveY);r.draggedItem.css("top",r.draggedItem.offset().top+r.scroll.moveY+1)}},10);r.scroll.scrollX=window.setInterval(function(){if(i.scrollContainer!=window){e(i.scrollContainer).scrollLeft(e(i.scrollContainer).scrollLeft()+r.scroll.moveX);return}var t=e(i.scrollContainer).scrollLeft();if(r.scroll.moveX>0&&t<r.scroll.maxX||r.scroll.moveX<0&&t>0){e(i.scrollContainer).scrollLeft(t+r.scroll.moveX);r.draggedItem.css("left",r.draggedItem.offset().left+r.scroll.moveX+1)}},10);e(n).each(function(e,t){t.createDropTargets();t.buildPositionTable()});r.setPos(t.pageX,t.pageY);e(document).bind("mousemove",r.swapItems);e(document).bind("mouseup",r.dropItem);if(i.scrollContainer!=window)e(window).bind("wheel",r.wheel)},setPos:function(t,n){var o=n-this.offset.top;var a=t-this.offset.left;if(!i.dragBetween){o=Math.min(this.offsetLimit.bottom,Math.max(o,this.offsetLimit.top));a=Math.min(this.offsetLimit.right,Math.max(a,this.offsetLimit.left))}var s=this.draggedItem.offsetParent().not("body").offset();if(s!=null){o-=s.top;a-=s.left}if(i.scrollContainer==window){n-=e(window).scrollTop();t-=e(window).scrollLeft();n=Math.max(0,n-e(window).height()+5)+Math.min(0,n-5);t=Math.max(0,t-e(window).width()+5)+Math.min(0,t-5)}else{var l=e(i.scrollContainer);var d=l.offset();n=Math.max(0,n-l.height()-d.top)+Math.min(0,n-d.top);t=Math.max(0,t-l.width()-d.left)+Math.min(0,t-d.left)}r.scroll.moveX=t==0?0:t*i.scrollSpeed/Math.abs(t);r.scroll.moveY=n==0?0:n*i.scrollSpeed/Math.abs(n);this.draggedItem.css({top:o,left:a})},wheel:function(t){if(r&&i.scrollContainer!=window){var n=e(i.scrollContainer);var o=n.offset();t=t.originalEvent;if(t.clientX>o.left&&t.clientX<o.left+n.width()&&t.clientY>o.top&&t.clientY<o.top+n.height()){var a=(t.deltaMode==0?1:10)*t.deltaY;n.scrollTop(n.scrollTop()+a);t.preventDefault()}}},buildPositionTable:function(){var t=[];this.getItems().not([r.draggedItem[0],r.placeHolderItem[0]]).each(function(i){var n=e(this).offset();n.right=n.left+e(this).outerWidth();n.bottom=n.top+e(this).outerHeight();n.elm=this;t[i]=n});this.pos=t},dropItem:function(){if(r.draggedItem==null)return;var t=r.draggedItem.attr("data-origstyle");r.draggedItem.attr("style",t);if(t=="")r.draggedItem.removeAttr("style");r.draggedItem.removeAttr("data-origstyle");r.styleDragHandlers(true);r.placeHolderItem.before(r.draggedItem);r.placeHolderItem.remove();e("[data-droptarget], .dragSortItem").remove();window.clearInterval(r.scroll.scrollY);window.clearInterval(r.scroll.scrollX);if(r.draggedItem.attr("data-origpos")!=e(n).index(r)+"-"+e(r.container).children().index(r.draggedItem))if(i.dragEnd.apply(r.draggedItem)==false){var o=r.draggedItem.attr("data-origpos").split("-");var a=e(n[o[0]].container).children().not(r.draggedItem).eq(o[1]);if(a.size()>0)a.before(r.draggedItem);else if(o[1]==0)e(n[o[0]].container).prepend(r.draggedItem);else e(n[o[0]].container).append(r.draggedItem)}r.draggedItem.removeAttr("data-origpos");r.draggedItem=null;e(document).unbind("mousemove",r.swapItems);e(document).unbind("mouseup",r.dropItem);if(i.scrollContainer!=window)e(window).unbind("wheel",r.wheel);return false},swapItems:function(t){if(r.draggedItem==null)return false;r.setPos(t.pageX,t.pageY);var a=r.findPos(t.pageX,t.pageY);var s=r;for(var l=0;a==-1&&i.dragBetween&&l<n.length;l++){a=n[l].findPos(t.pageX,t.pageY);s=n[l]}if(a==-1)return false;var d=function(){return e(s.container).children().not(s.draggedItem)};var c=d().not(i.itemSelector).each(function(e){this.idx=d().index(this)});if(o==null||o.top>r.draggedItem.offset().top||o.left>r.draggedItem.offset().left)e(s.pos[a].elm).before(r.placeHolderItem);else e(s.pos[a].elm).after(r.placeHolderItem);c.each(function(){var t=d().eq(this.idx).get(0);if(this!=t&&d().index(this)<this.idx)e(this).insertAfter(t);else if(this!=t)e(this).insertBefore(t)});e(n).each(function(e,t){t.createDropTargets();t.buildPositionTable()});o=r.draggedItem.offset();return false},findPos:function(e,t){for(var i=0;i<this.pos.length;i++){if(this.pos[i].left<e&&this.pos[i].right>e&&this.pos[i].top<t&&this.pos[i].bottom>t)return i}return-1},createDropTargets:function(){if(!i.dragBetween)return;e(n).each(function(){var t=e(this.container).find("[data-placeholder]");var n=e(this.container).find("[data-droptarget]");if(t.size()>0&&n.size()>0)n.remove();else if(t.size()==0&&n.size()==0){if(i.tagName=="td")e(i.placeHolderTemplate).attr("data-droptarget",true).appendTo(this.container);else e(this.container).append(r.placeHolderItem.removeAttr("data-placeholder").clone().attr("data-droptarget",true));r.placeHolderItem.attr("data-placeholder",true)}})}};s.init();n.push(s)});return this};e.fn.dragsort.defaults={tagName:"",itemSelector:"",dragSelector:"",dragSelectorExclude:"input, textarea",dragEnd:function(){},dragBetween:false,placeHolderTemplate:"",scrollContainer:window,scrollSpeed:5}})(jQuery);define("dragsort",function(){});(function(e){e.fn.drag=function(t,i,n){var r=typeof t=="string"?t:"",o=e.isFunction(t)?t:e.isFunction(i)?i:null;if(r.indexOf("drag")!==0){r="drag"+r}n=(t==o?i:n)||{};return o?this.bind(r,n,o):this.trigger(r)};var t=e.event,i=t.special,n=i.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",noBubble:true,add:function(t){var i=e.data(this,n.datakey),r=t.data||{};i.related+=1;e.each(n.defaults,function(e,t){if(r[e]!==undefined){i[e]=r[e]}})},remove:function(){e.data(this,n.datakey).related-=1},setup:function(){if(e.data(this,n.datakey)){return}var i=e.extend({related:0},n.defaults);e.data(this,n.datakey,i);t.add(this,"touchstart mousedown",n.init,i);if(this.attachEvent){this.attachEvent("ondragstart",n.dontstart)}},teardown:function(){var i=e.data(this,n.datakey)||{};if(i.related){return}e.removeData(this,n.datakey);t.remove(this,"touchstart mousedown",n.init);n.textselect(true);if(this.detachEvent){this.detachEvent("ondragstart",n.dontstart)}},init:function(r){if(n.touched){return}var o=r.data,a;if(r.which!=0&&o.which>0&&r.which!=o.which){return}if(e(r.target).is(o.not)){return}if(o.handle&&!e(r.target).closest(o.handle,r.currentTarget).length){return}n.touched=r.type=="touchstart"?this:null;o.propagates=1;o.mousedown=this;o.interactions=[n.interaction(this,o)];o.target=r.target;o.pageX=r.pageX;o.pageY=r.pageY;o.dragging=null;a=n.hijack(r,"draginit",o);if(!o.propagates){return}a=n.flatten(a);if(a&&a.length){o.interactions=[];e.each(a,function(){o.interactions.push(n.interaction(this,o))})}o.propagates=o.interactions.length;if(o.drop!==false&&i.drop){i.drop.handler(r,o)}n.textselect(false);if(n.touched){t.add(n.touched,"touchmove touchend",n.handler,o)}else{t.add(document,"mousemove mouseup",n.handler,o)}if(!n.touched||o.live){return false}},interaction:function(t,i){var r=e(t)[i.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new n.callback,droppable:[],offset:r}},handler:function(r){var o=r.data;switch(r.type){case!o.dragging&&"touchmove":r.preventDefault();case!o.dragging&&"mousemove":if(Math.pow(r.pageX-o.pageX,2)+Math.pow(r.pageY-o.pageY,2)<Math.pow(o.distance,2)){break}r.target=o.target;n.hijack(r,"dragstart",o);if(o.propagates){o.dragging=true}case"touchmove":r.preventDefault();case"mousemove":if(o.dragging){n.hijack(r,"drag",o);if(o.propagates){if(o.drop!==false&&i.drop){i.drop.handler(r,o)}break}r.type="mouseup"}case"touchend":case"mouseup":default:if(n.touched){t.remove(n.touched,"touchmove touchend",n.handler)}else{t.remove(document,"mousemove mouseup",n.handler)}if(o.dragging){if(o.drop!==false&&i.drop){i.drop.handler(r,o)}n.hijack(r,"dragend",o)}n.textselect(true);if(o.click===false&&o.dragging){e.data(o.mousedown,"suppress.click",(new Date).getTime()+5)}o.dragging=n.touched=false;break}},hijack:function(i,r,o,a,s){if(!o){return}var l={event:i.originalEvent,type:i.type},d=r.indexOf("drop")?"drag":"drop",c,u=a||0,f,h,p,m=!isNaN(a)?a:o.interactions.length;i.type=r;i.originalEvent=null;o.results=[];do{if(f=o.interactions[u]){if(r!=="dragend"&&f.cancelled){continue}p=n.properties(i,o,f);f.results=[];e(s||f[d]||o.droppable).each(function(a,s){p.target=s;i.isPropagationStopped=function(){return false};c=s?t.dispatch.call(s,i,p):null;if(c===false){if(d=="drag"){f.cancelled=true;o.propagates-=1}if(r=="drop"){f[d][a]=null}}else{if(r=="dropinit"){f.droppable.push(n.element(c)||s)}}if(r=="dragstart"){f.proxy=e(n.element(c)||f.drag)[0]}f.results.push(c);delete i.result;if(r!=="dropinit"){return c}});o.results[u]=n.flatten(f.results);if(r=="dropinit"){f.droppable=n.flatten(f.droppable)}if(r=="dragstart"&&!f.cancelled){p.update()}}}while(++u<m);i.type=l.type;i.originalEvent=l.event;return n.flatten(o.results)},properties:function(e,t,i){var r=i.callback;r.drag=i.drag;r.proxy=i.proxy||i.drag;r.startX=t.pageX;r.startY=t.pageY;r.deltaX=e.pageX-t.pageX;r.deltaY=e.pageY-t.pageY;r.originalX=i.offset.left;r.originalY=i.offset.top;r.offsetX=r.originalX+r.deltaX;r.offsetY=r.originalY+r.deltaY;r.drop=n.flatten((i.drop||[]).slice());r.available=n.flatten((i.droppable||[]).slice());return r},element:function(e){if(e&&(e.jquery||e.nodeType==1)){return e}},flatten:function(t){return e.map(t,function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?n.flatten(t):t})},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",n.dontstart).css("MozUserSelect",t?"":"none");document.unselectable=t?"off":"on"},dontstart:function(){return false},callback:function(){}};n.callback.prototype={update:function(){if(i.drop&&this.available.length){e.each(this.available,function(e){i.drop.locate(this,e)})}}};var r=t.dispatch;t.dispatch=function(t){if(e.data(this,"suppress."+t.type)-(new Date).getTime()>0){e.removeData(this,"suppress."+t.type);return}return r.apply(this,arguments)};var o=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,i){if(i){var n=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0]||null;if(n){e.each(o.props,function(e,i){t[i]=n[i]})}}return t}};i.draginit=i.dragstart=i.dragend=n})(jQuery);define("drag",function(){});(function(e){e.fn.drop=function(t,i,n){var r=typeof t=="string"?t:"",o=e.isFunction(t)?t:e.isFunction(i)?i:null;if(r.indexOf("drop")!==0){r="drop"+r}n=(t==o?i:n)||{};return o?this.bind(r,n,o):this.trigger(r)};e.drop=function(t){t=t||{};n.multi=t.multi===true?Infinity:t.multi===false?1:!isNaN(t.multi)?t.multi:n.multi;n.delay=t.delay||n.delay;n.tolerance=e.isFunction(t.tolerance)?t.tolerance:t.tolerance===null?null:n.tolerance;n.mode=t.mode||n.mode||"intersect"};var t=e.event,i=t.special,n=e.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:true,add:function(t){var i=e.data(this,n.datakey);i.related+=1},remove:function(){e.data(this,n.datakey).related-=1},setup:function(){if(e.data(this,n.datakey)){return}var t={related:0,active:[],anyactive:0,winner:0,location:{}};e.data(this,n.datakey,t);n.targets.push(this);return false},teardown:function(){var t=e.data(this,n.datakey)||{};if(t.related){return}e.removeData(this,n.datakey);var i=this;n.targets=e.grep(n.targets,function(e){return e!==i})},handler:function(t,r){var o,a;if(!r){return}switch(t.type){case"mousedown":case"touchstart":a=e(n.targets);if(typeof r.drop=="string"){a=a.filter(r.drop)}a.each(function(){var t=e.data(this,n.datakey);t.active=[];t.anyactive=0;t.winner=0});r.droppable=a;i.drag.hijack(t,"dropinit",r);break;case"mousemove":case"touchmove":n.event=t;if(!n.timer){n.tolerate(r)}break;case"mouseup":case"touchend":n.timer=clearTimeout(n.timer);if(r.propagates){i.drag.hijack(t,"drop",r);i.drag.hijack(t,"dropend",r)}break}},locate:function(t,i){var r=e.data(t,n.datakey),o=e(t),a=o.offset()||{},s=o.outerHeight(),l=o.outerWidth(),d={elem:t,width:l,height:s,top:a.top,left:a.left,right:a.left+l,bottom:a.top+s};if(r){r.location=d;r.index=i;r.elem=t}return d},contains:function(e,t){return(t[0]||t.left)>=e.left&&(t[0]||t.right)<=e.right&&(t[1]||t.top)>=e.top&&(t[1]||t.bottom)<=e.bottom},modes:{intersect:function(e,t,i){return this.contains(i,[e.pageX,e.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(e,t,i){return Math.max(0,Math.min(i.bottom,t.bottom)-Math.max(i.top,t.top))*Math.max(0,Math.min(i.right,t.right)-Math.max(i.left,t.left))},fit:function(e,t,i){return this.contains(i,t)?1:0},middle:function(e,t,i){return this.contains(i,[t.left+t.width*.5,t.top+t.height*.5])?1:0}},sort:function(e,t){return t.winner-e.winner||e.index-t.index},tolerate:function(t){var r,o,a,s,l,d,c,u=0,f,h=t.interactions.length,p=[n.event.pageX,n.event.pageY],m=n.tolerance||n.modes[n.mode];do{if(f=t.interactions[u]){if(!f){return}f.drop=[];l=[];d=f.droppable.length;if(m){a=n.locate(f.proxy)}r=0;do{if(c=f.droppable[r]){s=e.data(c,n.datakey);o=s.location;if(!o){continue}s.winner=m?m.call(n,n.event,a,o):n.contains(o,p)?1:0;l.push(s)}}while(++r<d);l.sort(n.sort);r=0;do{if(s=l[r]){if(s.winner&&f.drop.length<n.multi){if(!s.active[u]&&!s.anyactive){if(i.drag.hijack(n.event,"dropstart",t,u,s.elem)[0]!==false){s.active[u]=1;s.anyactive+=1}else{s.winner=0}}if(s.winner){f.drop.push(s.elem)}}else{if(s.active[u]&&s.anyactive==1){i.drag.hijack(n.event,"dropend",t,u,s.elem);s.active[u]=0;s.anyactive-=1}}}}while(++r<d)}}while(++u<h);if(n.last&&p[0]==n.last.pageX&&p[1]==n.last.pageY){delete n.timer}else{n.timer=setTimeout(function(){n.tolerate(t)},n.delay)}n.last=n.event}};i.dropinit=i.dropstart=i.dropend=n})(jQuery);define("drop",function(){});$.fn.addtabs=function(e){var t=$(this);e=$.extend({content:"",close:true,monitor:"body",nav:".nav-addtabs",tab:".tab-addtabs",iframeUse:true,iframeHeight:$(window).height()-50,callback:function(){}},e||{});var i=$(e.nav);var n=$(e.tab);if(history.pushState){$(window).on("popstate",function(t){var i=t.originalEvent.state;if(i){$("a[addtabs="+i.id+"]",e.monitor).data("pushstate",true).trigger("click")}})}$(e.monitor).on("click","[addtabs]",function(t){if($(this).attr("url").indexOf("javascript")!==0){if($(this).is("a")){t.preventDefault()}var i=$(this).attr("addtabs");var n=$(this).attr("title")?$(this).attr("title"):$.trim($(this).text());var r=$(this).attr("url");var o=e.content?e.content:$(this).attr("content");var a=$(this).attr("ajax")?true:false;var s={url:r,title:n,id:i,content:o,ajax:a};document.title=n;if(history.pushState&&!$(this).data("pushstate")){var l=r.indexOf("ref=addtabs")==-1?r+(r.indexOf("?")>-1?"&":"?")+"ref=addtabs":r;window.history.pushState(s,n,l)}$(this).data("pushstate",null);_add({id:i,title:$(this).attr("title")?$(this).attr("title"):$(this).html(),content:o,url:r,ajax:a})}});i.on("click",".close-tab",function(e){id=$(this).prev("a").attr("aria-controls");_close(id);return false});i.on("dblclick","li[role=presentation]",function(e){$(this).find(".close-tab").trigger("click")});i.on("click","li[role=presentation]",function(e){$("a[addtabs="+$("a",this).attr("node-id")+"]").trigger("click")});$(window).resize(function(){$("#nav").width($("#header > .navbar").width()-$(".sidebar-toggle").outerWidth()-$(".navbar-custom-menu").outerWidth()-20);_drop()});_add=function(t){id="tab_"+t.id;url=t.url;url+=t.url.indexOf("?")>-1?"&addtabs=1":"?addtabs=1";i.find("[role='presentation']").removeClass("active");n.find("[role='tabpanel']").removeClass("active");if($("#"+id).size()==0){title=$('<li role="presentation" id="tab_'+id+'"><a href="#'+id+'" node-id="'+t.id+'" aria-controls="'+id+'" role="tab" data-toggle="tab">'+t.title+"</a></li>");if(e.close&&$("li",i).size()>0){title.append(' <i class="close-tab fa fa-remove"></i>')}content=$('<div role="tabpanel" class="tab-pane" id="'+id+'"></div>');if(t.content){content.append(t.content)}else if(e.iframeUse&&!t.ajax){var r=e.iframeHeight;content.append('<iframe src="'+url+'" width="100%" height="'+r+'" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling-x="no" scrolling-y="auto" allowtransparency="yes"></iframe></div>')}else{$.get(url,function(e){content.append(e)})}if($(".tabdrop li").size()>0){$(".tabdrop ul").append(title)}else{i.append(title)}n.append(content)}$("#tab_"+id).addClass("active");$("#"+id).addClass("active");_drop()};_close=function(i){if(t.find("li.active").attr("id")=="tab_"+i){if($("#tab_"+i).prev().not(".tabdrop").size()>0){$("#tab_"+i).prev().not(".tabdrop").find("a").trigger("click")}else if($("#tab_"+i).next().size()>0){$("#tab_"+i).next().trigger("click")}}$("#tab_"+i).remove();$("#"+i).remove();_drop();e.callback()};_drop=function(){var e=$('<li class="dropdown pull-right hide tabdrop"><a class="dropdown-toggle" data-toggle="dropdown" href="javascript:;">'+'<i class="glyphicon glyphicon-align-justify"></i>'+' <b class="caret"></b></a><ul class="dropdown-menu"></ul></li>');if(!$(".tabdrop").html()){e.prependTo(i)}else{e=i.find(".tabdrop")}if(i.parent().is(".tabs-below")){e.addClass("dropup")}var t=0;var n=i.width()-60;var r=0;var o=i.append(e.find("li")).find(">li").not(".tabdrop");var a=o.size();o.each(function(o,s){r+=$(this).width();if(t==0&&o==a-1&&r<=i.width()){return true}if(r>n){e.find("ul").append($(this));t++}});if(t>0){e.removeClass("hide");if(e.find(".active").length==1){e.addClass("active")}else{e.removeClass("active")}}else{e.addClass("hide")}}};define("addtabs",function(){});(function(e){if(typeof define==="function"&&define.amd){define("selectpage",["jquery"],e)}else{e(jQuery)}})(function(e){"use strict";var t={dataKey:"selectPageObject",objStatusKey:"selectPage-self-mark",objStatusIndex:"selectPage-self-index"};e.fn.selectPage=function(t){var n=[];this.each(function(){n.push(new i(this,t))});return t!==undefined&&t.instance!==undefined&&t.instance?e(n):this};function i(i,n){var n=e.extend({},n,e(i).data());n=this._setCamelcaseToUnderscore(n);this._setOption(n);this._setLanguage();this._setCssClass();this._setProp();this._setElem(i,n);this._setButtonAttrDefault();this._setInitRecord();this._ehButton();this._ehComboInput();this._ehWhole();e(this.elem.container).data(t.dataKey,this)}e.extend(i.prototype,{_setOption:function(e){e=this._setOption1st(e);e=this._setOption2nd(e);this.option=e},_setOption1st:function(t){t=e.extend({lang:"cn",multiple:false,init_record:false,field:"name",and_or:"AND",per_page:10,primary_key:"id",bind_to:false,focus_drop_list:true,auto_select_first:false,auto_fill_result:false,no_result_clean:false,format_item:false,format_fill:false,select_only:true},t);e.each({data:"source",key_field:"primary_key",show_field:"field",init_code:"init_record",page_size:"per_page"},function(e,i){if(typeof t[e]!=="undefined"){t[i]=t[e];delete t[e]}});return t},_setOption2nd:function(e){e.search_field=e.search_field===undefined?e.field:e.search_field;e.and_or=e.and_or.toUpperCase();var t=["hide_field","show_field","search_field"];for(var i=0;i<t.length;i++){e[t[i]]=this._strToArray(e[t[i]])}e.order_by=e.order_by===undefined?e.search_field:e.order_by;e.order_by=this._setOrderbyOption(e.order_by,e.field);return e},_setCamelcaseToUnderscore:function(t){e.each(t,function(e,i){var n=e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();if(n!==e){t[n]=i;delete t[e]}});return t},_strToArray:function(e){if(!e)return"";return e.replace(/[\s]+/g,"").split(",")},_setOrderbyOption:function(t,i){var n=[],r=[];if(typeof t=="object"){for(var o=0;o<t.length;o++){r=e.trim(t[o]).split(" ");n[o]=r.length==2?r:[r[0],"ASC"]}}else{r=e.trim(t).split(" ");n[0]=r.length==2?r:r[0].match(/^(ASC|DESC)$/i)?[i,r[0]]:[r[0],"ASC"]}return n},_setLanguage:function(){var e;switch(this.option.lang){case"en":e={add_btn:"Add button",add_title:"add a box",del_btn:"Del button",del_title:"delete a box",next:"Next",next_title:"Next"+this.option.per_page+" (Right key)",prev:"Prev",prev_title:"Prev"+this.option.per_page+" (Left key)",first_title:"First (Shift + Left key)",last_title:"Last (Shift + Right key)",get_all_btn:"Get All (Down key)",get_all_alt:"(button)",close_btn:"Close (Tab key)",close_alt:"(button)",loading:"loading...",loading_alt:"(loading)",page_info:"num_page_top - num_page_end of cnt_whole",select_ng:"Attention : Please choose from among the list.",select_ok:"OK : Correctly selected.",not_found:"not found",ajax_error:"An error occurred while connecting to server. (ajax-combobox)"};break;case"cn":e={add_btn:"",add_title:"",del_btn:"",del_title:"",next:"",next_title:""+this.option.per_page+" ()",prev:"",prev_title:""+this.option.per_page+" ()",first_title:" (Shift + )",last_title:" (Shift + )",get_all_btn:" ()",get_all_alt:"()",close_btn:" (Tab)",close_alt:"()",loading:"...",loading_alt:"()",page_info:"num_page_top - num_page_end ( cnt_whole)",select_ng:".",select_ok:"OK : .",not_found:"",ajax_error:""};break}this.message=e},_setCssClass:function(){var e={container:"sp_container",container_open:"sp_container_open",selected:"sp_selected",re_area:"sp_result_area",element_box:"sp_element_box",navi:"pagination",results:"sp_results",re_off:"sp_results_off",select:"sp_over",select_ok:"sp_select_ok",select_ng:"sp_select_ng",input_off:"sp_input_off",button:"sp_button",btn_on:"sp_btn_on",btn_out:"sp_btn_out",input:"sp_input"};this.css_class=e},_setProp:function(){this.prop={is_suggest:false,page_all:1,page_suggest:1,max_all:1,max_suggest:1,is_paging:false,is_loading:false,xhr:false,key_paging:false,key_select:false,prev_value:""};this.template={tag:{content:'<li class="selected_tag" itemvalue="#item_value#">#item_text#<span class="tag_close">&times;</span></li>',textKey:"#item_text#",valueKey:"#item_value#"}}},_setElem:function(t,i){var n=e(t).val();if(n&&!i.init_record){this.option.init_record=e.isArray(n)?n.join(","):n}var r={};var o=e(t).outerWidth();r.combo_input=e(t).attr({autocomplete:"off"}).addClass(this.css_class.input).wrap("<div>");r.container=e(r.combo_input).parent().addClass(this.css_class.container);r.button=e("<div>").addClass(this.css_class.button);r.img=e('<span class="bs-caret"><span class="caret"></span></span>');r.element_box=e("<ul>").addClass(this.css_class.element_box);r.result_area=e("<div>").addClass(this.css_class.re_area);r.navi=e("<ul>").addClass(this.css_class.navi).addClass("hide");r.results=e("<ul>").addClass(this.css_class.results);var a="_text";var s=e(r.combo_input).attr("id")!==undefined?e(r.combo_input).attr("id"):e(r.combo_input).attr("name");var l=e(r.combo_input).attr("name")!==undefined?e(r.combo_input).attr("name"):"selectPage";var d=l,c=s;if(l.match(/\]$/))l=l.replace(/\]?$/,a);else l+=a;if(s.match(/\]$/))s=s.replace(/\]?$/,a);else s+=a;if(e(r.combo_input).is("select")){r.hidden=e('<select class="hide" />').attr({name:d,id:c}).prop("multiple",e(r.combo_input).prop("multiple")).empty();var u=e('<input type="text" class="form-control" />').attr({name:l,id:s}).addClass(this.css_class.input);if(!i.source){var f=[];e("option",r.combo_input).each(function(t,i){f.push({id:t,name:e(this).text()})});this.option.source=f}e(r.combo_input).replaceWith(u);r.combo_input=u}else{r.hidden=e('<input type="hidden" class="hide" />').attr({name:d,id:c}).val("");e(r.combo_input).attr({name:l,id:s})}e(r.hidden).addClass("selectpage-input-hidden");e(r.container).append(r.button).append(r.result_area).append(r.hidden);e(r.button).append(r.img);e(r.result_area).append(r.results).append(r.navi);if(i.multiple){e(r.container).addClass("sp_container_combo");e(r.combo_input).addClass("sp_combo_input").before(e(r.element_box));var h=e("<li>").addClass("input_box");e(h).append(e(r.combo_input));e(r.element_box).append(e(h));if(e(r.combo_input).attr("placeholder"))e(r.combo_input).attr("placeholder_bak",e(r.combo_input).attr("placeholder"))}if(e(r.container).parent().hasClass("input-group")){e(r.container).height(e(r.container).parent().height())}this.elem=r},_setButtonAttrDefault:function(){if(this.option.select_only){if(e(this.elem.combo_input).val()!==""){if(e(this.elem.hidden).val()){e(this.elem.combo_input).prop("title",this.message.select_ok).removeClass(this.css_class.select_ng).addClass(this.css_class.select_ok)}else{e(this.elem.combo_input).prop("title",this.message.select_ng).removeClass(this.css_class.select_ok).addClass(this.css_class.select_ng)}}else{e(this.elem.combo_input).prop("title","").removeClass(this.css_class.select_ng)}}e(this.elem.button).prop("title",this.message.get_all_btn)},_setInitRecord:function(){var t=this;if(this.option.init_record===false)return;t._setHiddenValue(t.option.init_record);if(typeof t.option.source=="object"){var i=new Array;var n=t.option.init_record.split(",");e.each(n,function(e,n){for(var r=0;r<t.option.source.length;r++){if(t.option.source[r][t.option.primary_key]==n){i.push(t.option.source[r]);break}}});if(!t.option.multiple&&i.length>1)i=null;t._afterInit(t,i)}else{var r=t.option.params;var o={};var a={field:t.option.field,order_by:t.option.order_by,pkey_name:t.option.primary_key,pkey_value:t.option.init_record};if(r){var s=e.isFunction(r)?r():r;if(s&&e.isPlainObject(s)){o=e.extend({},a,s)}else{o=a}}else{o=a}e.ajax({dataType:"json",url:t.option.source,data:o,success:function(i){if(typeof i.list==="undefined"||!e.isArray(i.list)){if(typeof i.rows==="undefined"||!e.isArray(i.rows)){t.prop.xhr=null;t._notFoundSearch(t);return}else{i.list=i.rows}}if(typeof i.total==="undefined"){i.total=i.list.length}t._afterInit(t,i.list)},error:function(e,i,n){t._ajaxErrorNotify(t,n)}})}},_afterInit:function(t,i){if(!i)return;if(!e.isArray(i))i=[i];if(t.option.multiple){e(t.elem.combo_input).val("");e.each(i,function(e,i){var n={text:i[t.option.field],value:i[t.option.primary_key]};if(!t._isAlreadySelected(t,n))t._addNewTag(t,n)});t._tagValuesSet(t);t._inputResize(t)}else{var n=i[0];e(t.elem.combo_input).val(n[t.option.field]);t._setHiddenValue(n[t.option.primary_key]);t.prop.prev_value=n[t.option.field];if(t.option.select_only){e(t.elem.combo_input).attr("title",t.message.select_ok).removeClass(t.css_class.select_ng).addClass(t.css_class.select_ok)}}},_ehButton:function(){var t=this;e(t.elem.button).mouseup(function(i){if(e(t.elem.result_area).is(":hidden")&&!e(t.elem.combo_input).prop("disabled")){e(t.elem.combo_input).focus()}else{t._hideResults(t)}i.stopPropagation()}).mouseover(function(){e(t.elem.button).addClass(t.css_class.btn_on).removeClass(t.css_class.btn_out)}).mouseout(function(){e(t.elem.button).addClass(t.css_class.btn_out).removeClass(t.css_class.btn_on)}).mouseout()},_ehComboInput:function(){var t=this;e(t.elem.combo_input).keyup(function(e){t._processKey(t,e)}).keydown(function(i){if(i.keyCode===8&&t.option.multiple&&e(t.elem.combo_input).val()==""){e(t.elem.combo_input).parent().prev().find(".tag_close").trigger("click")}}).focus(function(i){if(e(t.elem.result_area).is(":hidden")){i.stopPropagation();t.elem.navi.addClass("hide");t.prop.first_show=true;t.prop.page_move=false;t.prop.is_suggest=false;t._suggest(t)}}).click(function(){t._setCssFocusedInput(t)}).blur(function(){e(t.elem.hidden).trigger("blur")});if(t.option.multiple){e(t.elem.element_box).click(function(i){var n=i.target||i.srcElement;if(e(n).is("ul"))e(t.elem.combo_input).focus()});e(t.elem.element_box).on("click","span.tag_close",function(){var i=e(this).closest("li");var n=e(i).attr("itemvalue");var r=e(t.elem.hidden).val();if(e.type(n)!="undefined"&&r){var o=e.isArray(r)?r:r?r.split(","):new Array;var a=e.inArray(n.toString(),o);if(a!=-1){o.splice(a,1);t._setHiddenValue(o.toString())}}e(i).remove();t._inputResize(t);e("li[pkey='"+n+"']",t.elem.results).removeClass(t.css_class.selected)});t._inputResize(t)}},_setHiddenValue:function(t){var i=this;if(e(i.elem.hidden).is("select")){e(i.elem.hidden).empty();t=e.isArray(t)?t:e(i.elem.hidden).prop("multiple")?(t+"").split(","):t;e.each(t,function(t,n){e(i.elem.hidden).append(e("<option />").prop("selected",true).val(n).text(n))})}else{t=e.isArray(t)?t.join(","):t;e(i.elem.hidden).val(t)}},_ehWhole:function(){var i=this;e(i.elem.container).mousedown(function(){var i=e("div.sp_container").index(this);var n=e(document.body).data(t.objStatusIndex);if(n!=undefined&&i!=n){e(document.body).data(t.objStatusKey,false)}else{e(document.body).data(t.objStatusKey,true)}e(document.body).data(t.objStatusIndex,i)});e(document).off("mousedown.selectPage").on("mousedown.selectPage",function(i){if(e(document.body).data(t.objStatusKey))e(document.body).data(t.objStatusKey,false);else{var n=function(t){e(t.elem.combo_input).val("");if(!t.option.multiple)e(t.elem.hidden).val("")};e("div.sp_container").each(function(){var i=e(this).data(t.dataKey);if(e(this).hasClass(i.css_class.container_open)){if(!e(i.elem.combo_input).val()&&e(i.elem.hidden).val()&&!i.option.multiple){i.prop.page_all=1;n(i);i._hideResults(i);return true}if(e("li",e(i.elem.results)).size()>0){if(i.option.auto_fill_result){if(e("li.sp_selected",e(i.elem.results)).size()>0){i._hideResults(i)}else if(e("li.sp_over",e(i.elem.results)).size()>0){if(e(i.elem.hidden).val())i._hideResults(i);else i._selectCurrentLine(i,true)}else if(i.option.auto_select_first){if(e(i.elem.hidden).val())i._hideResults(i);else{i._nextLine(i);i._selectCurrentLine(i,true)}}else{i._hideResults(i)}}else i._hideResults(i)}else{if(i.option.no_result_clean)n(i);else{if(!i.option.multiple)e(i.elem.hidden).val("")}i._hideResults(i)}}})}})},_ehResults:function(){var t=this;e(t.elem.results).children("li").mouseover(function(){if(t.prop.key_select){t.prop.key_select=false;return}e(t.elem.results).children("li").removeClass(t.css_class.select);e(this).addClass(t.css_class.select);t._setCssFocusedResults(t)}).click(function(e){if(t.prop.key_select){t.prop.key_select=false;return}e.preventDefault();e.stopPropagation();t._selectCurrentLine(t,false)})},_ehNaviPaging:function(t){e("li.csFirstPage",e(t.elem.navi)).off("click").on("click",function(i){e(t.elem.combo_input).focus();i.preventDefault();t._firstPage(t)});e("li.csPreviousPage",e(t.elem.navi)).off("click").on("click",function(i){e(t.elem.combo_input).focus();i.preventDefault();t._prevPage(t)});e("li.csNextPage",e(t.elem.navi)).off("click").on("click",function(i){e(t.elem.combo_input).focus();i.preventDefault();t._nextPage(t)});e("li.csLastPage",e(t.elem.navi)).off("click").on("click",function(i){e(t.elem.combo_input).focus();i.preventDefault();t._lastPage(t)})},_ajaxErrorNotify:function(e,t){console.log(e.message.ajax_error)},_scrollWindow:function(t,i){var n=t._getCurrentLine(t);var r=n&&!i?n.offset().top:e(t.elem.container).offset().top;var o;t.prop.size_li=e(t.elem.results).children("li:first").outerHeight();o=t.prop.size_li;var a=e(window).height();var s=e(window).scrollTop();var l=s+a-o;var d;if(e(n).length){if(r<s||o>a){d=r-s}else if(r>l){d=r-l}else{return}}else if(r<s)d=r-s;window.scrollBy(0,d)},_setCssFocusedInput:function(t){e(t.elem.results).addClass(t.css_class.re_off);e(t.elem.combo_input).removeClass(t.css_class.input_off)},_setCssFocusedResults:function(t){e(t.elem.results).removeClass(t.css_class.re_off);e(t.elem.combo_input).addClass(t.css_class.input_off)},_checkValue:function(t){var i=e(t.elem.combo_input).val();if(i!=t.prop.prev_value){t.prop.prev_value=i;t.prop.first_show=false;if(t.option.select_only)t._setButtonAttrDefault();t.prop.page_suggest=1;t.prop.is_suggest=true;t._suggest(t)}},_processKey:function(t,i){if(e.inArray(i.keyCode,[27,38,40,9])>-1&&e(t.elem.result_area).is(":visible")||e.inArray(i.keyCode,[37,39,13,9])>-1&&t._getCurrentLine(t)||i.keyCode==40){i.preventDefault();i.stopPropagation();i.cancelBubble=true;i.returnValue=false;switch(i.keyCode){case 37:if(i.shiftKey)t._firstPage(t);else t._prevPage(t);break;case 38:t.prop.key_select=true;t._prevLine(t);break;case 39:if(i.shiftKey)t._lastPage(t);else t._nextPage(t);break;case 40:if(e(t.elem.results).children("li").length){t.prop.key_select=true;t._nextLine(t)}else{t.prop.is_suggest=false;t._suggest(t)}break;case 9:t.prop.key_paging=true;t._selectCurrentLine(t,true);break;case 13:t._selectCurrentLine(t,true);break;case 27:t.prop.key_paging=true;t._hideResults(t);break}}else{if(i.keyCode!=16)t._setCssFocusedInput(t);t._inputResize(t);t._checkValue(t)}},_abortAjax:function(e){if(e.prop.xhr){e.prop.xhr.abort();e.prop.xhr=false}},_suggest:function(t){var i;i=t.prop.first_show?"":e.trim(e(t.elem.combo_input).val());i=i.split(/[\s]+/);t._abortAjax(t);t._setLoading(t);if(t.prop.is_paging){var n=t._getCurrentLine(t);t.prop.is_paging=n?e(t.elem.results).children("li").index(n):-1}else if(!t.prop.is_suggest){t.prop.is_paging=0}var r=t.prop.page_all;if(typeof t.option.source=="object")t._searchForJson(t,i,r);else t._searchForDb(t,i,r)},_setLoading:function(t){e(t.elem.navi_info).text(t.message.loading);if(e(t.elem.results).html()===""){e(t.elem.navi).children("p").empty();t._calcWidthResults(t);e(t.elem.container).addClass(t.css_class.container_open)}},_searchForDb:function(t,i,n){var r=t.option.params;var o={};var a=t.option.search_field;var s={q_word:i,page:n,per_page:t.option.per_page,and_or:t.option.and_or,order_by:t.option.order_by,field:t.option.field,pkey_name:t.option.primary_key,search_field:a};s[a]=i[0];if(r){var l=e.isFunction(r)?r():r;if(l&&e.isPlainObject(l)){o=e.extend({},s,l)}else{o=s}}else{o=s}t.prop.xhr=e.ajax({dataType:"json",url:t.option.source,data:o,success:function(r){if(typeof r.list==="undefined"||!e.isArray(r.list)){if(typeof r.rows==="undefined"||!e.isArray(r.rows)){t.prop.xhr=null;t._notFoundSearch(t);return}else{r.list=r.rows}}if(typeof r.total==="undefined"){r.total=r.list.length}var o={};o.originalResult=r.list;o.cnt_whole=r.total;o.candidate=[];o.primary_key=[];o.cnt_page=o.originalResult.length;for(var a=0;a<o.cnt_page;a++){for(var s in o.originalResult[a]){if(s==t.option.primary_key){o.primary_key.push(o.originalResult[a][s])}if(s==t.option.field){o.candidate.push(o.originalResult[a][s])}}}t._prepareResults(t,o,i,n)},error:function(e,i,n){if(i!="abort"){t._hideResults(t);t._ajaxErrorNotify(t,n)}},complete:function(){t.prop.xhr=null}})},_searchForJson:function(t,i,n){var r=[];var o=[];var a=[];var s={};var l=0;var d=[];do{o[l]=i[l].replace(/\W/g,"\\$&").toString();d[l]=new RegExp(o[l],"gi");l++}while(l<i.length);for(l=0;l<t.option.source.length;l++){var c=false;var u=t.option.source[l];for(var f=0;f<d.length;f++){var h=u[t.option.field];if(t.option.format_item&&e.isFunction(t.option.format_item))h=t.option.format_item(u);if(h.match(d[f])){c=true;if(t.option.and_or=="OR")break}else{c=false;if(t.option.and_or=="AND")break}}if(c)r.push(u)}if(r.length===undefined){t._notFoundSearch(t);return}s.cnt_whole=r.length;var p=new RegExp("^"+o[0]+"$","gi");var m=new RegExp("^"+o[0],"gi");var g=[];var v=[];var y=[];for(l=0;l<r.length;l++){if(r[l][t.option.order_by[0][0]].match(p)){g.push(r[l])}else if(r[l][t.option.order_by[0][0]].match(m)){v.push(r[l])}else{y.push(r[l])}}if(t.option.order_by[0][1].match(/^asc$/i)){g=t._sortAsc(t,g);v=t._sortAsc(t,v);y=t._sortAsc(t,y)}else{g=t._sortDesc(t,g);v=t._sortDesc(t,v);y=t._sortDesc(t,y)}a=a.concat(g).concat(v).concat(y);if(!t.prop.page_move){if(!t.option.multiple){var b=e(t.elem.hidden).val();if(typeof b!="undefined"&&e.trim(b)!=""){var w=0;e.each(a,function(e,i){if(i[t.option.primary_key]==b){w=e+1;return false}});n=Math.ceil(w/t.option.per_page);if(n<1)n=1;t.prop.page_all=n}}}else{if(a.length<=(n-1)*t.option.per_page){n=1;t.prop.page_all=1}}var x=(n-1)*t.option.per_page;var C=x+t.option.per_page;s.originalResult=[];for(l=x;l<C;l++){if(a[l]===undefined)break;s.originalResult.push(a[l]);for(var _ in a[l]){if(_==t.option.primary_key){if(s.primary_key===undefined)s.primary_key=[];s.primary_key.push(a[l][_])}if(_==t.option.field){if(s.candidate===undefined)s.candidate=[];s.candidate.push(a[l][_])}}}if(s.candidate===undefined)s.candidate=[];s.cnt_page=s.candidate.length;t._prepareResults(t,s,i,n)},_sortAsc:function(e,t){t.sort(function(t,i){return t[e.option.order_by[0][0]].localeCompare(i[e.option.order_by[0][0]])});return t},_sortDesc:function(e,t){t.sort(function(t,i){return i[e.option.order_by[0][0]].localeCompare(t[e.option.order_by[0][0]])});return t},_notFoundSearch:function(t){e(t.elem.navi_info).text(t.message.not_found);e(t.elem.navi_p).hide();e(t.elem.results).empty();t._calcWidthResults(t);e(t.elem.container).addClass(t.css_class.container_open);t._setCssFocusedInput(t)},_prepareResults:function(t,i,n,r){t._setNavi(t,i.cnt_whole,i.cnt_page,r);if(!i.primary_key)i.primary_key=false;if(t.option.select_only&&i.candidate.length===1&&i.candidate[0]==n[0]){t._setHiddenValue(i.primary_key[0]);this._setButtonAttrDefault()}var o=false;if(n&&n.length>0&&n[0])o=true;t._displayResults(t,i,o);if(t.prop.is_paging===false)t._setCssFocusedInput(t);else{if(!t.option.multiple){var a=e("li.sp_selected",e(t.elem.results));if(e(a).size()==0){var s=t.prop.is_paging;var l=e(t.elem.results).children("li").length-1;if(s>l)s=l;var d=e(t.elem.results).children("li").eq(s);e(d).addClass(t.css_class.select)}else e(a).addClass(t.css_class.select)}t.prop.is_paging=false;t._setCssFocusedResults(t)}},_setNavi:function(t,i,n,r){var o=function(t,i,n,r){if(e("li",e(i)).size()==0){e(i).empty();var o="",a=true;e.each(document.styleSheets,function(e,t){if(t&&t.href&&t.href.indexOf("font-awesome-3.2.1")!=-1){a=false;return false}});var s="fa fa-step-backward",l="fa fa-backward",d="fa fa-forward",c="fa fa-step-forward";if(!a){s="icon-step-backward";l="icon-backward";d="icon-forward";c="icon-step-forward"}if(n==1)o=" disabled ";e(i).append('<li class="csFirstPage'+o+'" title="'+t.message.first_title+'" ><a href="javascript:void(0);"> <i class="'+s+'"></i> </a></li>');e(i).append('<li class="csPreviousPage'+o+'" title="'+t.message.prev_title+'" ><a href="javascript:void(0);"><i class="'+l+'"></i></a></li>');var u=" "+n+" ("+r+")";e(i).append('<li class="disabled pageInfoBox"><a href="javascript:void(0);"> '+u+" </a></li>");if(n==r)o=" disabled ";else o="";e(i).append('<li class="csNextPage'+o+'" title="'+t.message.next_title+'" ><a href="javascript:void(0);"><i class="'+d+'"></i></a></li>');e(i).append('<li class="csLastPage'+o+'" title="'+t.message.last_title+'" ><a href="javascript:void(0);"> <i class="'+c+'"></i> </a></li>')}};var a=e(t.elem.navi);a.toggleClass("hide",i<t.option.per_page);var s=Math.ceil(i/t.option.per_page);if(s==0)r=0;else{if(r==0)r=1}o(t,a,r,s);var l=e("li.pageInfoBox",e(a));var d=" "+r+" ("+s+")";e(l).html('<a href="javascript:void(0);"> '+d+" </a>");var c="disabled";var u=e("li.csFirstPage",e(a));var f=e("li.csPreviousPage",e(a));var h=e("li.csNextPage",e(a));var p=e("li.csLastPage",e(a));if(r==1||r==0){if(!e(u).hasClass(c))e(u).addClass(c);if(!e(f).hasClass(c))e(f).addClass(c)}else{if(e(u).hasClass(c))e(u).removeClass(c);if(e(f).hasClass(c))e(f).removeClass(c)}if(r==s||s==0){if(!e(h).hasClass(c))e(h).addClass(c);if(!e(p).hasClass(c))e(p).addClass(c)}else{if(e(h).hasClass(c))e(h).removeClass(c);if(e(p).hasClass(c))e(p).removeClass(c)}if(s>1){if(t.prop.is_suggest)t.prop.max_suggest=s;else t.prop.max_all=s;t._ehNaviPaging(t)}else{}},_displayResults:function(t,i,n){e(t.elem.results).empty();var r=i.candidate;var o=i.primary_key;var a=e(t.elem.hidden).val();var s=e.isArray(a)?a:a?s=a.split(","):new Array;for(var l=0;l<r.length;l++){var d="";if(t.option.format_item&&e.isFunction(t.option.format_item)){try{d=t.option.format_item(i.originalResult[l])}catch(e){console.error("formatItem");d=r[l]}}else d=r[l];var c=e("<li>").html(d).attr({pkey:o[l],pvalue:r[l],title:d});if(typeof o[l]!=="undefined"&&e.inArray(o[l].toString(),s)!=-1){e(c).addClass(t.css_class.selected)}e(c).data("dataObj",i.originalResult[l]);e(t.elem.results).append(c)}t._calcWidthResults(t);e(t.elem.container).addClass(t.css_class.container_open);t._ehResults();if(n&&r.length>0&&t.option.auto_select_first)t._nextLine(t);e(t.elem.button).attr("title",t.message.close_btn)},_calcWidthResults:function(t){e(t.elem.result_area).show(1,function(){if(e(t.elem.container).css("position")=="static"){var i=e(t.elem.combo_input).offset();e(t.elem.result_area).css({top:i.top+e(t.elem.combo_input).outerHeight()+"px",left:i.left+"px"})}else{var n=document.body.clientWidth;var r=document.body.clientHeight;var i=e(t.elem.container).offset();var o=e(t.elem.result_area).outerWidth();var a=e(t.elem.result_area).outerHeight();var s=t.option.multiple?-1:0;var l=i.left+o>n?-(o-e(t.elem.container).outerWidth()):s;var d=i.top-e(window).scrollTop();var c=0;if(d+e(t.elem.container).outerHeight()+a>r){c=-(a+1);e(t.elem.result_area).removeClass("shadowUp shadowDown").addClass("shadowUp")}else{c=t.option.multiple?e(t.elem.container).innerHeight()+1:e(t.elem.container).outerHeight();e(t.elem.result_area).removeClass("shadowUp shadowDown").addClass("shadowDown")}e(t.elem.result_area).css({top:c+"px",left:l+"px"})}})},_hideResults:function(t){if(t.prop.key_paging){t._scrollWindow(t,true);t.prop.key_paging=false}t._setCssFocusedInput(t);if(t.option.auto_fill_result){}e(t.elem.results).empty();e(t.elem.result_area).hide();e(t.elem.container).removeClass(t.css_class.container_open);t._abortAjax(t);t._setButtonAttrDefault()},_firstPage:function(e){if(e.prop.page_all>1){e.prop.page_all=1;e.prop.is_paging=true;e.prop.page_move=true;e._suggest(e)}},_prevPage:function(e){if(e.prop.page_all>1){e.prop.page_all--;e.prop.is_paging=true;e.prop.page_move=true;e._suggest(e)}},_nextPage:function(e){if(e.prop.page_all<e.prop.max_all){e.prop.page_all++;e.prop.is_paging=true;e.prop.page_move=true;e._suggest(e)}},_lastPage:function(e){if(e.prop.page_all<e.prop.max_all){e.prop.page_all=e.prop.max_all;e.prop.is_paging=true;e.prop.page_move=true;e._suggest(e)}},_goPage:function(e,t){if(typeof t=="undefined")t=1;if(e.prop.page_all<e.prop.max_all){e.prop.page_all=t;e.prop.is_paging=true;e.prop.page_move=true;e._suggest(e)}},_selectCurrentLine:function(t,i){t._scrollWindow(t,true);var n=t._getCurrentLine(t);if(n){var r=e(n).attr("pkey");var o=t.option.format_fill?e(n).text():e(n).attr("pvalue");if(!t.option.multiple){e(t.elem.combo_input).val(o);t._setHiddenValue(r)}else{e(t.elem.combo_input).val("");var a={text:o,value:r};if(!t._isAlreadySelected(t,a)){t._addNewTag(t,a);t._tagValuesSet(t)}}if(t.option.select_only)t._setButtonAttrDefault();e(t.elem.hidden).trigger("change");if(typeof t.option.callback==="function"){t.option.callback.call(t,e(n).data("dataObj"))}if(t.option.bind_to){e(t.elem.combo_input).trigger(t.option.bind_to,e(n).data("dataObj"))}t.prop.prev_value=e(t.elem.combo_input).val();t._hideResults(t)}e(t.elem.combo_input).trigger("change");e(t.elem.combo_input).trigger("blur");t._setCssFocusedInput(t);t._inputResize(t)},_getCurrentLine:function(t){if(e(t.elem.result_area).is(":hidden"))return false;var i=e(t.elem.results).children("li."+t.css_class.select);if(e(i).length)return i;else return false},_isAlreadySelected:function(t,i){var n=false;if(i.value){var r=e(t.elem.hidden).val();if(r){var o=e.isArray(r)?r:r?r.split(","):new Array;if(o&&o.length>0&&e.inArray(i.value,o)!=-1)n=true}}return n},_addNewTag:function(t,i){if(!t.option.multiple||!i)return;var n=t.template.tag.content;n=n.replace(t.template.tag.textKey,i.text);n=n.replace(t.template.tag.valueKey,i.value);e(t.elem.combo_input).closest("li").before(e(n))},_tagValuesSet:function(t){if(!t.option.multiple)return;var i=e("li.selected_tag",e(t.elem.element_box));if(i&&e(i).size()>0){var n=new Array;e.each(i,function(t,i){var r=e(i).attr("itemvalue");if(e.type(r)!="undefined")n.push(r)});if(n.length>0){t._setHiddenValue(n)}}},_inputResize:function(t){if(!t.option.multiple)return;var i="";var n=t.elem.combo_input.closest("li");var r=function(e,t){t.removeClass("full_width");var i=e.elem.combo_input.val().length+1;var n=i*.75+"em";e.elem.combo_input.css("width",n);e.elem.combo_input.removeAttr("placeholder")};if(e("li.selected_tag",e(t.elem.element_box)).size()==0){if(t.elem.combo_input.attr("placeholder_bak")){if(!n.hasClass("full_width"))n.addClass("full_width");t.elem.combo_input.attr("placeholder",t.elem.combo_input.attr("placeholder_bak"))}else r(t,n)}else r(t,n)},_nextLine:function(t){var i=t._getCurrentLine(t);var n;if(!i)n=-1;else{n=e(t.elem.results).children("li").index(i);e(i).removeClass(t.css_class.select)}n++;if(n<e(t.elem.results).children("li").length){var r=e(t.elem.results).children("li").eq(n);e(r).addClass(t.css_class.select);t._setCssFocusedResults(t)}else t._setCssFocusedInput(t);t._scrollWindow(t,false)},_prevLine:function(t){var i=t._getCurrentLine(t);var n;if(!i)n=e(t.elem.results).children("li").length;else{n=e(t.elem.results).children("li").index(i);e(i).removeClass(t.css_class.select)}n--;if(n>-1){var r=e(t.elem.results).children("li").eq(n);e(r).addClass(t.css_class.select);t._setCssFocusedResults(t)}else t._setCssFocusedInput(t);t._scrollWindow(t,false)}});return i});